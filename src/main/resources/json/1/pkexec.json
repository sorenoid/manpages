{"name":"pkexec","body":"\n\n<h1 align=\"center\">PKEXEC</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">pkexec -\nExecute a command as another user</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\"><b>pkexec</b> [<b>--version</b>]\n[<b>--disable-internal-agent</b>] [<b>--help</b>]</p></td>\n<td width=\"6%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\"><b>pkexec</b>\n[<b>--user&nbsp;</b><i>username</i>] <i>PROGRAM</i>\n[<i>ARGUMENTS</i>...]</p> </td>\n<td width=\"6%\">\n</td></tr>\n</table>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>pkexec</b>\nallows an authorized user to execute <i>PROGRAM</i> as\nanother user. If <i>username</i> is not specified, then the\nprogram will be executed as the administrative super user,\n<i>root</i>.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Upon successful\ncompletion, the return value is the return value of\n<i>PROGRAM</i>. If the calling process is not authorized or\nan authorization could not be obtained through\nauthentication or an error occured, <b>pkexec</b> exits with\na return value of 127. If the authorization could not be\nobtained because the user dismissed the authentication\ndialog, <b>pkexec</b> exits with a return value of 126.</p>\n\n<h2>AUTHENTICATION AGENT\n<a name=\"AUTHENTICATION AGENT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>pkexec</b>,\nlike any other PolicyKit application, will use the\nauthentication agent registered for the calling process.\nHowever, if no authentication agent is available, then\n<b>pkexec</b> will register its own textual authentication\nagent. This behavior can be turned off by passing the\n<b>--disable-internal-agent</b> option.</p>\n\n<h2>SECURITY NOTES\n<a name=\"SECURITY NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Executing a\nprogram as another user is a privileged operation. By\ndefault the required authorization (See the section called\n&ldquo;REQUIRED AUTHORIZATIONS&rdquo;) requires\nadministrator authentication. In addition, the\nauthentication dialog presented to the user will display the\nfull path to the program to be executed so the user is aware\nof what will happen:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[IMAGE]\n<small>[1]</small></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\">+----------------------------------------------------------+\n<br>\n| Authenticate [X] | <br>\n\n+----------------------------------------------------------+\n<br>\n| | <br>\n| [Icon] Authentication is needed to run &rsquo;/bin/bash' |\n<br>\n| as the super user | <br>\n| | <br>\n| An application is attempting to perform an | <br>\n| action that requires privileges. Authentication | <br>\n| as the super user is required to perform this | <br>\n| action. | <br>\n| | <br>\n| Password for root: [_________________________] | <br>\n| | <br>\n| [V] Details: | <br>\n| Command: /bin/bash | <br>\n| Run As: Super User (root) | <br>\n| Action: org.freedesktop.policykit.exec | <br>\n| Vendor: The PolicyKit Project | <br>\n| | <br>\n| [Cancel] [Authenticate] | <br>\n\n+----------------------------------------------------------+</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The environment\nthat <i>PROGRAM</i> will run it, will be set to a minimal\nknown and safe environment in order to avoid injecting code\nthrough LD_LIBRARY_PATH or similar mechanisms. In addition\nthe PKEXEC_UID environment variable is set to the user id of\nthe process invoking <b>pkexec</b>. As a result,\n<b>pkexec</b> will not allow you to run X11 applications as\nanother user since the $DISPLAY and $XAUTHORITY environment\nvariables are not set. These two variables will be retained\nif the <i>org.freedesktop.policykit.exec.allow_gui</i>\nannotation on an action is set to a nonempty value; this is\ndiscouraged, though, and should only be used for legacy\nprograms.</p>\n\n<h2>REQUIRED AUTHORIZATIONS\n<a name=\"REQUIRED AUTHORIZATIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">By default, the\n<i>org.freedesktop.policykit.exec</i> authorization is\nrequired unless an action definition file is present for the\nprogram in question. To require another authorization, it\ncan be specified using the\n<i>org.freedesktop.policykit.exec.path</i> annotation on an\naction (See the section called &ldquo;EXAMPLE&rdquo; for\ndetails).</p>\n\n<h2>EXAMPLE\n<a name=\"EXAMPLE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">To specify what\nkind of authorization is needed to execute the program\n/usr/bin/pk-example-frobnicate as another user, simply write\nan action definition file like this</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&lt;?xml\nversion=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; <br>\n&lt;!DOCTYPE policyconfig PUBLIC <br>\n&quot;-//freedesktop//DTD PolicyKit Policy Configuration\n1.0//EN&quot; <br>\n\n&quot;http://www.freedesktop.org/standards/PolicyKit/1/policyconfig.dtd&quot;&gt;\n<br>\n&lt;policyconfig&gt;</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">&lt;vendor&gt;Examples\nfor the PolicyKit Project&lt;/vendor&gt; <br>\n\n&lt;vendor_url&gt;http://hal.freedesktop.org/docs/PolicyKit/&lt;/vendor_url&gt;</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&lt;action\nid=&quot;org.freedesktop.policykit.example.pkexec.run-frobnicate&quot;&gt;\n<br>\n&lt;description&gt;Run the PolicyKit example program\nFrobnicate&lt;/description&gt; <br>\n&lt;description xml:lang=&quot;da&quot;&gt;K&Atilde;&cedil;r\nPolicyKit eksemplet Frobnicate&lt;/description&gt; <br>\n&lt;message&gt;Authentication is required to run the\nPolicyKit example program Frobnicate (user=$(user),\nprogram=$(program),\ncommand_line=$(command_line))&lt;/message&gt; <br>\n&lt;message xml:lang=&quot;da&quot;&gt;Autorisering er\np&Atilde;&yen;kr&Atilde;&brvbar;vet for at afvikle PolicyKit\neksemplet Frobnicate (user=$(user), program=$(program),\ncommand_line=$(command_line))&lt;/message&gt; <br>\n&lt;icon_name&gt;audio-x-generic&lt;/icon_name&gt; <br>\n&lt;defaults&gt; <br>\n&lt;allow_any&gt;no&lt;/allow_any&gt; <br>\n&lt;allow_inactive&gt;no&lt;/allow_inactive&gt; <br>\n&lt;allow_active&gt;auth_self_keep&lt;/allow_active&gt; <br>\n&lt;/defaults&gt; <br>\n&lt;annotate\nkey=&quot;org.freedesktop.policykit.exec.path&quot;&gt;/usr/bin/pk-example-frobnicate&lt;/annotate&gt;\n<br>\n&lt;/action&gt;</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">&lt;/policyconfig&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">and drop it in\nthe /usr/share/polkit-1/actions directory under a suitable\nname (e.g. matching the namespace of the action). Note that\nin addition to specifying the program, the authentication\nmessage, description, icon and defaults can be specified.\nNote that occurences of the strings $(user), $(program) and\n$(command_line) in the message will be replaced with\nrespectively the user (of the form &quot;Real Name\n(username)&quot; or just &quot;username&quot; if there is no\nreal name for the username), the binary to execute (a\nfully-qualified path, e.g.\n&quot;/usr/bin/pk-example-frobnicate&quot;) and the\ncommand-line, e.g. &quot;pk-example-frobnicate foo\nbar&quot;. For example, for the action defined above, the\nfollowing authentication dialog will be shown:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[IMAGE]\n<small>[2]</small></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\">+----------------------------------------------------------+\n<br>\n| Authenticate [X] | <br>\n\n+----------------------------------------------------------+\n<br>\n| | <br>\n| [Icon] Authentication is required to run the PolicyKit |\n<br>\n| example program Frobnicate | <br>\n| | <br>\n| An application is attempting to perform an | <br>\n| action that requires privileges. Authentication | <br>\n| is required to perform this action. | <br>\n| | <br>\n| Password: [__________________________________] | <br>\n| | <br>\n| [V] Details: | <br>\n| Command: /usr/bin/pk-example-frobnicate | <br>\n| Run As: Super User (root) | <br>\n| Action: org.fd.pk.example.pkexec.run-frobnicate | <br>\n| Vendor: Examples for the PolicyKit Project | <br>\n| | <br>\n| [Cancel] [Authenticate] | <br>\n\n+----------------------------------------------------------+</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the user is\nusing the da_DK locale, the dialog looks like this:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[IMAGE]\n<small>[3]</small></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\">+----------------------------------------------------------+\n<br>\n| Autorisering [X] | <br>\n\n+----------------------------------------------------------+\n<br>\n| | <br>\n| [Icon] Autorisering er p&Atilde;&yen;kr&Atilde;&brvbar;vet\nfor at afvikle | <br>\n| PolicyKit eksemplet Frobnicate | <br>\n| | <br>\n| Et program fors&Atilde;&cedil;ger at udf&Atilde;&cedil;re\nen handling der | <br>\n| kr&Atilde;&brvbar;ver privilegier. Autorisering er\np&Atilde;&yen;kr&Atilde;&brvbar;vet. | <br>\n| | <br>\n| Kodeord: [___________________________________] | <br>\n| | <br>\n| [V] Detaljer: | <br>\n| Bruger: Super User (root) | <br>\n| Program: /usr/bin/pk-example-frobnicate | <br>\n| Handling: org.fd.pk.example.pkexec.run-frobnicate | <br>\n| Vendor: Examples for the PolicyKit Project | <br>\n| | <br>\n| [Annull&Atilde;&copy;r] [Autorisering] | <br>\n\n+----------------------------------------------------------+</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\n<b>pkexec</b> does no validation of the <i>ARGUMENTS</i>\npassed to <i>PROGRAM</i>. In the normal case (where\nadministrator authentication is required every time\n<b>pkexec</b> is used), this is not a problem since if the\nuser is an administrator he might as well just run <b>pkexec\nbash</b> to get root.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">However, if an\naction is used for which the user can retain authorization\n(or if the user is implicitly authorized), such as with\npk-example-frobnicate above, this could be a security hole.\nTherefore, as a rule of thumb, programs for which the\ndefault required authorization is changed, should never\nimplicitly trust user input (e.g. like any other\nwell-written <i>suid</i> program).</p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Written by\nDavid Zeuthen &lt;davidz@redhat.com&gt; with a lot of help\nfrom many others.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Please send bug\nreports to either the distribution or the polkit-devel\nmailing list, see the link\n<b><font color=\"#0000FF\">http://lists.freedesktop.org/mailman/listinfo/polkit-devel</font></b>\n<font color=\"#000000\">on how to subscribe.</font></p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>polkit</b>(8),\n<a href=\"https://man.page/1/pkaction\">pkaction(1)</a>, <a href=\"https://man.page/1/pkcheck\">pkcheck(1)</a>,\n<a href=\"https://man.page/1/pkttyagent\">pkttyagent(1)</a></font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"83%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">/usr/share/gtk-doc/html/polkit-1/pkexec-bash.png</font></p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n<p><font color=\"#000000\">2.</font></p></td>\n<td width=\"2%\"></td>\n<td width=\"83%\">\n\n\n\n<p><font color=\"#000000\">/usr/share/gtk-doc/html/polkit-1/pkexec-frobnicate.png</font></p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n<p><font color=\"#000000\">3.</font></p></td>\n<td width=\"2%\"></td>\n<td width=\"83%\">\n\n\n\n<p><font color=\"#000000\">/usr/share/gtk-doc/html/polkit-1/pkexec-frobnicate-da.png</font></p> </td></tr>\n </table>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#AUTHENTICATION AGENT\">AUTHENTICATION AGENT</a>","<a href=\"#SECURITY NOTES\">SECURITY NOTES</a>","<a href=\"#REQUIRED AUTHORIZATIONS\">REQUIRED AUTHORIZATIONS</a>","<a href=\"#EXAMPLE\">EXAMPLE</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#NOTES\">NOTES</a>"]}