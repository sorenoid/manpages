{"name":"apt-transport-mirr","description":"apt-transport-mirror - APT transport for more automated mirror selection","body":"\n\n<h1 align=\"center\">APT-TRANSPORT-MIRR</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">apt-transport-mirror\n- APT transport for more automated mirror selection</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This APT\ntransport isn't implementing a protocol to access local or\nremote repositories on its own, but acquires a mirrorlist\nand redirects all requests to the mirror(s) picked from this\nlist, accessing them via other transports like\n<a href=\"https://man.page/1/apt-transport-http\">apt-transport-http(1)</a>. The basic functionality has\nbeen available since apt 0.7.24, but was undocumented until\napt 1.6 which contained a complete rework of the transport\nand its supported features. Note that a transport is never\ncalled directly by a user but used by APT tools based on\nuser configuration.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\nacquisition of a file via a mirror fails, the method ensures\nthat another possible mirror from the list is automatically\ntried until either the file is retrieved or no mirror is\nleft in the list, transparently handling server downtimes\nand similar problems.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The security\nimplications of the transport depend on the security\nconsiderations associated with the transport used to acquire\nthe mirrorlist and the transports involved in accessing the\nchosen mirror(s) by the transport.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This transport\nhas no configuration options at present. The mirror\nselection is based entirely on the mirrors offered in the\nmirrorlist and the files APT needs to acquire.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Mirrorlist\nformat</b> <br>\nA mirrorlist contains one or more lines each specifying a\nURI for a mirror. Empty lines and those starting with a hash\ncharacter (#) are ignored. A URI always starts with a URI\nscheme which defines the transport used for this mirror. If\nfor example the URI starts with http:, the responsible\ntransport is <a href=\"https://man.page/1/apt-transport-http\">apt-transport-http(1)</a> which might have\nspecific requirements for the format of the remaining part\nof the URI.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Metadata about\na mirror can be given on the same line, separated from the\nURI by a tab. Multiple items of metadata can themselves be\nseparated by either tabs or spaces. (This is an advanced\nfeature only available with apt &gt;= 1.6. Earlier apt\nversions will fail to parse mirrorlists using this\nfeature.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Since apt 1.6\nthe use of compressed mirrorlists is also supported. Note\nthat the filename of the mirrorlist must specify the\ncompression algorithm used; there is no auto-detection based\non file contents.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Mirror\nselection by metadata</b> <br>\nAs specified in the format, a mirror can have additional\nmetadata attached to prevent a mirror from being selected\nfor acquiring a file not matching this metadata. This way\nthe mirrorlist can e.g. contain partial mirrors serving only\ncertain architectures and APT will automatically choose a\ndifferent mirror for files requiring an unlisted\narchitecture. Supported are limits for the architecture\n(arch), codename of the release (codename), component of the\nrepository the file is in (component), language the file\napplies to (lang), suite name of the release (suite) and\ntype of the file (type).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Fallback\norder for mirrors</b> <br>\nIf no priority is given for a mirror via the metadata key\npriority, the order in which mirrors are contacted is\nrandom. If a certain set of mirrors should be tried first\nbefore any of another set is tried, a priority can be\nexplicitly set. The mirrors with the lowest number are tried\nfirst. Mirrors which have no explicit priority set default\nto the highest possible number and are therefore tried last.\nThe choice between mirrors with the same priority is again\nrandom.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Allowed\ntransports in a mirrorlist</b> <br>\nThe availability and choice of transports in a mirrorlist is\nlimited by how the APT client is accessing the mirrorlist.\nIf a local transport like file or copy is used, the\nmirrorlist can also include local sources, while a\nmirrorlist accessed via http can not. Additionally, a\nmirrorlist can not contain a mirrorlist or other wrapping\ntransports (like apt-transport-tor). See the documentation\nof these transports on how to use them with the mirror\nmethod.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that apt\nversions before 1.6 do not support any other transport than\nhttp.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Basic\nexample</b> <br>\nA basic mirrorlist example supported by all apt versions\nwith a mirror method (&gt;= 0.7.24) in which the client will\npick any of the three mirrors:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">http://ftp.de.debian.org/debian/\n<br>\nhttp://ftp.us.debian.org/debian/ <br>\nhttp://deb.debian.org/debian/</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Assuming a file\nwith this content is stored as /etc/apt/mirrorlist.txt on\nyour machine it can be used like this in\n<b>sources.list</b>(5) (since apt 1.6):</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">deb\nmirror+file:/etc/apt/mirrorlist.txt bullseye main</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">All versions of\nthe mirror method support a mirrorlist accessible via HTTP,\nso assuming it is available at\nhttp://apt.example.org/mirror.lst the sources.list entry\nfrom above could instead be written as:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">deb\nmirror://apt.example.org/mirror.lst bullseye main</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that since\napt 1.6 the use of mirror+http should be preferred over\nmirror for uniformity. The functionality is the same.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example with\nmetadata-enhanced mirror selection</b> <br>\nAs explained in the format definition apt versions before\n1.6 do not support this and will fail parsing the\nmirrorlist. The example mirrorlist is intentionally\ncomplicated to show some aspects of the selection. The\nfollowing setup is assumed: The first mirror is a local\nmirror accessible via the file method, but potentially\nincomplete. The second mirror has a great connection, but is\na partial mirror insofar as it only contains files related\nto the architectures amd64 and all. The remaining mirrors\nare average mirrors which should be contacted only if the\nearlier ones didn't work.</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">file:/srv/local/debian/mirror/\npriority:1 type:index</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"-9%\">\n\n\n<p>http://partial.example.org/mirror/</p></td>\n<td width=\"46%\"></td>\n<td width=\"8%\"></td>\n<td width=\"38%\">\n\n\n<p>priority:2 arch:amd64 arch:all type:deb</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"-9%\">\n\n\n<p>http://ftp.us.debian.org/debian/</p></td>\n<td width=\"46%\"></td>\n<td width=\"8%\"></td>\n<td width=\"38%\">\n\n\n<p>type:deb</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"-9%\">\n\n\n<p>http://ftp.de.debian.org/debian/</p></td>\n<td width=\"46%\"></td>\n<td width=\"8%\"></td>\n<td width=\"38%\">\n\n\n<p>type:deb</p></td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\">https://deb.debian.org/debian/</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In this setup\nwith this mirrorlist the first mirror will be used to\ndownload all index files assuming the mirrorlist itself is\naccessed via a local transport like file. If it isn't, if\nthe mirror is otherwise inaccessible or if it does not\ncontain the requested file another mirror will be used to\nacquire the file, chosen depending on the type of the file:\nAn index file will be served by the last mirror in the list,\nwhile a package of architecture amd64 is served by the\nsecond and those of e.g. architecture i386 by one of the\nlast three.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b><font color=\"#0000FF\">APT\nbug page</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n<font color=\"#000000\">. If you wish to report a bug in APT,\nplease see /usr/share/doc/debian/bug-reporting.txt or the\n<a href=\"https://man.page/1/reportbug\">reportbug(1)</a> command.</font></p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>APT\nteam</b></font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"18%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">APT bug\npage</font></p> </td>\n<td width=\"65%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">http://bugs.debian.org/src:apt</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#NOTES\">NOTES</a>"]}