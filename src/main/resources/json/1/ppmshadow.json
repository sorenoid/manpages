{"name":"ppmshadow","description":"ppmshadow - add simulated shadows to a portable pixmap image","body":"\n\n<h1 align=\"center\">ppmshadow</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ppmshadow - add\nsimulated shadows to a portable pixmap image</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ppmshadow</b>\n[<b>-b</b> <i>blur_size</i>] [<b>-k</b>] [<b>-t</b>]\n[<b>-x</b> <i>xoffset</i>] [<b>-y</b> <i>yoffset</i>]\n[<b>-u</b>] [<i>pnmfile</i>]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ppmshadow</b>\nadds a simulated shadow to an image, giving the appearance\nthat the contents of the image float above the page, casting\na diffuse shadow on the background. Shadows can either be\nblack, as cast by opaque objects, or translucent, where the\nshadow takes on the colour of the object which casts it. You\ncan specify the extent of the shadow and its displacement\nfrom the image with command line options.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-b</b>\n<i>blur_size</i></p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Sets the\ndistance of the light source from the image. Larger values\nmove the light source closer, casting a more diffuse shadow,\nwhile smaller settings move the light further away, yielding\na sharper shadow. <i>blur_size</i> defaults to 11\npixels.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>-k</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"78%\">\n\n\n<p>Keep the intermediate temporary image files. When\ndebugging, these intermediate files provide many clues as to\nthe source of an error. See <b>FILES</b> below for a list of\nthe contents of each file.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>-t</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"78%\">\n\n\n<p>Consider the non-background material in the image\ntranslucent -- it casts shadows of its own colour rather\nthan a black shadow, which is default. This often results in\nfuzzy, difficult-to-read images but in some circumstances\nmay look better.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>-u</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"78%\">\n\n\n<p>Print command syntax and a summary of options.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>-x</b> <i>xoffset</i></p>\n\n<p style=\"margin-left:22%;\">Specifies the displacement of\nthe light source to the left of the image. Larger settings\nof <b>xoffset</b> displace the shadow to the right, as would\nbe cast by a light further to the left. If not specified,\nthe horizontal offset is half of <i>blur_size</i> (above),\nto the left.</p>\n\n<p style=\"margin-left:11%;\"><b>-y</b> <i>yoffset</i></p>\n\n<p style=\"margin-left:22%;\">Specifies the displacement of\nthe light source above the top of the image. Larger settings\ndisplace the shadow downward, corresponding to moving the\nlight further above the top of the image. If you don&rsquo;t\nspecify <b>-y</b>, the vertical offset defaults to the same\nas the horizontal offset (above), upward.</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Input is an\nanymap named by the <i>pnmfile</i> command line argument; if\nyou don&rsquo;t specify <i>pnmfile</i>, the input is the\nStandard Input file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Output is a\nalways a PPM file, written to Standard Output.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>pnmfile</b>\ncreates a number of temporary files as it executes. It\ncreates them in the /tmp directory, with names of the\nform:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>_PPMshadow</b><i>pid</i><b>-</b><i>N</i><b>.ppm</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">where\n<i>pid</i> is the process number of the <b>ppmshadow</b>\nprocess and <i>N</i> is a number identifying the file as\ndescribed below. In normal operation, <b>ppmshadow</b>\ndeletes temporary files as soon as it is done with them and\nleaves no debris around after it completes. To preserve the\nintermediate files for debugging, use the <b>-k</b> command\nline option.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>N</i> in the\nfilename means:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>1</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Positive binary mask</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>2</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Convolution kernel for blurring shadow</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>3</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Blurred shadow image</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>4</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Clipped shadow image, offset as requested</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>5</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Blank image with background of source image</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>6</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Offset shadow</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>7</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Inverse mask file</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>8</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Original image times inverse mask</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>9</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Generated shadow times positive mask</p></td>\n<td width=\"12%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>10</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"66%\">\n\n\n<p>Shadow times background colour</p></td>\n<td width=\"12%\">\n</td></tr>\n</table>\n\n<h2>LIMITATIONS\n<a name=\"LIMITATIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The source\nimage must contain sufficient space on the edges in the\ndirection in which the shadow is cast to contain the shadow\n-- if it doesn&rsquo;t some of the internal steps may fail.\nYou can usually expand the border of a too-tightly-cropped\nimage with <b>pnmmargin</b> before processing it with\n<b>ppmshadow</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Black pixels\nand pixels with the same color as the image background\ndon&rsquo;t cast a shadow. If this causes unintentional\n&quot;holes&quot; in the shadow, fill the offending areas\nwith a color which differs from black or the background by\nRGB values of 1, which will be imperceptible to the viewer.\nSince the comparison is exact, the modified areas will now\ncast shadows.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The background\ncolor of the source image (which is preserved in the output)\nis deemed to be the color of the pixel at the top left of\nthe input image. If that pixel isn&rsquo;t part of the\nbackground, simply add a one-pixel border at the top of the\nimage, generate the shadow image, then delete the border\nfrom it.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If something\ngoes wrong along the way, the error messages from the\nvarious Netpbm programs <b>ppmshadow</b> calls will, in\ngeneral, provide little or no clue as to where\n<b>ppmshadow</b> went astray. In this case, Specify the\n<b>-k</b> option and examine the intermediate results in the\ntemporary files (which this option causes to be preserved).\nIf you manually run the commands that <b>ppmshadow</b> runs\non these files, you can figure out where the problem is. In\nproblem cases where you want to manually tweak the image\ngeneration process along the way, you can keep the\nintermediate files with the <b>-k</b> option, modify them\nappropriately with an image editor, then recombine them with\nthe steps used by the code in <b>ppmshadow</b>. See the\n<b>ppmshadow.doc</b> document for additional details and\nexamples of the intermediate files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Shadows are by\ndefault black, as cast by opaque material in the image\noccluding white light. Use the <b>-t</b> option to simulate\ntranslucent material, where the shadow takes on the colour\nof the object that casts it. If the contrast between the\nimage and background is insufficient, the <b>-t</b> option\nmay yield unattractive results which resemble simple\nblurring of the original image.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Because Netpbm\nused to have a maximum maxval of 255, which meant that the\nlargest convolution kernel <b>pnmconvol</b> could use was 11\nby 11, <b>ppmshadow</b> includes a horrid, CPU-time-burning\nkludge which, if a blur of greater than 11 is requested,\nperforms an initial convolution with an 11&Atilde;11 kernel,\nthen calls <b>pnmsmooth</b> (which is actually a script that\ncalls pnmconvol with a 3&Atilde;3 kernel) as many times as\nthe requested blur exceeds 11. It&rsquo;s ugly, but it gets\nthe job done on those rare occasions where you need a blur\ngreater than 11.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you wish to\ngenerate an image at high resolution, then scale it to\npublication size with <b>pnmscale</b> in order to eliminate\njagged edges by resampling, it&rsquo;s best to generate the\nshadow in the original high resolution image, prior to\nscaling it down in size. If you scale first and then add the\nshadow, you&rsquo;ll get an unsightly jagged stripe between\nthe edge of material and its shadow, due to resampled pixels\nintermediate between the image and background obscuring the\nshadow.</p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ppmshadow</b>\nreturns status 0 if processing was completed without errors,\nand a nonzero Unix error code if an error prevented\ngeneration of output. Some errors may result in the script\naborting, usually displaying error messages from various\nNetpbm components it uses, without returning a nonzero error\ncode. When this happens, the output file will be empty, so\nbe sure to test this if you need to know if the program\nsucceeded.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/5/pnm\">pnm(5)</a>,\n<a href=\"https://man.page/1/pnmmargin\">pnmmargin(1)</a>, <a href=\"https://man.page/1/pnmconvol\">pnmconvol(1)</a>,\n<a href=\"https://man.page/1/pnmscale\">pnmscale(1)</a>, <a href=\"https://man.page/1/pnmsmooth\">pnmsmooth(1)</a>, <a href=\"https://man.page/5/ppm\">ppm(5)</a></p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">John Walker\n&lt;http://www.fourmilab.ch&gt; August 8, 1997</p>\n\n<h2>COPYRIGHT\n<a name=\"COPYRIGHT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This software\nis in the public domain. Permission to use, copy, modify,\nand distribute this software and its documentation for any\npurpose and without fee is hereby granted, without any\nconditions or restrictions.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#LIMITATIONS\">LIMITATIONS</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#COPYRIGHT\">COPYRIGHT</a>"]}