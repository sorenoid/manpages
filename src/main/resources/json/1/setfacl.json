{"name":"setfacl","body":"\n\n<h1 align=\"center\">SETFACL</h1>\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">setfacl - set\nfile access control lists</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>setfacl</b>\n[-bkndRLPvh] [{-m|-x} acl_spec] [{-M|-X} acl_file] file\n...</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>setfacl</b>\n--restore={file|-}</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This utility\nsets Access Control Lists (ACLs) of files and directories.\nOn the command line, a sequence of commands is followed by a\nsequence of files (which in turn can be followed by another\nsequence of commands, ...).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <i>-m</i>\nand <i>-x</i> options expect an ACL on the command line.\nMultiple ACL entries are separated by comma characters\n(&rsquo;,&rsquo;). The <i>-M</i> and <i>-X</i> options read\nan ACL from a file or from standard input. The ACL entry\nformat is described in Section ACL ENTRIES.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>--set</i> and <i>--set-file</i> options set the ACL of a\nfile or a directory. The previous ACL is replaced. ACL\nentries for this operation must include permissions.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <i>-m\n(--modify)</i> and <i>-M (--modify-file)</i> options modify\nthe ACL of a file or directory. ACL entries for this\noperation must include permissions.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <i>-x\n(--remove)</i> and <i>-X (--remove-file)</i> options remove\nACL entries. It is not an error to remove an entry which\ndoes not exist. Only ACL entries without the <i>perms</i>\nfield are accepted as parameters, unless POSIXLY_CORRECT is\ndefined.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When reading\nfrom files using the <i>-M</i> and <i>-X</i> options,\nsetfacl accepts the output getfacl produces. There is at\nmost one ACL entry per line. After a Pound sign\n(&rsquo;#&rsquo;), everything up to the end of the line is\ntreated as a comment.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If setfacl is\nused on a file system which does not support ACLs, setfacl\noperates on the file mode permission bits. If the ACL does\nnot fit completely in the permission bits, setfacl modifies\nthe file mode permission bits to reflect the ACL as closely\nas possible, writes an error message to standard error, and\nreturns with an exit status greater than 0.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>PERMISSIONS</b>\n<br>\nThe file owner and processes capable of CAP_FOWNER are\ngranted the right to modify ACLs of a file. This is\nanalogous to the permissions required for accessing the file\nmode. (On current Linux systems, root is the only user with\nthe CAP_FOWNER capability.)</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>-b,\n--remove-all</i></p>\n\n<p style=\"margin-left:17%;\">Remove all extended ACL\nentries. The base ACL entries of the owner, group and others\nare retained.</p>\n\n<p style=\"margin-left:11%;\"><i>-k, --remove-default</i></p>\n\n<p style=\"margin-left:17%;\">Remove the Default ACL. If no\nDefault ACL exists, no warnings are issued.</p>\n\n<p style=\"margin-left:11%;\"><i>-n, --no-mask</i></p>\n\n<p style=\"margin-left:17%;\">Do not recalculate the\neffective rights mask. The default behavior of setfacl is to\nrecalculate the ACL mask entry, unless a mask entry was\nexplicitly given. The mask entry is set to the union of all\npermissions of the owning group, and all named user and\ngroup entries. (These are exactly the entries affected by\nthe mask entry).</p>\n\n<p style=\"margin-left:11%;\"><i>--mask</i></p>\n\n<p style=\"margin-left:17%;\">Do recalculate the effective\nrights mask, even if an ACL mask entry was explicitly given.\n(See the <i>-n</i> option.)</p>\n\n<p style=\"margin-left:11%;\"><i>-d, --default</i></p>\n\n<p style=\"margin-left:17%;\">All operations apply to the\nDefault ACL. Regular ACL entries in the input set are\npromoted to Default ACL entries. Default ACL entries in the\ninput set are discarded. (A warning is issued if that\nhappens).</p>\n\n<p style=\"margin-left:11%;\"><i>--restore={file|-}</i></p>\n\n<p style=\"margin-left:17%;\">Restore a permission backup\ncreated by &rsquo;getfacl -R&rsquo; or similar. All\npermissions of a complete directory subtree are restored\nusing this mechanism. If the input contains owner comments\nor group comments, setfacl attempts to restore the owner and\nowning group. If the input contains flags comments (which\ndefine the setuid, setgid, and sticky bits), setfacl sets\nthose three bits accordingly; otherwise, it clears them.\nThis option cannot be mixed with other options except\n&rsquo;--test&rsquo;. If the file specified is\n&rsquo;<b>-</b>&rsquo;, then it will be read from standard\ninput.</p>\n\n<p style=\"margin-left:11%;\"><i>--test</i></p>\n\n<p style=\"margin-left:17%;\">Test mode. Instead of changing\nthe ACLs of any files, the resulting ACLs are listed.</p>\n\n<p style=\"margin-left:11%;\"><i>-R, --recursive</i></p>\n\n<p style=\"margin-left:17%;\">Apply operations to all files\nand directories recursively. This option cannot be mixed\nwith &rsquo;--restore&rsquo;.</p>\n\n<p style=\"margin-left:11%;\"><i>-L, --logical</i></p>\n\n<p style=\"margin-left:17%;\">Logical walk, follow symbolic\nlinks to directories. The default behavior is to follow\nsymbolic link arguments, and skip symbolic links encountered\nin subdirectories. Only effective in combination with -R.\nThis option cannot be mixed with\n&rsquo;--restore&rsquo;.</p>\n\n<p style=\"margin-left:11%;\"><i>-P, --physical</i></p>\n\n<p style=\"margin-left:17%;\">Physical walk, do not follow\nsymbolic links to directories. This also skips symbolic link\narguments. Only effective in combination with -R. This\noption cannot be mixed with &rsquo;--restore&rsquo;.</p>\n\n<p style=\"margin-left:11%;\"><i>-v, --version</i></p>\n\n<p style=\"margin-left:17%;\">Print the version of setfacl\nand exit.</p>\n\n<p style=\"margin-left:11%;\"><i>-h, --help</i></p>\n\n<p style=\"margin-left:17%;\">Print help explaining the\ncommand line options.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><i>--</i></p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>End of command line options. All remaining parameters\nare interpreted as file names, even if they start with a\ndash.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><i>-</i></p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>If the file name parameter is a single dash, setfacl\nreads a list of files from standard input.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ACL\nENTRIES</b> <br>\nThe setfacl utility recognizes the following ACL entry\nformats (blanks inserted for clarity): <br>\n[d[efault]:] [u[ser]:]<i>uid</i> [:<i>perms</i>]</p>\n\n<p style=\"margin-left:22%;\">Permissions of a named user.\nPermissions of the file owner if <i>uid</i> is empty.</p>\n\n<p style=\"margin-left:11%;\">[d[efault]:] g[roup]:<i>gid</i>\n[:<i>perms</i>]</p>\n\n<p style=\"margin-left:22%;\">Permissions of a named group.\nPermissions of the owning group if <i>gid</i> is empty.</p>\n\n<p style=\"margin-left:11%;\">[d[efault]:] m[ask][:]\n[:<i>perms</i>]</p>\n\n<p style=\"margin-left:22%;\">Effective rights mask</p>\n\n<p style=\"margin-left:11%;\">[d[efault]:] o[ther][:]\n[:<i>perms</i>]</p>\n\n<p style=\"margin-left:22%;\">Permissions of others.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Whitespace\nbetween delimiter characters and non-delimiter characters is\nignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Proper ACL\nentries including permissions are used in modify and set\noperations. (options <i>-m</i>, <i>-M</i>, <i>--set</i> and\n<i>--set-file</i>). Entries without the <i>perms</i> field\nare used for <i>deletion</i> of entries (options <i>-x</i>\nand <i>-X</i>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For <i>uid</i>\nand <i>gid</i> you can specify either a name or a number.\nCharacter literals may be specified with a backslash\nfollowed by the 3-digit octal digits corresponding to the\nASCII code for the character (e.g., <i>\\101</i> for\n&rsquo;A&rsquo;). If the name contains a literal backslash\nfollowed by 3 digits, the backslash must be escaped (i.e.,\n<i>\\\\</i>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>perms</i> field is a combination of characters that\nindicate the read <i>(r)</i>, write <i>(w)</i>, execute\n<i>(x)</i> permissions. Dash characters in the <i>perms</i>\nfield <i>(-)</i> are ignored. The character <i>X</i> stands\nfor the execute permission if the file is a directory or\nalready has execute permission for some user. Alternatively,\nthe <i>perms</i> field can define the permissions\nnumerically, as a bit-wise combination of read <i>(4)</i>,\nwrite <i>(2)</i>, and execute <i>(1)</i>. Zero <i>perms</i>\nfields or <i>perms</i> fields that only consist of dashes\nindicate no permissions.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>AUTOMATICALLY\nCREATED ENTRIES</b> <br>\nInitially, files and directories contain only the three base\nACL entries for the owner, the group, and others. There are\nsome rules that need to be satisfied in order for an ACL to\nbe valid:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>The three base entries cannot be removed. There must be\nexactly one entry of each of these base entry types.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Whenever an ACL contains named user entries or named\ngroup objects, it must also contain an effective rights\nmask.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Whenever an ACL contains any Default ACL entries, the\nthree Default ACL base entries (default owner, default\ngroup, and default others) must also exist.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Whenever a Default ACL contains named user entries or\nnamed group objects, it must also contain a default\neffective rights mask.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">To help the\nuser ensure these rules, setfacl creates entries from\nexisting entries under the following conditions:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">If an ACL contains named user or\nnamed group entries, and no mask entry exists, a mask entry\ncontaining the same permissions as the group entry is\ncreated. Unless the <i>-n</i> option is given, the\npermissions of the mask entry are further adjusted to\ninclude the union of all permissions affected by the mask\nentry. (See the <i>-n</i> option description).</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>If a Default ACL entry is created, and the Default ACL\ncontains no owner, owning group, or others entry, a copy of\nthe ACL owner, owning group, or others entry is added to the\nDefault ACL.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>If a Default ACL contains named user entries or named\ngroup entries, and no mask entry exists, a mask entry\ncontaining the same permissions as the default Default\nACL&rsquo;s group entry is added. Unless the <i>-n</i>\noption is given, the permissions of the mask entry are\nfurther adjusted to include the union of all permissions\naffected by the mask entry. (See the <i>-n</i> option\ndescription).</p> </td></tr>\n</table>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Granting an\nadditional user read access</p>\n\n<p style=\"margin-left:22%;\">setfacl -m u:lisa:r file</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Revoking write\naccess from all groups and all named users (using the\neffective rights mask)</p>\n\n<p style=\"margin-left:22%;\">setfacl -m m::rx file</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Removing a\nnamed group entry from a file&rsquo;s ACL</p>\n\n<p style=\"margin-left:22%;\">setfacl -x g:staff file</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copying the ACL\nof one file to another</p>\n\n<p style=\"margin-left:22%;\">getfacl file1 | setfacl\n--set-file=- file2</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copying the\naccess ACL into the Default ACL</p>\n\n<p style=\"margin-left:22%;\">getfacl --access dir | setfacl\n-d -M- dir</p>\n\n<h2>CONFORMANCE TO POSIX 1003.1e DRAFT STANDARD 17\n<a name=\"CONFORMANCE TO POSIX 1003.1e DRAFT STANDARD 17\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\nenvironment variable POSIXLY_CORRECT is defined, the default\nbehavior of setfacl changes as follows: All non-standard\noptions are disabled. The\n&rsquo;&rsquo;default:&rsquo;&rsquo; prefix is disabled. The\n<i>-x</i> and <i>-X</i> options also accept permission\nfields (and ignore them).</p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Andreas\nGruenbacher,\n&lt;<i>andreas.gruenbacher@gmail.com</i>&gt;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Please send\nyour bug reports, suggested features and comments to the\nabove address.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/getfacl\">getfacl(1)</a>,\n<a href=\"https://man.page/1/chmod\">chmod(1)</a>, <a href=\"https://man.page/1/umask\">umask(1)</a>, <a href=\"https://man.page/5/acl\">acl(5)</a></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#CONFORMANCE TO POSIX 1003.1e DRAFT STANDARD 17\">CONFORMANCE TO POSIX 1003.1e DRAFT STANDARD 17</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"]}