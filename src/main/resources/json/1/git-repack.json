{"name":"git-repack","body":"\n\n<h1 align=\"center\">GIT-REPACK</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">git-repack -\nPack unpacked objects in a repository</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>git\nrepack</i> [-a] [-A] [-d] [-f] [-F] [-l] [-n] [-q] [-b] [-m]\n[--window=&lt;n&gt;] [--depth=&lt;n&gt;]\n[--threads=&lt;n&gt;] [--keep-pack=&lt;pack-name&gt;]\n[--write-midx]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This command is\nused to combine all objects that do not currently reside in\na &quot;pack&quot;, into a pack. It can also be used to\nre-organize existing packs into a single, more efficient\npack.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A pack is a\ncollection of objects, individually compressed, with delta\ncompression applied, stored in a single file, with an\nassociated index file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Packs are used\nto reduce the load on mirror systems, backup engines, disk\nstorage, etc.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">-a</p>\n\n<p style=\"margin-left:17%;\">Instead of incrementally\npacking the unpacked objects, pack everything referenced\ninto a single pack. Especially useful when packing a\nrepository that is used for private development. Use with\n<b>-d</b>. This will clean up the objects that <b>git\nprune</b> leaves behind, but <b>git fsck --full\n--dangling</b> shows as dangling.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Note that users\nfetching over dumb protocols will have to fetch the whole\nnew pack in order to get any contained object, no matter how\nmany other objects in that pack they already have\nlocally.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Promisor\npackfiles are repacked separately: if there are packfiles\nthat have an associated &quot;.promisor&quot; file, these\npackfiles will be repacked into another separate pack, and\nan empty &quot;.promisor&quot; file corresponding to the new\nseparate pack will be written.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-A</p>\n\n<p style=\"margin-left:17%;\">Same as <b>-a</b>, unless\n<b>-d</b> is used. Then any unreachable objects in a\nprevious pack become loose, unpacked objects, instead of\nbeing left in the old pack. Unreachable objects are never\nintentionally added to a pack, even when repacking. This\noption prevents unreachable objects from being immediately\ndeleted by way of being left in the old pack and then\nremoved. Instead, the loose unreachable objects will be\npruned according to normal expiry rules with the next <i>git\ngc</i> invocation. See <a href=\"https://man.page/1/git-gc\">git-gc(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-d</p>\n\n<p style=\"margin-left:17%;\">After packing, if the newly\ncreated packs make some existing packs redundant, remove the\nredundant packs. Also run <i>git prune-packed</i> to remove\nredundant loose object files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-l</p>\n\n<p style=\"margin-left:17%;\">Pass the <b>--local</b> option\nto <i>git pack-objects</i>. See\n<a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-f</p>\n\n<p style=\"margin-left:17%;\">Pass the\n<b>--no-reuse-delta</b> option to <b>git-pack-objects</b>,\nsee <a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-F</p>\n\n<p style=\"margin-left:17%;\">Pass the\n<b>--no-reuse-object</b> option to <b>git-pack-objects</b>,\nsee <a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-q</p>\n\n<p style=\"margin-left:17%;\">Pass the <b>-q</b> option to\n<i>git pack-objects</i>. See <a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-n</p>\n\n<p style=\"margin-left:17%;\">Do not update the server\ninformation with <i>git update-server-info</i>. This option\nskips updating local catalog files needed to publish this\nrepository (or a direct copy of it) over HTTP or FTP. See\n<a href=\"https://man.page/1/git-update-server-info\">git-update-server-info(1)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--window=&lt;n&gt;,\n--depth=&lt;n&gt;</p>\n\n<p style=\"margin-left:17%;\">These two options affect how\nthe objects contained in the pack are stored using delta\ncompression. The objects are first internally sorted by\ntype, size and optionally names and compared against the\nother objects within <b>--window</b> to see if using delta\ncompression saves space. <b>--depth</b> limits the maximum\ndelta depth; making it too deep affects the performance on\nthe unpacker side, because delta data needs to be applied\nthat many times to get to the necessary object.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The default\nvalue for --window is 10 and --depth is 50. The maximum\ndepth is 4095.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--threads=&lt;n&gt;</p>\n\n<p style=\"margin-left:17%;\">This option is passed through\nto <b>git pack-objects</b>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--window-memory=&lt;n&gt;</p>\n\n<p style=\"margin-left:17%;\">This option provides an\nadditional limit on top of <b>--window</b>; the window size\nwill dynamically scale down so as to not take up more than\n<i>&lt;n&gt;</i> bytes in memory. This is useful in\nrepositories with a mix of large and small objects to not\nrun out of memory with a large window, but still be able to\ntake advantage of the large window for the smaller objects.\nThe size can be suffixed with &quot;k&quot;, &quot;m&quot;,\nor &quot;g&quot;. <b>--window-memory=0</b> makes memory\nusage unlimited. The default is taken from the\n<b>pack.windowMemory</b> configuration variable. Note that\nthe actual memory usage will be the limit multiplied by the\nnumber of threads used by <a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--max-pack-size=&lt;n&gt;</p>\n\n<p style=\"margin-left:17%;\">Maximum size of each output\npack file. The size can be suffixed with &quot;k&quot;,\n&quot;m&quot;, or &quot;g&quot;. The minimum size allowed is\nlimited to 1 MiB. If specified, multiple packfiles may be\ncreated, which also prevents the creation of a bitmap index.\nThe default is unlimited, unless the config variable\n<b>pack.packSizeLimit</b> is set. Note that this option may\nresult in a larger and slower repository; see the discussion\nin <b>pack.packSizeLimit</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-b,\n--write-bitmap-index</p>\n\n<p style=\"margin-left:17%;\">Write a reachability bitmap\nindex as part of the repack. This only makes sense when used\nwith <b>-a</b>, <b>-A</b> or <b>-m</b>, as the bitmaps must\nbe able to refer to all reachable objects. This option\noverrides the setting of <b>repack.writeBitmaps</b>. This\noption has no effect if multiple packfiles are created,\nunless writing a MIDX (in which case a multi-pack bitmap is\ncreated).</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--pack-kept-objects</p>\n\n<p style=\"margin-left:17%;\">Include objects in <b>.keep</b>\nfiles when repacking. Note that we still do not delete\n<b>.keep</b> packs after <b>pack-objects</b> finishes. This\nmeans that we may duplicate objects, but this makes the\noption safe to use when there are concurrent pushes or\nfetches. This option is generally only useful if you are\nwriting bitmaps with <b>-b</b> or\n<b>repack.writeBitmaps</b>, as it ensures that the bitmapped\npackfile has the necessary objects.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--keep-pack=&lt;pack-name&gt;</p>\n\n<p style=\"margin-left:17%;\">Exclude the given pack from\nrepacking. This is the equivalent of having <b>.keep</b>\nfile on the pack. <b>&lt;pack-name&gt;</b> is the pack file\nname without leading directory (e.g. <b>pack-123.pack</b>).\nThe option could be specified multiple times to keep\nmultiple packs.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">--unpack-unreachable=&lt;when&gt;</p>\n\n<p style=\"margin-left:17%;\">When loosening unreachable\nobjects, do not bother loosening any objects older than\n<b>&lt;when&gt;</b>. This can be used to optimize out the\nwrite of any objects that would be immediately pruned by a\nfollow-up <b>git prune</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-k,\n--keep-unreachable</p>\n\n<p style=\"margin-left:17%;\">When used with <b>-ad</b>, any\nunreachable objects from existing packs will be appended to\nthe end of the packfile instead of being removed. In\naddition, any unreachable loose objects will be packed (and\ntheir loose counterparts removed).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-i,\n--delta-islands</p>\n\n<p style=\"margin-left:17%;\">Pass the <b>--delta-islands</b>\noption to <b>git-pack-objects</b>, see\n<a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">-g=&lt;factor&gt;,\n--geometric=&lt;factor&gt;</p>\n\n<p style=\"margin-left:17%;\">Arrange resulting pack\nstructure so that each successive pack contains at least\n<b>&lt;factor&gt;</b> times the number of objects as the\nnext-largest pack.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\"><b>git\nrepack</b> ensures this by determining a &quot;cut&quot; of\npackfiles that need to be repacked into one in order to\nensure a geometric progression. It picks the smallest set of\npackfiles such that as many of the larger packfiles (by\ncount of objects contained in that pack) may be left\nintact.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Unlike other\nrepack modes, the set of objects to pack is determined\nuniquely by the set of packs being &quot;rolled-up&quot;; in\nother words, the packs determined to need to be combined in\norder to restore a geometric progression.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">When\n<b>--unpacked</b> is specified, loose objects are implicitly\nincluded in this &quot;roll-up&quot;, without respect to\ntheir reachability. This is subject to change in the future.\nThis option (implying a drastically different repack mode)\nis not guaranteed to work with all other combinations of\noption to <b>git repack</b>.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">When writing a\nmulti-pack bitmap, <b>git repack</b> selects the largest\nresulting pack as the preferred pack for object selection by\nthe MIDX (see <a href=\"https://man.page/1/git-multi-pack-index\">git-multi-pack-index(1)</a>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">-m,\n--write-midx</p>\n\n<p style=\"margin-left:17%;\">Write a multi-pack index (see\n<a href=\"https://man.page/1/git-multi-pack-index\">git-multi-pack-index(1)</a>) containing the non-redundant\npacks.</p>\n\n<h2>CONFIGURATION\n<a name=\"CONFIGURATION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Various\nconfiguration variables affect packing, see\n<a href=\"https://man.page/1/git-config\">git-config(1)</a> (search for &quot;pack&quot; and\n&quot;delta&quot;).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">By default, the\ncommand passes <b>--delta-base-offset</b> option to <i>git\npack-objects</i>; this typically results in slightly smaller\npacks, but the generated packs are incompatible with\nversions of Git older than version 1.4.4. If you need to\nshare your repository with such ancient Git versions, either\ndirectly or via the dumb http protocol, then you need to set\nthe configuration variable <b>repack.UseDeltaBaseOffset</b>\nto &quot;false&quot; and repack. Access from old Git\nversions over the native protocol is unaffected by this\noption as the conversion is performed on the fly as needed\nin that case.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Delta\ncompression is not used on objects larger than the\n<b>core.bigFileThreshold</b> configuration variable and on\nfiles with the attribute <b>delta</b> set to false.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/git-pack-objects\">git-pack-objects(1)</a>\n<a href=\"https://man.page/1/git-prune-packed\">git-prune-packed(1)</a></p>\n\n<h2>GIT\n<a name=\"GIT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Part of the\n<a href=\"https://man.page/1/git\">git(1)</a> suite</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#CONFIGURATION\">CONFIGURATION</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#GIT\">GIT</a>"]}