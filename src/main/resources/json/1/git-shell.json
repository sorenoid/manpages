{"name":"git-shell","description":"git-shell - Restricted login shell for Git-only SSH access","body":"\n\n<h1 align=\"center\">GIT-SHELL</h1>\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">git-shell -\nRestricted login shell for Git-only SSH access</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>chsh</i> -s\n$(command -v git-shell) &lt;user&gt; <i><br>\ngit clone</i>\n&lt;user&gt;<b>@localhost:/path/to/repo.git</b> <i><br>\nssh</i> &lt;user&gt;<b>@localhost</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This is a login\nshell for SSH accounts to provide restricted Git access. It\npermits execution only of server-side Git commands\nimplementing the pull/push functionality, plus custom\ncommands present in a subdirectory named\n<b>git-shell-commands</b> in the user&rsquo;s home\ndirectory.</p>\n\n<h2>COMMANDS\n<a name=\"COMMANDS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>git\nshell</i> accepts the following commands after the <b>-c</b>\noption:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>git\nreceive-pack &lt;argument&gt;</i>, <i>git upload-pack\n&lt;argument&gt;</i>, <i>git upload-archive\n&lt;argument&gt;</i></p>\n\n<p style=\"margin-left:17%;\">Call the corresponding\nserver-side command to support the client&rsquo;s <i>git\npush</i>, <i>git fetch</i>, or <i>git archive --remote</i>\nrequest.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>cvs\nserver</i></p>\n\n<p style=\"margin-left:17%;\">Imitate a CVS server. See\n<a href=\"https://man.page/1/git-cvsserver\">git-cvsserver(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If a\n<b>~/git-shell-commands</b> directory is present, <i>git\nshell</i> will also handle other, custom commands by running\n&quot;<b>git-shell-commands/&lt;command&gt;\n&lt;arguments&gt;</b>&quot; from the user&rsquo;s home\ndirectory.</p>\n\n<h2>INTERACTIVE USE\n<a name=\"INTERACTIVE USE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">By default, the\ncommands above can be executed only with the <b>-c</b>\noption; the shell is not interactive.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If a\n<b>~/git-shell-commands</b> directory is present, <i>git\nshell</i> can also be run interactively (with no arguments).\nIf a <b>help</b> command is present in the\n<b>git-shell-commands</b> directory, it is run to provide\nthe user with an overview of allowed actions. Then a\n&quot;git&gt; &quot; prompt is presented at which one can\nenter any of the commands from the <b>git-shell-commands</b>\ndirectory, or <b>exit</b> to close the connection.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Generally this\nmode is used as an administrative interface to allow users\nto list repositories they have access to, create, delete, or\nrename repositories, or change repository descriptions and\npermissions.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If a\n<b>no-interactive-login</b> command exists, then it is run\nand the interactive shell is aborted.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">To disable\ninteractive logins, displaying a greeting instead:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ chsh -s\n/usr/bin/git-shell <br>\n$ mkdir $HOME/git-shell-commands <br>\n$ cat &gt;$HOME/git-shell-commands/no-interactive-login\n&lt;&lt;\\EOF <br>\n#!/bin/sh <br>\nprintf '%s\\n' &quot;Hi $USER! You've successfully\nauthenticated, but I do not&quot; <br>\nprintf '%s\\n' &quot;provide interactive shell access.&quot;\n<br>\nexit 128 <br>\nEOF <br>\n$ chmod +x $HOME/git-shell-commands/no-interactive-login</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">To enable\ngit-cvsserver access (which should generally have the\n<b>no-interactive-login</b> example above as a prerequisite,\nas creating the git-shell-commands directory allows\ninteractive logins):</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ cat\n&gt;$HOME/git-shell-commands/cvs &lt;&lt;\\EOF <br>\nif ! test $# = 1 &amp;&amp; test &quot;$1&quot; =\n&quot;server&quot; <br>\nthen <br>\necho &gt;&amp;2 &quot;git-cvsserver only handles\n\\&quot;server\\&quot;&quot; <br>\nexit 1 <br>\nfi <br>\nexec git cvsserver server <br>\nEOF <br>\n$ chmod +x $HOME/git-shell-commands/cvs</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ssh(1),\n<a href=\"https://man.page/1/git-daemon\">git-daemon(1)</a>, contrib/git-shell-commands/README</p>\n\n<h2>GIT\n<a name=\"GIT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Part of the\n<a href=\"https://man.page/1/git\">git(1)</a> suite</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#COMMANDS\">COMMANDS</a>","<a href=\"#INTERACTIVE USE\">INTERACTIVE USE</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#GIT\">GIT</a>"]}