{"name":"dbus-launch","description":"dbus-launch - Utility to start a message bus from a shell script","body":"\n\n<h1 align=\"center\">DBUS-LAUNCH</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">dbus-launch -\nUtility to start a message bus from a shell script</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"89%\">\n\n\n<p style=\"margin-top: 1em\"><b>dbus-launch</b> [--version]\n[--help] [--sh-syntax] [--csh-syntax] [--auto-syntax]\n[--binary-syntax] [--close-stderr] [--exit-with-session]\n[--exit-with-x11] [--autolaunch=<i>MACHINEID</i>]\n[--config-file=<i>FILENAME</i>] [<i>PROGRAM</i>]\n[<i>ARGS</i>...]</p> </td></tr>\n</table>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>dbus-launch</b> command is used to start a session bus\ninstance of <i>dbus-daemon</i> from a shell script. It would\nnormally be called from a user's login scripts. Unlike the\ndaemon itself, <b>dbus-launch</b> exits, so backticks or the\n$() construct can be used to read information from\n<b>dbus-launch</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">With no\narguments, <b>dbus-launch</b> will launch a session bus\ninstance and print the address and PID of that instance to\nstandard output.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">You may specify\na program to be run; in this case, <b>dbus-launch</b> will\nlaunch a session bus instance, set the appropriate\nenvironment variables so the specified program can find the\nbus, and then execute the specified program, with the\nspecified arguments. See below for examples.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you launch a\nprogram, <b>dbus-launch</b> will not print the information\nabout the new bus to standard output.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When\n<b>dbus-launch</b> prints bus information to standard\noutput, by default it is in a simple key-value pairs format.\nHowever, you may request several alternate syntaxes using\nthe --sh-syntax, --csh-syntax, --binary-syntax, or\n--auto-syntax options. Several of these cause\n<b>dbus-launch</b> to emit shell code to set up the\nenvironment.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">With the\n--auto-syntax option, <b>dbus-launch</b> looks at the value\nof the SHELL environment variable to determine which shell\nsyntax should be used. If SHELL ends in &quot;csh&quot;,\nthen csh-compatible code is emitted; otherwise Bourne shell\ncode is emitted. Instead of passing --auto-syntax, you may\nexplicitly specify a particular one by using --sh-syntax for\nBourne syntax, or --csh-syntax for csh syntax. In scripts,\nit's more robust to avoid --auto-syntax and you hopefully\nknow which shell your script is written in.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">See\n<b><font color=\"#0000FF\">http://www.freedesktop.org/software/dbus/</font></b>\n<font color=\"#000000\">for more information about D-Bus. See\nalso the man page for <i>dbus-daemon</i>.</font></p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Distributions\nrunning <b>dbus-launch</b> as part of a standard X session\nshould run <b>dbus-launch --exit-with-session</b> after the\nX server has started and become available, as a wrapper\naround the &quot;main&quot; X client (typically a session\nmanager or window manager), as in these examples:</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>dbus-launch\n--exit-with-session gnome-session</b></font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>dbus-launch\n--exit-with-session openbox</b></font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>dbus-launch\n--exit-with-session ~/.xsession</b></font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">If\nyour distribution does not do this, you can achieve similar\nresults by running your session or window manager in the\nsame way in a script run by your X session, such as\n~/.xsession, ~/.xinitrc or ~/.Xclients.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">To\nstart a D-Bus session within a text-mode session, do not use\n<b>dbus-launch</b>. Instead, see\n<a href=\"https://man.page/1/dbus-run-session\">dbus-run-session(1)</a>.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">##\ntest for an existing bus daemon, just to be safe <br>\nif test -z &quot;$DBUS_SESSION_BUS_ADDRESS&quot; ; then <br>\n## if not found, launch a new one <br>\neval &rsquo;dbus-launch --sh-syntax&rsquo; <br>\necho &quot;D-Bus per-session daemon address is:\n$DBUS_SESSION_BUS_ADDRESS&quot; <br>\nfi</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Note\nthat in this case, dbus-launch will exit, and dbus-daemon\nwill not be terminated automatically on logout.</font></p>\n\n<h2>AUTOMATIC LAUNCHING\n<a name=\"AUTOMATIC LAUNCHING\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">If\nDBUS_SESSION_BUS_ADDRESS is not set for a process that tries\nto use D-Bus, by default the process will attempt to invoke\ndbus-launch with the --autolaunch option to start up a new\nsession bus or find the existing bus address on the X\ndisplay or in a file in ~/.dbus/session-bus/</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Whenever\nan autolaunch occurs, the application that had to start a\nnew bus will be in its own little world; it can effectively\nend up starting a whole new session if it tries to use a lot\nof bus services. This can be suboptimal or even totally\nbroken, depending on the app and what it tries to\ndo.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">There\nare two common reasons for autolaunch. One is ssh to a\nremote machine. The ideal fix for that would be forwarding\nof DBUS_SESSION_BUS_ADDRESS in the same way that DISPLAY is\nforwarded. In the meantime, you can edit the session.conf\nconfig file to have your session bus listen on TCP, and\nmanually set DBUS_SESSION_BUS_ADDRESS, if you\nlike.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nsecond common reason for autolaunch is an su to another\nuser, and display of X applications running as the second\nuser on the display belonging to the first user. Perhaps the\nideal fix in this case would be to allow the second user to\nconnect to the session bus of the first user, just as they\ncan connect to the first user's display. However, a\nmechanism for that has not been coded.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">You\ncan always avoid autolaunch by manually setting\nDBUS_SESSION_BUS_ADDRESS. Autolaunch happens because the\ndefault address if none is set is &quot;autolaunch:&quot;,\nso if any other address is set there will be no autolaunch.\nYou can however include autolaunch in an explicit session\nbus address as a fallback, for example\nDBUS_SESSION_BUS_ADDRESS=&quot;something:,autolaunch:&quot;\n- in that case if the first address doesn't work, processes\nwill autolaunch. (The bus address variable contains a\ncomma-separated list of addresses to try.)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n--autolaunch option is considered an internal implementation\ndetail of libdbus, and in fact there are plans to change it.\nThere's no real reason to use it outside of the libdbus\nimplementation anyhow.</font></p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nfollowing options are supported:</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--auto-syntax</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Choose\n--csh-syntax or --sh-syntax based on the SHELL environment\nvariable.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--binary-syntax</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Write to\nstdout a nul-terminated bus address, then the bus PID as a\nbinary integer of size sizeof(pid_t), then the bus X window\nID as a binary integer of size sizeof(long). Integers are in\nthe machine's byte order, not network byte order or any\nother canonical byte order.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--close-stderr</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Close the\nstandard error output stream before starting the D-Bus\ndaemon. This is useful if you want to capture dbus-launch\nerror messages but you don't want dbus-daemon to keep the\nstream open to your application.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--config-file=FILENAME</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Pass\n--config-file=FILENAME to the bus daemon, instead of passing\nit the --session argument. See the man page for\ndbus-daemon</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--csh-syntax</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Emit csh\ncompatible code to set up environment variables.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--exit-with-x11</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If this\noption is provided, a persistent &quot;babysitter&quot;\nprocess will be created, and will connect to the X server.\nIf it cannot do so, launching fails. If the\n&quot;babysitter&quot; process loses its X connection, it\nkills the message bus daemon, disconnecting all of its\nclients (which should exit in response). This avoids having\nleftover daemon processes from a user X session, after the X\nsession has ended.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--exit-with-session</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If this\noption is provided, a persistent &quot;babysitter&quot;\nprocess will be created, as if for --exit-with-x11. If it\ncannot connect to the X server, it will monitor the terminal\nfrom which dbus-launch was started instead, and if it gets a\nHUP on stdin, the message bus daemon will be killed. This\noption is not recommended, since it will consume input from\nthe terminal where it was started; it is mainly provided for\nbackwards compatibility.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--autolaunch=MACHINEID</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption implies that <b>dbus-launch</b> should scan for a\npreviously-started session and reuse the values found there.\nIf no session is found, it will start a new session. The\n--exit-with-session option is implied if --autolaunch is\ngiven. This option is for the exclusive use of libdbus, you\ndo not want to use it manually. It may change in the\nfuture.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--sh-syntax</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Emit\nBourne-shell compatible code to set up environment\nvariables.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--version</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Print the\nversion of dbus-launch</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--help</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Print the\nhelp info of dbus-launch</font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">If\nyou run <b>dbus-launch myapp</b> (with any other options),\ndbus-daemon will <i>not</i> exit when <b>myapp</b>\nterminates: this is because <b>myapp</b> is assumed to be\npart of a larger session, rather than a session in its own\nright.</font></p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">See</font>\n<b><font color=\"#0000FF\">http://www.freedesktop.org/software/dbus/doc/AUTHORS</font></b></p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Please\nsend bug reports to the D-Bus mailing list or bug tracker,\nsee</font>\n<b><font color=\"#0000FF\">http://www.freedesktop.org/software/dbus/</font></b></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#AUTOMATIC LAUNCHING\">AUTOMATIC LAUNCHING</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#BUGS\">BUGS</a>"]}