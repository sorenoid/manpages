{"name":"ubuntu-advantage","body":"\n\n<h1 align=\"center\">UBUNTU-ADVANTAGE</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ubuntu-advantage\n- Manage Ubuntu Advantage services from Canonical</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ua</b>\n&lt;command&gt; [&lt;args&gt;] <b><br>\nubuntu-advantage</b> &lt;command&gt; [&lt;args&gt;]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Ubuntu\nAdvantage is a collection of services offered by Canonical\nto Ubuntu users. The Ubuntu Advantage command line tool is\nused to attach a system to an Ubuntu Advantage contract to\nthen enable and disable services from Canonical. The\navailable commands and services are described in more detail\nbelow.</p>\n\n<h2>COMMANDS\n<a name=\"COMMANDS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>attach</b>\n[--no-auto-enable] [--attach-config=/path/to/file.yaml]\n&lt;token&gt;</p>\n\n<p style=\"margin-left:22%;\">Connect an Ubuntu Advantage\nsupport contract to this machine.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The\n<i>token</i> parameter can be obtained from\nhttps://auth.contracts.canonical.com/.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The\n<i>--attach-config</i> option can be used to provide a file\nwith the token and optionally, a list of services to enable\nafter attaching. The <i>token</i> parameter should not be\nused if this option is provided. An attach config file looks\nlike the following: <br>\ntoken: YOUR_TOKEN_HERE # required <br>\nenable_services: # optional list of service names to\nauto-enable <br>\n- esm-infra <br>\n- esm-apps <br>\n- cis</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The optional\n<i>--no-auto-enable</i> flag will disable the automatic\nenablement of recommended entitlements which usually happens\nimmediately after a successful attach.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The exit code\ncan be: <br>\n0: on successful attach <br>\n1: in case of any error while trying to attach <br>\n2: if the machine is already attached</p>\n\n<p style=\"margin-left:11%;\"><b>collect-logs [-o\n&lt;file&gt;| --output &lt;file&gt;]</b></p>\n\n<p style=\"margin-left:22%;\">Create a tarball with all\nrelevant UA logs and debug data.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The\n<i>--output</i> parameter defines the path to the tarball.\nIf not provided, the file is saved as <b>ua_logs.tar.gz</b>\nin the current directory.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>detach</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Remove the Ubuntu Advantage support contract from this\nmachine. This also disables all enabled services that can\nbe.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>disable</b>\n[cc-eal|cis|esm|fips|fips-updates|livepatch|ros|ros-updates]</p>\n\n<p style=\"margin-left:22%;\">Disable this machine&rsquo;s\naccess to an Ubuntu Advantage service.</p>\n\n<p style=\"margin-left:11%;\"><b>enable</b>\n[cc-eal|cis|esm|fips|fips-updates|livepatch|ros|ros-updates]</p>\n\n<p style=\"margin-left:22%;\">Activate and configure this\nmachine&rsquo;s access to an Ubuntu Advantage service.</p>\n\n<p style=\"margin-left:11%;\"><b>fix</b>\n&lt;security_issue&gt;</p>\n\n<p style=\"margin-left:22%;\">Fix a CVE or USN on the system\nby upgrading the appropriate package(s).</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\">&lt;security_issue&gt;\ncan be any of the following formats: CVE-yyyy-nnnn,\nCVE-yyyy-nnnnnnn, or USN-nnnn-dd.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The exit code\ncan be 0, 1, or 2. <br>\n0: the fix was successfully applied <br>\n1: the fix cannot be applied <br>\n2: the fix was applied but requires a reboot before it takes\neffect</p>\n\n<p style=\"margin-left:11%;\"><b>refresh</b></p>\n\n<p style=\"margin-left:22%;\">Refresh contract and service\ndetails from Canonical.</p>\n\n<p style=\"margin-left:11%;\"><b>security-status</b></p>\n\n<p style=\"margin-left:22%;\">Show security updates for\npackages in the system, including all available ESM related\ncontent.</p>\n\n<p style=\"margin-left:11%;\"><b>status</b>\n[--format=tabular|json|yaml] [--simulate-with-token TOKEN]\n<br>\n[--all]</p>\n\n<p style=\"margin-left:22%;\">Report current status of Ubuntu\nAdvantage services on system.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">This shows\nwhether this machine is attached to an Ubuntu Advantage\nsupport contract. When attached, the report includes the\nspecific support contract details including contract name,\nexpiry dates, and the status of each service on this\nsystem.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The attached\nstatus output has four columns:</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\"><b>SERVICE</b>:\nname of the service</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\"><b>ENTITLED</b>:\nwhether the contract to which this machine is attached\nentitles use of this service. Possible values are:\n<i>yes</i> or <i>no</i></p>\n\n<p style=\"margin-left:22%; margin-top: 1em\"><b>STATUS</b>:\nwhether the service is enabled on this machine. Possible\nvalues are: <i>enabled</i>, <i>disabled</i>, <i>n/a</i> (if\nyour contract entitles you to the service, but it\nisn&rsquo;t available for this machine) or <i>&acirc;</i>\n(if you aren&rsquo;t entitled to this service)</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\"><b>DESCRIPTION</b>:\na brief description of the service</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The unattached\nstatus output instead has three columns. <b>SERVICE</b> and\n<b>DESCRIPTION</b> are the same as above, and there is the\naddition of:</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\"><b>AVAILABLE</b>:\nwhether this service would be available if this machine were\nattached. The possible values are <i>yes</i> or\n<i>no</i>.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If\n--simulate-with-token is used, then the output has five\ncolumns. <b>SERVICE</b>, <b>AVAILABLE</b>, <b>ENTITLED</b>\nand <b>DESCRIPTION</b> are the same as mentioned above, and\n<b>AUTO_ENABLED</b> shows whether the service is set to be\nenabled when that token is attached.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If the --all\nflag is set, beta and unavailable services are also listed\nin the output.</p>\n\n<p style=\"margin-left:11%;\"><b>version</b></p>\n\n<p style=\"margin-left:22%;\">Show version of the Ubuntu\nAdvantage package.</p>\n\n<h2>PRO UPGRADE DAEMON\n<a name=\"PRO UPGRADE DAEMON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">UA client sets\nup a daemon on supported platforms (currently GCP only) to\ndetect if an Ubuntu Pro license is purchased for the\nmachine. If a Pro license is detected, then the machine is\nautomatically attached. If you are uninterested in UA\nservices, you can safely stop and disable the daemon using\nsystemctl:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">sudo systemctl\nstop ubuntu-advantage.service sudo systemctl disable\nubuntu-advantage.service</p>\n\n<h2>TIMER JOBS\n<a name=\"TIMER JOBS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">UA client sets\nup a systemd timer to run jobs that need to be executed\nrecurrently. The timer itself ticks every 5 minutes on\naverage, and decides which jobs need to be executed based on\ntheir intervals.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Jobs are\nexecuted by the timer script if the script has not yet run\nsuccessfully, or their interval since last successful run is\nalready exceeded. There is a random delay applied to the\ntimer, to desynchronize job execution time on machines\nspinned at the same time, avoiding multiple synchronized\ncalls to the same service.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Current jobs\nbeing checked and executed are: <b><br>\nupdate_messaging</b></p>\n\n<p style=\"margin-left:22%;\">Makes sure that the MOTD and\nAPT messages match the available/enabled services on the\nsystem, showing information about available packages or\nsecurity updates.</p>\n\n<p style=\"margin-left:11%;\"><b>update_status</b></p>\n\n<p style=\"margin-left:22%;\">Makes sure the &rsquo;ua\nstatus&rsquo; command will have the latest information even\nwhen executed by a non-root user, updating the\n<b>/var/lib/ubuntu-advantage/status.json</b> file.</p>\n\n<h2>CONFIGURATION\n<a name=\"CONFIGURATION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">By default,\nUbuntu Advantage client configuration options are read from\n<b>/etc/ubuntu-advantage/uaclient.conf.</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>The\nfollowing configuration options are available: <br>\ncontract_url</b></p>\n\n<p style=\"margin-left:22%;\">The ubuntu advantage contract\nserver URL</p>\n\n<p style=\"margin-left:11%;\"><b>security_url</b></p>\n\n<p style=\"margin-left:22%;\">The ubuntu advantage security\nserver URL</p>\n\n<p style=\"margin-left:11%;\"><b>data_dir</b></p>\n\n<p style=\"margin-left:22%;\">Where Ubuntu Advantage client\nstores its data files</p>\n\n<p style=\"margin-left:11%;\"><b>log_level</b></p>\n\n<p style=\"margin-left:22%;\">The logging level used when\nwriting to <b>log_file</b></p>\n\n<p style=\"margin-left:11%;\"><b>log_file</b></p>\n\n<p style=\"margin-left:22%;\">The log file for the Ubuntu\nAdvantage client</p>\n\n<p style=\"margin-left:11%;\"><b>timer_log_file</b></p>\n\n<p style=\"margin-left:22%;\">The log file for the Ubuntu\nAdvantage timer and timer jobs</p>\n\n<p style=\"margin-left:11%;\"><b>daemon_log_file</b></p>\n\n<p style=\"margin-left:22%;\">The log file for the Ubuntu\nAdvantage daemon</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>The\nfollowing options must be nested under the\n&quot;ua_config&quot; key: <br>\nhttp_proxy</b></p>\n\n<p style=\"margin-left:22%;\">If set, ua will use the\nspecified http proxy when making any http requests</p>\n\n<p style=\"margin-left:11%;\"><b>https_proxy</b></p>\n\n<p style=\"margin-left:22%;\">If set, ua will use the\nspecified https proxy when making any https requests</p>\n\n<p style=\"margin-left:11%;\"><b>apt_http_proxy</b></p>\n\n<p style=\"margin-left:22%;\">If set, ua will configure apt\nto use the specified http proxy by writing a apt config file\nto /etc/apt/apt.conf.d/90ubuntu-advantage-aptproxy</p>\n\n<p style=\"margin-left:11%;\"><b>apt_https_proxy</b></p>\n\n<p style=\"margin-left:22%;\">If set, ua will configure apt\nto use the specified https proxy by writing a apt config\nfile to /etc/apt/apt.conf.d/90ubuntu-advantage-aptproxy</p>\n\n\n<p style=\"margin-left:11%;\"><b>&lt;job_name&gt;_timer</b></p>\n\n<p style=\"margin-left:22%;\">Sets the timer running interval\nfor a specific job. Those intervals are checked every time\nthe systemd timer runs.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If needed,\nauthentication to the proxy server can be performed by\nsetting username and password in the URL itself, as in:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">http_proxy:\nhttp://&lt;username&gt;:&lt;password&gt;@&lt;fqdn&gt;:&lt;port&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Additionally,\nsome configuration options can be overridden in the\nenvironment by setting an environment variable prefaced by\n<b>UA_&lt;option_name&gt;</b>. Both uppercase and lowercase\nenvironment variables are allowed. The configuration options\nthat support this are: data_dir, log_file, timer_log_file,\ndaemon_log_file, log_level, and security_url.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For example,\nthe following overrides the log_level found in\nuaclient.conf:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">UA_LOG_LEVEL=info\nua attach</p>\n\n<h2>SERVICES\n<a name=\"SERVICES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Common\nCriteria EAL2 Provisioning (cc-eal)</b></p>\n\n<p style=\"margin-left:22%;\">Enables and install the Common\nCriteria artifacts.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The artifacts\ninclude a configure script, a tarball with additional\npackages, and post install scripts. The artifacts will be\ninstalled in /usr/lib/common-criteria directory and the\nREADME and configuration guide are available in\n/usr/share/doc/ubuntu-commoncriteria directory.</p>\n\n<p style=\"margin-left:11%;\"><b>CIS Audit (cis)</b></p>\n\n<p style=\"margin-left:22%;\">Enables and installs the CIS\nAudit artifacts.</p>\n\n<p style=\"margin-left:11%;\"><b>Extended Security\nMaintenance (esm)</b></p>\n\n<p style=\"margin-left:22%;\">Extended Security Maintenance\nensures the ongoing security and integrity of systems\nrunning Ubuntu Long Term Support (LTS) releases through\nUbuntu Advantage for Infrastructure.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See\nhttps://ubuntu.com/esm for more information.</p>\n\n<p style=\"margin-left:11%;\"><b>FIPS 140-2 certified modules\n(fips)</b></p>\n\n<p style=\"margin-left:22%;\">Install, configure, and enable\nFIPS 140-2 certified modules.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">After\nsuccessfully enabling FIPS, the system MUST be rebooted.\nFailing to reboot will result in the system not running the\nupdated FIPS kernel.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Disabling FIPS\nis not currently supported.</p>\n\n<p style=\"margin-left:11%;\"><b>FIPS 140-2 certified modules\nwith updates (fips-updates)</b></p>\n\n<p style=\"margin-left:22%;\">Install, configure, and enable\nFIPS 140-2 certified modules with updates. Enabling FIPS\nwith updates will take the system out of FIPS compliance as\nthe updated modules are not FIPS certified.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">After\nsuccessfully enabling FIPS with updates, the system MUST be\nrebooted. Failing to reboot will result in the system not\nrunning the updated FIPS kernel.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Disabling FIPS\nwith updates is not currently supported.</p>\n\n<p style=\"margin-left:11%;\"><b>Livepatch Service\n(livepatch)</b></p>\n\n<p style=\"margin-left:22%;\">Automatically apply critical\nkernel patches without rebooting. Reduces downtime, keeping\nyour Ubuntu LTS systems secure and compliant.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See\nhttps://ubuntu.com/livepatch for more information.</p>\n\n<p style=\"margin-left:11%;\"><b>ROS ESM Security Updates\n(ros)</b></p>\n\n<p style=\"margin-left:22%;\">Robot Operating System Extended\nSecurity Maintenance Security Updates provides security\nfixes for ROS packages to ensure the ongoing integrity of\nROS based applications.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See\nhttps://ubuntu.com/robotics/ros-esm for more\ninformation.</p>\n\n<p style=\"margin-left:11%;\"><b>ROS ESM All Updates\n(ros-updates)</b></p>\n\n<p style=\"margin-left:22%;\">Robot Operating System Extended\nSecurity Maintenance All Updates provides additional bug\nfixes in addition to security fixes for ROS packages to\nensure the ongoing integrity of ROS based applications.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See\nhttps://ubuntu.com/robotics/ros-esm for more\ninformation.</p>\n\n<h2>REPORTING BUGS\n<a name=\"REPORTING BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Please report\nbugs either by running &rsquo;ubuntu-bug\nubuntu-advantage-tools&rsquo; or login to Launchpad and\nnavigate to\nhttps://bugs.launchpad.net/ubuntu/+source/ubuntu-advantage-tools/+filebug</p>\n\n<h2>COPYRIGHT\n<a name=\"COPYRIGHT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copyright (C)\n2019-2020 Canonical Ltd.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#COMMANDS\">COMMANDS</a>","<a href=\"#PRO UPGRADE DAEMON\">PRO UPGRADE DAEMON</a>","<a href=\"#TIMER JOBS\">TIMER JOBS</a>","<a href=\"#CONFIGURATION\">CONFIGURATION</a>","<a href=\"#SERVICES\">SERVICES</a>","<a href=\"#REPORTING BUGS\">REPORTING BUGS</a>","<a href=\"#COPYRIGHT\">COPYRIGHT</a>"]}