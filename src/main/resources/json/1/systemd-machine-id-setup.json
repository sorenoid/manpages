{"name":"systemd-machine-id-setup","description":"systemd-machine-id-setup - Initialize the machine ID in /etc/machine-id","body":"\n\n<h1 align=\"center\">SYSTEMD-MACHINE-ID-SETUP</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">systemd-machine-id-setup\n- Initialize the machine ID in /etc/machine-id</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"37%\">\n\n\n\n<p style=\"margin-top: 1em\"><b>systemd-machine-id-setup</b></p> </td>\n<td width=\"52%\">\n</td></tr>\n</table>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>systemd-machine-id-setup</b>\nmay be used by system installer tools to initialize the\nmachine ID stored in /etc/machine-id at install time, with a\nprovisioned or randomly generated ID. See\n<a href=\"https://man.page/5/machine-id\">machine-id(5)</a> for more information about this\nfile.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the tool is\ninvoked without the <b>--commit</b> switch, /etc/machine-id\nis initialized with a valid, new machined ID if it is\nmissing or empty. The new machine ID will be acquired in the\nfollowing fashion:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">1. If a valid\nD-Bus machine ID is already configured for the system, the\nD-Bus machine ID is copied and used to initialize the\nmachine ID in /etc/machine-id.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">2. If run\ninside a KVM virtual machine and a UUID is configured (via\nthe <b>-uuid</b> option), this UUID is used to initialize\nthe machine ID. The caller must ensure that the UUID passed\nis sufficiently unique and is different for every booted\ninstance of the VM.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">3. Similarly,\nif run inside a Linux container environment and a UUID is\nconfigured for the container, this is used to initialize the\nmachine ID. For details, see the documentation of the\n<b><font color=\"#0000FF\">Container Interface</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n<font color=\"#000000\">.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">4.\nOtherwise, a new ID is randomly generated.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<b>--commit</b> switch may be used to commit a transient\nmachined ID to disk, making it persistent. For details, see\nbelow.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Use\n<a href=\"https://man.page/1/systemd-firstboot\">systemd-firstboot(1)</a> to initialize the machine ID on\nmounted (but not booted) system images.</font></p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nfollowing options are understood:</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--root=</b><i>path</i></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Takes a\ndirectory path as argument. All paths operated on will be\nprefixed with the given alternate <i>root</i> path,\nincluding the path for /etc/machine-id itself.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--image=</b><i>path</i></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Takes a\npath to a device node or regular file as argument. This is\nsimilar to <b>--root=</b> as described above, but operates\non a disk image instead of a directory tree.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--commit</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Commit a\ntransient machine ID to disk. This command may be used to\nconvert a transient machine ID into a persistent one. A\ntransient machine ID file is one that was bind mounted from\na memory file system (usually &quot;tmpfs&quot;) to\n/etc/machine-id during the early phase of the boot process.\nThis may happen because /etc/ is initially read-only and was\nmissing a valid machine ID file at that point.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">This\ncommand will execute no operation if /etc/machine-id is not\nmounted from a memory file system, or if /etc/ is read-only.\nThe command will write the current transient machine ID to\ndisk and unmount the /etc/machine-id mount point in a\nrace-free manner to ensure that this file is always valid\nand accessible for other processes.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">This\ncommand is primarily used by the\n<b>systemd-machine-id-commit.service</b>(8) early boot\nservice.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--print</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Print the\nmachine ID generated or committed after the operation is\ncomplete.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>-h</b>,\n<b>--help</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Print a\nshort help text and exit.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--version</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Print a\nshort version string and exit.</font></p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">On\nsuccess, 0 is returned, a non-zero failure code\notherwise.</font></p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><a href=\"https://man.page/1/systemd\">systemd(1)</a>,\n<a href=\"https://man.page/5/machine-id\">machine-id(5)</a>,\n<b>systemd-machine-id-commit.service</b>(8),\n<a href=\"https://man.page/1/dbus-uuidgen\">dbus-uuidgen(1)</a>,\n<a href=\"https://man.page/1/systemd-firstboot\">systemd-firstboot(1)</a></font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"29%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">Container\nInterface</font></p> </td>\n<td width=\"54%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://systemd.io/CONTAINER_INTERFACE</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#NOTES\">NOTES</a>"]}