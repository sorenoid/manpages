{"name":"runuser","description":"runuser - run a\ncommand with substitute user and group ID","body":"\n\n<h1 align=\"center\">RUNUSER</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">runuser - run a\ncommand with substitute user and group ID</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>runuser</b>\n[options] <b>-u</b> <i>user</i> [[--] <i>command</i>\n[<i>argument</i>...]]</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>runuser</b>\n[options] [<b>-</b>] [<i>user</i> [<i>argument</i>...]]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>runuser</b>\ncan be used to run commands with a substitute user and group\nID. If the option <b>-u</b> is not given, <b>runuser</b>\nfalls back to <b>su</b>-compatible semantics and a shell is\nexecuted. The difference between the commands <b>runuser</b>\nand <b>su</b> is that <b>runuser</b> does not ask for a\npassword (because it may be executed by the root user only)\nand it uses a different PAM configuration. The command\n<b>runuser</b> does not have to be installed with\nset-user-ID permissions.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the PAM\nsession is not required, then the recommended solution is to\nuse the <a href=\"https://man.page/1/setpriv\">setpriv(1)</a> command.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When called\nwithout arguments, <b>runuser</b> defaults to running an\ninteractive shell as <i>root</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For backward\ncompatibility, <b>runuser</b> defaults to not changing the\ncurrent directory and to setting only the environment\nvariables <b>HOME</b> and <b>SHELL</b> (plus <b>USER</b> and\n<b>LOGNAME</b> if the target <i>user</i> is not root). This\nversion of <b>runuser</b> uses PAM for session\nmanagement.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\n<b>runuser</b> in all cases use PAM (pam_getenvlist()) to do\nthe final environment modification. Command-line options\nsuch as <b>--login</b> and <b>--preserve-environment</b>\naffect the environment before it is modified by PAM.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-c</b>,\n<b>--command</b>=<i>command</i></p>\n\n<p style=\"margin-left:17%;\">Pass <i>command</i> to the\nshell with the <b>-c</b> option.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-f</b>,\n<b>--fast</b></p>\n\n<p style=\"margin-left:17%;\">Pass <b>-f</b> to the shell,\nwhich may or may not be useful, depending on the shell.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-g</b>,\n<b>--group</b>=<i>group</i></p>\n\n<p style=\"margin-left:17%;\">The primary group to be used.\nThis option is allowed for the root user only.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-G</b>,\n<b>--supp-group</b>=<i>group</i></p>\n\n<p style=\"margin-left:17%;\">Specify a supplementary group.\nThis option is available to the root user only. The first\nspecified supplementary group is also used as a primary\ngroup if the option <b>--group</b> is not specified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-</b>,\n<b>-l</b>, <b>--login</b></p>\n\n<p style=\"margin-left:17%;\">Start the shell as a login\nshell with an environment similar to a real login:</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; clears\nall the environment variables except for <b>TERM</b> and\nvariables specified by <b>--whitelist-environment</b></p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull;\ninitializes the environment variables <b>HOME</b>,\n<b>SHELL</b>, <b>USER</b>, <b>LOGNAME</b>, and\n<b>PATH</b></p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; changes\nto the target user&rsquo;s home directory</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; sets\nargv[0] of the shell to '<b>-</b>' in order to make the\nshell a login shell</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-P</b>,\n<b>--pty</b></p>\n\n<p style=\"margin-left:17%;\">Create a pseudo-terminal for\nthe session. The independent terminal provides better\nsecurity as the user does not share a terminal with the\noriginal session. This can be used to avoid TIOCSTI ioctl\nterminal injection and other security attacks against\nterminal file descriptors. The entire session can also be\nmoved to the background (e.g., <b>runuser --pty -u username\n&mdash; command &amp;</b>). If the pseudo-terminal is\nenabled, then <b>runuser</b> works as a proxy between the\nsessions (copy stdin and stdout).</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">This feature is\nmostly designed for interactive sessions. If the standard\ninput is not a terminal, but for example a pipe (e.g.,\n<b>echo &quot;date&quot; | runuser --pty -u user</b>), then\nthe ECHO flag for the pseudo-terminal is disabled to avoid\nmessy output.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-m</b>,\n<b>-p</b>, <b>--preserve-environment</b></p>\n\n<p style=\"margin-left:17%;\">Preserve the entire\nenvironment, i.e., do not set <b>HOME</b>, <b>SHELL</b>,\n<b>USER</b> or <b>LOGNAME</b>. The option is ignored if the\noption <b>--login</b> is specified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-s</b>,\n<b>--shell</b>=<i>shell</i></p>\n\n<p style=\"margin-left:17%;\">Run the specified <i>shell</i>\ninstead of the default. The shell to run is selected\naccording to the following rules, in order:</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; the\nshell specified with <b>--shell</b></p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; the\nshell specified in the environment variable <b>SHELL</b> if\nthe <b>--preserve-environment</b> option is used</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; the\nshell listed in the passwd entry of the target user</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull;\n/bin/sh</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">If the target\nuser has a restricted shell (i.e., not listed in\n<i>/etc/shells</i>), then the <b>--shell</b> option and the\n<b>SHELL</b> environment variables are ignored unless the\ncalling user is root.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--session-command=</b><i>command</i></p>\n\n<p style=\"margin-left:17%;\">Same as <b>-c</b>, but do not\ncreate a new session. (Discouraged.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-w</b>,\n<b>--whitelist-environment</b>=<i>list</i></p>\n\n<p style=\"margin-left:17%;\">Don&rsquo;t reset the\nenvironment variables specified in the comma-separated\n<i>list</i> when clearing the environment for\n<b>--login</b>. The whitelist is ignored for the environment\nvariables <b>HOME</b>, <b>SHELL</b>, <b>USER</b>,\n<b>LOGNAME</b>, and <b>PATH</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-V</b>,\n<b>--version</b></p>\n\n<p style=\"margin-left:17%;\">Display version information and\nexit.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-h</b>,\n<b>--help</b></p>\n\n<p style=\"margin-left:17%;\">Display help text and exit.</p>\n\n<h2>CONFIG FILES\n<a name=\"CONFIG FILES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>runuser</b>\nreads the <i>/etc/default/runuser</i> and\n<i>/etc/login.defs</i> configuration files. The following\nconfiguration items are relevant for <b>runuser</b>:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ENV_PATH</b>\n(string)</p>\n\n<p style=\"margin-left:17%;\">Defines the PATH environment\nvariable for a regular user. The default value is\n<i>/usr/local/bin:/bin:/usr/bin</i>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ENV_ROOTPATH</b>\n(string), <b>ENV_SUPATH</b> (string)</p>\n\n<p style=\"margin-left:17%;\">Defines the <b>PATH</b>\nenvironment variable for root. <b>ENV_SUPATH</b> takes\nprecedence. The default value is\n<i>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</i>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ALWAYS_SET_PATH</b>\n(boolean)</p>\n\n<p style=\"margin-left:17%;\">If set to <i>yes</i> and\n--login and --preserve-environment were not specified\n<b>runuser</b> initializes <b>PATH</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The environment\nvariable <b>PATH</b> may be different on systems where\n<i>/bin</i> and <i>/sbin</i> are merged into <i>/usr</i>;\nthis variable is also affected by the <b>--login</b>\ncommand-line option and the PAM system setting (e.g.,\n<b>pam_env</b>(8)).</p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>runuser</b>\nnormally returns the exit status of the command it executed.\nIf the command was killed by a signal, <b>runuser</b>\nreturns the number of the signal plus 128.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Exit status\ngenerated by <b>runuser</b> itself:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">1</p>\n\n<p style=\"margin-left:17%;\">Generic error before executing\nthe requested command</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">126</p>\n\n<p style=\"margin-left:17%;\">The requested command could not\nbe executed</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">127</p>\n\n<p style=\"margin-left:17%;\">The requested command was not\nfound</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/pam.d/runuser</i></p>\n\n<p style=\"margin-left:17%;\">default PAM configuration\nfile</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/pam.d/runuser-l</i></p>\n\n<p style=\"margin-left:17%;\">PAM configuration file if\n<b>--login</b> is specified</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/default/runuser</i></p>\n\n<p style=\"margin-left:17%;\">runuser specific logindef\nconfig file</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/login.defs</i></p>\n\n<p style=\"margin-left:17%;\">global logindef config file</p>\n\n<h2>HISTORY\n<a name=\"HISTORY\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This\n<b>runuser</b> command was derived from coreutils'\n<b>su</b>, which was based on an implementation by David\nMacKenzie, and the Fedora <b>runuser</b> command by Dan\nWalsh.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/setpriv\">setpriv(1)</a>,\n<a href=\"https://man.page/1/su\">su(1)</a>, <b>login.defs</b>(5), <a href=\"https://man.page/5/shells\">shells(5)</a>,\n<b>pam</b>(8)</p>\n\n<h2>REPORTING BUGS\n<a name=\"REPORTING BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For bug\nreports, use the issue tracker at\n&lt;https://github.com/karelzak/util-linux/issues&gt;.</p>\n\n<h2>AVAILABILITY\n<a name=\"AVAILABILITY\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>runuser</b> command is part of the util-linux package\nwhich can be downloaded from <i>Linux Kernel Archive</i>\n&lt;https://www.kernel.org/pub/linux/utils/util-linux/&gt;.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#CONFIG FILES\">CONFIG FILES</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#HISTORY\">HISTORY</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#REPORTING BUGS\">REPORTING BUGS</a>","<a href=\"#AVAILABILITY\">AVAILABILITY</a>"]}