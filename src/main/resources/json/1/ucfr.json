{"name":"ucfr","description":"ucfr - Update\nConfiguration File Registry: associate packages with\nconfiguration files","body":"\n\n<h1 align=\"center\">UCFR</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ucfr - Update\nConfiguration File Registry: associate packages with\nconfiguration files</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ucfr</b>\n[<i>options</i>] <i>&lt;Package&gt; &lt;Path to\nconfiguration file&gt;</i></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Where\n<i>Package</i> is the package associated with the\nconfiguration file (and, in some sense, its owner), and\n<i>Path to configuration file</i> is the full path to the\nlocation (usually under /etc) where the configuration file\nlives, and is potentially modified by the end user. Please\nnote that usually this means that we register actual files,\nand not symbolic links to files. <b>ucfr</b> will follow\nsymbolic links and register the real file, and not the\nsymbolic link.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This script\nmaintains an association between configuration files and\npackages, and is meant to help provide facilities that\n<i>dpkg</i> provides conffiles for configuration files and\nnot shipped in a <b>Debian</b> package, but handled by the\npostinst by <i>ucf</i> instead. This script is idempotent,\nassociating a package to a file multiple times is not an\nerror. It is normally an error to try to associate a file\nwhich is already associated with another package, but this\ncan be overridden by using the <i>--force</i> option.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-h,\n--help</b></p>\n\n<p style=\"margin-left:22%;\">Print a short usage message</p>\n\n<p style=\"margin-left:11%;\"><b>-n, --no-action</b></p>\n\n<p style=\"margin-left:22%;\">Dry run. Print the actions that\nwould be taken if the script is invoked, but take no\naction.</p>\n\n<p style=\"margin-left:11%;\"><b>-d [n], --debug [n]</b></p>\n\n<p style=\"margin-left:22%;\">Set the debug level to the\n(optional) level <i>n</i> (n defaults to 1). This turns on\ncopious debugging information.</p>\n\n<p style=\"margin-left:11%;\"><b>-p, --purge</b></p>\n\n<p style=\"margin-left:22%;\">Removes all vestiges of the\nassociation between the named package and the configuration\nfile from the registry. The association must already exist;\nif the configuration file is associated with some other\npackage, an error happens, unless the option <i>--force</i>\nis also given. In that case, the any associations for the\nconfiguration file are removed from the registry, whether or\nnot the package name matches. This action is idempotent,\nasking for an association to be purged multiple times does\nnot result in an error, since attempting to remove an\nnon-existent association is silently ignored unless the\n<i>--verbose</i> option is used (in which case it just\nissues a diagnostic).</p>\n\n<p style=\"margin-left:11%;\"><b>-v, --verbose</b></p>\n\n<p style=\"margin-left:22%;\">Make the script be very verbose\nabout setting internal variables.</p>\n\n<p style=\"margin-left:11%;\"><b>-f, --force</b></p>\n\n<p style=\"margin-left:22%;\">This option forces operations\nrequested even if the configuration file in consideration is\nowned by another package. This allows a package to\n<i>hijack</i> a configuration file from another package, or\nto purge the association between the file and some other\npackage in the registry.</p>\n\n<p style=\"margin-left:11%;\"><b>--state-dir\n/path/to/dir</b></p>\n\n<p style=\"margin-left:22%;\">Set the state directory to\n/path/to/dir instead of the default <i>/var/lib/ucf.</i>\nUsed mostly for testing.</p>\n\n<h2>USAGE\n<a name=\"USAGE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The most common\ncase usage is pretty simple: a single line invocation in the\npostinst on configure, and another single line in the postrm\nto tell <b>ucfr</b> to forget about the association with the\nconfiguration file on purge (using the --purge option) is\nall that is needed (assuming ucfr is still on the\nsystem).</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/var/lib/ucf/registry,</i>\nand <i>/var/lib/ucf/registry.X,</i> where <i>X</i> is a\nsmall integer, where previous versions of the registry are\nstored.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/ucf.conf</i></p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the package\n<i>foo</i> wants to use ucfr to associate itself with a\nconfiguration file <i>foo.conf,</i> a simple invocation of\nucfr in the postinst file is all that is needed:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ucfr</b>\n<i>foo /etc/foo.conf</i></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On purge, one\nshould tell ucf to forget about the file (see detailed\nexamples in /usr/share/doc/ucf/examples):</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ucfr</b>\n<i>--purge foo /etc/foo.conf</i></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you want to\nremove all the conf files for a given package <i>foo,</i>\nthe simplest way is to use <b>ucfq.</b> For example</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ucfq</b>\n<i>-w foo |</i> <b>cut</b> <i>-d : -f 1 |</i> <b>while\nread</b> <i>cfile ;</i> <b>do ucfr</b> <i>-v $cfile ;</i>\n<b>done</b></p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ucf(1),\nucf.conf(5).</p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This manual\npage was written Manoj Srivastava\n&lt;srivasta@debian.org&gt;, for the Debian GNU/Linux\nsystem.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#USAGE\">USAGE</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#AUTHOR\">AUTHOR</a>"]}