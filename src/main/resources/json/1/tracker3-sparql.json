{"name":"tracker3-sparql","description":"tracker3-sparql - Use SparQL to query the Tracker databases.","body":"\n\n<h1 align=\"center\">TRACKER3-SPARQL</h1>\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">tracker3-sparql\n- Use SparQL to query the Tracker databases.</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">tracker3 sparql\n-q &lt;sparql&gt; [-u] | -f &lt;file&gt; <br>\ntracker3 sparql -t [class] [-s &lt;needle&gt;] [-p] <br>\ntracker3 sparql [-c] [-p] [-x] [-n [class]] [-i [property]]\n[-s &lt;needle&gt;] <br>\ntracker3 sparql [--get-longhand &lt;class&gt;]\n[--get-shorthand &lt;class&gt;]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This command\nallows probing of the current database schema (also known as\nontology) and running low level queries or updates on the\ndata set. In terms of the database ontology, it&rsquo;s easy\nto find out what properties are indexed for speed, or\nnotified on changes, what classes are available and the\nproperties belonging to those classes. There are also visual\ntools to display an ascii tree layout of the classes and\ntheir relationships to each other.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When the caller\nruns a query, the query is in RDF and SPARQL. This can be\ndone two ways. Either by providing a <i>file</i> with the\nquery or by providing a string with the <i>sparql</i>\nquery.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <i>file</i>\nargument can be either a local path or a URI. It also does\nnot have to be an absolute path.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-f,\n--file=&lt;</b><i>file</i><b>&gt;</b></p>\n\n<p style=\"margin-left:17%;\">Use a <i>file</i> with SPARQL\ncontent to query or update.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-q,\n--query=&lt;</b><i>sparql</i><b>&gt;</b></p>\n\n<p style=\"margin-left:17%;\">Use a <i>sparql</i> string to\nquery the database with.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-u,\n--update</b></p>\n\n<p style=\"margin-left:17%;\">This has to be used with\n<b>--query</b>. This tells &quot;tracker3 sparql&quot; to\nuse the SPARQL update extensions so it knows it isn&rsquo;t\na regular data lookup request. So if your query is intended\nto change data in the database, this option is needed.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-c,\n--list-classes</b></p>\n\n<p style=\"margin-left:17%;\">Returns a list of classes which\ndescribe the ontology used for storing data. These classes\nare also used in queries. For example,\n<i>http://www.w3.org/2000/01/rdf-schema#Resource</i> is one\nof many classes which should be returned here.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-x,\n--list-class-prefixes</b></p>\n\n<p style=\"margin-left:17%;\">Returns a list of classes and\ntheir related prefixes. Prefixes are used to make querying a\nlot simpler and are much like an alias. For example,\n<i>http://www.w3.org/2000/01/rdf-schema#Resource</i> has the\nprefix <i>rdfs</i> so queries can be cut down to:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">&quot;SELECT ?u\nWHERE \\{ ?u a rdfs:Resource }&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-p,\n--list-properties=[</b><i>class</i><b>]</b></p>\n\n<p style=\"margin-left:17%;\">Returns a list of properties\nwhich pertain to a <i>class</i>. You can use both formats\nhere for the <i>class</i>, either the full name\n<i>http://tracker.api.gnome.org/ontology/v3/nfo#Video</i> or\nthe shortened prefix name <i>nfo:Video</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This gives the\nfollowing result:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ tracker3\nsparql -p nfo:Video</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Properties: 2\n<br>\nhttp://tracker.api.gnome.org/ontology/v3/nfo#frameRate <br>\nhttp://tracker.api.gnome.org/ontology/v3/nfo#frameCount</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">These\nproperties <i>nfo:frameRate</i> and <i>nfo:frameCount</i>\ncan then be used in queries.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">See also\n<b>--tree</b> and <b>--query</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-n,\n--list-notifies=[</b><i>class</i><b>]</b></p>\n\n<p style=\"margin-left:17%;\">Returns a list of classes which\nare notified over D-Bus about any changes that occur in the\ndatabase. The <i>class</i> does not have to be supplied\nhere. This is optional and filters the results according to\nany argument supplied. With no <i>class</i>, all classes are\nlisted.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-i,\n--list-indexes=[</b><i>property</i><b>]</b></p>\n\n<p style=\"margin-left:17%;\">Returns a list of properties\nwhich are indexed in the database. Indexes improves query\nspeed but also add an indexing penalty. The <i>property</i>\ndoes not have to be supplied here. This is optional and\nfilters the results according to any argument supplied. With\nno <i>property</i>, all properties are listed.</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; -g,\n--list-graphs:: List all the named graphs in the database.\nThese are used by the filesystem miner to separate metadata\nso that apps can only see the information relevant to\nthem.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-t,\n--tree=[</b><i>class</i><b>]</b></p>\n\n<p style=\"margin-left:17%;\">Prints a tree showing all\nparent classes of <i>class</i> in the ontology. The\n<i>class</i> can be provided in shorthand or longhand (see\n<b>--get-shorthand</b> and <b>--get-longhand</b> for\ndetails). For example:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ tracker3\nsparql -t nmo:MMSMessage <br>\nROOT <br>\n+-- rdfs:Resource (C) <br>\n| +-- nie:InformationElement (C) <br>\n| | +-- nfo:Document (C) <br>\n| | | +-- nfo:TextDocument (C) <br>\n| | | | &rsquo;-- nmo:Message (C) <br>\n| | | | | +-- nmo:PhoneMessage (C) <br>\n| | | | | | &rsquo;-- nmo:MMSMessage (C)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If no\n<i>class</i> is given, the entire tree is shown.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>--search</b> command line option can be used to highlight\nparts of the tree you&rsquo;re looking for. The search is\ncase insensitive.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>--properties</b> command line option can be used to show\nproperties for each class displayed, for example:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ tracker3\nsparql -t nfo:FileDataObject -p <br>\nROOT <br>\n+-- rdfs:Resource (C) <br>\n| --&gt; http://purl.org/dc/elements/1.1/contributor (P)\n<br>\n| --&gt; http://purl.org/dc/elements/1.1/coverage (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/creator (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/date (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/description (P)\n<br>\n| --&gt; http://purl.org/dc/elements/1.1/format (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/identifier (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/language (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/publisher (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/relation (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/rights (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/source (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/subject (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/title (P) <br>\n| --&gt; http://purl.org/dc/elements/1.1/type (P) <br>\n| --&gt; nao:deprecated (P) <br>\n| --&gt; nao:hasTag (P) <br>\n| --&gt; nao:identifier (P) <br>\n| --&gt; nao:isRelated (P) <br>\n| --&gt; nao:lastModified (P) <br>\n| --&gt; nao:numericRating (P) <br>\n| --&gt; rdf:type (P) <br>\n| --&gt; rdfs:comment (P) <br>\n| --&gt; rdfs:label (P) <br>\n| --&gt; nrl:added (P) <br>\n| --&gt; nrl:damaged (P) <br>\n| --&gt; nrl:modified (P) <br>\n| +-- nie:DataObject (C) <br>\n| | --&gt; nfo:belongsToContainer (P) <br>\n| | --&gt; nie:byteSize (P) <br>\n| | --&gt; nie:created (P) <br>\n| | --&gt; nie:dataSource (P) <br>\n| | --&gt; nie:interpretedAs (P) <br>\n| | --&gt; nie:isPartOf (P) <br>\n| | --&gt; nie:lastRefreshed (P) <br>\n| | --&gt; nie:url (P) <br>\n| | --&gt; tracker:available (P) <br>\n| | +-- nfo:FileDataObject (C) <br>\n| | | --&gt; nfo:fileCreated (P) <br>\n| | | --&gt; nfo:fileLastAccessed (P) <br>\n| | | --&gt; nfo:fileLastModified (P) <br>\n| | | --&gt; nfo:fileName (P) <br>\n| | | --&gt; nfo:fileOwner (P) <br>\n| | | --&gt; nfo:fileSize (P) <br>\n| | | --&gt; nfo:hasHash (P) <br>\n| | | --&gt; nfo:permissions (P)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-s,\n--search=&lt;</b><i>needle</i><b>&gt;</b></p>\n\n<p style=\"margin-left:17%;\">Returns a list of classes and\nproperties which partially match <i>needle</i> in the\nontology. This is a case insensitive match, for example:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ tracker3\nsparql -s text</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Classes: 4 <br>\nhttp://tracker.api.gnome.org/ontology/v3/nfo#TextDocument\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/nfo#PlainTextDocument\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/nfo#PaginatedTextDocument\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/nmm#SynchronizedText</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Properties: 4\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/tracker#fulltextIndexed\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/nie#plainTextContent\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/nmo#plainTextMessageContent\n<br>\n\nhttp://tracker.api.gnome.org/ontology/v3/scal#textLocation</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">See also\n<b>--tree</b>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--get-shorthand=&lt;</b><i>class</i><b>&gt;</b></p>\n\n<p style=\"margin-left:17%;\">Returns the shorthand for a\nclass given by a URL. For example:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ tracker3\nsparql --get-shorthand\nhttp://tracker.api.gnome.org/ontology/v3/nmo#plainTextMessageContent\n<br>\nnmo:plainTextMessageContent</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--get-longhand=&lt;</b><i>class</i><b>&gt;</b></p>\n\n<p style=\"margin-left:17%;\">Returns the longhand for a\nclass given in the form of CLASS:PROPERTY. For example:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ tracker3\nsparql --get-longhand nmm:MusicPiece <br>\nhttp://tracker.api.gnome.org/ontology/v3/nmm#MusicPiece</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all\nclasses</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?cl WHERE { ?cl a rdfs:Class\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all\nproperties for the Resources class (see\n--list-properties)</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?prop WHERE { <br>\n?prop a rdf:Property ; <br>\nrdfs:domain\n&lt;http://www.w3.org/2000/01/rdf-schema#Resource&gt; <br>\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all class\nnamespace prefixes</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?prefix ?ns WHERE { <br>\n?ns a nrl:Namespace ; <br>\nnrl:prefix ?prefix <br>\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all music\nfiles</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?song WHERE { ?song a nmm:MusicPiece\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all music\nalbums, showing title, track count, and length in\nseconds.</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?title COUNT(?song) <br>\nAS songs <br>\nSUM(?length) AS totallength <br>\nWHERE { <br>\n?album a nmm:MusicAlbum ; <br>\nnie:title ?title . <br>\n?song nmm:musicAlbum ?album ; <br>\nnfo:duration ?length <br>\n} GROUP BY ?album&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all music\nfrom a particular artist</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?song ?title WHERE { <br>\n?song nmm:performer [ nmm:artistName 'Artist Name' ] ; <br>\nnie:title ?title <br>\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Set the played\ncount for a song</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -u -q &quot;DELETE { <br>\n&lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter\n?count <br>\n} WHERE { <br>\n&lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter\n?count <br>\n} INSERT { <br>\n&lt;file:///home/user/Music/song.mp3&gt; nie:usageCounter 42\n<br>\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all image\nfiles</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?image WHERE { ?image a nfo:Image\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all image\nfiles with a specific tag</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?image WHERE { <br>\n?image a nfo:Image ; <br>\nnao:hasTag [ nao:prefLabel 'tag' ] <br>\n}&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">List all image\nfiles created on a specific month and order by date</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ tracker3\nsparql -q &quot;SELECT ?image ?date WHERE { <br>\n?image a nfo:Image ; <br>\nnie:contentCreated ?date . <br>\nFILTER (?date &gt;= '2008-07-01T00:00:00' &amp;&amp; <br>\n?date &lt; '2008-08-01T00:00:00') <br>\n} ORDER BY ?date&quot;</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/tracker3-sql\">tracker3-sql(1)</a>,\n<a href=\"https://man.page/1/tracker3-info\">tracker3-info(1)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>http://nepomuk.semanticdesktop.org/\nhttp://www.w3.org/TR/rdf-sparql-query/</b></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"]}