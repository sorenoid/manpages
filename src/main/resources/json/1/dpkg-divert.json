{"name":"dpkg-divert","description":"dpkg-divert -\noverride a package&rsquo;s version of a file","body":"\n\n<h1 align=\"center\">dpkg-divert</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">dpkg-divert -\noverride a package&rsquo;s version of a file</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>dpkg-divert</b>\n[<i>option</i>...] <i>command</i></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i><b>dpkg-divert</b></i>\nis the utility used to set up and update the list of\ndiversions.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">File\n<i>diversions</i> are a way of forcing <a href=\"https://man.page/1/dpkg\">dpkg(1)</a> not to\ninstall a file into its location, but to a <i>diverted</i>\nlocation. Diversions can be used through the Debian package\nscripts to move a file away when it causes a conflict.\nSystem administrators can also use it to override some\npackage&rsquo;s configuration file, or whenever some files\n(which aren&rsquo;t marked as &ldquo;conffiles&rdquo;) need\nto be preserved by <b>dpkg</b>, when installing a newer\nversion of a package which contains those files.</p>\n\n<h2>COMMANDS\n<a name=\"COMMANDS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">[<b>--add</b>]\n<i>file</i></p>\n\n<p style=\"margin-left:17%;\">Add a diversion for\n<i>file</i>. The file is currently not renamed, see\n<b>--rename</b>.</p>\n\n<p style=\"margin-left:11%;\"><b>--remove</b> <i>file</i></p>\n\n<p style=\"margin-left:17%;\">Remove a diversion for\n<i>file</i>. The file is currently not renamed, see\n<b>--rename</b>.</p>\n\n<p style=\"margin-left:11%;\"><b>--list</b>\n<i>glob-pattern</i></p>\n\n<p style=\"margin-left:17%;\">List diversions matching\n<i>glob-pattern</i>.</p>\n\n<p style=\"margin-left:11%;\"><b>--listpackage</b>\n<i>file</i></p>\n\n<p style=\"margin-left:17%;\">Print the name of the package\nthat diverts <i>file</i> (since dpkg 1.15.0). Prints\n<small>LOCAL</small> if <i>file</i> is locally diverted and\nnothing if <i>file</i> is not diverted.</p>\n\n<p style=\"margin-left:11%;\"><b>--truename</b>\n<i>file</i></p>\n\n<p style=\"margin-left:17%;\">Print the real name for a\ndiverted file.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--admindir</b>\n<i>directory</i></p>\n\n<p style=\"margin-left:17%;\">Set the administrative\ndirectory to <i>directory</i>. Defaults to\n&laquo;<i>/var/lib/dpkg</i>&raquo;.</p>\n\n<p style=\"margin-left:11%;\"><b>--instdir</b>\n<i>directory</i></p>\n\n<p style=\"margin-left:17%;\">Set the installation directory,\nwhich refers to the directory where packages get installed\n(since dpkg 1.19.2). Defaults to &laquo;<i>/</i>&raquo;.</p>\n\n<p style=\"margin-left:11%;\"><b>--root</b>\n<i>directory</i></p>\n\n<p style=\"margin-left:17%;\">Set the root directory to\n<b>directory</b>, which sets the installation directory to\n&laquo;<i>directory</i>&raquo; and the administrative\ndirectory to\n&laquo;<i>directory</i><b>/var/lib/dpkg</b>&raquo; (since\ndpkg 1.19.2).</p>\n\n<p style=\"margin-left:11%;\"><b>--divert</b>\n<i>divert-to</i></p>\n\n<p style=\"margin-left:17%;\"><i>divert-to</i> is the\nlocation where the versions of <i>file</i>, as provided by\nother packages, will be diverted.</p>\n\n<p style=\"margin-left:11%;\"><b>--local</b></p>\n\n<p style=\"margin-left:17%;\">Specifies that all\npackages&rsquo; versions of this file are diverted. This\nmeans, that there are no exceptions, and whatever package is\ninstalled, the file is diverted. This can be used by an\nadmin to install a locally modified version.</p>\n\n<p style=\"margin-left:11%;\"><b>--package</b>\n<i>package</i></p>\n\n<p style=\"margin-left:17%;\"><i>package</i> is the name of a\npackage whose copy of <i>file</i> will not be diverted. i.e.\n<i>file</i> will be diverted for all packages except\n<i>package</i>.</p>\n\n<p style=\"margin-left:11%;\"><b>--quiet</b></p>\n\n<p style=\"margin-left:17%;\">Quiet mode, i.e. no verbose\noutput.</p>\n\n<p style=\"margin-left:11%;\"><b>--rename</b></p>\n\n<p style=\"margin-left:17%;\">Actually move the file aside\n(or back). <b>dpkg-divert</b> will abort operation in case\nthe destination file already exists. This is the common\nbehavior used for diversions of files from the\nnon-<b>Essential</b> package set (see <b>--no-rename</b> for\nmore details).</p>\n\n<p style=\"margin-left:11%;\"><b>--no-rename</b></p>\n\n<p style=\"margin-left:17%;\">Specifies that the file should\nnot be renamed while adding or removing the diversion into\nthe database (since dpkg 1.19.1). This is intended for\ndiversions of files from the <b>Essential</b> package set,\nwhere the temporary disappearance of the original file is\nnot acceptable, as it can render the system non-functional.\nThis is the default behavior, but that will change in the\ndpkg 1.20.x cycle.</p>\n\n<p style=\"margin-left:11%;\"><b>--test</b></p>\n\n<p style=\"margin-left:17%;\">Test mode, i.e. don&rsquo;t\nactually perform any changes, just demonstrate.</p>\n\n<p style=\"margin-left:11%;\"><b>-?</b>, <b>--help</b></p>\n\n<p style=\"margin-left:17%;\">Show the usage message and\nexit.</p>\n\n<p style=\"margin-left:11%;\"><b>--version</b></p>\n\n<p style=\"margin-left:17%;\">Show the version and exit.</p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\"><b>0</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">The requested action was\nsuccessfully performed.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>2</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Fatal or unrecoverable error due to invalid command-line\nusage, or interactions with the system, such as accesses to\nthe database, memory allocations, etc.</p></td></tr>\n</table>\n\n<h2>ENVIRONMENT\n<a name=\"ENVIRONMENT\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b><small>DPKG_ROOT</small></b></p>\n\n<p style=\"margin-left:17%;\">If set and the <b>--instdir</b>\nor <b>--root</b> options have not been specified, it will be\nused as the filesystem root directory (since dpkg\n1.19.2).</p>\n\n\n<p style=\"margin-left:11%;\"><b><small>DPKG_ADMINDIR</small></b></p>\n\n<p style=\"margin-left:17%;\">If set and the\n<b>--admindir</b> or <b>--root</b> options have not been\nspecified, it will be used as the <b>dpkg</b> data\ndirectory.</p>\n\n\n<p style=\"margin-left:11%;\"><b><small>DPKG_MAINTSCRIPT_PACKAGE</small></b></p>\n\n<p style=\"margin-left:17%;\">If set and the <b>--local</b>\nand <b>--package</b> options have not been specified,\n<b>dpkg-divert</b> will use it as the package name.</p>\n\n\n<p style=\"margin-left:11%;\"><b><small>DPKG_COLORS</small></b></p>\n\n<p style=\"margin-left:17%;\">Sets the color mode (since dpkg\n1.18.5). The currently accepted values are: <b>auto</b>\n(default), <b>always</b> and <b>never</b>.</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/var/lib/dpkg/diversions</i></p>\n\n<p style=\"margin-left:17%;\">File which contains the current\nlist of diversions of the system. It is located in the\n<b>dpkg</b> administration directory, along with other files\nimportant to <b>dpkg</b>, such as <i>status</i> or\n<i>available</i>.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\"><b>Note:\ndpkg-divert</b> preserves the old copy of this file, with\nextension <i>-old</i>, before replacing it with the new\none.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">When adding,\ndefault is <b>--local</b> and <b>--divert</b>\n<i>original</i><b>.distrib</b>. When removing,\n<b>--package</b> or <b>--local</b> and <b>--divert</b> must\nmatch if specified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Directories\ncan&rsquo;t be diverted with <b>dpkg-divert</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Care should be\ntaken when diverting shared libraries, <b>ldconfig</b>(8)\ncreates a symbolic link based on the\n<small>DT_SONAME</small> field embedded in the library.\nBecause <b>ldconfig</b> doesn&rsquo;t honour diverts (only\n<b>dpkg</b> does), the symlink may end up pointing at the\ndiverted library, if a diverted library has the same\n<small>SONAME</small> as the undiverted one.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">To divert all\ncopies of a <i>/usr/bin/example</i> to\n<i>/usr/bin/example.foo</i>, i.e. directs all packages\nproviding <i>/usr/bin/example</i> to install it as\n<i>/usr/bin/example.foo</i>, performing the rename if\nrequired:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">dpkg-divert\n--divert /usr/bin/example.foo --rename /usr/bin/example</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">To remove that\ndiversion:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">dpkg-divert\n--rename --remove /usr/bin/example</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">To divert any\npackage trying to install <i>/usr/bin/example</i> to\n<i>/usr/bin/example.foo</i>, except your own <i>wibble</i>\npackage:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">dpkg-divert\n--package wibble --divert /usr/bin/example.foo \\ <br>\n--rename /usr/bin/example</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">To remove that\ndiversion:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">dpkg-divert\n--package wibble --rename --remove /usr/bin/example</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/dpkg\">dpkg(1)</a>.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#COMMANDS\">COMMANDS</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#ENVIRONMENT\">ENVIRONMENT</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"]}