{"name":"systemd-notify","body":"\n\n<h1 align=\"center\">SYSTEMD-NOTIFY</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">systemd-notify\n- Notify service manager about start-up completion and other\ndaemon status changes</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"72%\">\n\n\n<p style=\"margin-top: 1em\"><b>systemd-notify [OPTIONS...]\n[VARIABLE=VALUE...]</b></p> </td>\n<td width=\"17%\">\n</td></tr>\n</table>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>systemd-notify</b>\nmay be called by daemon scripts to notify the init system\nabout status changes. It can be used to send arbitrary\ninformation, encoded in an environment-block-like list of\nstrings. Most importantly, it can be used for start-up\ncompletion notification.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This is mostly\njust a wrapper around <b>sd_notify()</b> and makes this\nfunctionality available to shell scripts. For details see\n<a href=\"https://man.page/3/sd_notify\">sd_notify(3)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The command\nline may carry a list of environment variables to send as\npart of the status update.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\nsystemd will refuse reception of status updates from this\ncommand unless <i>NotifyAccess=</i> is set for the service\nunit this command is called from.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\n<b>sd_notify()</b> notifications may be attributed to units\ncorrectly only if either the sending process is still around\nat the time PID 1 processes the message, or if the sending\nprocess is explicitly runtime-tracked by the service\nmanager. The latter is the case if the service manager\noriginally forked off the process, i.e. on all processes\nthat match <i>NotifyAccess=</i><b>main</b> or\n<i>NotifyAccess=</i><b>exec</b>. Conversely, if an auxiliary\nprocess of the unit sends an <b>sd_notify()</b> message and\nimmediately exits, the service manager might not be able to\nproperly attribute the message to the unit, and thus will\nignore it, even if <i>NotifyAccess=</i><b>all</b> is set for\nit. When <b>--no-block</b> is used, all synchronization for\nreception of notifications is disabled, and hence the\naforementioned race may occur if the invoking process is not\nthe service manager or spawned by the service manager.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Hence,\n<b>systemd-notify</b> will first attempt to invoke\n<b>sd_notify()</b> pretending to have the PID of the\ninvoking process. This will only succeed when invoked with\nsufficient privileges. On failure, it will then fall back to\ninvoking it under its own PID. This behaviour is useful in\norder that when the tool is invoked from a shell script the\nshell process &mdash; and not the <b>systemd-notify</b>\nprocess &mdash; appears as sender of the message, which in\nturn is helpful if the shell process is the main process of\na service, due to the limitations of\n<i>NotifyAccess=</i><b>all</b>. Use the <b>--pid=</b> switch\nto tweak this behaviour.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\noptions are understood:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--ready</b></p>\n\n<p style=\"margin-left:17%;\">Inform the init system about\nservice start-up completion. This is equivalent to\n<b>systemd-notify READY=1</b>. For details about the\nsemantics of this option see <a href=\"https://man.page/3/sd_notify\">sd_notify(3)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--pid=</b></p>\n\n<p style=\"margin-left:17%;\">Inform the service manager\nabout the main PID of the daemon. Takes a PID as argument.\nIf the argument is specified as &quot;auto&quot; or omitted,\nthe PID of the process that invoked <b>systemd-notify</b> is\nused, except if that's the service manager. If the argument\nis specified as &quot;self&quot;, the PID of the\n<b>systemd-notify</b> command itself is used, and if\n&quot;parent&quot; is specified the calling process' PID is\nused &mdash; even if it is the service manager. This is\nequivalent to <b>systemd-notify MAINPID=$PID</b>. For\ndetails about the semantics of this option see\n<a href=\"https://man.page/3/sd_notify\">sd_notify(3)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--uid=</b><i>USER</i></p>\n\n<p style=\"margin-left:17%;\">Set the user ID to send the\nnotification from. Takes a UNIX user name or numeric UID.\nWhen specified the notification message will be sent with\nthe specified UID as sender, in place of the user the\ncommand was invoked as. This option requires sufficient\nprivileges in order to be able manipulate the user identity\nof the process.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--status=</b></p>\n\n<p style=\"margin-left:17%;\">Send a free-form status string\nfor the daemon to the init systemd. This option takes the\nstatus string as argument. This is equivalent to\n<b>systemd-notify STATUS=...</b>. For details about the\nsemantics of this option see <a href=\"https://man.page/3/sd_notify\">sd_notify(3)</a>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--booted</b></p>\n\n<p style=\"margin-left:17%;\">Returns 0 if the system was\nbooted up with systemd, non-zero otherwise. If this option\nis passed, no message is sent. This option is hence\nunrelated to the other options. For details about the\nsemantics of this option, see <a href=\"https://man.page/3/sd_booted\">sd_booted(3)</a>. An\nalternate way to check for this state is to call\n<a href=\"https://man.page/1/systemctl\">systemctl(1)</a> with the <b>is-system-running</b>\ncommand. It will return &quot;offline&quot; if the system\nwas not booted with systemd.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--no-block</b></p>\n\n<p style=\"margin-left:17%;\">Do not synchronously wait for\nthe requested operation to finish. Use of this option is\nonly recommended when <b>systemd-notify</b> is spawned by\nthe service manager, or when the invoking process is\ndirectly spawned by the service manager and has enough\nprivileges to allow <b>systemd-notify</b> to send the\nnotification on its behalf. Sending notifications with this\noption set is prone to race conditions in all other\ncases.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-h</b>,\n<b>--help</b></p>\n\n<p style=\"margin-left:17%;\">Print a short help text and\nexit.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--version</b></p>\n\n<p style=\"margin-left:17%;\">Print a short version string\nand exit.</p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success, 0\nis returned, a non-zero failure code otherwise.</p>\n\n<h2>EXAMPLE\n<a name=\"EXAMPLE\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;1.&nbsp;Start-up\nNotification and Status Updates</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A simple shell\ndaemon that sends start-up notifications after having set up\nits communication channel. During runtime it sends further\nstatus updates to the init system:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">#!/bin/bash</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">mkfifo\n/tmp/waldo <br>\nsystemd-notify --ready --status=&quot;Waiting for\ndata...&quot;</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">while : ; do\n<br>\nread a &lt; /tmp/waldo <br>\nsystemd-notify --status=&quot;Processing $a&quot;</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\"># Do something\nwith $a ...</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">systemd-notify\n--status=&quot;Waiting for data...&quot; <br>\ndone</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/systemd\">systemd(1)</a>,\n<a href=\"https://man.page/1/systemctl\">systemctl(1)</a>, <b>systemd.unit</b>(5),\n<a href=\"https://man.page/3/sd_notify\">sd_notify(3)</a>, <a href=\"https://man.page/3/sd_booted\">sd_booted(3)</a></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#EXAMPLE\">EXAMPLE</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"]}