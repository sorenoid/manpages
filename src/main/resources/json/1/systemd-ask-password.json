{"name":"systemd-ask-password","description":"systemd-ask-password\n- Query the user for a system password","body":"\n\n<h1 align=\"center\">SYSTEMD-ASK-PASSWORD</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">systemd-ask-password\n- Query the user for a system password</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"66%\">\n\n\n<p style=\"margin-top: 1em\"><b>systemd-ask-password\n[OPTIONS...] [MESSAGE]</b></p></td>\n<td width=\"23%\">\n</td></tr>\n</table>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>systemd-ask-password</b>\nmay be used to query a system password or passphrase from\nthe user, using a question message specified on the command\nline. When run from a TTY it will query a password on the\nTTY and print it to standard output. When run with no TTY or\nwith <b>--no-tty</b> it will use the system-wide query\nmechanism, which allows active users to respond via several\nagents, listed below.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The purpose of\nthis tool is to query system-wide passwords &mdash; that is\npasswords not attached to a specific user account. Examples\ninclude: unlocking encrypted hard disks when they are\nplugged in or at boot, entering an SSL certificate\npassphrase for web and VPN servers.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Existing agents\nare:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&bull; A\nboot-time password agent asking the user for passwords using\n<b>plymouth</b>(8),</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&bull; A\nboot-time password agent querying the user directly on the\nconsole &mdash;\n<b>systemd-ask-password-console.service</b>(8),</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&bull; An agent\nrequesting password input via a <a href=\"https://man.page/1/wall\">wall(1)</a> message\n&mdash; <b>systemd-ask-password-wall.service</b>(8),</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&bull; A TTY\nagent that is temporarily spawned during <a href=\"https://man.page/1/systemctl\">systemctl(1)</a>\ninvocations,</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&bull; A\ncommand line agent which can be started temporarily to\nprocess queued password requests &mdash;\n<b>systemd-tty-ask-password-agent --query</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Answering\nsystem-wide password queries is a privileged operation,\nhence all the agents listed above (except for the last one),\nrun as privileged system services. The last one also needs\nelevated privileges, so should be run through <b>sudo</b>(8)\nor similar.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Additional\npassword agents may be implemented according to the\n<b><font color=\"#0000FF\">systemd Password Agent\nSpecification</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n<font color=\"#000000\">.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">If\na password is queried on a TTY, the user may press TAB to\nhide the asterisks normally shown for each character typed.\nPressing Backspace as first key achieves the same\neffect.</font></p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nfollowing options are understood:</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--icon=</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Specify\nan icon name alongside the password query, which may be used\nin all agents supporting graphical display. The icon name\nshould follow the</font> <b><font color=\"#0000FF\">XDG Icon\nNaming Specification</font></b>\n<small><font color=\"#000000\">[2]</font></small>\n<font color=\"#000000\">.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--id=</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Specify\nan identifier for this password query. This identifier is\nfreely choosable and allows recognition of queries by\ninvolved agents. It should include the subsystem doing the\nquery and the specific object the query is done for.\nExample: &quot;--id=cryptsetup:/dev/sda5&quot;.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--keyname=</b></font></p>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Configure\na kernel keyring key name to use as cache for the password.\nIf set, then the tool will try to push any collected\npasswords into the kernel keyring of the root user, as a key\nof the specified name. If combined with\n<b>--accept-cached</b>, it will also try to retrieve such\ncached passwords from the key in the kernel keyring instead\nof querying the user right away. By using this option, the\nkernel keyring may be used as effective cache to avoid\nrepeatedly asking users for passwords, if there are multiple\nobjects that may be unlocked with the same password. The\ncached key will have a timeout of 2.5min set, after which it\nwill be purged from the kernel keyring. Note that it is\npossible to cache multiple passwords under the same keyname,\nin which case they will be stored as <b>NUL</b>-separated\nlist of passwords. Use <a href=\"https://man.page/1/keyctl\">keyctl(1)</a> to access the cached\nkey via the kernel keyring directly. Example:\n&quot;--keyname=cryptsetup&quot;</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--credential=</b></font></p>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Configure\na credential to read the password from &ndash; if it exists.\nThis may be used in conjunction with the\n<i>LoadCredential=</i> and <i>SetCredential=</i> settings in\nunit files. See <b>systemd.exec</b>(5) for details. If not\nspecified, defaults to &quot;password&quot;. This option has\nno effect if no credentials directory is passed to the\nprogram (i.e. <i>$CREDENTIALS_DIRECTORY</i> is not set) or\nif the no credential of the specified name\nexists.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--timeout=</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Specify\nthe query timeout in seconds. Defaults to 90s. A timeout of\n0 waits indefinitely.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--echo=yes|no|masked</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Controls\nwhether to echo user input. Takes a boolean or the special\nstring &quot;masked&quot;, the default being the latter. If\nenabled the typed characters are echoed literally, which is\nuseful for prompting for usernames and other non-protected\ndata. If disabled the typed characters are not echoed in any\nform, the user will not get feedback on their input. If set\nto &quot;masked&quot;, an asterisk (&quot;*&quot;) is echoed\nfor each character typed. In this mode, if the user hits the\ntabulator key (&quot;&acirc;&sup1;&quot;), echo is turned\noff. (Alternatively, if the user hits the backspace key\n(&quot;&acirc;&laquo;&quot;) while no data has been entered\notherwise, echo is turned off, too).</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--echo</b>,\n<b>-e</b></font></p>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Equivalent\nto <b>--echo=yes</b>, see above.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--emoji=yes|no|auto</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Controls\nwhether or not to prefix the query with a lock and key emoji\n(&eth;), if the TTY settings permit this. The default is\n&quot;auto&quot;, which defaults to &quot;yes&quot;, unless\n<b>--echo=yes</b> is given.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--no-tty</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Never ask\nfor password on current TTY even if one is available. Always\nuse agent system.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--accept-cached</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If\npassed, accept cached passwords, i.e. passwords previously\nentered.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--multiple</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">When used\nin conjunction with <b>--accept-cached</b> accept multiple\npasswords. This will output one password per\nline.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>--no-output</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Do not\nprint passwords to standard output. This is useful if you\nwant to store a password in kernel keyring with\n<b>--keyname=</b> but do not want it to show up on screen or\nin logs.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>-n</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">By\ndefault, when writing the acquired password to standard\noutput it is suffixed by a newline character. This may be\nturned off with the <b>-n</b> switch, similar to the switch\nof the same name of the <a href=\"https://man.page/1/echo\">echo(1)</a> command.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>-h</b>,\n<b>--help</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Print a\nshort help text and exit.</font></p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">On\nsuccess, 0 is returned, a non-zero failure code\notherwise.</font></p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><a href=\"https://man.page/1/systemd\">systemd(1)</a>,\n<b>systemd-ask-password-console.service</b>(8),\n<a href=\"https://man.page/1/systemd-tty-ask-password-agent\">systemd-tty-ask-password-agent(1)</a>, <a href=\"https://man.page/1/keyctl\">keyctl(1)</a>,\n<b>plymouth</b>(8), <a href=\"https://man.page/1/wall\">wall(1)</a></font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"55%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">systemd\nPassword Agent Specification</font></p></td>\n<td width=\"28%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://systemd.io/PASSWORD_AGENTS/</font></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">2.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"45%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">XDG Icon\nNaming Specification</font></p></td>\n<td width=\"38%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#NOTES\">NOTES</a>"]}