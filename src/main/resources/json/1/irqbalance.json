{"name":"irqbalance","description":"irqbalance - distribute hardware interrupts across processors on a multiprocessor system","body":"\n\n<h1 align=\"center\">IRQBALANCE</h1>\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">irqbalance -\ndistribute hardware interrupts across processors on a\nmultiprocessor system</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>irqbalance</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The purpose of\n<b>irqbalance</b> is to distribute hardware interrupts\nacross processors on a multiprocessor system in order to\nincrease performance.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-o,\n--oneshot</b></p>\n\n<p style=\"margin-left:22%;\">Causes irqbalance to be run\nonce, after which the daemon exits.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-d,\n--debug</b></p>\n\n<p style=\"margin-left:22%;\">Causes irqbalance to print\nextra debug information. Implies --foreground.</p>\n\n<p style=\"margin-left:11%;\"><b>-f, --foreground</b></p>\n\n<p style=\"margin-left:22%;\">Causes irqbalance to run in the\nforeground (without --debug).</p>\n\n<p style=\"margin-left:11%;\"><b>-j, --journal</b></p>\n\n<p style=\"margin-left:22%;\">Enables log output optimized\nfor systemd-journal.</p>\n\n<p style=\"margin-left:11%;\"><b>-p,\n--powerthresh=&lt;threshold&gt;</b></p>\n\n<p style=\"margin-left:22%;\">Set the threshold at which we\nattempt to move a CPU into powersave mode If more than\n&lt;threshold&gt; CPUs are more than 1 standard deviation\nbelow the average CPU softirq workload, and no CPUs are more\nthan 1 standard deviation above (and have more than 1 IRQ\nassigned to them), attempt to place 1 CPU in powersave mode.\nIn powersave mode, a CPU will not have any IRQs balanced to\nit, in an effort to prevent that CPU from waking up without\nneed.</p>\n\n<p style=\"margin-left:11%;\"><b>-i,\n--banirq=&lt;irqnum&gt;</b></p>\n\n<p style=\"margin-left:22%;\">Add the specified IRQ to the\nset of banned IRQs. irqbalance will not affect the affinity\nof any IRQs on the banned list, allowing them to be\nspecified manually. This option is additive and can be\nspecified multiple times. For example to ban IRQs 43 and 44\nfrom balancing, use the following command line:\n<b>irqbalance --banirq=43 --banirq=44</b></p>\n\n<p style=\"margin-left:11%;\"><b>-m,\n--banmod=&lt;module_name&gt;</b></p>\n\n<p style=\"margin-left:22%;\">Add the specified module to the\nset of banned modules, similar to --banirq. irqbalance will\nnot affect the affinity of any IRQs of given modules,\nallowing them to be specified manually. This option is\nadditive and can be specified multiple times. For example to\nban all IRQs of module foo and module bar from balancing,\nuse the following command line: <b>irqbalance --banmod=foo\n--banmod=bar</b></p>\n\n<p style=\"margin-left:11%;\"><b>-c,\n--deepestcache=&lt;integer&gt;</b></p>\n\n<p style=\"margin-left:22%;\">This allows a user to specify\nthe cache level at which irqbalance partitions cache\ndomains. Specifying a deeper cache may allow a greater\ndegree of flexibility for irqbalance to assign IRQ affinity\nto achieve greater performance increases, but setting a\ncache depth too large on some systems (specifically where\nall CPUs on a system share the deepest cache level), will\ncause irqbalance to see balancing as unnecessary.\n<b>irqbalance --deepestcache=2</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The default\nvalue for deepestcache is 2. <b><br>\n-l, --policyscript=&lt;script&gt;</b></p>\n\n<p style=\"margin-left:22%;\">When specified, the referenced\nscript or directory will execute once for each discovered\nIRQ, with the sysfs device path and IRQ number passed as\narguments. Note that the device path argument will point to\nthe parent directory from which the IRQ attributes directory\nmay be directly opened. Policy scripts specified need to be\nowned and executable by the user of irqbalance process, if a\ndirectory is specified, non-executable files will be\nskipped. The script may specify zero or more key=value pairs\nthat will guide irqbalance in the management of that IRQ.\nKey=value pairs are printed by the script on stdout and will\nbe captured and interpreted by irqbalance. Irqbalance\nexpects a zero exit code from the provided utility.\nRecognized key=value pairs are:</p>\n\n<p style=\"margin-left:11%;\"><i>ban=[true | false]</i></p>\n\n<p style=\"margin-left:22%;\">Directs irqbalance to exclude\nthe passed in IRQ from balancing.</p>\n\n<p style=\"margin-left:11%;\"><i>balance_level=[none |\npackage | cache | core]</i></p>\n\n<p style=\"margin-left:22%;\">This allows a user to override\nthe balance level of a given IRQ. By default the balance\nlevel is determined automatically based on the pci device\nclass of the device that owns the IRQ.</p>\n\n\n<p style=\"margin-left:11%;\"><i>numa_node=&lt;integer&gt;</i></p>\n\n<p style=\"margin-left:22%;\">This allows a user to override\nthe NUMA node that sysfs indicates a given device IRQ is\nlocal to. Often, systems will not specify this information\nin ACPI, and as a result devices are considered equidistant\nfrom all NUMA nodes in a system. This option allows for that\nhardware provided information to be overridden, so that\nirqbalance can bias IRQ affinity for these devices toward\nits most local node. Note that specifying a -1 here forces\nirqbalance to consider an interrupt from a device to be\nequidistant from all nodes.</p>\n\n<p style=\"margin-left:11%;\">Note that, if a directory is\nspecified rather than a regular file, all <br>\nfiles in</p>\n\n<p style=\"margin-left:22%;\">the directory will be\nconsidered policy scripts, and executed on adding of an irq\nto a database. If such a directory is specified, scripts in\nthe directory must additionally exit with one of the\nfollowing exit codes:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><i>0</i></p></td>\n<td width=\"10%\"></td>\n<td width=\"78%\">\n\n\n<p>This indicates the script has a policy for the\nreferenced irq, and that further script processing should\nstop</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><i>1</i></p></td>\n<td width=\"10%\"></td>\n<td width=\"78%\">\n\n\n<p>This indicates that the script has no policy for the\nreferenced irq, and that script processing should\ncontinue</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><i>2</i></p></td>\n<td width=\"10%\"></td>\n<td width=\"78%\">\n\n\n<p>This indicates that an error has occurred in the script,\nand it should be skipped (further processing to\ncontinue)</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>-s,\n--pid=&lt;file&gt;</b></p>\n\n<p style=\"margin-left:22%;\">Have irqbalance write its\nprocess id to the specified file. By default no pidfile is\nwritten. The written pidfile is automatically unlinked when\nirqbalance exits. It is ignored when used with --debug or\n--foreground.</p>\n\n<p style=\"margin-left:11%;\"><b>-t,\n--interval=&lt;time&gt;</b></p>\n\n<p style=\"margin-left:22%;\">Set the measurement time for\nirqbalance. irqbalance will sleep for &lt;time&gt; seconds\nbetween samples of the irq load on the system cpus. Defaults\nto 10.</p>\n\n<h2>ENVIRONMENT VARIABLES\n<a name=\"ENVIRONMENT VARIABLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>IRQBALANCE_ONESHOT</b></p>\n\n<p style=\"margin-left:22%;\">Same as --oneshot.</p>\n\n<p style=\"margin-left:11%;\"><b>IRQBALANCE_DEBUG</b></p>\n\n<p style=\"margin-left:22%;\">Same as --debug.</p>\n\n\n<p style=\"margin-left:11%;\"><b>IRQBALANCE_BANNED_CPUS</b></p>\n\n<p style=\"margin-left:22%;\">Provides a mask of CPUs which\nirqbalance should ignore and never assign interrupts to. If\nnot specified, irqbalance use mask of isolated and\nadaptive-ticks CPUs on the system as the default value. This\nis a hexmask without the leading &acirc;0x&acirc;. On\nsystems with large numbers of processors, each group of\neight hex digits is separated by a comma &acirc;,&acirc;.\ni.e. &acirc;export IRQBALANCE_BANNED_CPUS=fc0&acirc; would\nprevent irqbalance from assigning irqs to the 7th-12th cpus\n(cpu6-cpu11) or &acirc;export\nIRQBALANCE_BANNED_CPUS=ff000000,00000001&acirc; would\nprevent irqbalance from assigning irqs to the 1st (cpu0) and\n57th-64th cpus (cpu56-cpu63). Notes: This environment\nvariable will be discarded, please use\nIRQBALANCE_BANNED_CPULIST instead. Before deleting this\nenvironment variable, Introduce a deprecation period first\nfor the consider of compatibility.</p>\n\n\n<p style=\"margin-left:11%;\"><b>IRQBALANCE_BANNED_CPULIST</b></p>\n\n<p style=\"margin-left:22%;\">Provides a cpulist which\nirqbalance should ignore and never assign interrupts to. If\nnot specified, irqbalance use mask of isolated and\nadaptive-ticks CPUs on the system as the default value.</p>\n\n<h2>SIGNALS\n<a name=\"SIGNALS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>SIGHUP</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">Forces a rescan of the available\nIRQs and system topology.</p></td></tr>\n</table>\n\n<h2>API\n<a name=\"API\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">irqbalance is\nable to communicate via socket and return it&rsquo;s current\nassignment tree and setup, as well as set new settings based\non sent values. Socket is abstract, with a name in form of\n<b>irqbalance&lt;PID&gt;.sock</b> , where &lt;PID&gt; is the\nprocess ID of irqbalance instance to communicate with.\nPossible values to send:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p style=\"margin-top: 1em\"><b>stats</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">Retrieve assignment tree of IRQs\nto CPUs, in recursive manner. For each CPU node in tree,\nit&rsquo;s type, number, load and whether the save mode is\nactive are sent. For each assigned IRQ type, it&rsquo;s\nnumber, load, number of IRQs since last rebalancing and\nit&rsquo;s class are sent. Refer to types.h file for\nexplanation of defines.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>setup</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>Get the current value of sleep interval, mask of banned\nCPUs and list of banned IRQs.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>settings sleep\n&lt;s&gt;</b></p>\n\n<p style=\"margin-left:22%;\">Set new value of sleep\ninterval, &lt;s&gt; &gt;= 1.</p>\n\n<p style=\"margin-left:11%;\"><b>settings cpus\n&lt;cpu_number1&gt; &lt;cpu_number2&gt; ...</b></p>\n\n<p style=\"margin-left:22%;\">Ban listed CPUs from IRQ\nhandling, all old values of banned CPUs are forgotten.</p>\n\n<p style=\"margin-left:11%;\"><b>settings ban irqs\n&lt;irq1&gt; &lt;irq2&gt; ...</b></p>\n\n<p style=\"margin-left:22%;\">Ban listed IRQs from being\nbalanced, all old values of banned IRQs are forgotten.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">irqbalance\nchecks SCM_CREDENTIALS of sender (only root user is allowed\nto interact). Based on chosen tools, ancillary message with\ncredentials needs to be sent with request.</p>\n\n<h2>HOMEPAGE\n<a name=\"HOMEPAGE\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">https://github.com/Irqbalance/irqbalance</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#ENVIRONMENT VARIABLES\">ENVIRONMENT VARIABLES</a>","<a href=\"#SIGNALS\">SIGNALS</a>","<a href=\"#API\">API</a>","<a href=\"#HOMEPAGE\">HOMEPAGE</a>"]}