{"name":"su","description":"su - run a command with substitute user and group ID","body":"\n\n<h1 align=\"center\">SU</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">su - run a\ncommand with substitute user and group ID</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>su</b>\n[options] [<b>-</b>] [<i>user</i> [<i>argument</i>...]]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>su</b>\nallows commands to be run with a substitute user and group\nID.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When called\nwith no <i>user</i> specified, <b>su</b> defaults to running\nan interactive shell as <i>root</i>. When <i>user</i> is\nspecified, additional <i>argument</i>s can be supplied, in\nwhich case they are passed to the shell.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For backward\ncompatibility, <b>su</b> defaults to not change the current\ndirectory and to only set the environment variables\n<b>HOME</b> and <b>SHELL</b> (plus <b>USER</b> and\n<b>LOGNAME</b> if the target <i>user</i> is not root). It is\nrecommended to always use the <b>--login</b> option (instead\nof its shortcut <b>-</b>) to avoid side effects caused by\nmixing environments.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This version of\n<b>su</b> uses PAM for authentication, account and session\nmanagement. Some configuration options found in other\n<b>su</b> implementations, such as support for a wheel\ngroup, have to be configured via PAM.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>su</b> is\nmostly designed for unprivileged users, the recommended\nsolution for privileged users (e.g., scripts executed by\nroot) is to use non-set-user-ID command <a href=\"https://man.page/1/runuser\">runuser(1)</a>\nthat does not require authentication and provides separate\nPAM configuration. If the PAM session is not required at all\nthen the recommended solution is to use command\n<a href=\"https://man.page/1/setpriv\">setpriv(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\n<b>su</b> in all cases uses PAM (<a href=\"https://man.page/3/pam_getenvlist\">pam_getenvlist(3)</a>)\nto do the final environment modification. Command-line\noptions such as <b>--login</b> and\n<b>--preserve-environment</b> affect the environment before\nit is modified by PAM.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-c</b>,\n<b>--command</b>=<i>command</i></p>\n\n<p style=\"margin-left:17%;\">Pass <i>command</i> to the\nshell with the <b>-c</b> option.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-f</b>,\n<b>--fast</b></p>\n\n<p style=\"margin-left:17%;\">Pass <b>-f</b> to the shell,\nwhich may or may not be useful, depending on the shell.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-g</b>,\n<b>--group</b>=<i>group</i></p>\n\n<p style=\"margin-left:17%;\">Specify the primary group. This\noption is available to the root user only.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-G</b>,\n<b>--supp-group</b>=<i>group</i></p>\n\n<p style=\"margin-left:17%;\">Specify a supplementary group.\nThis option is available to the root user only. The first\nspecified supplementary group is also used as a primary\ngroup if the option <b>--group</b> is not specified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-</b>,\n<b>-l</b>, <b>--login</b></p>\n\n<p style=\"margin-left:17%;\">Start the shell as a login\nshell with an environment similar to a real login:</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; clears\nall the environment variables except <b>TERM</b> and\nvariables specified by <b>--whitelist-environment</b></p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull;\ninitializes the environment variables <b>HOME</b>,\n<b>SHELL</b>, <b>USER</b>, <b>LOGNAME</b>, and\n<b>PATH</b></p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; changes\nto the target user&rsquo;s home directory</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; sets\nargv[0] of the shell to '<b>-</b>' in order to make the\nshell a login shell</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-m</b>,\n<b>-p</b>, <b>--preserve-environment</b></p>\n\n<p style=\"margin-left:17%;\">Preserve the entire\nenvironment, i.e., do not set <b>HOME</b>, <b>SHELL</b>,\n<b>USER</b> or <b>LOGNAME</b>. This option is ignored if the\noption <b>--login</b> is specified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-P</b>,\n<b>--pty</b></p>\n\n<p style=\"margin-left:17%;\">Create a pseudo-terminal for\nthe session. The independent terminal provides better\nsecurity as the user does not share a terminal with the\noriginal session. This can be used to avoid TIOCSTI ioctl\nterminal injection and other security attacks against\nterminal file descriptors. The entire session can also be\nmoved to the background (e.g., &quot;su --pty - username -c\napplication &amp;&quot;). If the pseudo-terminal is enabled,\nthen <b>su</b> works as a proxy between the sessions (copy\nstdin and stdout).</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">This feature is\nmostly designed for interactive sessions. If the standard\ninput is not a terminal, but for example a pipe (e.g., echo\n&quot;date&quot; | su --pty), then the ECHO flag for the\npseudo-terminal is disabled to avoid messy output.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-s</b>,\n<b>--shell</b>=<i>shell</i></p>\n\n<p style=\"margin-left:17%;\">Run the specified <i>shell</i>\ninstead of the default. The shell to run is selected\naccording to the following rules, in order:</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; the\nshell specified with <b>--shell</b></p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; the\nshell specified in the environment variable <b>SHELL</b>, if\nthe <b>--preserve-environment</b> option is used</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull; the\nshell listed in the passwd entry of the target user</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">&bull;\n/bin/sh</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the target\nuser has a restricted shell (i.e., not listed in\n/etc/shells), the <b>--shell</b> option and the <b>SHELL</b>\nenvironment variables are ignored unless the calling user is\nroot.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>--session-command=</b><i>command</i></p>\n\n<p style=\"margin-left:17%;\">Same as <b>-c</b>, but do not\ncreate a new session. (Discouraged.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-w</b>,\n<b>--whitelist-environment</b>=<i>list</i></p>\n\n<p style=\"margin-left:17%;\">Don&rsquo;t reset the\nenvironment variables specified in the comma-separated\n<i>list</i> when clearing the environment for\n<b>--login</b>. The whitelist is ignored for the environment\nvariables <b>HOME</b>, <b>SHELL</b>, <b>USER</b>,\n<b>LOGNAME</b>, and <b>PATH</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-V</b>,\n<b>--version</b></p>\n\n<p style=\"margin-left:17%;\">Display version information and\nexit.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-h</b>,\n<b>--help</b></p>\n\n<p style=\"margin-left:17%;\">Display help text and exit.</p>\n\n<h2>SIGNALS\n<a name=\"SIGNALS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Upon receiving\neither <b>SIGINT</b>, <b>SIGQUIT</b> or <b>SIGTERM</b>,\n<b>su</b> terminates its child and afterwards terminates\nitself with the received signal. The child is terminated by\n<b>SIGTERM</b>, after unsuccessful attempt and 2 seconds of\ndelay the child is killed by <b>SIGKILL</b>.</p>\n\n<h2>CONFIG FILES\n<a name=\"CONFIG FILES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>su</b> reads\nthe <i>/etc/default/su</i> and <i>/etc/login.defs</i>\nconfiguration files. The following configuration items are\nrelevant for <b>su:</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>FAIL_DELAY</b>\n(number)</p>\n\n<p style=\"margin-left:17%;\">Delay in seconds in case of an\nauthentication failure. The number must be a non-negative\ninteger.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ENV_PATH</b>\n(string)</p>\n\n<p style=\"margin-left:17%;\">Defines the <b>PATH</b>\nenvironment variable for a regular user. The default value\nis <i>/usr/local/bin:/bin:/usr/bin</i>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ENV_ROOTPATH</b>\n(string), <b>ENV_SUPATH</b> (string)</p>\n\n<p style=\"margin-left:17%;\">Defines the <b>PATH</b>\nenvironment variable for root. <b>ENV_SUPATH</b> takes\nprecedence. The default value is\n<i>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</i>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ALWAYS_SET_PATH</b>\n(boolean)</p>\n\n<p style=\"margin-left:17%;\">If set to <i>yes</i> and\n<b>--login</b> and <b>--preserve-environment</b> were not\nspecified <b>su</b> initializes <b>PATH</b>.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The environment\nvariable <b>PATH</b> may be different on systems where\n<i>/bin</i> and <i>/sbin</i> are merged into <i>/usr</i>;\nthis variable is also affected by the <b>--login</b>\ncommand-line option and the PAM system setting (e.g.,\n<b>pam_env</b>(8)).</p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>su</b>\nnormally returns the exit status of the command it executed.\nIf the command was killed by a signal, <b>su</b> returns the\nnumber of the signal plus 128.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Exit status\ngenerated by <b>su</b> itself:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">1</p>\n\n<p style=\"margin-left:17%;\">Generic error before executing\nthe requested command</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">126</p>\n\n<p style=\"margin-left:17%;\">The requested command could not\nbe executed</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">127</p>\n\n<p style=\"margin-left:17%;\">The requested command was not\nfound</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/pam.d/su</i></p>\n\n<p style=\"margin-left:17%;\">default PAM configuration\nfile</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/pam.d/su-l</i></p>\n\n<p style=\"margin-left:17%;\">PAM configuration file if\n<b>--login</b> is specified</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/default/su</i></p>\n\n<p style=\"margin-left:17%;\">command specific logindef\nconfig file</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/login.defs</i></p>\n\n<p style=\"margin-left:17%;\">global logindef config file</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For security\nreasons, <b>su</b> always logs failed log-in attempts to the\nbtmp file, but it does not write to the <i>lastlog</i> file\nat all. This solution can be used to control <b>su</b>\nbehavior by PAM configuration. If you want to use the\n<b>pam_lastlog</b>(8) module to print warning message about\nfailed log-in attempts then <b>pam_lastlog</b>(8) has to be\nconfigured to update the <i>lastlog</i> file as well. For\nexample by:</p>\n\n<p style=\"margin-left:15%; margin-top: 1em\">session\nrequired pam_lastlog.so nowtmp</p>\n\n<h2>HISTORY\n<a name=\"HISTORY\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This <b>su</b>\ncommand was derived from coreutils' <b>su</b>, which was\nbased on an implementation by David MacKenzie. The\nutil-linux version has been refactored by Karel Zak.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/setpriv\">setpriv(1)</a>,\n<b>login.defs</b>(5), <a href=\"https://man.page/5/shells\">shells(5)</a>, <b>pam</b>(8),\n<a href=\"https://man.page/1/runuser\">runuser(1)</a></p>\n\n<h2>REPORTING BUGS\n<a name=\"REPORTING BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For bug\nreports, use the issue tracker at\n&lt;https://github.com/karelzak/util-linux/issues&gt;.</p>\n\n<h2>AVAILABILITY\n<a name=\"AVAILABILITY\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <b>su</b>\ncommand is part of the util-linux package which can be\ndownloaded from <i>Linux Kernel Archive</i>\n&lt;https://www.kernel.org/pub/linux/utils/util-linux/&gt;.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#SIGNALS\">SIGNALS</a>","<a href=\"#CONFIG FILES\">CONFIG FILES</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#HISTORY\">HISTORY</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#REPORTING BUGS\">REPORTING BUGS</a>","<a href=\"#AVAILABILITY\">AVAILABILITY</a>"]}