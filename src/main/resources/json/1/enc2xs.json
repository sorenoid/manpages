{"name":"enc2xs","description":"enc2xs -- Perl Encode Module Generator","body":"\n\n<h1 align=\"center\">ENC2XS</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">enc2xs -- Perl\nEncode Module Generator</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">enc2xs\n-[options] <br>\nenc2xs -M ModName mapfiles... <br>\nenc2xs -C</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>enc2xs</i>\nbuilds a Perl extension for use by Encode from either\nUnicode Character Mapping files (.ucm) or Tcl Encoding Files\n(.enc). Besides being used internally during the build\nprocess of the Encode module, you can use <i>enc2xs</i> to\nadd your own encoding to perl. No knowledge of\n<small>XS</small> is necessary.</p>\n\n<h2>Quick Guide\n<a name=\"Quick Guide\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you want to\nknow as little about Perl as possible but need to add a new\nencoding, just read this chapter and forget the rest.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>0.</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>Have a .ucm file ready. You can get it from somewhere or\nyou can write your own from scratch or you can grab one from\nthe Encode distribution and customize it. For the\n<small>UCM</small> format, see the next Chapter. In the\nexample below, I&rsquo;ll call my theoretical encoding\nmyascii, defined in <i>my.ucm</i>. &quot;$&quot; is a shell\nprompt.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ ls -F <br>\nmy.ucm</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p style=\"margin-top: 1em\">1.</p></td>\n<td width=\"3%\"></td>\n<td width=\"41%\">\n\n\n<p style=\"margin-top: 1em\">Issue a command as follows;</p></td>\n<td width=\"42%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ enc2xs -M My\nmy.ucm <br>\ngenerating Makefile.PL <br>\ngenerating My.pm <br>\ngenerating README <br>\ngenerating Changes</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Now take a look\nat your current directory. It should look like this.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ ls -F <br>\nMakefile.PL My.pm my.ucm t/</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The following\nfiles were created.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Makefile.PL -\nMakeMaker script <br>\nMy.pm - Encode submodule <br>\nt/My.t - test file <br>\n1.1.</p>\n\n<p style=\"margin-left:23%;\">If you want *.ucm installed\ntogether with the modules, do as follows;</p>\n\n<p style=\"margin-left:23%; margin-top: 1em\">$ mkdir Encode\n<br>\n$ mv *.ucm Encode <br>\n$ enc2xs -M My Encode/*ucm</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>2.</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>Edit the files generated. You don&rsquo;t have to if you\nhave no time <small>AND</small> no intention to give it to\nsomeone else. But it is a good idea to edit the pod and to\nadd more tests.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>3.</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>Now issue a command all Perl Mongers love:</p></td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ perl\nMakefile.PL <br>\nWriting Makefile for Encode::My</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p style=\"margin-top: 1em\">4.</p></td>\n<td width=\"3%\"></td>\n<td width=\"48%\">\n\n\n<p style=\"margin-top: 1em\">Now all you have to do is\nmake.</p> </td>\n<td width=\"35%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ make <br>\ncp My.pm blib/lib/Encode/My.pm <br>\n/usr/local/bin/perl /usr/local/bin/enc2xs -Q -O \\ <br>\n-o encode_t.c -f encode_t.fnm <br>\nReading myascii (myascii) <br>\nWriting compiled form <br>\n128 bytes in string tables <br>\n384 bytes (75%) saved spotting duplicates <br>\n1 bytes (0.775%) saved using substrings <br>\n.... <br>\nchmod 644 blib/arch/auto/Encode/My/My.bs <br>\n$</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The time it\ntakes varies depending on how fast your machine is and how\nlarge your encoding is. Unless you are working on something\nbig like euc-tw, it won&rsquo;t take too long.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p style=\"margin-top: 1em\">5.</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">You can &quot;make install&quot;\nalready but you should test first.</p></td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ make test\n<br>\nPERL_DL_NONLAZY=1 /usr/local/bin/perl -Iblib/arch -Iblib/lib\n\\ <br>\n-e 'use Test::Harness qw(&amp;runtests $verbose); \\ <br>\n$verbose=0; runtests @ARGV;' t/*.t <br>\nt/My....ok <br>\nAll tests successful. <br>\nFiles=1, Tests=2, 0 wallclock secs <br>\n( 0.09 cusr + 0.01 csys = 0.09 CPU)</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p style=\"margin-top: 1em\">6.</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">If you are content with the test\nresult, just &quot;make install&quot;</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>7.</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>If you want to add your encoding to Encode&rsquo;s\ndemand-loading list (so you don&rsquo;t have to &quot;use\nEncode::YourEncoding&quot;), run</p></td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">enc2xs -C</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">to update\nEncode::ConfigLocal, a module that controls local settings.\nAfter that, &quot;use Encode;&quot; is enough to load your\nencodings on demand.</p>\n\n<h2>The Unicode Character Map\n<a name=\"The Unicode Character Map\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Encode uses the\nUnicode Character Map ( <small>UCM</small> ) format for\nsource character mappings. This format is used by\n<small>IBM</small> &rsquo;s <small>ICU</small> package and\nwas adopted by Nick Ing-Simmons for use with the Encode\nmodule. Since <small>UCM</small> is more flexible than\nTcl&rsquo;s Encoding Map and far more user-friendly, this is\nthe recommended format for Encode now.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A\n<small>UCM</small> file looks like this.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"># <br>\n# Comments <br>\n# <br>\n&lt;code_set_name&gt; &quot;US-ascii&quot; # Required <br>\n&lt;code_set_alias&gt; &quot;ascii&quot; # Optional <br>\n&lt;mb_cur_min&gt; 1 # Required; usually 1 <br>\n&lt;mb_cur_max&gt; 1 # Max. # of bytes/char <br>\n&lt;subchar&gt; \\x3F # Substitution char <br>\n# <br>\nCHARMAP <br>\n&lt;U0000&gt; \\x00 |0 # &lt;control&gt; <br>\n&lt;U0001&gt; \\x01 |0 # &lt;control&gt; <br>\n&lt;U0002&gt; \\x02 |0 # &lt;control&gt; <br>\n.... <br>\n&lt;U007C&gt; \\x7C |0 # VERTICAL LINE <br>\n&lt;U007D&gt; \\x7D |0 # RIGHT CURLY BRACKET <br>\n&lt;U007E&gt; \\x7E |0 # TILDE <br>\n&lt;U007F&gt; \\x7F |0 # &lt;control&gt; <br>\nEND CHARMAP</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">Anything that follows\n&quot;#&quot; is treated as a comment.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>The header section continues until a line containing the\nword <small>CHARMAP.</small> This section has a form of\n<i>&lt;keyword&gt; value</i>, one pair per line. Strings\nused as values must be quoted. Barewords are treated as\nnumbers. <i>\\xXX</i> represents a byte.</p></td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Most of the\nkeywords are self-explanatory. <i>subchar</i> means\nsubstitution character, not subcharacter. When you decode a\nUnicode sequence to this encoding but no matching character\nis found, the byte sequence defined here will be used. For\nmost cases, the value here is \\x3F; in <small>ASCII,</small>\nthis is a question mark.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\"><small>CHARMAP</small> starts\nthe character map section. Each line has a form as\nfollows:</p> </td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&lt;UXXXX&gt;\n\\xXX.. |0 # comment <br>\n^ ^ ^ <br>\n| | +- Fallback flag <br>\n| +-------- Encoded byte sequence <br>\n+-------------- Unicode Character ID in hex</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The format is\nroughly the same as a header section except for the fallback\nflag: | followed by 0..3. The meaning of the possible values\nis as follows:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\">|0</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p style=\"margin-top: 1em\">Round trip safe. A character\ndecoded to Unicode encodes back to the same byte sequence.\nMost characters have this flag.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p>|1</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>Fallback for unicode -&gt; encoding. When seen, enc2xs\nadds this character for the encode map only.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p>|2</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>Skip sub-char mapping should there be no code point.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p>|3</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>Fallback for encoding -&gt; unicode. When seen, enc2xs\nadds this character for the decode map only.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p>&bull;</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:17%; margin-top: 1em\">And finally,\n<small>END OF CHARMAP</small> ends the section.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When you are\nmanually creating a <small>UCM</small> file, you should copy\nascii.ucm or an existing encoding which is close to yours,\nrather than write your own from scratch.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When you do so,\nmake sure you leave at least <b>U0000</b> to <b>U0020</b> as\nis, unless your environment is <small>EBCDIC.</small></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><small><b>CAVEAT</b></small>\n: not all features in <small>UCM</small> are implemented.\nFor example, icu:state is not used. Because of that, you\nneed to write a perl module if you want to support\nalgorithmical encodings, notably the <small>ISO-2022</small>\nseries. Such modules include Encode::JP::2022_JP,\nEncode::KR::2022_KR, and Encode::TW::HZ.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Coping with\nduplicate mappings</b> <br>\nWhen you create a map, you <small>SHOULD</small> make your\nmappings round-trip safe. That is,\n&quot;encode('your-encoding', decode('your-encoding',\n$data)) eq $data&quot; stands for all characters that are\nmarked as &quot;|0&quot;. Here is how to make sure:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">Sort your map in Unicode\norder.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>When you have a duplicate entry, mark either one with\n&rsquo;|1&rsquo; or &rsquo;|3&rsquo;.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>And make sure the &rsquo;|1&rsquo; or &rsquo;|3&rsquo;\nentry <small>FOLLOWS</small> the &rsquo;|0&rsquo; entry.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Here is an\nexample from big5-eten.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">&lt;U2550&gt;\n\\xF9\\xF9 |0 <br>\n&lt;U2550&gt; \\xA2\\xA4 |3</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Internally\nEncoding -&gt; Unicode and Unicode -&gt; Encoding Map looks\nlike this;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">E to U U to E\n<br>\n-------------------------------------- <br>\n\\xF9\\xF9 =&gt; U2550 U2550 =&gt; \\xF9\\xF9 <br>\n\\xA2\\xA4 =&gt; U2550</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">So it is\nround-trip safe for \\xF9\\xF9. But if the line above is\nupside down, here is what happens.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">E to U U to E\n<br>\n-------------------------------------- <br>\n\\xA2\\xA4 =&gt; U2550 U2550 =&gt; \\xF9\\xF9 <br>\n(\\xF9\\xF9 =&gt; U2550 is now overwritten!)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The Encode\npackage comes with <i>ucmlint</i>, a crude but sufficient\nutility to check the integrity of a <small>UCM</small> file.\nCheck under the Encode/bin directory for this.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When in doubt,\nyou can use <i>ucmsort</i>, yet another utility under\nEncode/bin directory.</p>\n\n<h2>Bookmarks\n<a name=\"Bookmarks\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\"><small>ICU</small> Home Page\n&lt;http://www.icu-project.org/&gt;</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p><small>ICU</small> Character Mapping Tables\n&lt;http://site.icu-project.org/charts/charset&gt;</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>ICU:Conversion Data\n&lt;http://www.icu-project.org/userguide/conversion-data.html&gt;</p> </td></tr>\n</table>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Encode,\nperlmod, perlpod</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#Quick Guide\">Quick Guide</a>","<a href=\"#The Unicode Character Map\">The Unicode Character Map</a>","<a href=\"#Bookmarks\">Bookmarks</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"]}