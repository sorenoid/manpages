{"name":"rstartd","description":"rstartd - a sample implementation of a Remote Start rsh helper","body":"\n\n<h1 align=\"center\">RSTARTD</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">rstartd - a\nsample implementation of a Remote Start rsh helper</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>rstartd</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>rstartd.real</b>\n[-c <i>configfilename</i>]</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nis an implementation of a Remote Start &quot;helper&quot; as\ndefined in &quot;A Flexible Remote Execution Protocol Based\non <b>rsh</b>&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This document\ndescribes the peculiarities of <i>rstartd</i> and how it is\nconfigured.</p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>-c</b>\n<i>configfilename</i></p>\n\n<p style=\"margin-left:23%;\">This option specifies the\n&quot;global&quot; configuration file that <i>rstartd</i> is\nto read. Normally, <i>rstartd</i> is a shell script that\ninvokes <i>rstartd.real</i> with the <b>-c</b> switch,\nallowing local configuration of the location of the\nconfiguration file. If <i>rstartd.real</i> is started\nwithout the -c option, it reads\n<i>/X11/rstart/config</i>.</p>\n\n<h2>INSTALLATION\n<a name=\"INSTALLATION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">It is critical\nto successful interoperation of the Remote Start protocol\nthat <i>rstartd</i> be installed in a directory which is in\nthe &quot;default&quot; search path, so that default rsh\nrequests and the ilk will be able to find it.</p>\n\n<h2>CONFIGURATION AND OPERATION\n<a name=\"CONFIGURATION AND OPERATION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nis by design highly configurable. One would like things like\nconfiguration file locations to be fixed, so that users and\nadministrators can find them without searching, but reality\nis that no two vendors will agree on where things should go,\nand nobody thinks the original location is\n&quot;right&quot;. Thus, <i>rstartd</i> allows one to\nrelocate <b>all</b> of its files and directories.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nhas a hierarchy of configuration files which are executed in\norder when a request is made. They are: <br>\nglobal config <br>\nper-user (&quot;local&quot;) config <br>\nglobal per-context config <br>\nper-user (&quot;local&quot;) per-context config <br>\nconfig from request <br>\nAs you might guess from the presence of &quot;config from\nrequest&quot;, all of the config files are in the format of\nan <i>rstart</i> request. <i>Rstartd</i> defines a few\nadditional keywords with the INTERNAL- prefix for specifying\nits configuration.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nstarts by reading and executing the global config file. This\nfile will normally specify the locations of the other\nconfiguration files and any systemwide defaults.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nwill then read the user&rsquo;s local config file, default\nname $HOME/.rstart.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nwill then start interpreting the request.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Presumably one\nof the first lines in the request will be a CONTEXT line.\nThe context name is converted to lower case.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nwill read the global config file for that context, default\nname /usr/lib/X11/rstart/contexts/&lt;name&gt;, if any.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">It will then\nread the user&rsquo;s config file for that context, default\nname $HOME/.rstart.contexts/&lt;name&gt;, if any.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">(If neither of\nthese exists, <i>rstartd</i> aborts with a Failure\nmessage.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Rstartd</i>\nwill finish interpreting the request, and execute the\nprogram specified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This allows the\nsystem administrator and the user a large degree of control\nover the operation of <i>rstartd</i>. The administrator has\nfinal say, because the global config file doesn&rsquo;t need\nto specify a per-user config file. If it does, however, the\nuser can override anything from the global file, and can\neven completely replace the global context config files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The config\nfiles have a somewhat more flexible format than requests do;\nthey are allowed to contain blank lines and lines beginning\nwith &quot;#&quot; are comments and ignored. (#s in the\nmiddle of lines are data, not comment markers.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Any commands\nrun are provided a few useful pieces of information in\nenvironment variables. The exact names are configurable, but\nthe supplied defaults are:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"31%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\">\n</td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"31%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\"></td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"31%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\"></td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"31%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\"></td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"31%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\"></td>\n<td width=\"54%\">\n</td></tr>\n</table>\n\n\n<p align=\"center\"><img src=\"grohtml-1429911.png\" alt=\"Image grohtml-1429911.png\"></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">$RSTART_{GLOBAL,LOCAL}_CONTEXTS\nshould contain one special file, @List, which contains a\nlist of the contexts in that directory in the format\nspecified for ListContexts. The supplied version of\nListContexts will cat both the global and local copies of\n@List.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Generic\ncommands are searched for in several places: (defaults) <br>\nper-user per-context directory\n($HOME/.rstart.commands/&lt;context&gt;) <br>\nglobal per-context directory\n(/usr/lib/X11/rstart/commands/&lt;context&gt;) <br>\nper-user all-contexts directory ($HOME/.rstart.commands)\n<br>\nglobal all-contexts directory (/usr/lib/X11/rstart/commands)\n<br>\n(Yes, this means you can&rsquo;t have an all-contexts\ngeneric command with the same name as a context. It\ndidn&rsquo;t seem like a big deal.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Each of these\ndirectories should have a file called @List that gives the\nnames and descriptions of the commands in that directory in\nthe format specified for ListGenericCommands.</p>\n\n<h2>CONFIGURATION KEYWORDS\n<a name=\"CONFIGURATION KEYWORDS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">There are\nseveral &quot;special&quot; <i>rstart</i> keywords defined\nfor <i>rstartd</i> configuration. Unless otherwise\nspecified, there are no defaults; related features are\ndisabled in this case. <b><br>\nINTERNAL-REGISTRIES name ...</b></p>\n\n<p style=\"margin-left:23%;\">Gives a space-separated list of\n&quot;MISC&quot; registries that this system understands.\n(Registries other than this are accepted but generate a\nWarning.)</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-LOCAL-DEFAULT\nrelative_filename</b></p>\n\n<p style=\"margin-left:23%;\">Gives the name ($HOME relative)\nof the per-user config file.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-GLOBAL-CONTEXTS\nabsolute_directory_name</b></p>\n\n<p style=\"margin-left:23%;\">Gives the name of the\nsystem-wide contexts directory.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-LOCAL-CONTEXTS\nrelative_directory_name</b></p>\n\n<p style=\"margin-left:23%;\">Gives the name ($HOME relative)\nof the per-user contexts directory.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-GLOBAL-COMMANDS\nabsolute_directory_name</b></p>\n\n<p style=\"margin-left:23%;\">Gives the name of the\nsystem-wide generic commands directory.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-LOCAL-COMMANDS\nrelative_directory_name</b></p>\n\n<p style=\"margin-left:23%;\">Gives the name ($HOME relative)\nof the per-user generic commands directory.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-VARIABLE-PREFIX\nprefix</b></p>\n\n<p style=\"margin-left:23%;\">Gives the prefix for the\nconfiguration environment variables <i>rstartd</i> passes to\nits kids.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-AUTH-PROGRAM\nauthscheme program argv[0] argv[1] ...</b></p>\n\n<p style=\"margin-left:23%;\">Specifies the program to run to\nset up authentication for the specified authentication\nscheme. &quot;program argv[0] ...&quot; gives the program to\nrun and its arguments, in the same form as the EXEC\nkeyword.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-AUTH-INPUT\nauthscheme</b></p>\n\n<p style=\"margin-left:23%;\">Specifies the data to be given\nto the authorization program as its standard input. Each\nargument is passed as a single line. $n, where n is a\nnumber, is replaced by the n&rsquo;th argument to the\n&quot;AUTH authscheme arg1 arg2 ...&quot; line.</p>\n\n<p style=\"margin-left:11%;\"><b>INTERNAL-PRINT arbitrary\ntext</b></p>\n\n<p style=\"margin-left:23%;\">Prints its arguments as a Debug\nmessage. Mostly for <i>rstartd</i> debugging, but could be\nused to debug config files.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">When using the\nC shell, or any other shell which runs a script every time\nthe shell is started, the script may get run several times.\nIn the worst case, the script may get run <b>three</b>\ntimes: <br>\nBy rsh, to run <i>rstartd</i> <br>\nBy <i>rstartd</i>, to run the specified command <br>\nBy the command, eg <i>xterm <br>\nrstartd</i> currently limits lines, both from config files\nand requests, to BUFSIZ bytes.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">DETACH is\nimplemented by redirecting file descriptors 0,1, and 2 to\n/dev/null and forking before executing the program.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">CMD is\nimplemented by invoking $SHELL (default /bin/sh) with\n&quot;-c&quot; and the specified command as arguments.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX-UMASK is\nimplemented in the obvious way.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\nauthorization programs are run in the same context as the\ntarget program - same environment variables, path, etc. Long\nterm this might be a problem.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In the X\ncontext, GENERIC-CMD Terminal runs xterm. In the OpenWindows\ncontext, GENERIC-CMD Terminal runs cmdtool.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In the X\ncontext, GENERIC-CMD LoadMonitor runs xload. In the\nOpenWindows context, GENERIC-CMD LoadMonitor runs\nperfmeter.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>GENERIC-CMD\nListContexts</b> lists the contents of @List in both the\nsystem-wide and per-user contexts directories. It is\navailable in all contexts.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>GENERIC-CMD\nListGenericCommands</b> lists the contents of @List in the\nsystem-wide and per-user commands directories, including the\nper-context subdirectories for the current context. It is\navailable in all contexts.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>CONTEXT\nNone</b> is not implemented.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>CONTEXT\nDefault</b> is really dull.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For\ninstallation ease, the &quot;contexts&quot; directory in the\ndistribution contains a file &quot;@Aliases&quot; which\nlists a context name and aliases for that context. This file\nis used to make symlinks in the contexts and commands\ndirectories.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">All <b>MISC</b>\nvalues are passed unmodified as environment variables.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">One can\nmistreat <i>rstartd</i> in any number of ways, resulting in\nanything from stupid behavior to core dumps. Other than by\nexplicitly running programs I don&rsquo;t think it can write\nor delete any files, but there&rsquo;s no guarantee of that.\nThe important thing is that (a) it probably won&rsquo;t do\nanything REALLY stupid and (b) it runs with the user&rsquo;s\npermissions, so it can&rsquo;t do anything catastrophic.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">@List files\nneed not be complete; contexts or commands which are dull or\nwhich need not or should not be advertised need not be\nlisted. In particular, per-user @List files should not list\nthings which are in the system-wide @List files. In the\nfuture, perhaps ListContexts and ListGenericCommands will\nautomatically suppress lines from the system-wide files when\nthere are per-user replacements for those lines.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Error handling\nis OK to weak. In particular, no attempt is made to properly\nreport errors on the exec itself. (Perversely, exec errors\ncould be reliably reported when detaching, but not when\npassing the stdin/out socket to the app.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If compiled\nwith -DODT1_DISPLAY_HACK, <i>rstartd</i> will work around a\nbug in SCO ODT version 1. (1.1?) (The bug is that the X\nclients are all compiled with a bad library that\ndoesn&rsquo;t know how to look host names up using DNS. The\nfix is to look up a host name in $DISPLAY and substitute an\nIP address.) This is a trivial example of an incompatibility\nthat <i>rstart</i> can hide.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">rstart(1),\nrsh(1), A Flexible Remote Execution Protocol Based on\n<b>rsh</b></p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Jordan Brown,\nQuarterdeck Office Systems</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#INSTALLATION\">INSTALLATION</a>","<a href=\"#CONFIGURATION AND OPERATION\">CONFIGURATION AND OPERATION</a>","<a href=\"#CONFIGURATION KEYWORDS\">CONFIGURATION KEYWORDS</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#AUTHOR\">AUTHOR</a>"]}