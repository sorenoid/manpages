{"name":"filter","description":"filter - cups\nfile conversion filter interface","body":"\n\n<h1 align=\"center\">filter</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">filter - cups\nfile conversion filter interface</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>filter</b>\n<i>job user title num-copies options</i> [ <i>filename</i>\n]</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;cups/cups.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ssize_t\ncupsBackChannelRead</b>(<b>char *</b><i>buffer</i>,\n<b>size_t</b> <i>bytes</i>, <b><br>\ndouble</b> <i>timeout</i>);</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>cups_sc_status_t\ncupsSideChannelDoRequest</b>(<b>cups_sc_command_t</b>\n<i>command</i>, <b><br>\nchar *</b><i>data</i>, <b>int *</b><i>datalen</i>, <b><br>\ndouble</b> <i>timeout</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;cups/ppd.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>const char\n*cupsGetOption</b>(<b>const char *</b><i>name</i>,\n<b>int</b> <i>num_options</i>, <b><br>\ncups_option_t *</b><i>options</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ncupsMarkOptions</b>(<b>ppd_file_t *</b><i>ppd</i>,\n<b>int</b> <i>num_options</i>, <b><br>\ncups_option_t *</b><i>options</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ncupsParseOptions</b>(<b>const char *</b><i>arg</i>,\n<b>int</b> <i>num_options</i>, <b><br>\ncups_option_t **</b><i>options</i>);</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ppd_choice_t\n*ppdFindMarkedChoice</b>(<b>ppd_file_t *</b><i>ppd</i>,\n<b>const char *</b><i>keyword</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>void\nppdMarkDefaults</b>(<b>ppd_file_t *</b><i>ppd</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ppd_file_t\n*ppdOpenFile</b>(<b>const char *</b><i>filename</i>);</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The CUPS filter\ninterface provides a standard method for adding support for\nnew document types or printers to CUPS. Each filter is\ncapable of converting from one or more input formats to\nanother format that can either be printed directly or piped\ninto another filter to get it to a printable format.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Filters\n<b>MUST</b> be capable of reading from a filename on the\ncommand-line or from the standard input, copying the\nstandard input to a temporary file as required by the file\nformat. All output <b>MUST</b> be sent to the standard\noutput. Filters <b>MUST NOT</b> attempt to communicate\ndirectly with the printer, other processes, or other\nservices.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The command\nname (<i>argv[0]</i>) is set to the name of the destination\nprinter but is also available in the <b>PRINTER</b>\n<i>environment variable.</i></p>\n\n<h2>OPTIONS\n<a name=\"OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Options are\npassed in <i>argv[5]</i> and are encoded from the\ncorresponding IPP attributes used when the job was\nsubmitted. Use the <b>cupsParseOptions</b>() function to\nload the options into a <b>cups_option_t</b> array and the\n<b>cupsGetOption</b>() function to get the value of a\nspecific attribute. Be careful to look for common aliases of\nIPP attributes such as &quot;landscape&quot; for the IPP\n&quot;orientation-requested&quot; attribute.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Options passed\non the command-line typically do not include the default\nchoices the printer&rsquo;s PPD file. Use the\n<b>ppdMarkDefaults</b>() and <b>cupsMarkOptions</b>()\nfunctions in the CUPS library to apply the options to the\nPPD defaults and map any IPP attributes to the corresponding\nPPD options. Use <b>ppdFindMarkedChoice</b>() to get the\nuser-selected choice for a PPD option. For example, a filter\nmight use the following code to determine the current value\nof the <b>Duplex</b> PPD option:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">ppd_file_t *ppd\n= ppdOpenFile(getenv(&quot;PPD&quot;)); <br>\ncups_option_t *options = NULL; <br>\nint num_options = cupsParseOptions(argv[5], 0,\n&amp;options);</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ppdMarkDefaults(ppd);\n<br>\ncupsMarkOptions(ppd, num_options, options);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">ppd_choice_t\n*choice = ppdFindMarkedChoice(ppd, &quot;Duplex&quot;);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Raster filters\nshould use option choices set through the raster page\nheader, as those reflect the options in effect for a given\npage. Options specified on the command-line determine the\ndefault values for the entire job, which can be overridden\non a per-page basis.</p>\n\n<h2>LOG MESSAGES\n<a name=\"LOG MESSAGES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Messages sent\nto the standard error are generally stored in the\nprinter&rsquo;s &quot;printer-state-message&quot; attribute\nand the current <b>ErrorLog</b> file. Each line begins with\na standard prefix: <b><br>\nALERT:</b> <i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute and adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;alert&quot; log level.</p>\n\n<p style=\"margin-left:11%;\"><b>ATTR:</b>\n<i>attribute=value</i> [ <i>... attribute=value</i>]</p>\n\n<p style=\"margin-left:18%;\">Sets the named job or printer\nattribute(s). The following job attributes can be set:\n&quot;job-media-progress&quot;. The following printer\nattributes can be set: &quot;auth-info-required&quot;,\n&quot;marker-colors&quot;, &quot;marker-high-levels&quot;,\n&quot;marker-levels&quot;, &quot;marker-low-levels&quot;,\n&quot;marker-message&quot;, &quot;marker-names&quot;,\n&quot;marker-types&quot;, &quot;printer-alert&quot;, and\n&quot;printer-alert-description&quot;.</p>\n\n<p style=\"margin-left:11%;\"><b>CRIT:</b> <i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute and adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;critical&quot; log level.</p>\n\n<p style=\"margin-left:11%;\"><b>DEBUG:</b>\n<i>message</i></p>\n\n<p style=\"margin-left:18%;\">Adds the specified message to\nthe current <b>ErrorLog</b> using the &quot;debug&quot; log\nlevel. <b>DEBUG</b> messages are never stored in the\n&quot;printer-state-message&quot; attribute.</p>\n\n<p style=\"margin-left:11%;\"><b>DEBUG2:</b>\n<i>message</i></p>\n\n<p style=\"margin-left:18%;\">Adds the specified message to\nthe current <b>ErrorLog</b> using the &quot;debug2&quot; log\nlevel. <b>DEBUG2</b> messages are never stored in the\n&quot;printer-state-message&quot; attribute.</p>\n\n<p style=\"margin-left:11%;\"><b>EMERG:</b>\n<i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute and adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;emergency&quot; log level.</p>\n\n<p style=\"margin-left:11%;\"><b>ERROR:</b>\n<i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute and adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;error&quot; log level.</p>\n\n<p style=\"margin-left:11%;\"><b>INFO:</b> <i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute. If the current\n<b>LogLevel</b> is set to &quot;debug2&quot;, also adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;info&quot; log level.</p>\n\n<p style=\"margin-left:11%;\"><b>NOTICE:</b>\n<i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute and adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;notice&quot; log level.</p>\n\n<p style=\"margin-left:11%;\"><b>PAGE:</b> <i>page-number\n#-copies</i> <b><br>\nPAGE:</b> <i>total #-pages</i></p>\n\n<p style=\"margin-left:18%;\">Adds an entry to the current\n<b>PageLog</b>. The first form adds <i>#-copies</i> to the\n&quot;job-media-sheets-completed&quot; attribute. The second\nform sets the &quot;job-media-sheets-completed&quot;\nattribute to <i>#-pages</i>.</p>\n\n<p style=\"margin-left:11%;\"><b>PPD:</b>\n<i>Keyword=Value</i> [ <i>... KeywordN=Value</i> ]</p>\n\n<p style=\"margin-left:18%;\">Sets the named keywords in the\nprinter&rsquo;s PPD file. This is typically used to update\ndefault option keywords such as <b>DefaultPageSize</b> and\nthe various installable options in the PPD file.</p>\n\n<p style=\"margin-left:11%;\"><b>STATE:</b>\n<i>printer-state-reason</i> [ <i>...\nprinter-state-reason</i> ] <b><br>\nSTATE: +</b> <i>printer-state-reason</i> [ <i>...\nprinter-state-reason</i> ] <b><br>\nSTATE: -</b> <i>printer-state-reason</i> [ <i>...\nprinter-state-reason</i> ]</p>\n\n<p style=\"margin-left:18%;\">Sets, adds, or removes\n&quot;printer-state-reason&quot; keywords for the current\nqueue. Typically this is used to indicate media, ink, and\ntoner conditions on a printer.</p>\n\n<p style=\"margin-left:11%;\"><b>WARNING:</b>\n<i>message</i></p>\n\n<p style=\"margin-left:18%;\">Sets the\n&quot;printer-state-message&quot; attribute and adds the\nspecified message to the current <b>ErrorLog</b> using the\n&quot;warning&quot; log level.</p>\n\n<h2>ENVIRONMENT VARIABLES\n<a name=\"ENVIRONMENT VARIABLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\nenvironment variables are defined by the CUPS server when\nexecuting the filter: <b><br>\nCHARSET</b></p>\n\n<p style=\"margin-left:18%;\">The default text character set,\ntypically &quot;utf-8&quot;.</p>\n\n<p style=\"margin-left:11%;\"><b>CLASS</b></p>\n\n<p style=\"margin-left:18%;\">When a job is submitted to a\nprinter class, contains the name of the destination printer\nclass. Otherwise this environment variable will not be\nset.</p>\n\n<p style=\"margin-left:11%;\"><b>CONTENT_TYPE</b></p>\n\n<p style=\"margin-left:18%;\">The MIME media type associated\nwith the submitted job file, for example\n&quot;application/postscript&quot;.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_CACHEDIR</b></p>\n\n<p style=\"margin-left:18%;\">The directory where\nsemi-persistent cache files can be found and stored.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_DATADIR</b></p>\n\n<p style=\"margin-left:18%;\">The directory where data files\ncan be found.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_FILETYPE</b></p>\n\n<p style=\"margin-left:18%;\">The type of file being printed:\n&quot;job-sheet&quot; for a banner page and\n&quot;document&quot; for a regular print file.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_MAX_MESSAGE</b></p>\n\n<p style=\"margin-left:18%;\">The maximum size of a message\nsent to <i>stderr</i>, including any leading prefix and the\ntrailing newline.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_SERVERROOT</b></p>\n\n<p style=\"margin-left:18%;\">The root directory of the\nserver.</p>\n\n<p style=\"margin-left:11%;\"><b>FINAL_CONTENT_TYPE</b></p>\n\n<p style=\"margin-left:18%;\">The MIME media type associated\nwith the output destined for the printer, for example\n&quot;application/vnd.cups-postscript&quot;.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>LANG</b></p></td>\n<td width=\"1%\"></td>\n<td width=\"82%\">\n\n\n<p>The default language locale (typically C or en).</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>PATH</b></p></td>\n<td width=\"1%\"></td>\n<td width=\"82%\">\n\n\n<p>The standard execution path for external programs that\nmay be run by the filter.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>PPD</b></p></td>\n<td width=\"1%\"></td>\n<td width=\"82%\">\n\n\n<p>The full pathname of the PostScript Printer Description\n(PPD) file for this printer.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>PRINTER</b></p>\n\n<p style=\"margin-left:18%;\">The name of the printer.</p>\n\n<p style=\"margin-left:11%;\"><b>RIP_CACHE</b></p>\n\n<p style=\"margin-left:18%;\">The recommended amount of\nmemory to use for Raster Image Processors (RIPs).</p>\n\n<p style=\"margin-left:11%;\"><b>SOFTWARE</b></p>\n\n<p style=\"margin-left:18%;\">The name and version number of\nthe server (typically CUPS/<i>major.minor</i>).</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>TZ</b></p></td>\n<td width=\"1%\"></td>\n<td width=\"82%\">\n\n\n<p>The timezone of the server.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>USER</b></p></td>\n<td width=\"1%\"></td>\n<td width=\"82%\">\n\n\n<p>The user executing the filter, typically &quot;lp&quot;\nor &quot;root&quot;; consult the <i>cups-files.conf</i> file\nfor the current setting.</p></td></tr>\n</table>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">While the\nfilter interface is compatible with System V interface\nscripts, CUPS does not support System V interface\nscripts.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">CUPS printer\ndrivers and backends are deprecated and will no longer be\nsupported in a future feature release of CUPS. Printers that\ndo not support IPP can be supported using applications such\nas <a href=\"https://man.page/1/ippeveprinter\">ippeveprinter(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">CUPS filters\nare not meant to be run directly by the user. Aside from the\nlegacy System V interface issues (<i>argv[0]</i> is the\nprinter name), CUPS filters also expect specific environment\nvariables and file descriptors, and typically run in a user\nsession that (on macOS) has additional restrictions that\naffect how it runs. Unless you are a developer and know what\nyou are doing, please do not run filters directly. Instead,\nuse the <b>cupsfilter</b>(8) program to use the appropriate\nfilters to do the conversions you need.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/7/backend\">backend(7)</a>,\n<a href=\"https://man.page/1/cups\">cups(1)</a>, <b>cups-files.conf</b>(5), <b>cupsd</b>(8),\n<b>cupsfilter</b>(8), <br>\nCUPS Online Help (http://localhost:631/help)</p>\n\n<h2>COPYRIGHT\n<a name=\"COPYRIGHT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copyright\n&copy; 2021-2022 by OpenPrinting.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#OPTIONS\">OPTIONS</a>","<a href=\"#LOG MESSAGES\">LOG MESSAGES</a>","<a href=\"#ENVIRONMENT VARIABLES\">ENVIRONMENT VARIABLES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COPYRIGHT\">COPYRIGHT</a>"],"level":7}