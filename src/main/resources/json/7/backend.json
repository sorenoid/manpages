{"name":"backend","description":"backend - cups\nbackend transmission interfaces","body":"\n\n<h1 align=\"center\">backend</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">backend - cups\nbackend transmission interfaces</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>backend <br>\nbackend</b> <i>job user title num-copies options</i> [\n<i>filename</i> ]</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;cups/cups.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>const char\n*cupsBackendDeviceURI</b>(<b>char **</b><i>argv</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>void\ncupsBackendReport</b>(<b>const char\n*</b><i>device_scheme</i>, <b><br>\nconst char *</b><i>device_uri</i>, <b><br>\nconst char *</b><i>device_make_and_model</i>, <b><br>\nconst char *</b><i>device_info</i>, <b><br>\nconst char *</b><i>device_id</i>, <b><br>\nconst char *</b><i>device_location</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ssize_t\ncupsBackChannelWrite</b>(<b>const char *</b><i>buffer</i>,\n<b><br>\nsize_t</b> <i>bytes</i>, <b>double</b> <i>timeout</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ncupsSideChannelRead</b>(<b>cups_sc_command_t\n*</b><i>command</i>, <b><br>\ncups_sc_status_t *</b><i>status</i>, <b>char\n*</b><i>data</i>, <b><br>\nint *</b><i>datalen</i>, <b>double</b> <i>timeout</i>);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ncupsSideChannelWrite</b>(<b>cups_sc_command_t</b>\n<i>command</i>, <b><br>\ncups_sc_status_t</b> <i>status</i>, <b>const char\n*</b><i>data</i>, <b><br>\nint</b> <i>datalen</i>, <b>double</b> <i>timeout</i>);</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Backends are a\nspecial type of <a href=\"https://man.page/7/filter\">filter(7)</a> which is used to send print\ndata to and discover different devices on the system.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Like filters,\nbackends must be capable of reading from a filename on the\ncommand-line or from the standard input, copying the\nstandard input to a temporary file as required by the\nphysical interface.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The command\nname (<i>argv[0]</i>) is set to the device URI of the\ndestination printer. Authentication information in\n<i>argv[0]</i> is removed, so backend developers are urged\nto use the <b>DEVICE_URI</b> environment variable whenever\nauthentication information is required. The\n<b>cupsBackendDeviceURI</b>() function may be used to\nretrieve the correct device URI.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Back-channel\ndata from the device should be relayed to the job filters\nusing the <i>cupsBackChannelWrite</i> function.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Backends are\nresponsible for reading side-channel requests using the\n<b>cupsSideChannelRead</b>() function and responding with\nthe <b>cupsSideChannelWrite</b>() function. The\n<b>CUPS_SC_FD</b> constant defines the file descriptor that\nshould be monitored for incoming requests.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>DEVICE\nDISCOVERY</b> <br>\nWhen run with no arguments, the backend should list the\ndevices and schemes it supports or is advertising to the\nstandard output. The output consists of zero or more lines\nconsisting of any of the following forms:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">device-class\nscheme &quot;Unknown&quot; &quot;device-info&quot; <br>\ndevice-class device-uri &quot;device-make-and-model&quot;\n&quot;device-info&quot; <br>\ndevice-class device-uri &quot;device-make-and-model&quot;\n&quot;device-info&quot; &quot;device-id&quot; <br>\ndevice-class device-uri &quot;device-make-and-model&quot;\n&quot;device-info&quot; &quot;device-id&quot;\n&quot;device-location&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>cupsBackendReport</b>() function can be used to generate\nthese lines and handle any necessary escaping of characters\nin the various strings.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>device-class</i> field is one of the following values:\n<b><br>\ndirect</b></p>\n\n<p style=\"margin-left:18%;\">The device-uri refers to a\nspecific direct-access device with no options, such as a\nparallel, USB, or SCSI device.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>file</b></p></td>\n<td width=\"1%\"></td>\n<td width=\"62%\">\n\n\n<p>The device-uri refers to a file on disk.</p></td>\n<td width=\"20%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>network</b></p>\n\n<p style=\"margin-left:18%;\">The device-uri refers to a\nnetworked device and conforms to the general form for\nnetwork URIs.</p>\n\n<p style=\"margin-left:11%;\"><b>serial</b></p>\n\n<p style=\"margin-left:18%;\">The device-uri refers to a\nserial device with configurable baud rate and other options.\nIf the device-uri contains a baud value, it represents the\nmaximum baud rate supported by the device.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>scheme</i> field provides the URI scheme that is\nsupported by the backend. Backends should use this form only\nwhen the backend supports any URI using that scheme. The\n<i>device-uri</i> field specifies the full URI to use when\ncommunicating with the device.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>device-make-and-model</i> field specifies the make and\nmodel of the device, e.g. &quot;Example Foojet 2000&quot;.\nIf the make and model is not known, you must report\n&quot;Unknown&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>device-info</i> field specifies additional information\nabout the device. Typically this includes the make and model\nalong with the port number or network address, e.g.\n&quot;Example Foojet 2000 USB #1&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The optional\n<i>device-id</i> field specifies the IEEE-1284 device ID\nstring for the device, which is used to select a matching\ndriver.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The optional\n<i>device-location</i> field specifies the physical location\nof the device, which is often used to pre-populate the\nprinter-location attribute when adding a printer.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>PERMISSIONS</b>\n<br>\nBackends without world read and execute permissions are run\nas the root user. Otherwise, the backend is run using an\nunprivileged user account, typically &quot;lp&quot;.</p>\n\n<h2>EXIT STATUS\n<a name=\"EXIT STATUS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\nexit codes are defined for backends: <b><br>\nCUPS_BACKEND_OK</b></p>\n\n<p style=\"margin-left:18%;\">The print file was successfully\ntransmitted to the device or remote server.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_FAILED</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted to the device or remote server. The\nscheduler will respond to this by canceling the job,\nretrying the job, or stopping the queue depending on the\nstate of the <i>printer-error-policy</i> attribute.</p>\n\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_AUTH_REQUIRED</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted because valid authentication\ninformation is required. The scheduler will respond to this\nby holding the job and adding the\n&rsquo;cups-held-for-authentication&rsquo; keyword to the\n&quot;job-reasons&quot; Job Description attribute.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_HOLD</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted because it cannot be printed at\nthis time. The scheduler will respond to this by holding the\njob.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_STOP</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted because it cannot be printed at\nthis time. The scheduler will respond to this by stopping\nthe queue.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_CANCEL</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted because one or more attributes are\nnot supported or the job was canceled at the printer. The\nscheduler will respond to this by canceling the job.</p>\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_RETRY</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted because of a temporary issue. The\nscheduler will retry the job at a future time - other jobs\nmay print before this one.</p>\n\n\n<p style=\"margin-left:11%;\"><b>CUPS_BACKEND_RETRY_CURRENT</b></p>\n\n<p style=\"margin-left:18%;\">The print file was not\nsuccessfully transmitted because of a temporary issue. The\nscheduler will retry the job immediately without allowing\nintervening jobs.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">All other exit\ncode values are reserved.</p>\n\n<h2>ENVIRONMENT\n<a name=\"ENVIRONMENT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">In addition to\nthe environment variables listed in <a href=\"https://man.page/1/cups\">cups(1)</a> and\n<a href=\"https://man.page/7/filter\">filter(7)</a>, CUPS backends can expect the following\nenvironment variable: <b><br>\nDEVICE_URI</b></p>\n\n<p style=\"margin-left:18%;\">The device URI associated with\nthe printer.</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/cups/cups-files.conf</i></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">CUPS backends\nare not generally designed to be run directly by the user.\nAside from the device URI issue ( <i>argv[0]</i> and\n<b>DEVICE_URI</b> environment variable contain the device\nURI), CUPS backends also expect specific environment\nvariables and file descriptors, and typically run in a user\nsession that (on macOS) has additional restrictions that\naffect how it runs. Backends can also be installed with\nrestricted permissions (0500 or 0700) that tell the\nscheduler to run them as the &quot;root&quot; user instead\nof an unprivileged user (typically &quot;lp&quot;) on the\nsystem.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Unless you are\na developer and know what you are doing, please do not run\nbackends directly. Instead, use the <a href=\"https://man.page/1/lp\">lp(1)</a> or\n<a href=\"https://man.page/1/lpr\">lpr(1)</a> programs to send print jobs or\n<b>lpinfo</b>(8) to query for available printers using the\nbackend. The one exception is the SNMP backend - see\n<b>cups-snmp</b>(8) for more information.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">CUPS printer\ndrivers and backends are deprecated and will no longer be\nsupported in a future feature release of CUPS. Printers that\ndo not support IPP can be supported using applications such\nas <a href=\"https://man.page/1/ippeveprinter\">ippeveprinter(1)</a>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>cups</i>(1),\n<i>cups-files.conf</i>(5), <i>cups-snmp</i>(8),\n<i>cupsd</i>(8), <i>filter</i>(7), <i>lp</i>(1),\n<i>lpinfo</i>(8), <i>lpr</i>(1), <br>\nCUPS Online Help (http://localhost:631/help)</p>\n\n<h2>COPYRIGHT\n<a name=\"COPYRIGHT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copyright\n&copy; 2021-2022 by OpenPrinting.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#EXIT STATUS\">EXIT STATUS</a>","<a href=\"#ENVIRONMENT\">ENVIRONMENT</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COPYRIGHT\">COPYRIGHT</a>"],"level":7}