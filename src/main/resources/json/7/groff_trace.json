{"name":"groff_trace","description":"groff_trace - groff macro package trace.tmac","body":"\n\n<h1 align=\"center\">GROFF_TRACE</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">groff_trace -\ngroff macro package trace.tmac</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"21%\">\n\n\n<p style=\"margin-top: 1em\"><b>groff -m trace</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"44%\">\n\n\n<p style=\"margin-top: 1em\">[<i>option</i> ...]\n[<i>input-file</i> ...]</p></td>\n<td width=\"22%\">\n</td></tr>\n</table>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>trace</i> macro package of <a href=\"https://man.page/1/groff\">groff(1)</a> can be a\nvaluable tool for debugging documents written in the roff\nformatting language. A call stack trace is protocolled on\nstandard error, this is, a diagnostic message is emitted on\nentering and exiting of a macro call. This greatly eases to\ntrack down an error in some macro.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This tracing\nprocess is activated by specifying the groff or troff\ncommand-line option <b>-m&nbsp;trace</b>. This works also\nwith the <a href=\"https://man.page/1/groffer\">groffer(1)</a> viewer program. A finer control\ncan be obtained by including the macro file within the\ndocument by the groff macro call\n<b>.mso&nbsp;trace.tmac</b>. Only macros that are defined\nafter this line are traced.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\ncommand-line option <b>-r&nbsp;trace-full=1</b> is given (or\nif this register is set in the document), number and string\nregister assignments together with some other requests are\ntraced also.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If some other\nmacro package should be traced as well it must be specified\nafter <b>-m&nbsp;trace</b> on the command line.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The macro file\n<b>trace.tmac</b> is unusual because it does not contain any\nmacros to be called by a user. Instead, the existing macro\ndefinition and appending facilities are modified such that\nthey display diagnostic messages.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">In the\nfollowing examples, a roff fragment is fed into groff via\nstandard input. As we are only interested in the diagnostic\nmessages (standard error) on the terminal, the normal\nformatted output (standard output) is redirected to the\nnirvana device <i>/dev/null</i>. The resulting diagnostic\nmessages are displayed directly below the corresponding\nexample.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Command line\noption</b> <br>\nExample:</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\"><i>sh#</i> echo\n'. <br>\n&gt; .de test_macro <br>\n&gt; .. <br>\n&gt; .test_macro <br>\n&gt; .test_macro some dummy arguments <br>\n&gt; ' | groff -m trace &gt; /dev/null</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">*** .de\ntest_macro <br>\n*** de trace enter: .test_macro <br>\n*** trace exit: .test_macro <br>\n*** de trace enter: .test_macro &quot;some&quot;\n&quot;dummy&quot; &quot;arguments&quot; <br>\n*** trace exit: .test_macro &quot;some&quot;\n&quot;dummy&quot; &quot;arguments&quot;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The entry and\nthe exit of each macro call is displayed on the terminal\n(standard output) &mdash; together with the arguments (if\nany).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Nested macro\ncalls</b> <br>\nExample:</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\"><i>sh#</i> echo\n'. <br>\n&gt; .de child <br>\n&gt; .. <br>\n&gt; .de parent <br>\n&gt; .child <br>\n&gt; .. <br>\n&gt; .parent <br>\n&gt; ' | groff -m trace &gt; /dev/null</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">*** .de child\n<br>\n*** .de parent <br>\n*** de trace enter: .parent <br>\n*** de trace enter: .child <br>\n*** trace exit: .child <br>\n*** trace exit: .parent</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This shows that\nmacro calls can be nested. This powerful feature can help to\ntack down quite complex call stacks.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Activating\nwith .mso</b> <br>\nExample:</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\"><i>sh#</i> echo\n'. <br>\n&gt; .de before <br>\n&gt; .. <br>\n&gt; .mso trace.tmac <br>\n&gt; .de after <br>\n&gt; .. <br>\n&gt; .before <br>\n&gt; .after <br>\n&gt; .before <br>\n&gt; ' | groff &gt; /dev/null</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">*** de trace\nenter: .after <br>\n*** trace exit: .after</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Here, the\ntracing is activated within the document, not by a\ncommand-line option. As tracing was not active when macro\n<i>before</i> was defined, no call of this macro is\nprotocolled; on the other hand, the macro <i>after</i> is\nfully protocolled.</p>\n\n<h2>PROBLEMS\n<a name=\"PROBLEMS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Because\n<b>trace.tmac</b> wraps the <b>.de</b> request (and its\ncousins), macro arguments are expanded one level more. This\ncauses problems if an argument contains four backslashes or\nmore to prevent too early expansion of the backslash. For\nexample, this macro call</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">.foo\n\\\\\\\\n[bar]</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">normally passes\n&rsquo;\\\\n[bar]&rsquo; to macro &rsquo;.foo&rsquo;, but with\nthe redefined <b>.de</b> request it passes\n&rsquo;\\n[bar]&rsquo; instead.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The solution to\nthis problem is to use groff&rsquo;s <b>\\E</b> escape which\nis an escape character not interpreted in copy mode, for\nexample</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">.foo\n\\En[bar]</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>trace</i> macros are kept in the file <b>trace.tmac</b>\nlocated in the <i>tmac directory</i>; see\n<a href=\"https://man.page/5/groff_tmac\">groff_tmac(5)</a> for details.</p>\n\n<h2>ENVIRONMENT\n<a name=\"ENVIRONMENT\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>GROFF_TMAC_PATH</i></p>\n\n<p style=\"margin-left:22%;\">A colon-separated list of\nadditional tmac directories in which to search for macro\nfiles; see <a href=\"https://man.page/5/groff_tmac\">groff_tmac(5)</a> for details.</p>\n\n<h2>AUTHORS\n<a name=\"AUTHORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>trace</i> macro packages was written by James Clark. This\ndocument was written by\n<a href=\"mailto:groff-bernd.warken-72@web.de\">Bernd\nWarken</a>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Groff: The\nGNU Implementation of troff</i>, by Trent A. Fisher and\nWerner Lemberg, is the primary <i>groff</i> manual. You can\nbrowse it interactively with &ldquo;info groff&rdquo;.\n<b><br>\ngroff</b>(1)</p>\n\n<p style=\"margin-left:22%;\">An overview of the groff\nsystem.</p>\n\n<p style=\"margin-left:11%;\"><a href=\"https://man.page/1/troff\">troff(1)</a></p>\n\n<p style=\"margin-left:22%;\">For details on option\n<b>-m</b>.</p>\n\n<p style=\"margin-left:11%;\"><a href=\"https://man.page/1/groffer\">groffer(1)</a></p>\n\n<p style=\"margin-left:22%;\">A viewer program for all kinds\nof roff documents.</p>\n\n<p style=\"margin-left:11%;\"><a href=\"https://man.page/5/groff_tmac\">groff_tmac(5)</a></p>\n\n<p style=\"margin-left:22%;\">A general description of groff\nmacro packages.</p>\n\n<p style=\"margin-left:11%;\"><a href=\"https://man.page/7/groff\">groff(7)</a></p>\n\n<p style=\"margin-left:22%;\">A short reference for the groff\nformatting language.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#PROBLEMS\">PROBLEMS</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#ENVIRONMENT\">ENVIRONMENT</a>","<a href=\"#AUTHORS\">AUTHORS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"],"level":7}