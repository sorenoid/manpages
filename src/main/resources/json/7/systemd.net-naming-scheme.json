{"name":"systemd.net-naming-scheme","description":"systemd.net-naming-scheme - Network device naming schemes","body":"\n\n<h1 align=\"center\">SYSTEMD.NET-NAMING-SCHEME</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">systemd.net-naming-scheme\n- Network device naming schemes</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Network\ninterfaces names and MAC addresses may be generated based on\ncertain stable interface attributes. This is possible when\nthere is enough information about the device to generate\nthose attributes and the use of this information is\nconfigured. This page describes interface naming, i.e. what\npossible names may be generated. Those names are generated\nby the <b>systemd-udevd.service</b>(8) builtin <b>net_id</b>\nand exported as udev properties\n(<i>ID_NET_NAME_ONBOARD=</i>, <i>ID_NET_LABEL_ONBOARD=</i>,\n<i>ID_NET_NAME_PATH=</i>, <i>ID_NET_NAME_SLOT=</i>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Names and MAC\naddresses are derived from various stable device metadata\nattributes. Newer versions of udev take more of these\nattributes into account, improving (and thus possibly\nchanging) the names and addresses used for the same devices.\nDifferent versions of those generation rules are called\n&quot;naming schemes&quot;. The default naming scheme is\nchosen at compilation time. Usually this will be the latest\nimplemented version, but it is also possible to set one of\nthe older versions to preserve compatibility. This may be\nuseful for example for distributions, which may introduce\nnew versions of systemd in stable releases without changing\nthe naming scheme. The naming scheme may also be overridden\nusing the <i>net.naming-scheme=</i> kernel command line\nswitch, see <b>systemd-udevd.service</b>(8). Available\nnaming schemes are described below.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">After the udev\nproperties have been generated, appropriate udev rules may\nbe used to actually rename devices based on those\nproperties. See the description of <i>NamePolicy=</i> and\n<i>MACAddressPolicy=</i> in <b>systemd.link</b>(5).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that while\nthe concept of network interface naming schemes is primarily\nrelevant in the context of systemd-udevd.service, the\n<a href=\"https://man.page/1/systemd-nspawn\">systemd-nspawn(1)</a> container manager also takes it\ninto account when naming network interfaces, see below.</p>\n\n<h2>NAMING\n<a name=\"NAMING\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">All names start\nwith a two-character prefix that signifies the interface\ntype.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Table&nbsp;1.&nbsp;Two\ncharacter prefixes based on the type of interface</b></p>\n\n\n<p align=\"center\"><b><img src=\"grohtml-3541511.png\" alt=\"Image grohtml-3541511.png\"></b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The udev\n<b>net_id</b> builtin exports the following udev device\nproperties:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>ID_NET_NAME_ONBOARD=prefix</i><b>o</b><i>number</i></p>\n\n<p style=\"margin-left:17%;\">This name is set based on the\nnumeric ordering information given by the firmware for\non-board devices. The name consists of the prefix, letter\n<b>o</b>, and a number specified by the firmware. This is\nonly available for PCI devices.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>ID_NET_LABEL_ONBOARD=prefix\nlabel</i></p>\n\n<p style=\"margin-left:17%;\">This property is set based on\ntextual label given by the firmware for on-board devices.\nThe name consists of the prefix concatenated with the label.\nThis is only available for PCI devices.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>ID_NET_NAME_MAC=prefix</i><b>x</b><i>AABBCCDDEEFF</i></p>\n\n<p style=\"margin-left:17%;\">This name consists of the\nprefix, letter <b>x</b>, and 12 hexadecimal digits of the\nMAC address. It is available if the device has a fixed MAC\naddress. Because this name is based on an attribute of the\ncard itself, it remains &quot;stable&quot; when the device\nis moved (even between machines), but will change when the\nhardware is replaced.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>ID_NET_NAME_SLOT=prefix[</i><b>P</b><i>domain]</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>port_name|</i><b>d</b><i>dev_port]</i>,\n<i>ID_NET_NAME_SLOT=prefix</i><b>v</b><i>slot</i>,\n<i>ID_NET_NAME_SLOT=prefix[</i><b>P</b><i>domain]</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>port_name|</i><b>d</b><i>dev_port]</i><b>b</b><i>number</i>,\n<i>ID_NET_NAME_SLOT=prefix[</i><b>P</b><i>domain]</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>port_name|</i><b>d</b><i>dev_port]</i><b>u</b><i>port...[</i><b>c</b><i>config][</i><b>i</b><i>interface]</i>,\n<i>ID_NET_NAME_SLOT=prefix[</i><b>P</b><i>domain]</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>port_name|</i><b>d</b><i>dev_port]</i><b>v</b><i>slot</i></p>\n\n<p style=\"margin-left:17%;\">This property describes the\nslot position. Different schemes are used depending on the\nbus type, as described in the table below. In case of USB,\nBCMA, and SR-VIO devices, the full name consists of the\nprefix, PCI slot identifier, and USB or BCMA or SR-VIO slot\nidentifier. The first two parts are denoted as\n&quot;...&quot; in the table below.</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><b>Table&nbsp;2.&nbsp;Slot\nnaming schemes <br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp;</b></p>\n\n\n<p align=\"center\"><b><img src=\"grohtml-3541512.png\" alt=\"Image grohtml-3541512.png\"></b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The PCI domain\nis only prepended when it is not 0. All multi-function PCI\ndevices will carry the <b>f</b><i>function</i> number in the\ndevice name, including the function 0 device. For\nnon-multi-function devices, the number is suppressed if 0.\nThe port name <i>port_name</i> is used, or the port number\n<b>d</b><i>dev_port</i> if the name is not known.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">For BCMA\ndevices, the core number is suppressed when 0.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">For USB devices\nthe full chain of port numbers of hubs is composed. If the\nname gets longer than the maximum number of 15 characters,\nthe name is not exported. The usual USB configuration number\n1 and interface number 0 values are suppressed.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">SR-IOV virtual\ndevices are named based on the name of the parent interface,\nwith a suffix of <b>v</b> and the virtual device number,\nwith any leading zeros removed. The bus number is\nignored.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">In some\nconfigurations a parent PCI bridge of a given network\ncontroller may be associated with a slot. In such case we\ndon't generate this device property to avoid possible naming\nconflicts.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>ID_NET_NAME_PATH=prefix</i><b>c</b><i>bus_id</i>,\n<i>ID_NET_NAME_PATH=prefix</i><b>a</b><i>vendormodel</i><b>i</b><i>instance</i>,\n<i>ID_NET_NAME_PATH=prefix</i><b>i</b><i>address</i><b>n</b><i>port_name</i>,\n<i>ID_NET_NAME_PATH=prefix[</i><b>P</b><i>domain]</i><b>p</b><i>bus</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>phys_port_name|</i><b>d</b><i>dev_port]</i>,\n<i>ID_NET_NAME_PATH=prefix[</i><b>P</b><i>domain]</i><b>p</b><i>bus</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>phys_port_name|</i><b>d</b><i>dev_port]</i><b>b</b><i>number</i>,\n<i>ID_NET_NAME_PATH=prefix[</i><b>P</b><i>domain]</i><b>p</b><i>bus</i><b>s</b><i>slot[</i><b>f</b><i>function][</i><b>n</b><i>phys_port_name|</i><b>d</b><i>dev_port]</i><b>u</b><i>port...[</i><b>c</b><i>config][</i><b>i</b><i>interface]</i></p>\n\n<p style=\"margin-left:17%;\">This property describes the\ndevice installation location. Different schemes are used\ndepending on the bus type, as described in the table below.\nFor BCMA and USB devices, PCI path information must known,\nand the full name consists of the prefix, PCI slot\nidentifier, and USB or BCMA location. The first two parts\nare denoted as &quot;...&quot; in the table below.</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><b>Table&nbsp;3.&nbsp;Path\nnaming schemes <br>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\n&nbsp;</b></p>\n\n\n<p align=\"center\"><b><img src=\"grohtml-3541513.png\" alt=\"Image grohtml-3541513.png\"></b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">CCW and grouped\nCCW devices are found in IBM System Z mainframes. Any\nleading zeros and dots are suppressed.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">For PCI, BCMA,\nand USB devices, the same rules as described above for slot\nnaming are used.</p>\n\n<h2>HISTORY\n<a name=\"HISTORY\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\n&quot;naming schemes&quot; have been defined (which may be\nchosen at system boot-up time via the\n<i>net.naming-scheme=</i> kernel command line switch, see\nabove):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v238</b></p>\n\n<p style=\"margin-left:17%;\">This is the naming scheme that\nwas implemented in systemd 238.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v239</b></p>\n\n<p style=\"margin-left:17%;\">Naming was changed for virtual\nnetwork interfaces created with SR-IOV and NPAR and for\ndevices where the PCI network controller device does not\nhave a slot number associated.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">SR-IOV virtual\ndevices are named based on the name of the parent interface,\nwith a suffix of &quot;v<i>port</i>&quot;, where <i>port</i>\nis the virtual device number. Previously those virtual\ndevices were named as if completely independent.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The ninth and\nlater NPAR virtual devices are named following the scheme\nused for the first eight NPAR partitions. Previously those\ndevices were not renamed and the kernel default\n(&quot;eth<i>N</i>&quot;) was used.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Names are also\ngenerated for PCI devices where the PCI network controller\ndevice does not have an associated slot number itself, but\none of its parents does. Previously those devices were not\nrenamed and the kernel default was used.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v240</b></p>\n\n<p style=\"margin-left:17%;\">The &quot;ib&quot; prefix and\nstable names for infiniband devices are introduced.\nPreviously those devices were not renamed.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The ACPI index\nfield (used in <i>ID_NET_NAME_ONBOARD=</i>) is now also used\nwhen 0.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">A new naming\npolicy <i>NamePolicy=keep</i> was introduced. With this\npolicy, if the network device name was already set by\nuserspace, the device will not be renamed again. Previously,\nthis naming policy applied implicitly, and now it must be\nexplicitly requested. Effectively, this means that network\ndevices will be renamed according to the configuration, even\nif they have been renamed already, if <b>keep</b> is not\nspecified as the naming policy in the .link file. See\n<b>systemd.link</b>(5) for a description of\n<i>NamePolicy=</i>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v241</b></p>\n\n\n<p style=\"margin-left:17%;\"><b>MACAddressPolicy=persistent</b>\nwas extended to set MAC addresses based on the device name.\nPreviously addresses were only based on the\n<i>ID_NET_NAME_*</i> attributes, which meant that interface\nnames would never be generated for virtual devices. Now a\npersistent address will be generated for most devices,\nincluding in particular bridges.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Note: when\nuserspace does not set a MAC address for a bridge device,\nthe kernel will initially assign a random address, and then\nchange it when the first device is enslaved to the bridge.\nWith this naming policy change, bridges get a persistent MAC\naddress based on the bridge name instead of the first\nenslaved device.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v243</b></p>\n\n<p style=\"margin-left:17%;\">Support for renaming netdevsim\n(simulated networking) devices was added. Previously those\ndevices were not renamed.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Previously\ntwo-letter interface type prefix was prepended to\n<i>ID_NET_LABEL_ONBOARD=</i>. This is not done anymore.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v245</b></p>\n\n<p style=\"margin-left:17%;\">When <a href=\"https://man.page/1/systemd-nspawn\">systemd-nspawn(1)</a>\nderives the name for the host side of the network interface\ncreated with <b>--network-veth</b> from the container name\nit previously simply truncated the result at 15 characters\nif longer (since that's the maximum length for network\ninterface names). From now on, for any interface name that\nwould be longer than 15 characters the last 4 characters are\nset to a 24bit hash value of the full interface name. This\nway network interface name collisions between multiple\nsimilarly named containers (who only differ in container\nname suffix) should be less likely (but still possible,\nsince the 24bit hash value is very small).</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v247</b></p>\n\n<p style=\"margin-left:17%;\">When a PCI slot is associated\nwith a PCI bridge that has multiple child network\ncontrollers, the same value of the <i>ID_NET_NAME_SLOT</i>\nproperty might be derived for those controllers. This would\ncause a naming conflict if the property is selected as the\ndevice name. Now, we detect this situation and don't produce\nthe <i>ID_NET_NAME_SLOT</i> property.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>v249</b></p>\n\n<p style=\"margin-left:17%;\">PCI hotplug slot names for the\ns390 PCI driver are a hexadecimal representation of the\nfunction_id device attribute. This attribute is now used to\nbuild the <i>ID_NET_NAME_SLOT</i>. Before that, all slot\nnames were parsed as decimal numbers, which could either\nresult in an incorrect value of the <i>ID_NET_NAME_SLOT</i>\nproperty or none at all.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Some firmware\nand hypervisor implementations report unreasonable high\nnumbers for the onboard index. To prevent the generation of\nbogus onbard interface names, index numbers greater than\n16381 (2^14-1) were ignored. For s390 PCI devices index\nvalues up to 65535 (2^16-1) are valid. To account for that,\nthe limit is increased to now 65535.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The udev rule\n<i>NAME=</i> replaces &quot;:&quot;, &quot;/&quot;, and\n&quot;%&quot; with an underscore (&quot;_&quot;), and\nrefuses strings which contain only numerics.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\n<b>latest</b> may be used to denote the latest scheme known\n(to this particular version of systemd).</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;1.&nbsp;Using\nudevadm test-builtin to display device properties</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ udevadm\ntest-builtin net_id /sys/class/net/enp0s31f6 <br>\n... <br>\nUsing default interface naming scheme 'v243'. <br>\nID_NET_NAMING_SCHEME=v243 <br>\nID_NET_NAME_MAC=enx54ee75cb1dc0 <br>\nID_OUI_FROM_DATABASE=Wistron InfoComm(Kunshan)Co.,Ltd. <br>\nID_NET_NAME_PATH=enp0s31f6 <br>\n...</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;2.&nbsp;PCI\nEthernet card with firmware index &quot;1&quot;</b></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">ID_NET_NAME_ONBOARD=eno1\n<br>\nID_NET_NAME_ONBOARD_LABEL=Ethernet Port 1</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;3.&nbsp;PCI\nEthernet card in hotplug slot with firmware index\nnumber</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:1c.3/0000:05:00.0/net/ens1\n<br>\nID_NET_NAME_MAC=enx000000000466 <br>\nID_NET_NAME_PATH=enp5s0 <br>\nID_NET_NAME_SLOT=ens1</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;4.&nbsp;PCI\nEthernet multi-function card with 2 ports</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:1c.0/0000:02:00.0/net/enp2s0f0\n<br>\nID_NET_NAME_MAC=enx78e7d1ea46da <br>\nID_NET_NAME_PATH=enp2s0f0</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:1c.0/0000:02:00.1/net/enp2s0f1\n<br>\nID_NET_NAME_MAC=enx78e7d1ea46dc <br>\nID_NET_NAME_PATH=enp2s0f1</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;5.&nbsp;PCI\nWLAN card</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:1c.1/0000:03:00.0/net/wlp3s0\n<br>\nID_NET_NAME_MAC=wlx0024d7e31130 <br>\nID_NET_NAME_PATH=wlp3s0</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;6.&nbsp;PCI\nIB host adapter with 2 ports</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:03.0/0000:15:00.0/net/ibp21s0f0\n<br>\nID_NET_NAME_PATH=ibp21s0f0</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:03.0/0000:15:00.1/net/ibp21s0f1\n<br>\nID_NET_NAME_PATH=ibp21s0f1</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;7.&nbsp;USB\nbuilt-in 3G modem</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.4/2-1.4:1.6/net/wwp0s29u1u4i6\n<br>\nID_NET_NAME_MAC=wwx028037ec0200 <br>\nID_NET_NAME_PATH=wwp0s29u1u4i6</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;8.&nbsp;USB\nAndroid phone</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2:1.0/net/enp0s29u1u2\n<br>\nID_NET_NAME_MAC=enxd626b3450fb5 <br>\nID_NET_NAME_PATH=enp0s29u1u2</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;9.&nbsp;s390\ngrouped CCW interface</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/sys/devices/css0/0.0.0007/0.0.f5f0/group_device/net/encf5f0\n<br>\nID_NET_NAME_MAC=enx026d3c00000a <br>\nID_NET_NAME_PATH=encf5f0</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/7/udev\">udev(7)</a>,\n<b>udevadm</b>(8), <b><font color=\"#0000FF\">Predictable\nNetwork Interface Names</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n<font color=\"#000000\">, <a href=\"https://man.page/1/systemd-nspawn\">systemd-nspawn(1)</a></font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"54%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">Predictable\nNetwork Interface Names</font></p></td>\n<td width=\"29%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://systemd.io/PREDICTABLE_INTERFACE_NAMES</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#NAMING\">NAMING</a>","<a href=\"#HISTORY\">HISTORY</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#NOTES\">NOTES</a>"],"level":7}