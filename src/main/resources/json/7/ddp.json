{"name":"ddp","description":"ddp - Linux AppleTalk protocol implementation","body":"\n\n<h1 align=\"center\">DDP</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ddp - Linux\nAppleTalk protocol implementation</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/socket.h&gt; <br>\n#include &lt;netatalk/at.h&gt;</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>ddp_socket</i>\n<b>= socket(AF_APPLETALK, SOCK_DGRAM, 0);</b> <i><br>\nraw_socket</i> <b>= socket(AF_APPLETALK, SOCK_RAW,</b>\n<i>protocol</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Linux\nimplements the AppleTalk protocols described in <i>Inside\nAppleTalk</i>. Only the DDP layer and AARP are present in\nthe kernel. They are designed to be used via the\n<b>netatalk</b> protocol libraries. This page documents the\ninterface for those who wish or need to use the DDP layer\ndirectly.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\ncommunication between AppleTalk and the user program works\nusing a BSD-compatible socket interface. For more\ninformation on sockets, see <a href=\"https://man.page/7/socket\">socket(7)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">An AppleTalk\nsocket is created by calling the <a href=\"https://man.page/2/socket\">socket(2)</a> function\nwith a <b>AF_APPLETALK</b> socket family argument. Valid\nsocket types are <b>SOCK_DGRAM</b> to open a <b>ddp</b>\nsocket or <b>SOCK_RAW</b> to open a <b>raw</b> socket.\n<i>protocol</i> is the AppleTalk protocol to be received or\nsent. For <b>SOCK_RAW</b> you must specify\n<b>ATPROTO_DDP</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Raw sockets may\nbe opened only by a process with effective user ID 0 or when\nthe process has the <b>CAP_NET_RAW</b> capability.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Address\nformat</b> <br>\nAn AppleTalk socket address is defined as a combination of a\nnetwork number, a node number, and a port number.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct at_addr\n{ <br>\nunsigned short s_net; <br>\nunsigned char s_node; <br>\n};</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct\nsockaddr_atalk { <br>\nsa_family_t sat_family; /* address family */ <br>\nunsigned char sat_port; /* port */ <br>\nstruct at_addr sat_addr; /* net/node */ <br>\n};</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>sat_family</i>\nis always set to <b>AF_APPLETALK</b>. <i>sat_port</i>\ncontains the port. The port numbers below 129 are known as\n<i>reserved ports</i>. Only processes with the effective\nuser ID 0 or the <b>CAP_NET_BIND_SERVICE</b> capability may\n<a href=\"https://man.page/2/bind\">bind(2)</a> to these sockets. <i>sat_addr</i> is the host\naddress. The <i>net</i> member of <i>struct at_addr</i>\ncontains the host network in network byte order. The value\nof <b>AT_ANYNET</b> is a wildcard and also implies\n&ldquo;this network.&rdquo; The <i>node</i> member of\n<i>struct at_addr</i> contains the host node number. The\nvalue of <b>AT_ANYNODE</b> is a wildcard and also implies\n&ldquo;this node.&rdquo; The value of <b>ATADDR_BCAST</b> is\na link local broadcast address.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Socket\noptions</b> <br>\nNo protocol-specific socket options are supported.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>/proc\ninterfaces</b> <br>\nIP supports a set of <i>/proc</i> interfaces to configure\nsome global AppleTalk parameters. The parameters can be\naccessed by reading or writing files in the directory\n<i>/proc/sys/net/atalk/</i>. <i><br>\naarp-expiry-time</i></p>\n\n<p style=\"margin-left:22%;\">The time interval (in seconds)\nbefore an AARP cache entry expires.</p>\n\n<p style=\"margin-left:11%;\"><i>aarp-resolve-time</i></p>\n\n<p style=\"margin-left:22%;\">The time interval (in seconds)\nbefore an AARP cache entry is resolved.</p>\n\n\n<p style=\"margin-left:11%;\"><i>aarp-retransmit-limit</i></p>\n\n<p style=\"margin-left:22%;\">The number of retransmissions\nof an AARP query before the node is declared dead.</p>\n\n<p style=\"margin-left:11%;\"><i>aarp-tick-time</i></p>\n\n<p style=\"margin-left:22%;\">The timer rate (in seconds) for\nthe timer driving AARP.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The default\nvalues match the specification and should never need to be\nchanged.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Ioctls</b>\n<br>\nAll ioctls described in <a href=\"https://man.page/7/socket\">socket(7)</a> apply to DDP.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EACCES</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">The user tried to execute an\noperation without the necessary permissions. These include\nsending to a broadcast address without having the broadcast\nflag set, and trying to bind to a reserved port without\neffective user ID 0 or <b>CAP_NET_BIND_SERVICE</b>.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>EADDRINUSE</b></p>\n\n<p style=\"margin-left:22%;\">Tried to bind to an address\nalready in use.</p>\n\n<p style=\"margin-left:11%;\"><b>EADDRNOTAVAIL</b></p>\n\n<p style=\"margin-left:22%;\">A nonexistent interface was\nrequested or the requested source address was not local.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EAGAIN</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"70%\">\n\n\n<p>Operation on a nonblocking socket would block.</p></td>\n<td width=\"8%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>EALREADY</b></p>\n\n<p style=\"margin-left:22%;\">A connection operation on a\nnonblocking socket is already in progress.</p>\n\n<p style=\"margin-left:11%;\"><b>ECONNABORTED</b></p>\n\n<p style=\"margin-left:22%;\">A connection was closed during\nan <a href=\"https://man.page/2/accept\">accept(2)</a>.</p>\n\n<p style=\"margin-left:11%;\"><b>EHOSTUNREACH</b></p>\n\n<p style=\"margin-left:22%;\">No routing table entry matches\nthe destination address.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"36%\">\n\n\n<p>Invalid argument passed.</p></td>\n<td width=\"42%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>EISCONN</b></p>\n\n<p style=\"margin-left:22%;\"><a href=\"https://man.page/2/connect\">connect(2)</a> was called on\nan already connected socket.</p>\n\n<p style=\"margin-left:11%;\"><b>EMSGSIZE</b></p>\n\n<p style=\"margin-left:22%;\">Datagram is bigger than the DDP\nMTU.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENODEV</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Network device not available or not capable of sending\nIP.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOENT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><b>SIOCGSTAMP</b> was called on a socket where no packet\narrived.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOMEM</b> and\n<b>ENOBUFS</b></p>\n\n<p style=\"margin-left:22%;\">Not enough memory\navailable.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOPKG</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"58%\">\n\n\n<p>A kernel subsystem was not configured.</p></td>\n<td width=\"20%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOPROTOOPT</b> and\n<b>EOPNOTSUPP</b></p>\n\n<p style=\"margin-left:22%;\">Invalid socket option\npassed.</p>\n\n<p style=\"margin-left:11%;\"><b>ENOTCONN</b></p>\n\n<p style=\"margin-left:22%;\">The operation is defined only\non a connected socket, but the socket wasn&rsquo;t\nconnected.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EPERM</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>User doesn&rsquo;t have permission to set high priority,\nmake a configuration change, or send signals to the\nrequested process or group.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EPIPE</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>The connection was unexpectedly closed or shut down by\nthe other end.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ESOCKTNOSUPPORT</b></p>\n\n<p style=\"margin-left:22%;\">The socket was unconfigured, or\nan unknown socket type was requested.</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">AppleTalk is\nsupported by Linux 2.0 or higher. The <i>/proc</i>\ninterfaces exist since Linux 2.2.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Be very careful\nwith the <b>SO_BROADCAST</b> option; it is not privileged in\nLinux. It is easy to overload the network with careless\nsending to broadcast addresses.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Compatibility</b>\n<br>\nThe basic AppleTalk socket interface is compatible with\n<b>netatalk</b> on BSD-derived systems. Many BSD systems\nfail to check <b>SO_BROADCAST</b> when sending broadcast\nframes; this can lead to compatibility problems.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The raw socket\nmode is unique to Linux and exists to support the\nalternative CAP package and AppleTalk monitoring tools more\neasily.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">There are too\nmany inconsistent error values.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The ioctls used\nto configure routing tables, devices, AARP tables, and other\ndevices are not yet described.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/recvmsg\">recvmsg(2)</a>,\n<a href=\"https://man.page/2/sendmsg\">sendmsg(2)</a>, <a href=\"https://man.page/7/capabilities\">capabilities(7)</a>,\n<a href=\"https://man.page/7/socket\">socket(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":7}