{"name":"user-session-keyring","description":"user-session-keyring - per-user default session keyring","body":"\n\n<h1 align=\"center\">USER-SESSION-KEYRING</h1>\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">user-session-keyring\n- per-user default session keyring</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The user\nsession keyring is a keyring used to anchor keys on behalf\nof a user. Each UID the kernel deals with has its own user\nsession keyring that is shared by all processes with that\nUID. The user session keyring has a name (description) of\nthe form <i>_uid_ses.&lt;UID&gt;</i> where\n<i>&lt;UID&gt;</i> is the user ID of the corresponding\nuser.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The user\nsession keyring is associated with the record that the\nkernel maintains for the UID. It comes into existence upon\nthe first attempt to access either the user session keyring,\nthe <a href=\"https://man.page/7/user-keyring\">user-keyring(7)</a>, or the\n<a href=\"https://man.page/7/session-keyring\">session-keyring(7)</a>. The keyring remains pinned in\nexistence so long as there are processes running with that\nreal UID or files opened by those processes remain open.\n(The keyring can also be pinned indefinitely by linking it\ninto another keyring.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The user\nsession keyring is created on demand when a thread requests\nit or when a thread asks for its <a href=\"https://man.page/7/session-keyring\">session-keyring(7)</a>\nand that keyring doesn&rsquo;t exist. In the latter case, a\nuser session keyring will be created and, if the session\nkeyring wasn&rsquo;t to be created, the user session keyring\nwill be set as the process&rsquo;s actual session\nkeyring.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The user\nsession keyring is searched by <a href=\"https://man.page/2/request_key\">request_key(2)</a> if the\nactual session keyring does not exist and is ignored\notherwise.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A special\nserial number value, <b>KEY_SPEC_USER_SESSION_KEYRING</b>,\nis defined that can be used in lieu of the actual serial\nnumber of the calling process&rsquo;s user session\nkeyring.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">From the\n<a href=\"https://man.page/1/keyctl\">keyctl(1)</a> utility, &rsquo;<b>@us</b>&rsquo; can be\nused instead of a numeric key ID in much the same way.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">User session\nkeyrings are independent of <a href=\"https://man.page/2/clone\">clone(2)</a>, <a href=\"https://man.page/2/fork\">fork(2)</a>,\n<a href=\"https://man.page/2/vfork\">vfork(2)</a>, <a href=\"https://man.page/2/execve\">execve(2)</a>, and <a href=\"https://man.page/2/_exit\">_exit(2)</a>\nexcepting that the keyring is destroyed when the UID record\nis destroyed when the last process pinning it exits.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If a user\nsession keyring does not exist when it is accessed, it will\nbe created.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Rather than\nrelying on the user session keyring, it is strongly\nrecommended&mdash;especially if the process is running as\nroot&mdash;that a <a href=\"https://man.page/7/session-keyring\">session-keyring(7)</a> be set\nexplicitly, for example by <b>pam_keyinit</b>(8).</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The user\nsession keyring was added to support situations where a\nprocess doesn&rsquo;t have a session keyring, perhaps\nbecause it was created via a pathway that didn&rsquo;t\ninvolve PAM (e.g., perhaps it was a daemon started by\n<b>inetd</b>(8)). In such a scenario, the user session\nkeyring acts as a substitute for the\n<a href=\"https://man.page/7/session-keyring\">session-keyring(7)</a>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/keyctl\">keyctl(1)</a>,\n<a href=\"https://man.page/3/keyctl\">keyctl(3)</a>, <a href=\"https://man.page/7/keyrings\">keyrings(7)</a>,\n<a href=\"https://man.page/7/persistent-keyring\">persistent-keyring(7)</a>, <a href=\"https://man.page/7/process-keyring\">process-keyring(7)</a>,\n<a href=\"https://man.page/7/session-keyring\">session-keyring(7)</a>, <a href=\"https://man.page/7/thread-keyring\">thread-keyring(7)</a>,\n<a href=\"https://man.page/7/user-keyring\">user-keyring(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":7}