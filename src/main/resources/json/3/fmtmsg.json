{"name":"fmtmsg","description":"fmtmsg - print formatted error messages","body":"\n\n<h1 align=\"center\">FMTMSG</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">fmtmsg - print\nformatted error messages</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;fmtmsg.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nfmtmsg(long</b> <i>classification</i><b>, const char\n*</b><i>label</i><b>, <br>\nint</b> <i>severity</i><b>, const char *</b><i>text</i><b>,\n<br>\nconst char *</b><i>action</i><b>, const char\n*</b><i>tag</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This function\ndisplays a message described by its arguments on the\ndevice(s) specified in the <i>classification</i> argument.\nFor messages written to <i>stderr</i>, the format depends on\nthe <b>MSGVERB</b> environment variable.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>label</i> argument identifies the source of the message.\nThe string must consist of two colon separated parts where\nthe first part has not more than 10 and the second part not\nmore than 14 characters.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <i>text</i>\nargument describes the condition of the error.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>action</i> argument describes possible steps to recover\nfrom the error. If it is printed, it is prefixed by &quot;TO\nFIX: &quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The <i>tag</i>\nargument is a reference to the online documentation where\nmore information can be found. It should contain the\n<i>label</i> value and a unique identification number.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Dummy\narguments</b> <br>\nEach of the arguments can have a dummy value. The dummy\nclassification value <b>MM_NULLMC</b> (0L) does not specify\nany output, so nothing is printed. The dummy severity value\n<b>NO_SEV</b> (0) says that no severity is supplied. The\nvalues <b>MM_NULLLBL</b>, <b>MM_NULLTXT</b>,\n<b>MM_NULLACT</b>, <b>MM_NULLTAG</b> are synonyms for\n<i>((char&nbsp;*)&nbsp;0)</i>, the empty string, and\n<b>MM_NULLSEV</b> is a synonym for <b>NO_SEV</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>The\nclassification argument</b> <br>\nThe <i>classification</i> argument is the sum of values\ndescribing 4 types of information.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The first value\ndefines the output channel.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_PRINT</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"45%\">\n\n\n<p>Output to <i>stderr</i>.</p></td>\n<td width=\"26%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_CONSOLE</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"45%\">\n\n\n<p>Output to the system console.</p></td>\n<td width=\"26%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>MM_PRINT |\nMM_CONSOLE</b></p>\n\n<p style=\"margin-left:29%;\">Output to both.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The second\nvalue is the source of the error:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"11%\">\n\n\n<p><b>MM_HARD</b></p></td>\n<td width=\"7%\"></td>\n<td width=\"40%\">\n\n\n<p>A hardware error occurred.</p></td>\n<td width=\"31%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"11%\">\n\n\n<p><b>MM_FIRM</b></p></td>\n<td width=\"7%\"></td>\n<td width=\"40%\">\n\n\n<p>A firmware error occurred.</p></td>\n<td width=\"31%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"11%\">\n\n\n<p><b>MM_SOFT</b></p></td>\n<td width=\"7%\"></td>\n<td width=\"40%\">\n\n\n<p>A software error occurred.</p></td>\n<td width=\"31%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The third value\nencodes the detector of the problem:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p style=\"margin-top: 1em\"><b>MM_APPL</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"60%\">\n\n\n<p style=\"margin-top: 1em\">It is detected by an\napplication.</p> </td>\n<td width=\"11%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p><b>MM_UTIL</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"60%\">\n\n\n<p>It is detected by a utility.</p></td>\n<td width=\"11%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p><b>MM_OPSYS</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"60%\">\n\n\n<p>It is detected by the operating system.</p></td>\n<td width=\"11%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The fourth\nvalue shows the severity of the incident:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p style=\"margin-top: 1em\"><b>MM_RECOVER</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"45%\">\n\n\n<p style=\"margin-top: 1em\">It is a recoverable error.</p></td>\n<td width=\"26%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_NRECOV</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"45%\">\n\n\n<p>It is a nonrecoverable error.</p></td>\n<td width=\"26%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>The severity\nargument</b> <br>\nThe <i>severity</i> argument can take one of the following\nvalues:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p style=\"margin-top: 1em\"><b>MM_NOSEV</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"51%\">\n\n\n<p style=\"margin-top: 1em\">No severity is printed.</p></td>\n<td width=\"20%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_HALT</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"51%\">\n\n\n<p>This value is printed as HALT.</p></td>\n<td width=\"20%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_ERROR</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"51%\">\n\n\n<p>This value is printed as ERROR.</p></td>\n<td width=\"20%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_WARNING</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"51%\">\n\n\n<p>This value is printed as WARNING.</p></td>\n<td width=\"20%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"15%\">\n\n\n<p><b>MM_INFO</b></p></td>\n<td width=\"3%\"></td>\n<td width=\"51%\">\n\n\n<p>This value is printed as INFO.</p></td>\n<td width=\"20%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The numeric\nvalues are between 0 and 4. Using <a href=\"https://man.page/3/addseverity\">addseverity(3)</a> or\nthe environment variable <b>SEV_LEVEL</b> you can add more\nlevels and strings to print.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The function\ncan return 4 values:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p style=\"margin-top: 1em\"><b>MM_OK</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"45%\">\n\n\n<p style=\"margin-top: 1em\">Everything went smooth.</p></td>\n<td width=\"26%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p><b>MM_NOTOK</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"45%\">\n\n\n<p>Complete failure.</p></td>\n<td width=\"26%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p><b>MM_NOMSG</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"45%\">\n\n\n<p>Error writing to <i>stderr</i>.</p></td>\n<td width=\"26%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"12%\">\n\n\n<p><b>MM_NOCON</b></p></td>\n<td width=\"6%\"></td>\n<td width=\"45%\">\n\n\n<p>Error writing to the console.</p></td>\n<td width=\"26%\">\n</td></tr>\n</table>\n\n<h2>ENVIRONMENT\n<a name=\"ENVIRONMENT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The environment\nvariable <b>MSGVERB</b> (&quot;message verbosity&quot;) can\nbe used to suppress parts of the output to <i>stderr</i>.\n(It does not influence output to the console.) When this\nvariable is defined, is non-NULL, and is a colon-separated\nlist of valid keywords, then only the parts of the message\ncorresponding to these keywords is printed. Valid keywords\nare &quot;label&quot;, &quot;severity&quot;,\n&quot;text&quot;, &quot;action&quot; and\n&quot;tag&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The environment\nvariable <b>SEV_LEVEL</b> can be used to introduce new\nseverity levels. By default, only the five severity levels\ndescribed above are available. Any other numeric value would\nmake <b>fmtmsg</b>() print nothing. If the user puts\n<b>SEV_LEVEL</b> with a format like</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\">SEV_LEVEL=[description[:description[:...]]]</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">in the\nenvironment of the process before the first call to\n<b>fmtmsg</b>(), where each description is of the form</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\">severity-keyword,level,printstring</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">then\n<b>fmtmsg</b>() will also accept the indicated values for\nthe level (in addition to the standard levels 0&ndash;4),\nand use the indicated printstring when such a level\noccurs.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\nseverity-keyword part is not used by <b>fmtmsg</b>() but it\nhas to be present. The level part is a string representation\nof a number. The numeric value must be a number greater than\n4. This value must be used in the severity argument of\n<b>fmtmsg</b>() to select this class. It is not possible to\noverwrite any of the predefined classes. The printstring is\nthe string printed when a message of this class is processed\nby <b>fmtmsg</b>().</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fmtmsg</b>()\nis provided in glibc since version 2.1.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3336051.png\" alt=\"Image grohtml-3336051.png\"></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Before glibc\n2.16, the <b>fmtmsg</b>() function uses a static variable\nthat is not protected, so it is not thread-safe.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Since glibc\n2.16, the <b>fmtmsg</b>() function uses a lock to protect\nthe static variable, so it is thread-safe.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The functions\n<b>fmtmsg</b>() and <a href=\"https://man.page/3/addseverity\">addseverity(3)</a>, and environment\nvariables <b>MSGVERB</b> and <b>SEV_LEVEL</b> come from\nSystem V.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The function\n<b>fmtmsg</b>() and the environment variable <b>MSGVERB</b>\nare described in POSIX.1-2001 and POSIX.1-2008.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">System V and\nUnixWare man pages tell us that these functions have been\nreplaced by &quot;pfmt() and addsev()&quot; or by\n&quot;pfmt(), vpfmt(), lfmt(), and vlfmt()&quot;, and will\nbe removed later.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">#include\n&lt;stdio.h&gt; <br>\n#include &lt;stdlib.h&gt; <br>\n#include &lt;fmtmsg.h&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">int <br>\nmain(void) <br>\n{ <br>\nlong class = MM_PRINT | MM_SOFT | MM_OPSYS | MM_RECOVER;\n<br>\nint err;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">err =\nfmtmsg(class, &quot;util-linux:mount&quot;, MM_ERROR, <br>\n&quot;unknown mount option&quot;, &quot;See mount(8).&quot;,\n<br>\n&quot;util-linux:mount:017&quot;); <br>\nswitch (err) { <br>\ncase MM_OK: <br>\nbreak; <br>\ncase MM_NOTOK: <br>\nprintf(&quot;Nothing printed\\n&quot;); <br>\nbreak; <br>\ncase MM_NOMSG: <br>\nprintf(&quot;Nothing printed to stderr\\n&quot;); <br>\nbreak; <br>\ncase MM_NOCON: <br>\nprintf(&quot;No console output\\n&quot;); <br>\nbreak; <br>\ndefault: <br>\nprintf(&quot;Unknown error from fmtmsg()\\n&quot;); <br>\n} <br>\nexit(EXIT_SUCCESS); <br>\n}</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The output\nshould be:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">util-linux:mount:\nERROR: unknown mount option <br>\nTO FIX: See mount(8). util-linux:mount:017</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">and after</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">MSGVERB=text:action;\nexport MSGVERB</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">the output\nbecomes:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">unknown mount\noption <br>\nTO FIX: See mount(8).</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/addseverity\">addseverity(3)</a>,\n<a href=\"https://man.page/3/perror\">perror(3)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ENVIRONMENT\">ENVIRONMENT</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}