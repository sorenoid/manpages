{"name":"ttyslot","description":"ttyslot - find the slot of the current user&rsquo;s terminal in some file","body":"\n\n<h1 align=\"center\">TTYSLOT</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ttyslot - find\nthe slot of the current user&rsquo;s terminal in some\nfile</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;unistd.h&gt;</b> /See NOTES */</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nttyslot(void);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>ttyslot</b>():</p>\n\n<p style=\"margin-left:17%;\">Since glibc 2.24: <br>\n_DEFAULT_SOURCE <br>\nFrom glibc 2.20 to 2.23: <br>\n_DEFAULT_SOURCE || <br>\n\n_XOPEN_SOURCE&nbsp;&amp;&amp;&nbsp;_XOPEN_SOURCE&nbsp;&lt;&nbsp;500\n<br>\nGlibc 2.19 and earlier: <br>\n_BSD_SOURCE || <br>\n\n_XOPEN_SOURCE&nbsp;&amp;&amp;&nbsp;_XOPEN_SOURCE&nbsp;&lt;&nbsp;500</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The legacy\nfunction <b>ttyslot</b>() returns the index of the current\nuser&rsquo;s entry in some file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Now &quot;What\nfile?&quot; you ask. Well, let&rsquo;s first look at some\nhistory.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Ancient\nhistory</b> <br>\nThere used to be a file <i>/etc/ttys</i> in UNIX&nbsp;V6,\nthat was read by the <a href=\"https://man.page/1/init\">init(1)</a> program to find out what\nto do with each terminal line. Each line consisted of three\ncharacters. The first character was either '0' or '1', where\n'0' meant &quot;ignore&quot;. The second character denoted\nthe terminal: '8' stood for &quot;/dev/tty8&quot;. The third\ncharacter was an argument to <b>getty</b>(8) indicating the\nsequence of line speeds to try ('-' was: start trying 110\nbaud). Thus a typical line was &quot;18-&quot;. A hang on\nsome line was solved by changing the '1' to a '0', signaling\ninit, changing back again, and signaling init again.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In UNIX&nbsp;V7\nthe format was changed: here the second character was the\nargument to <b>getty</b>(8) indicating the sequence of line\nspeeds to try ('0' was: cycle through 300-1200-150-110 baud;\n'4' was for the on-line console DECwriter) while the rest of\nthe line contained the name of the tty. Thus a typical line\nwas &quot;14console&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Later systems\nhave more elaborate syntax. System V-like systems have\n<i>/etc/inittab</i> instead.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Ancient\nhistory (2)</b> <br>\nOn the other hand, there is the file <i>/etc/utmp</i>\nlisting the people currently logged in. It is maintained by\n<a href=\"https://man.page/1/login\">login(1)</a>. It has a fixed size, and the appropriate\nindex in the file was determined by <a href=\"https://man.page/1/login\">login(1)</a> using\nthe <b>ttyslot</b>() call to find the number of the line in\n<i>/etc/ttys</i> (counting from 1).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>The\nsemantics of ttyslot</b> <br>\nThus, the function <b>ttyslot</b>() returns the index of the\ncontrolling terminal of the calling process in the file\n<i>/etc/ttys</i>, and that is (usually) the same as the\nindex of the entry for the current user in the file\n<i>/etc/utmp</i>. BSD still has the <i>/etc/ttys</i> file,\nbut System V-like systems do not, and hence cannot refer to\nit. Thus, on such systems the documentation says that\n<b>ttyslot</b>() returns the current user&rsquo;s index in\nthe user accounting data base.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">If successful,\nthis function returns the slot number. On error (e.g., if\nnone of the file descriptors 0, 1 or 2 is associated with a\nterminal that occurs in this data base) it returns 0 on\nUNIX&nbsp;V6 and V7 and BSD-like systems, but -1 on System\nV-like systems.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"8%\"></td>\n<td width=\"7%\">\n</td>\n<td width=\"8%\">\n</td>\n<td width=\"8%\"></td>\n<td width=\"7%\"></td>\n<td width=\"62%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"8%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\">\n</td>\n<td width=\"8%\"></td>\n<td width=\"7%\"></td>\n<td width=\"62%\">\n</td></tr>\n</table>\n\n\n<p align=\"center\"><img src=\"grohtml-3277481.png\" alt=\"Image grohtml-3277481.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">SUSv1; marked\nas LEGACY in SUSv2; removed in POSIX.1-2001. SUSv2 requires\n-1 on error.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The utmp file\nis found in various places on various systems, such as\n<i>/etc/utmp</i>, <i>/var/adm/utmp</i>,\n<i>/var/run/utmp</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The glibc2\nimplementation of this function reads the file\n<b>_PATH_TTYS</b>, defined in <i>&lt;ttyent.h&gt;</i> as\n&quot;/etc/ttys&quot;. It returns 0 on error. Since Linux\nsystems do not usually have &quot;/etc/ttys&quot;, it will\nalways return 0.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On BSD-like\nsystems and Linux, the declaration of <b>ttyslot</b>() is\nprovided by <i>&lt;unistd.h&gt;</i>. On System V-like\nsystems, the declaration is provided by\n<i>&lt;stdlib.h&gt;</i>. Since glibc 2.24,\n<i>&lt;stdlib.h&gt;</i> also provides the declaration with\nthe following feature test macro definitions:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">(_XOPEN_SOURCE\n&gt;= 500 || <br>\n(_XOPEN_SOURCE &amp;&amp; _XOPEN_SOURCE_EXTENDED)) <br>\n&amp;&amp; ! (_POSIX_C_SOURCE &gt;= 200112L || _XOPEN_SOURCE\n&gt;= 600)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Minix also has\n<i>fttyslot</i>(<i>fd</i>).</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/getttyent\">getttyent(3)</a>,\n<a href=\"https://man.page/3/ttyname\">ttyname(3)</a>, <a href=\"https://man.page/5/utmp\">utmp(5)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}