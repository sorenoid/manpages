{"name":"mkstemp","description":"mkstemp,\nmkostemp, mkstemps, mkostemps - create a unique temporary\nfile","body":"\n\n<h1 align=\"center\">MKSTEMP</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">mkstemp,\nmkostemp, mkstemps, mkostemps - create a unique temporary\nfile</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;stdlib.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmkstemp(char *</b><i>template</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmkostemp(char *</b><i>template</i><b>, int</b>\n<i>flags</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmkstemps(char *</b><i>template</i><b>, int</b>\n<i>suffixlen</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmkostemps(char *</b><i>template</i><b>, int</b>\n<i>suffixlen</i><b>, int</b> <i>flags</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkstemp</b>():</p>\n\n\n<p style=\"margin-left:17%;\">_XOPEN_SOURCE&nbsp;&gt;=&nbsp;500\n<br>\n|| /* Since glibc 2.12: */\n_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200809L <br>\n|| /* Glibc versions &lt;= 2.19: */ _SVID_SOURCE ||\n_BSD_SOURCE</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkostemp</b>():\n_GNU_SOURCE <b><br>\nmkstemps</b>(): <br>\n/* Glibc since 2.19: */ _DEFAULT_SOURCE <br>\n|| /* Glibc versions &lt;= 2.19: */ _SVID_SOURCE ||\n_BSD_SOURCE <b><br>\nmkostemps</b>(): _GNU_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>mkstemp</b>() function generates a unique temporary\nfilename from <i>template</i>, creates and opens the file,\nand returns an open file descriptor for the file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The last six\ncharacters of <i>template</i> must be &quot;XXXXXX&quot; and\nthese are replaced with a string that makes the filename\nunique. Since it will be modified, <i>template</i> must not\nbe a string constant, but should be declared as a character\narray.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The file is\ncreated with permissions 0600, that is, read plus write for\nowner only. The returned file descriptor provides both read\nand write access to the file. The file is opened with the\n<a href=\"https://man.page/2/open\">open(2)</a> <b>O_EXCL</b> flag, guaranteeing that the\ncaller is the process that creates the file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>mkostemp</b>() function is like <b>mkstemp</b>(), with\nthe difference that the following bits&mdash;with the same\nmeaning as for <a href=\"https://man.page/2/open\">open(2)</a>&mdash;may be specified in\n<i>flags</i>: <b>O_APPEND</b>, <b>O_CLOEXEC</b>, and\n<b>O_SYNC</b>. Note that when creating the file,\n<b>mkostemp</b>() includes the values <b>O_RDWR</b>,\n<b>O_CREAT</b>, and <b>O_EXCL</b> in the <i>flags</i>\nargument given to <a href=\"https://man.page/2/open\">open(2)</a>; including these values in\nthe <i>flags</i> argument given to <b>mkostemp</b>() is\nunnecessary, and produces errors on some systems.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>mkstemps</b>() function is like <b>mkstemp</b>(), except\nthat the string in <i>template</i> contains a suffix of\n<i>suffixlen</i> characters. Thus, <i>template</i> is of the\nform <i>prefixXXXXXXsuffix</i>, and the string XXXXXX is\nmodified as for <b>mkstemp</b>().</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>mkostemps</b>() function is to <b>mkstemps</b>() as\n<b>mkostemp</b>() is to <b>mkstemp</b>().</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nthese functions return the file descriptor of the temporary\nfile. On error, -1 is returned, and <i>errno</i> is set\nappropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EEXIST</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">Could not create a unique\ntemporary filename. Now the contents of <i>template</i> are\nundefined.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>For <b>mkstemp</b>() and <b>mkostemp</b>(): The last six\ncharacters of <i>template</i> were not XXXXXX; now\n<i>template</i> is unchanged.</p></td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">For\n<b>mkstemps</b>() and <b>mkostemps</b>(): <i>template</i> is\nless than <i>(6 + suffixlen)</i> characters long, or the\nlast 6 characters before the suffix in <i>template</i> were\nnot XXXXXX.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">These functions\nmay also fail with any of the errors described for\n<a href=\"https://man.page/2/open\">open(2)</a>.</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkostemp</b>()\nis available since glibc 2.7. <b>mkstemps</b>() and\n<b>mkostemps</b>() are available since glibc 2.11.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3384481.png\" alt=\"Image grohtml-3384481.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkstemp</b>():\n4.3BSD, POSIX.1-2001.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkstemps</b>():\nunstandardized, but appears on several other systems.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkostemp</b>()\nand <b>mkostemps</b>(): are glibc extensions.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">In glibc\nversions 2.06 and earlier, the file is created with\npermissions 0666, that is, read and write for all users.\nThis old behavior may be a security risk, especially since\nother UNIX flavors use 0600, and somebody might overlook\nthis detail when porting programs. POSIX.1-2008 adds a\nrequirement that the file be created with mode 0600.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">More generally,\nthe POSIX specification of <b>mkstemp</b>() does not say\nanything about file modes, so the application should make\nsure its file mode creation mask (see <a href=\"https://man.page/2/umask\">umask(2)</a>) is\nset appropriately before calling <b>mkstemp</b>() (and\n<b>mkostemp</b>()).</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/mkdtemp\">mkdtemp(3)</a>,\n<a href=\"https://man.page/3/mktemp\">mktemp(3)</a>, <a href=\"https://man.page/3/tempnam\">tempnam(3)</a>, <a href=\"https://man.page/3/tmpfile\">tmpfile(3)</a>,\n<a href=\"https://man.page/3/tmpnam\">tmpnam(3)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}