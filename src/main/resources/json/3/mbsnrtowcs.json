{"name":"mbsnrtowcs","description":"mbsnrtowcs - convert a multibyte string to a wide-character string","body":"\n\n<h1 align=\"center\">MBSNRTOWCS</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">mbsnrtowcs -\nconvert a multibyte string to a wide-character string</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;wchar.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>size_t\nmbsnrtowcs(wchar_t *</b><i>dest</i><b>, const char\n**</b><i>src</i><b>, <br>\nsize_t</b> <i>nms</i><b>, size_t</b> <i>len</i><b>,\nmbstate_t *</b><i>ps</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mbsnrtowcs</b>():</p>\n\n<p style=\"margin-left:17%;\">Since glibc 2.10:</p>\n\n\n<p style=\"margin-left:23%;\">_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200809L</p>\n\n<p style=\"margin-left:17%;\">Before glibc 2.10:</p>\n\n<p style=\"margin-left:23%;\">_GNU_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>mbsnrtowcs</b>() function is like the <a href=\"https://man.page/3/mbsrtowcs\">mbsrtowcs(3)</a>\nfunction, except that the number of bytes to be converted,\nstarting at <i>*src</i>, is limited to at most <i>nms</i>\nbytes.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If <i>dest</i>\nis not NULL, the <b>mbsnrtowcs</b>() function converts at\nmost <i>nms</i> bytes from the multibyte string <i>*src</i>\nto a wide-character string starting at <i>dest</i>. At most\n<i>len</i> wide characters are written to <i>dest</i>. The\nshift state <i>*ps</i> is updated. The conversion is\neffectively performed by repeatedly calling <i>mbrtowc(dest,\n*src, n, ps)</i> where <i>n</i> is some positive number, as\nlong as this call succeeds, and then incrementing\n<i>dest</i> by one and <i>*src</i> by the number of bytes\nconsumed. The conversion can stop for three reasons:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>1.</p></td>\n<td width=\"1%\"></td>\n<td width=\"85%\">\n\n\n<p>An invalid multibyte sequence has been encountered. In\nthis case, <i>*src</i> is left pointing to the invalid\nmultibyte sequence, <i>(size_t)&nbsp;-1</i> is returned, and\n<i>errno</i> is set to <b>EILSEQ</b>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>2.</p></td>\n<td width=\"1%\"></td>\n<td width=\"85%\">\n\n\n<p>The <i>nms</i> limit forces a stop, or <i>len</i>\nnon-L'\\0' wide characters have been stored at <i>dest</i>.\nIn this case, <i>*src</i> is left pointing to the next\nmultibyte sequence to be converted, and the number of wide\ncharacters written to <i>dest</i> is returned.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>3.</p></td>\n<td width=\"1%\"></td>\n<td width=\"85%\">\n\n\n<p>The multibyte string has been completely converted,\nincluding the terminating null wide character ('\\0') (which\nhas the side effect of bringing back <i>*ps</i> to the\ninitial state). In this case, <i>*src</i> is set to NULL,\nand the number of wide characters written to <i>dest</i>,\nexcluding the terminating null wide character, is\nreturned.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">According to\nPOSIX.1, if the input buffer ends with an incomplete\ncharacter, it is unspecified whether conversion stops at the\nend of the previous character (if any), or at the end of the\ninput buffer. The glibc implementation adopts the former\nbehavior.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If <i>dest</i>\nis NULL, <i>len</i> is ignored, and the conversion proceeds\nas above, except that the converted wide characters are not\nwritten out to memory, and that no destination length limit\nexists.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In both of the\nabove cases, if <i>ps</i> is NULL, a static anonymous state\nknown only to the <b>mbsnrtowcs</b>() function is used\ninstead.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The programmer\nmust ensure that there is room for at least <i>len</i> wide\ncharacters at <i>dest</i>.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>mbsnrtowcs</b>() function returns the number of wide\ncharacters that make up the converted part of the\nwide-character string, not including the terminating null\nwide character. If an invalid multibyte sequence was\nencountered, <i>(size_t)&nbsp;-1</i> is returned, and\n<i>errno</i> set to <b>EILSEQ</b>.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3344541.png\" alt=\"Image grohtml-3344541.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2008.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The behavior of\n<b>mbsnrtowcs</b>() depends on the <b>LC_CTYPE</b> category\nof the current locale.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Passing NULL as\n<i>ps</i> is not multithread safe.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/iconv\">iconv(3)</a>,\n<a href=\"https://man.page/3/mbrtowc\">mbrtowc(3)</a>, <a href=\"https://man.page/3/mbsinit\">mbsinit(3)</a>,\n<a href=\"https://man.page/3/mbsrtowcs\">mbsrtowcs(3)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}