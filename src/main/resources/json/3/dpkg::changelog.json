{"name":"dpkg::changelog","body":"\n\n<h1 align=\"center\">Dpkg::Changelog</h1>\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Dpkg::Changelog\n- base class to implement a changelog parser</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Dpkg::Changelog\nis a class representing a changelog file as an array of\nchangelog entries (Dpkg::Changelog::Entry). By deriving this\nclass and implementing its parse method, you add the ability\nto fill this object with changelog entries.</p>\n\n<h2>METHODS\n<a name=\"METHODS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">$c =\nDpkg::Changelog-&gt;new(%options)</p>\n\n<p style=\"margin-left:17%;\">Creates a new changelog\nobject.</p>\n\n<p style=\"margin-left:11%;\">$c-&gt;set_options(%opts)</p>\n\n<p style=\"margin-left:17%;\">Change the value of some\noptions. &quot;verbose&quot; (defaults to 1) defines whether\nparse errors are displayed as warnings by default.\n&quot;reportfile&quot; is a string to use instead of the\nname of the file parsed, in particular in error messages.\n&quot;range&quot; defines the range of entries that we want\nto parse, the parser will stop as soon as it has parsed\nenough data to satisfy $c-&gt;get_range($opts{range}).</p>\n\n<p style=\"margin-left:11%;\">$count = $c-&gt;parse($fh,\n$description)</p>\n\n<p style=\"margin-left:17%;\">Read the filehandle and parse a\nchangelog in it. The data in the object is reset before\nparsing new data.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Returns the\nnumber of changelog entries that have been parsed with\nsuccess.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">This method\nneeds to be implemented by one of the specialized changelog\nformat subclasses.</p>\n\n<p style=\"margin-left:11%;\">$count =\n$c-&gt;load($filename)</p>\n\n<p style=\"margin-left:17%;\">Parse $filename contents for a\nchangelog.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Returns the\nnumber of changelog entries that have been parsed with\nsuccess.</p>\n\n\n<p style=\"margin-left:11%;\">$c-&gt;<b>reset_parse_errors()</b></p>\n\n<p style=\"margin-left:17%;\">Can be used to delete all\ninformation about errors occurred during previous parse\nruns.</p>\n\n<p style=\"margin-left:11%;\">$c-&gt;parse_error($file,\n$line_nr, $error, [$line])</p>\n\n<p style=\"margin-left:17%;\">Record a new parse error in\n$file at line $line_nr. The error message is specified with\n$error and a copy of the line can be recorded in $line.</p>\n\n\n<p style=\"margin-left:11%;\">$c-&gt;<b>get_parse_errors()</b></p>\n\n<p style=\"margin-left:17%;\">Returns all error messages from\nthe last parse run. If called in scalar context returns a\nhuman readable string representation. If called in list\ncontext returns an array of arrays. Each of these arrays\ncontains</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>1.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>a string describing the origin of the data (a filename\nusually). If the reportfile configuration option was given,\nits value will be used instead.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>2.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>the line number where the error occurred</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>3.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>an error description</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>4.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>the original line</p></td></tr>\n</table>\n\n\n<p style=\"margin-left:11%;\">$c-&gt;set_unparsed_tail($tail)</p>\n\n<p style=\"margin-left:17%;\">Add a string representing\nunparsed lines after the changelog entries. Use undef as\n$tail to remove the unparsed lines currently set.</p>\n\n\n<p style=\"margin-left:11%;\">$c-&gt;<b>get_unparsed_tail()</b></p>\n\n<p style=\"margin-left:17%;\">Return a string representing\nthe unparsed lines after the changelog entries. Returns\nundef if there&rsquo;s no such thing.</p>\n\n<p style=\"margin-left:11%;\">@{$c}</p>\n\n<p style=\"margin-left:17%;\">Returns all the\nDpkg::Changelog::Entry objects contained in this changelog\nin the order in which they have been parsed.</p>\n\n<p style=\"margin-left:11%;\">$c-&gt;get_range($range)</p>\n\n<p style=\"margin-left:17%;\">Returns an array (if called in\nlist context) or a reference to an array of\nDpkg::Changelog::Entry objects which each represent one\nentry of the changelog. $range is a hash reference\ndescribing the range of entries to return. See section\n&quot; <small>RANGE SELECTION&quot;</small> .</p>\n\n\n<p style=\"margin-left:11%;\">$c-&gt;<b>abort_early()</b></p>\n\n<p style=\"margin-left:17%;\">Returns true if enough data\nhave been parsed to be able to return all entries selected\nby the range set at creation (or with set_options).</p>\n\n<p style=\"margin-left:11%;\">$str = $c-&gt;<b>output()</b>\n<br>\n&quot;$c&quot;</p>\n\n<p style=\"margin-left:17%;\">Returns a string representation\nof the changelog (it&rsquo;s a concatenation of the string\nrepresentation of the individual changelog entries).</p>\n\n<p style=\"margin-left:11%;\">$c-&gt;output($fh)</p>\n\n<p style=\"margin-left:17%;\">Output the changelog to the\ngiven filehandle.</p>\n\n<p style=\"margin-left:11%;\">$c-&gt;save($filename)</p>\n\n<p style=\"margin-left:17%;\">Save the changelog in the given\nfile.</p>\n\n<p style=\"margin-left:11%;\">$control =\n$c-&gt;format_range($format, $range)</p>\n\n<p style=\"margin-left:17%;\">Formats the changelog into\nDpkg::Control::Changelog objects representing the entries\nselected by the optional range specifier (see &quot;\n<small>RANGE SELECTION&quot;</small> for details). In scalar\ncontext returns a Dpkg::Index object containing the selected\nentries, in list context returns an array of\nDpkg::Control::Changelog objects.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">With format\n<b>dpkg</b> the returned Dpkg::Control::Changelog object is\ncoalesced from the entries in the changelog that are part of\nthe range requested, with the fields described below, but\nconsidering that &quot;selected entry&quot; means the first\nentry of the selected range.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">With format\n<b>rfc822</b> each returned Dpkg::Control::Changelog objects\nrepresents one entry in the changelog that is part of the\nrange requested, with the fields described below, but\nconsidering that &quot;selected entry&quot; means for each\nentry.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The different\nformats return undef if no entries are matched. The\nfollowing fields are contained in the object(s) returned:\n<br>\nSource</p>\n\n<p style=\"margin-left:23%;\">package name (selected\nentry)</p>\n\n<p style=\"margin-left:17%;\">Version</p>\n\n<p style=\"margin-left:23%;\">packages&rsquo; version\n(selected entry)</p>\n\n<p style=\"margin-left:17%;\">Distribution</p>\n\n<p style=\"margin-left:23%;\">target distribution (selected\nentry)</p>\n\n<p style=\"margin-left:17%;\">Urgency</p>\n\n<p style=\"margin-left:23%;\">urgency (highest of all entries\nin range)</p>\n\n<p style=\"margin-left:17%;\">Maintainer</p>\n\n<p style=\"margin-left:23%;\">person that created the\n(selected) entry</p>\n\n<p style=\"margin-left:17%;\">Date</p>\n\n<p style=\"margin-left:23%;\">date of the (selected)\nentry</p>\n\n<p style=\"margin-left:17%;\">Timestamp</p>\n\n<p style=\"margin-left:23%;\">date of the (selected) entry as\na timestamp in seconds since the epoch</p>\n\n<p style=\"margin-left:17%;\">Closes</p>\n\n<p style=\"margin-left:23%;\">bugs closed by the (selected)\nentry/entries, sorted by bug number</p>\n\n<p style=\"margin-left:17%;\">Changes</p>\n\n<p style=\"margin-left:23%;\">content of the (selected)\nentry/entries</p>\n\n<h2>RANGE SELECTION\n<a name=\"RANGE SELECTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">A range\nselection is described by a hash reference where the allowed\nkeys and values are described below.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\noptions take a version number as value. <br>\nsince</p>\n\n<p style=\"margin-left:17%;\">Causes changelog information\nfrom all versions strictly later than <b>version</b> to be\nused.</p>\n\n<p style=\"margin-left:11%;\">until</p>\n\n<p style=\"margin-left:17%;\">Causes changelog information\nfrom all versions strictly earlier than <b>version</b> to be\nused.</p>\n\n<p style=\"margin-left:11%;\">from</p>\n\n<p style=\"margin-left:17%;\">Similar to &quot;since&quot;\nbut also includes the information for the specified\n<b>version</b> itself.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>to</p></td>\n<td width=\"3%\"></td>\n<td width=\"83%\">\n\n\n<p>Similar to &quot;until&quot; but also includes the\ninformation for the specified <b>version</b> itself.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\noptions don&rsquo;t take version numbers as values:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"4%\">\n\n\n<p style=\"margin-top: 1em\">all</p></td>\n<td width=\"2%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">If set to a true value, all\nentries of the changelog are returned, this overrides all\nother options.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\">count</p>\n\n<p style=\"margin-left:17%;\">Expects a signed integer as\nvalue. Returns &quot;value&quot; entries from the top of the\nchangelog if set to a positive integer, and\n&quot;abs(value)&quot; entries from the tail if set to a\nnegative integer.</p>\n\n<p style=\"margin-left:11%;\">offset</p>\n\n<p style=\"margin-left:17%;\">Expects a signed integer as\nvalue. Changes the starting point for &quot;count&quot;,\neither counted from the top (positive integer) or from the\ntail (negative integer). &quot;offset&quot; has no effect if\n&quot;count&quot; wasn&rsquo;t given as well.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Some examples\nfor the above options. Imagine an example changelog with\nentries for the versions 1.2, 1.3, 2.0, 2.1, 2.2, 3.0 and\n3.1.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Range Included\nentries <br>\n----- ---------------- <br>\nsince =&gt; '2.0' 3.1, 3.0, 2.2 <br>\nuntil =&gt; '2.0' 1.3, 1.2 <br>\nfrom =&gt; '2.0' 3.1, 3.0, 2.2, 2.1, 2.0 <br>\nto =&gt; '2.0' 2.0, 1.3, 1.2 <br>\ncount =&gt; 2 3.1, 3.0 <br>\ncount =&gt; -2 1.3, 1.2 <br>\ncount =&gt; 3, offset =&gt; 2 2.2, 2.1, 2.0 <br>\ncount =&gt; 2, offset =&gt; -3 2.0, 1.3 <br>\ncount =&gt; -2, offset =&gt; 3 3.0, 2.2 <br>\ncount =&gt; -2, offset =&gt; -3 2.2, 2.1</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Any combination\nof one option of &quot;since&quot; and &quot;from&quot; and\none of &quot;until&quot; and &quot;to&quot; returns the\nintersection of the two results with only one of the options\nspecified.</p>\n\n<h2>CHANGES\n<a name=\"CHANGES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Version 2.00\n(dpkg 1.20.0)</b> <br>\nRemove methods: $c-&gt;<b>dpkg()</b>,\n$c-&gt;<b>rfc822()</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Version 1.01\n(dpkg 1.18.8)</b> <br>\nNew method: $c-&gt;<b>format_range()</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Deprecated\nmethods: $c-&gt;<b>dpkg()</b>, $c-&gt;<b>rfc822()</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">New field\nTimestamp in output formats.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Version 1.00\n(dpkg 1.15.6)</b> <br>\nMark the module as public.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#METHODS\">METHODS</a>","<a href=\"#RANGE SELECTION\">RANGE SELECTION</a>","<a href=\"#CHANGES\">CHANGES</a>"],"level":3}