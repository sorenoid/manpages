{"name":"getpwnam","description":"getpwnam,\ngetpwnam_r, getpwuid, getpwuid_r - get password file\nentry","body":"\n\n<h1 align=\"center\">GETPWNAM</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">getpwnam,\ngetpwnam_r, getpwuid, getpwuid_r - get password file\nentry</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/types.h&gt; <br>\n#include &lt;pwd.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>struct\npasswd *getpwnam(const char *</b><i>name</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>struct\npasswd *getpwuid(uid_t</b> <i>uid</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ngetpwnam_r(const char *</b><i>name</i><b>, struct passwd\n*</b><i>pwd</i><b>, <br>\nchar *</b><i>buf</i><b>, size_t</b> <i>buflen</i><b>, struct\npasswd **</b><i>result</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ngetpwuid_r(uid_t</b> <i>uid</i><b>, struct passwd\n*</b><i>pwd</i><b>, <br>\nchar *</b><i>buf</i><b>, size_t</b> <i>buflen</i><b>, struct\npasswd **</b><i>result</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>getpwnam_r</b>(),\n<b>getpwuid_r</b>():</p>\n\n<p style=\"margin-left:17%;\">_POSIX_C_SOURCE <br>\n|| /* Glibc versions &lt;= 2.19: */ _BSD_SOURCE ||\n_SVID_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>getpwnam</b>() function returns a pointer to a structure\ncontaining the broken-out fields of the record in the\npassword database (e.g., the local password file\n<i>/etc/passwd</i>, NIS, and LDAP) that matches the username\n<i>name</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>getpwuid</b>() function returns a pointer to a structure\ncontaining the broken-out fields of the record in the\npassword database that matches the user ID <i>uid</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>passwd</i> structure is defined in <i>&lt;pwd.h&gt;</i>\nas follows:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct passwd {\n<br>\nchar *pw_name; /* username */ <br>\nchar *pw_passwd; /* user password */ <br>\nuid_t pw_uid; /* user ID */ <br>\ngid_t pw_gid; /* group ID */ <br>\nchar *pw_gecos; /* user information */ <br>\nchar *pw_dir; /* home directory */ <br>\nchar *pw_shell; /* shell program */ <br>\n};</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">See\n<a href=\"https://man.page/5/passwd\">passwd(5)</a> for more information about these\nfields.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>getpwnam_r</b>() and <b>getpwuid_r</b>() functions obtain\nthe same information as <b>getpwnam</b>() and\n<b>getpwuid</b>(), but store the retrieved <i>passwd</i>\nstructure in the space pointed to by <i>pwd</i>. The string\nfields pointed to by the members of the <i>passwd</i>\nstructure are stored in the buffer <i>buf</i> of size\n<i>buflen</i>. A pointer to the result (in case of success)\nor NULL (in case no entry was found or an error occurred) is\nstored in <i>*result</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The call</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">sysconf(_SC_GETPW_R_SIZE_MAX)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">returns either\n-1, without changing <i>errno</i>, or an initial suggested\nsize for <i>buf</i>. (If this size is too small, the call\nfails with <b>ERANGE</b>, in which case the caller can retry\nwith a larger buffer.)</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>getpwnam</b>() and <b>getpwuid</b>() functions return a\npointer to a <i>passwd</i> structure, or NULL if the\nmatching entry is not found or an error occurs. If an error\noccurs, <i>errno</i> is set appropriately. If one wants to\ncheck <i>errno</i> after the call, it should be set to zero\nbefore the call.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The return\nvalue may point to a static area, and may be overwritten by\nsubsequent calls to <a href=\"https://man.page/3/getpwent\">getpwent(3)</a>, <b>getpwnam</b>(),\nor <b>getpwuid</b>(). (Do not pass the returned pointer to\n<a href=\"https://man.page/3/free\">free(3)</a>.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\n<b>getpwnam_r</b>() and <b>getpwuid_r</b>() return zero, and\nset <i>*result</i> to <i>pwd</i>. If no matching password\nrecord was found, these functions return 0 and store NULL in\n<i>*result</i>. In case of error, an error number is\nreturned, and NULL is stored in <i>*result</i>.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>0</b> or\n<b>ENOENT</b> or <b>ESRCH</b> or <b>EBADF</b> or\n<b>EPERM</b> or ...</p>\n\n<p style=\"margin-left:22%;\">The given <i>name</i> or\n<i>uid</i> was not found.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINTR</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>A signal was caught; see <a href=\"https://man.page/7/signal\">signal(7)</a>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EIO</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>I/O error.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EMFILE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The per-process limit on the number of open file\ndescriptors has been reached.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENFILE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The system-wide limit on the total number of open files\nhas been reached.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Insufficient memory to allocate <i>passwd</i>\nstructure.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ERANGE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Insufficient buffer space supplied.</p></td></tr>\n</table>\n\n<h2>NOTE\n<a name=\"NOTE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The user\npassword database mostly refers to <i>/etc/passwd</i>.\nHowever, with recent systems it also refers to network wide\ndatabases using NIS, LDAP and other local files as\nconfigured in <i>/etc/nsswitch.conf</i>.</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/passwd</i></p>\n\n<p style=\"margin-left:22%;\">local password database\nfile</p>\n\n<p style=\"margin-left:11%;\"><i>/etc/nsswitch.conf</i></p>\n\n<p style=\"margin-left:22%;\">System Databases and Name\nService Switch configuration file</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3421361.png\" alt=\"Image grohtml-3421361.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008, SVr4, 4.3BSD. The <i>pw_gecos</i> field is not\nspecified in POSIX, but is present on most\nimplementations.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The formulation\ngiven above under &quot;RETURN VALUE&quot; is from\nPOSIX.1-2001. It does not call &quot;not found&quot; an\nerror, and hence does not specify what value <i>errno</i>\nmight have in this situation. But that makes it impossible\nto recognize errors. One might argue that according to POSIX\n<i>errno</i> should be left unchanged if an entry is not\nfound. Experiments on various UNIX-like systems show that\nlots of different values occur in this situation: 0, ENOENT,\nEBADF, ESRCH, EWOULDBLOCK, EPERM, and probably others.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>pw_dir</i> field contains the name of the initial working\ndirectory of the user. Login programs use the value of this\nfield to initialize the <b>HOME</b> environment variable for\nthe login shell. An application that wants to determine its\nuser&rsquo;s home directory should inspect the value of\n<b>HOME</b> (rather than the value\n<i>getpwuid(getuid())-&gt;pw_dir</i>) since this allows the\nuser to modify their notion of &quot;the home\ndirectory&quot; during a login session. To determine the\n(initial) home directory of another user, it is necessary to\nuse <i>getpwnam(&quot;username&quot;)-&gt;pw_dir</i> or\nsimilar.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The program\nbelow demonstrates the use of <b>getpwnam_r</b>() to find\nthe full username and user ID for the username supplied as a\ncommand-line argument.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">#include\n&lt;pwd.h&gt; <br>\n#include &lt;stdint.h&gt; <br>\n#include &lt;stdio.h&gt; <br>\n#include &lt;stdlib.h&gt; <br>\n#include &lt;unistd.h&gt; <br>\n#include &lt;errno.h&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">int <br>\nmain(int argc, char *argv[]) <br>\n{ <br>\nstruct passwd pwd; <br>\nstruct passwd *result; <br>\nchar *buf; <br>\nsize_t bufsize; <br>\nint s;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">if (argc != 2)\n{ <br>\nfprintf(stderr, &quot;Usage: %s username\\n&quot;, argv[0]);\n<br>\nexit(EXIT_FAILURE); <br>\n}</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">bufsize =\nsysconf(_SC_GETPW_R_SIZE_MAX); <br>\nif (bufsize == -1) /* Value was indeterminate */ <br>\nbufsize = 16384; /* Should be more than enough */</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">buf =\nmalloc(bufsize); <br>\nif (buf == NULL) { <br>\nperror(&quot;malloc&quot;); <br>\nexit(EXIT_FAILURE); <br>\n}</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">s =\ngetpwnam_r(argv[1], &amp;pwd, buf, bufsize, &amp;result);\n<br>\nif (result == NULL) { <br>\nif (s == 0) <br>\nprintf(&quot;Not found\\n&quot;); <br>\nelse { <br>\nerrno = s; <br>\nperror(&quot;getpwnam_r&quot;); <br>\n} <br>\nexit(EXIT_FAILURE); <br>\n}</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">printf(&quot;Name:\n%s; UID: %jd\\n&quot;, pwd.pw_gecos, <br>\n(intmax_t) pwd.pw_uid); <br>\nexit(EXIT_SUCCESS); <br>\n}</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/endpwent\">endpwent(3)</a>,\n<a href=\"https://man.page/3/fgetpwent\">fgetpwent(3)</a>, <a href=\"https://man.page/3/getgrnam\">getgrnam(3)</a>, <a href=\"https://man.page/3/getpw\">getpw(3)</a>,\n<a href=\"https://man.page/3/getpwent\">getpwent(3)</a>, <a href=\"https://man.page/3/getspnam\">getspnam(3)</a>, <a href=\"https://man.page/3/putpwent\">putpwent(3)</a>,\n<a href=\"https://man.page/3/setpwent\">setpwent(3)</a>, <b>nsswitch.conf</b>(5),\n<a href=\"https://man.page/5/passwd\">passwd(5)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#NOTE\">NOTE</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}