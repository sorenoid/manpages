{"name":"http::cookies","description":"HTTP::Cookies -\nHTTP cookie jars\n\n<h2>VERSION\n<a name=\"VERSION\"></a>\n</h2>\n\n\nversion\n6.10","body":"\n\n<h1 align=\"center\">HTTP::Cookies</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">HTTP::Cookies -\nHTTP cookie jars</p>\n\n<h2>VERSION\n<a name=\"VERSION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">version\n6.10</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">use\nHTTP::Cookies; <br>\n$cookie_jar = HTTP::Cookies-&gt;new( <br>\nfile =&gt; &quot;$ENV{'HOME'}/lwp_cookies.dat&quot;, <br>\nautosave =&gt; 1, <br>\n); <br>\nuse LWP; <br>\nmy $browser = LWP::UserAgent-&gt;new; <br>\n$browser-&gt;cookie_jar($cookie_jar);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Or for an empty\nand temporary cookie jar:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">use LWP; <br>\nmy $browser = LWP::UserAgent-&gt;new; <br>\n$browser-&gt;cookie_jar( {} );</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This class is\nfor objects that represent a &quot;cookie jar&quot; -- that\nis, a database of all the <small>HTTP</small> cookies that a\ngiven LWP::UserAgent object knows about.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Cookies are a\ngeneral mechanism which server side connections can use to\nboth store and retrieve information on the client side of\nthe connection. For more information about cookies refer to\nCookie Spec &lt;http://curl.haxx.se/rfc/cookie_spec.html&gt;\nand Cookie Central &lt;http://www.cookiecentral.com&gt;.\nThis module also implements the new style cookies described\nin <small>RFC 2965</small>\n&lt;https://tools.ietf.org/html/rfc2965&gt;. The two\nvariants of cookies are supposed to be able to coexist\nhappily.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Instances of\nthe class <i>HTTP::Cookies</i> are able to store a\ncollection of Set-Cookie2: and Set-Cookie: headers and are\nable to use this information to initialize Cookie-headers in\n<i>HTTP::Request</i> objects. The state of a\n<i>HTTP::Cookies</i> object can be saved in and restored\nfrom files.</p>\n\n<h2>LIMITATIONS\n<a name=\"LIMITATIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This module\ndoes not support Public Suffix\n&lt;https://publicsuffix.org/&gt; encouraged by a more\nrecent standard, <small>RFC 6265</small>\n&lt;https://tools.ietf.org/html/rfc6265&gt;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This\nmodule&rsquo;s shortcomings mean that a malicious Web site\ncan set cookies to track your user agent across all sites\nunder a top level domain. See <i>t/publicsuffix.t</i> in\nthis module&rsquo;s distribution for details.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">HTTP::CookieJar::LWP\nsupports Public Suffix, but only provides a limited subset\nof this module&rsquo;s functionality and does not support\nstandards older than <i><small>RFC 6265</small></i> .</p>\n\n<h2>METHODS\n<a name=\"METHODS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\nmethods are provided: <br>\n$cookie_jar = HTTP::Cookies-&gt;new</p>\n\n<p style=\"margin-left:17%;\">The constructor takes hash\nstyle parameters. The following parameters are\nrecognized:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">file: name of\nthe file to restore cookies from and save cookies to <br>\nautosave: save during destruction (bool) <br>\nignore_discard: save even cookies that are requested to be\ndiscarded (bool) <br>\nhide_cookie2: do not add Cookie2 header to requests</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Future\nparameters might include (not yet implemented):</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">max_cookies 300\n<br>\nmax_cookies_per_domain 20 <br>\nmax_cookie_size 4096 <br>\nno_cookies list of domain names that we never return cookies\nto</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;get_cookies(\n$url_or_domain ) <br>\n$cookie_jar-&gt;get_cookies( $url_or_domain, $cookie_key,...\n)</p>\n\n<p style=\"margin-left:17%;\">Returns a hash of the cookies\nthat applies to the given <small>URL.</small> If a\ndomainname is given as argument, then a prefix of\n&quot;https://&quot; is assumed.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">If one or more\n$cookie_key parameters are provided return the given values,\nor &quot;undef&quot; if the cookie isn&rsquo;t\navailable.</p>\n\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;add_cookie_header(\n$request )</p>\n\n<p style=\"margin-left:17%;\">The <b>add_cookie_header()</b>\nmethod will set the appropriate Cookie:-header for the\n<i>HTTP::Request</i> object given as argument. The $request\nmust have a valid url attribute before this method is\ncalled.</p>\n\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;extract_cookies(\n$response )</p>\n\n<p style=\"margin-left:17%;\">The <b>extract_cookies()</b>\nmethod will look for Set-Cookie: and Set-Cookie2: headers in\nthe <i>HTTP::Response</i> object passed as argument. Any of\nthese headers that are found are used to update the state of\nthe $cookie_jar.</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;set_cookie(\n$version, $key, $val, $path, $domain, $port, <br>\n$path_spec, $secure, $maxage, $discard, \\%rest )</p>\n\n<p style=\"margin-left:17%;\">The <b>set_cookie()</b> method\nupdates the state of the $cookie_jar. The $key, $val,\n$domain, $port and $path arguments are strings. The\n$path_spec, $secure, $discard arguments are boolean values.\nThe $maxage value is a number indicating number of seconds\nthat this cookie will live. A value of $maxage &lt;= 0 will\ndelete this cookie. The $version argument sets the version\nof the cookie; the default value is 0 ( original Netscape\nspec ). Setting $version to another value indicates the\n<small>RFC</small> to which the cookie conforms (e.g.\nversion 1 for <small>RFC 2109</small> ). %rest defines\nvarious other attributes like &quot;Comment&quot; and\n&quot;CommentURL&quot;.</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;save <br>\n$cookie_jar-&gt;save( $file ) <br>\n$cookie_jar-&gt;save( file =&gt; $file, ignore_discard =&gt;\n$ignore_discard )</p>\n\n<p style=\"margin-left:17%;\">This method file saves the\nstate of the $cookie_jar to a file. The state can then be\nrestored later using the <b>load()</b> method. If a filename\nis not specified we will use the name specified during\nconstruction. If the $ignore_discard value is true (or not\nspecified, but attribute <i>ignore_discard</i> was set at\ncookie jar construction), then we will even save cookies\nthat are marked to be discarded.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The default is\nto save a sequence of &quot;Set-Cookie3&quot; lines.\n&quot;Set-Cookie3&quot; is a proprietary <small>LWP</small>\nformat, not known to be compatible with any browser. The\n<i>HTTP::Cookies::Netscape</i> sub-class can be used to save\nin a format compatible with Netscape.</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;load <br>\n$cookie_jar-&gt;load( $file )</p>\n\n<p style=\"margin-left:17%;\">This method reads the cookies\nfrom the file and adds them to the $cookie_jar. The file\nmust be in the format written by the <b>save()</b>\nmethod.</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;revert</p>\n\n<p style=\"margin-left:17%;\">This method empties the\n$cookie_jar and re-loads the $cookie_jar from the last save\nfile.</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;clear <br>\n$cookie_jar-&gt;clear( $domain ) <br>\n$cookie_jar-&gt;clear( $domain, $path ) <br>\n$cookie_jar-&gt;clear( $domain, $path, $key )</p>\n\n<p style=\"margin-left:17%;\">Invoking this method without\narguments will empty the whole $cookie_jar. If given a\nsingle argument only cookies belonging to that domain will\nbe removed. If given two arguments, cookies belonging to the\nspecified path within that domain are removed. If given\nthree arguments, then the cookie with the specified key,\npath and domain is removed.</p>\n\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;clear_temporary_cookies</p>\n\n<p style=\"margin-left:17%;\">Discard all temporary cookies.\nScans for all cookies in the jar with either no expire field\nor a true &quot;discard&quot; flag. To be called when the\nuser agent shuts down according to <small>RFC\n2965.</small></p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;scan(\n\\&amp;callback )</p>\n\n<p style=\"margin-left:17%;\">The argument is a subroutine\nthat will be invoked for each cookie stored in the\n$cookie_jar. The subroutine will be invoked with the\nfollowing arguments:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">0 version <br>\n1 key <br>\n2 val <br>\n3 path <br>\n4 domain <br>\n5 port <br>\n6 path_spec <br>\n7 secure <br>\n8 expires <br>\n9 discard <br>\n10 hash</p>\n\n<p style=\"margin-left:11%;\">$cookie_jar-&gt;as_string <br>\n$cookie_jar-&gt;as_string( $skip_discardables )</p>\n\n<p style=\"margin-left:17%;\">The <b>as_string()</b> method\nwill return the state of the $cookie_jar represented as a\nsequence of &quot;Set-Cookie3&quot; header lines separated\nby &quot;\\n&quot;. If $skip_discardables is\n<small>TRUE,</small> it will not return lines for cookies\nwith the <i>Discard</i> attribute.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">HTTP::Cookies::Netscape,\nHTTP::Cookies::Microsoft</p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Gisle Aas\n&lt;gisle@activestate.com&gt;</p>\n\n<h2>COPYRIGHT AND LICENSE\n<a name=\"COPYRIGHT AND LICENSE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This software\nis copyright (c) 2002 by Gisle Aas.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This is free\nsoftware; you can redistribute it and/or modify it under the\nsame terms as the Perl 5 programming language system\nitself.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#VERSION\">VERSION</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#LIMITATIONS\">LIMITATIONS</a>","<a href=\"#METHODS\">METHODS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#COPYRIGHT AND LICENSE\">COPYRIGHT AND LICENSE</a>"],"level":3}