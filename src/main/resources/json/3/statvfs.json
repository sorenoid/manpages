{"name":"statvfs","description":"statvfs, fstatvfs - get filesystem statistics","body":"\n\n<h1 align=\"center\">STATVFS</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">statvfs,\nfstatvfs - get filesystem statistics</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/statvfs.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nstatvfs(const char *</b><i>path</i><b>, struct statvfs\n*</b><i>buf</i><b>); <br>\nint fstatvfs(int</b> <i>fd</i><b>, struct statvfs\n*</b><i>buf</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The function\n<b>statvfs</b>() returns information about a mounted\nfilesystem. <i>path</i> is the pathname of any file within\nthe mounted filesystem. <i>buf</i> is a pointer to a\n<i>statvfs</i> structure defined approximately as\nfollows:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct statvfs\n{ <br>\nunsigned long f_bsize; /* Filesystem block size */ <br>\nunsigned long f_frsize; /* Fragment size */ <br>\nfsblkcnt_t f_blocks; /* Size of fs in f_frsize units */ <br>\nfsblkcnt_t f_bfree; /* Number of free blocks */ <br>\nfsblkcnt_t f_bavail; /* Number of free blocks for <br>\nunprivileged users */ <br>\nfsfilcnt_t f_files; /* Number of inodes */ <br>\nfsfilcnt_t f_ffree; /* Number of free inodes */ <br>\nfsfilcnt_t f_favail; /* Number of free inodes for <br>\nunprivileged users */ <br>\nunsigned long f_fsid; /* Filesystem ID */ <br>\nunsigned long f_flag; /* Mount flags */ <br>\nunsigned long f_namemax; /* Maximum filename length */ <br>\n};</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Here the types\n<i>fsblkcnt_t</i> and <i>fsfilcnt_t</i> are defined in\n<i>&lt;sys/types.h&gt;</i>. Both used to be <i>unsigned\nlong</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The field\n<i>f_flag</i> is a bit mask indicating various options that\nwere employed when mounting this filesystem. It contains\nzero or more of the following flags: <b><br>\nST_MANDLOCK</b></p>\n\n<p style=\"margin-left:22%;\">Mandatory locking is permitted\non the filesystem (see <a href=\"https://man.page/2/fcntl\">fcntl(2)</a>).</p>\n\n<p style=\"margin-left:11%;\"><b>ST_NOATIME</b></p>\n\n<p style=\"margin-left:22%;\">Do not update access times; see\n<a href=\"https://man.page/2/mount\">mount(2)</a>.</p>\n\n<p style=\"margin-left:11%;\"><b>ST_NODEV</b></p>\n\n<p style=\"margin-left:22%;\">Disallow access to device\nspecial files on this filesystem.</p>\n\n<p style=\"margin-left:11%;\"><b>ST_NODIRATIME</b></p>\n\n<p style=\"margin-left:22%;\">Do not update directory access\ntimes; see <a href=\"https://man.page/2/mount\">mount(2)</a>.</p>\n\n<p style=\"margin-left:11%;\"><b>ST_NOEXEC</b></p>\n\n<p style=\"margin-left:22%;\">Execution of programs is\ndisallowed on this filesystem.</p>\n\n<p style=\"margin-left:11%;\"><b>ST_NOSUID</b></p>\n\n<p style=\"margin-left:22%;\">The set-user-ID and\nset-group-ID bits are ignored by <a href=\"https://man.page/3/exec\">exec(3)</a> for\nexecutable files on this filesystem</p>\n\n<p style=\"margin-left:11%;\"><b>ST_RDONLY</b></p>\n\n<p style=\"margin-left:22%;\">This filesystem is mounted\nread-only.</p>\n\n<p style=\"margin-left:11%;\"><b>ST_RELATIME</b></p>\n\n<p style=\"margin-left:22%;\">Update atime relative to\nmtime/ctime; see <a href=\"https://man.page/2/mount\">mount(2)</a>.</p>\n\n<p style=\"margin-left:11%;\"><b>ST_SYNCHRONOUS</b></p>\n\n<p style=\"margin-left:22%;\">Writes are synched to the\nfilesystem immediately (see the description of <b>O_SYNC</b>\nin <a href=\"https://man.page/2/open\">open(2)</a>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">It is\nunspecified whether all members of the returned struct have\nmeaningful values on all filesystems.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fstatvfs</b>()\nreturns the same information about an open file referenced\nby descriptor <i>fd</i>.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nzero is returned. On error, -1 is returned, and <i>errno</i>\nis set appropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EACCES</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">(<b>statvfs</b>()) Search\npermission is denied for a component of the path prefix of\n<i>path</i>. (See also <a href=\"https://man.page/7/path_resolution\">path_resolution(7)</a>.)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EBADF</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>(<b>fstatvfs</b>()) <i>fd</i> is not a valid open file\ndescriptor.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>Buf</i> or <i>path</i> points to an invalid\naddress.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINTR</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>This call was interrupted by a signal; see\n<a href=\"https://man.page/7/signal\">signal(7)</a>.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EIO</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>An I/O error occurred while reading from the\nfilesystem.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ELOOP</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>(<b>statvfs</b>()) Too many symbolic links were\nencountered in translating <i>path</i>.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENAMETOOLONG</b></p>\n\n<p style=\"margin-left:22%;\">(<b>statvfs</b>()) <i>path</i>\nis too long.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOENT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>(<b>statvfs</b>()) The file referred to by <i>path</i>\ndoes not exist.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Insufficient kernel memory was available.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOSYS</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The filesystem does not support this call.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOTDIR</b></p>\n\n<p style=\"margin-left:22%;\">(<b>statvfs</b>()) A component\nof the path prefix of <i>path</i> is not a directory.</p>\n\n<p style=\"margin-left:11%;\"><b>EOVERFLOW</b></p>\n\n<p style=\"margin-left:22%;\">Some values were too large to\nbe represented in the returned struct.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3424691.png\" alt=\"Image grohtml-3424691.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Only the\n<b>ST_NOSUID</b> and <b>ST_RDONLY</b> flags of the\n<i>f_flag</i> field are specified in POSIX.1. To obtain\ndefinitions of the remaining flags, one must define\n<b>_GNU_SOURCE</b>.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The Linux\nkernel has system calls <a href=\"https://man.page/2/statfs\">statfs(2)</a> and\n<a href=\"https://man.page/2/fstatfs\">fstatfs(2)</a> to support this library call.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In glibc\nversions before 2.13, <b>statvfs</b>() populated the bits of\nthe <i>f_flag</i> field by scanning the mount options shown\nin <i>/proc/mounts</i>. However, starting with Linux 2.6.36,\nthe underlying <a href=\"https://man.page/2/statfs\">statfs(2)</a> system call provides the\nnecessary information via the <i>f_flags</i> field, and\nsince glibc version 2.13, the <b>statvfs</b>() function will\nuse information from that field rather than scanning\n<i>/proc/mounts</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The glibc\nimplementations of</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">pathconf(path,\n_PC_REC_XFER_ALIGN); <br>\npathconf(path, _PC_ALLOC_SIZE_MIN); <br>\npathconf(path, _PC_REC_MIN_XFER_SIZE);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">respectively\nuse the <i>f_frsize</i>, <i>f_frsize</i>, and <i>f_bsize</i>\nfields returned by a call to <b>statvfs</b>() with the\nargument <i>path</i>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/statfs\">statfs(2)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}