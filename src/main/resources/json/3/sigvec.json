{"name":"sigvec","description":"sigvec, sigblock, sigsetmask, siggetmask, sigmask - BSD signal API","body":"\n\n<h1 align=\"center\">SIGVEC</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">sigvec,\nsigblock, sigsetmask, siggetmask, sigmask - BSD signal\nAPI</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;signal.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nsigvec(int</b> <i>sig</i><b>, const struct sigvec\n*</b><i>vec</i><b>, struct sigvec\n*</b><i>ovec</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nsigmask(int</b> <i>signum</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nsigblock(int</b> <i>mask</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nsigsetmask(int</b> <i>mask</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nsiggetmask(void);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">All functions\nshown above: <br>\nSince glibc 2.19: <br>\n_DEFAULT_SOURCE <br>\nGlibc 2.19 and earlier: <br>\n_BSD_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">These functions\nare provided in glibc as a compatibility interface for\nprograms that make use of the historical BSD signal API.\nThis API is obsolete: new applications should use the POSIX\nsignal API (<a href=\"https://man.page/2/sigaction\">sigaction(2)</a>, <a href=\"https://man.page/2/sigprocmask\">sigprocmask(2)</a>,\netc.).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigvec</b>() function sets and/or gets the disposition of\nthe signal <i>sig</i> (like the POSIX <a href=\"https://man.page/2/sigaction\">sigaction(2)</a>).\nIf <i>vec</i> is not NULL, it points to a <i>sigvec</i>\nstructure that defines the new disposition for <i>sig</i>.\nIf <i>ovec</i> is not NULL, it points to a <i>sigvec</i>\nstructure that is used to return the previous disposition of\n<i>sig</i>. To obtain the current disposition of <i>sig</i>\nwithout changing it, specify NULL for <i>vec</i>, and a\nnon-null pointer for <i>ovec</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\ndispositions for <b>SIGKILL</b> and <b>SIGSTOP</b> cannot be\nchanged.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>sigvec</i> structure has the following form:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct sigvec {\n<br>\nvoid (*sv_handler)(int); /* Signal disposition */ <br>\nint sv_mask; /* Signals to be blocked in handler */ <br>\nint sv_flags; /* Flags */ <br>\n};</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>sv_handler</i> field specifies the disposition of the\nsignal, and is either: the address of a signal handler\nfunction; <b>SIG_DFL</b>, meaning the default disposition\napplies for the signal; or <b>SIG_IGN</b>, meaning that the\nsignal is ignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If\n<i>sv_handler</i> specifies the address of a signal handler,\nthen <i>sv_mask</i> specifies a mask of signals that are to\nbe blocked while the handler is executing. In addition, the\nsignal for which the handler is invoked is also blocked.\nAttempts to block <b>SIGKILL</b> or <b>SIGSTOP</b> are\nsilently ignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If\n<i>sv_handler</i> specifies the address of a signal handler,\nthen the <i>sv_flags</i> field specifies flags controlling\nwhat happens when the handler is called. This field may\ncontain zero or more of the following flags: <b><br>\nSV_INTERRUPT</b></p>\n\n<p style=\"margin-left:22%;\">If the signal handler\ninterrupts a blocking system call, then upon return from the\nhandler the system call s not be restarted: instead it fails\nwith the error <b>EINTR</b>. If this flag is not specified,\nthen system calls are restarted by default.</p>\n\n<p style=\"margin-left:11%;\"><b>SV_RESETHAND</b></p>\n\n<p style=\"margin-left:22%;\">Reset the disposition of the\nsignal to the default before calling the signal handler. If\nthis flag is not specified, then the handler remains\nestablished until explicitly removed by a later call to\n<b>sigvec</b>() or until the process performs an\n<a href=\"https://man.page/2/execve\">execve(2)</a>.</p>\n\n<p style=\"margin-left:11%;\"><b>SV_ONSTACK</b></p>\n\n<p style=\"margin-left:22%;\">Handle the signal on the\nalternate signal stack (historically established under BSD\nusing the obsolete <b>sigstack</b>() function; the POSIX\nreplacement is <a href=\"https://man.page/2/sigaltstack\">sigaltstack(2)</a>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigmask</b>() macro constructs and returns a &quot;signal\nmask&quot; for <i>signum</i>. For example, we can initialize\nthe <i>vec.sv_mask</i> field given to <b>sigvec</b>() using\ncode such as the following:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">vec.sv_mask =\nsigmask(SIGQUIT) | sigmask(SIGABRT); <br>\n/* Block SIGQUIT and SIGABRT during <br>\nhandler execution */</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigblock</b>() function adds the signals in <i>mask</i>\nto the process&rsquo;s signal mask (like POSIX\n<i>sigprocmask(SIG_BLOCK)</i>), and returns the\nprocess&rsquo;s previous signal mask. Attempts to block\n<b>SIGKILL</b> or <b>SIGSTOP</b> are silently ignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigsetmask</b>() function sets the process&rsquo;s signal\nmask to the value given in <i>mask</i> (like POSIX\n<i>sigprocmask(SIG_SETMASK)</i>), and returns the\nprocess&rsquo;s previous signal mask.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>siggetmask</b>() function returns the process&rsquo;s\ncurrent signal mask. This call is equivalent to\n<i>sigblock(0)</i>.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigvec</b>() function returns 0 on success; on error, it\nreturns -1 and sets <i>errno</i> to indicate the error.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigblock</b>() and <b>sigsetmask</b>() functions return\nthe previous signal mask.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sigmask</b>() macro returns the signal mask for\n<i>signum</i>.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">See the ERRORS\nunder <a href=\"https://man.page/2/sigaction\">sigaction(2)</a> and <a href=\"https://man.page/2/sigprocmask\">sigprocmask(2)</a>.</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Starting with\nversion 2.21, the GNU C library no longer exports the\n<b>sigvec</b>() function as part of the ABI. (To ensure\nbackward compatibility, the glibc symbol versioning scheme\ncontinues to export the interface to binaries linked against\nolder versions of the library.)</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"8%\"></td>\n<td width=\"7%\">\n</td>\n<td width=\"8%\">\n</td>\n<td width=\"8%\"></td>\n<td width=\"7%\"></td>\n<td width=\"62%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"8%\"></td>\n<td width=\"7%\"></td>\n<td width=\"8%\">\n</td>\n<td width=\"8%\"></td>\n<td width=\"7%\"></td>\n<td width=\"62%\">\n</td></tr>\n</table>\n\n\n<p align=\"center\"><img src=\"grohtml-3422411.png\" alt=\"Image grohtml-3422411.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">All of these\nfunctions were in 4.3BSD, except <b>siggetmask</b>(), whose\norigin is unclear. These functions are obsolete: do not use\nthem in new programs.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On 4.3BSD, the\n<b>signal</b>() function provided reliable semantics (as\nwhen calling <b>sigvec</b>() with <i>vec.sv_mask</i> equal\nto 0). On System V, <b>signal</b>() provides unreliable\nsemantics. POSIX.1 leaves these aspects of <b>signal</b>()\nunspecified. See <a href=\"https://man.page/2/signal\">signal(2)</a> for further details.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In order to\nwait for a signal, BSD and System V both provided a function\nnamed <a href=\"https://man.page/3/sigpause\">sigpause(3)</a>, but this function has a different\nargument on the two systems. See <a href=\"https://man.page/3/sigpause\">sigpause(3)</a> for\ndetails.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/kill\">kill(2)</a>,\n<a href=\"https://man.page/2/pause\">pause(2)</a>, <a href=\"https://man.page/2/sigaction\">sigaction(2)</a>, <a href=\"https://man.page/2/signal\">signal(2)</a>,\n<a href=\"https://man.page/2/sigprocmask\">sigprocmask(2)</a>, <a href=\"https://man.page/3/raise\">raise(3)</a>, <a href=\"https://man.page/3/sigpause\">sigpause(3)</a>,\n<a href=\"https://man.page/3/sigset\">sigset(3)</a>, <a href=\"https://man.page/7/signal\">signal(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}