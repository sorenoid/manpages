{"name":"posix_madvise","description":"posix_madvise - give advice about patterns of memory usage","body":"\n\n<h1 align=\"center\">POSIX_MADVISE</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">posix_madvise -\ngive advice about patterns of memory usage</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/mman.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nposix_madvise(void *</b><i>addr</i><b>, size_t</b>\n<i>len</i><b>, int</b> <i>advice</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>posix_madvise</b>():</p>\n\n<p style=\"margin-left:17%;\">_POSIX_C_SOURCE &gt;=\n200112L</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>posix_madvise</b>() function allows an application to\nadvise the system about its expected patterns of usage of\nmemory in the address range starting at <i>addr</i> and\ncontinuing for <i>len</i> bytes. The system is free to use\nthis advice in order to improve the performance of memory\naccesses (or to ignore the advice altogether), but calling\n<b>posix_madvise</b>() shall not affect the semantics of\naccess to memory in the specified range.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>advice</i> argument is one of the following: <b><br>\nPOSIX_MADV_NORMAL</b></p>\n\n<p style=\"margin-left:22%;\">The application has no special\nadvice regarding its memory usage patterns for the specified\naddress range. This is the default behavior.</p>\n\n\n<p style=\"margin-left:11%;\"><b>POSIX_MADV_SEQUENTIAL</b></p>\n\n<p style=\"margin-left:22%;\">The application expects to\naccess the specified address range sequentially, running\nfrom lower addresses to higher addresses. Hence, pages in\nthis region can be aggressively read ahead, and may be freed\nsoon after they are accessed.</p>\n\n<p style=\"margin-left:11%;\"><b>POSIX_MADV_RANDOM</b></p>\n\n<p style=\"margin-left:22%;\">The application expects to\naccess the specified address range randomly. Thus, read\nahead may be less useful than normally.</p>\n\n<p style=\"margin-left:11%;\"><b>POSIX_MADV_WILLNEED</b></p>\n\n<p style=\"margin-left:22%;\">The application expects to\naccess the specified address range in the near future. Thus,\nread ahead may be beneficial.</p>\n\n<p style=\"margin-left:11%;\"><b>POSIX_MADV_DONTNEED</b></p>\n\n<p style=\"margin-left:22%;\">The application expects that it\nwill not access the specified address range in the near\nfuture.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\n<b>posix_madvise</b>() returns 0. On failure, it returns a\npositive error number.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\"><i>addr</i> is not a multiple of\nthe system page size or <i>len</i> is negative.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>advice</i> is invalid.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Addresses in the specified range are partially or\ncompletely outside the caller&rsquo;s address space.</p></td></tr>\n</table>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Support for\n<b>posix_madvise</b>() first appeared in glibc version\n2.2.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1 permits\nan implementation to generate an error if <i>len</i> is 0.\nOn Linux, specifying <i>len</i> as 0 is permitted (as a\nsuccessful no-op).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In glibc, this\nfunction is implemented using <a href=\"https://man.page/2/madvise\">madvise(2)</a>. However,\nsince glibc 2.6, <b>POSIX_MADV_DONTNEED</b> is treated as a\nno-op, because the corresponding <a href=\"https://man.page/2/madvise\">madvise(2)</a> value,\n<b>MADV_DONTNEED</b>, has destructive semantics.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/madvise\">madvise(2)</a>,\n<a href=\"https://man.page/2/posix_fadvise\">posix_fadvise(2)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}