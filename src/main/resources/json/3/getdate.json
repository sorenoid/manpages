{"name":"getdate","description":"getdate, getdate_r - convert a date-plus-time string to broken-down time","body":"\n\n<h1 align=\"center\">GETDATE</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">getdate,\ngetdate_r - convert a date-plus-time string to broken-down\ntime</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;time.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>struct tm\n*getdate(const char *</b><i>string</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>extern int\ngetdate_err;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;time.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ngetdate_r(const char *</b><i>string</i><b>, struct tm\n*</b><i>res</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>getdate</b>():</p>\n\n\n<p style=\"margin-left:17%;\">_XOPEN_SOURCE&nbsp;&gt;=&nbsp;500</p>\n\n<p style=\"margin-left:11%;\"><b>getdate_r</b>():</p>\n\n<p style=\"margin-left:17%;\">_GNU_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The function\n<b>getdate</b>() converts a string representation of a date\nand time, contained in the buffer pointed to by\n<i>string</i>, into a broken-down time. The broken-down time\nis stored in a <i>tm</i> structure, and a pointer to this\nstructure is returned as the function result. This <i>tm</i>\nstructure is allocated in static storage, and consequently\nit will be overwritten by further calls to\n<b>getdate</b>().</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In contrast to\n<a href=\"https://man.page/3/strptime\">strptime(3)</a>, (which has a <i>format</i> argument),\n<b>getdate</b>() uses the formats found in the file whose\nfull pathname is given in the environment variable\n<b>DATEMSK</b>. The first line in the file that matches the\ngiven input string is used for the conversion.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The matching is\ndone case insensitively. Superfluous whitespace, either in\nthe pattern or in the string to be converted, is\nignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The conversion\nspecifications that a pattern can contain are those given\nfor <a href=\"https://man.page/3/strptime\">strptime(3)</a>. One more conversion specification is\nspecified in POSIX.1-2001:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p><b>%Z</b></p></td>\n<td width=\"8%\"></td>\n<td width=\"75%\">\n\n\n<p>Timezone name. This is not implemented in glibc.</p></td>\n<td width=\"3%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When <b>%Z</b>\nis given, the structure containing the broken-down time is\ninitialized with values corresponding to the current time in\nthe given timezone. Otherwise, the structure is initialized\nto the broken-down time corresponding to the current local\ntime (as by a call to <a href=\"https://man.page/3/localtime\">localtime(3)</a>).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When only the\nday of the week is given, the day is taken to be the first\nsuch day on or after today.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When only the\nmonth is given (and no year), the month is taken to be the\nfirst such month equal to or after the current month. If no\nday is given, it is the first day of the month.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When no hour,\nminute and second are given, the current hour, minute and\nsecond are taken.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If no date is\ngiven, but we know the hour, then that hour is taken to be\nthe first such hour equal to or after the current hour.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>getdate_r</b>()\nis a GNU extension that provides a reentrant version of\n<b>getdate</b>(). Rather than using a global variable to\nreport errors and a static buffer to return the broken down\ntime, it returns errors via the function result value, and\nreturns the resulting broken-down time in the\ncaller-allocated buffer pointed to by the argument\n<i>res</i>.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">When\nsuccessful, <b>getdate</b>() returns a pointer to a\n<i>struct tm</i>. Otherwise, it returns NULL and sets the\nglobal variable <i>getdate_err</i> to one of the error\nnumbers shown below. Changes to <i>errno</i> are\nunspecified.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success\n<b>getdate_r</b>() returns 0; on error it returns one of the\nerror numbers shown below.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\nerrors are returned via <i>getdate_err</i> (for\n<b>getdate</b>()) or as the function result (for\n<b>getdate_r</b>()):</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\"><b>1</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">The <b>DATEMSK</b> environment\nvariable is not defined, or its value is an empty\nstring.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>2</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>The template file specified by <b>DATEMSK</b> cannot be\nopened for reading.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>3</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Failed to get file status information.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>4</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>The template file is not a regular file.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>5</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>An error was encountered while reading the template\nfile.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>6</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Memory allocation failed (not enough memory\navailable).</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>7</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>There is no line in the file that matches the input.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p><b>8</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>Invalid input specification.</p></td></tr>\n</table>\n\n<h2>ENVIRONMENT\n<a name=\"ENVIRONMENT\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>DATEMSK</b></p>\n\n<p style=\"margin-left:22%;\">File containing format\npatterns.</p>\n\n<p style=\"margin-left:11%;\"><b>TZ</b>, <b>LC_TIME</b></p>\n\n<p style=\"margin-left:22%;\">Variables used by\n<a href=\"https://man.page/3/strptime\">strptime(3)</a>.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3306751.png\" alt=\"Image grohtml-3306751.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The POSIX.1\nspecification for <a href=\"https://man.page/3/strptime\">strptime(3)</a> contains conversion\nspecifications using the <b>%E</b> or <b>%O</b> modifier,\nwhile such specifications are not given for\n<b>getdate</b>(). In glibc, <b>getdate</b>() is implemented\nusing <a href=\"https://man.page/3/strptime\">strptime(3)</a>, so that precisely the same\nconversions are supported by both.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The program\nbelow calls <b>getdate</b>() for each of its command-line\narguments, and for each call displays the values in the\nfields of the returned <i>tm</i> structure. The following\nshell session demonstrates the operation of the program:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$\n<b>TFILE=$PWD/tfile</b> <br>\n$ <b>echo '%A' &gt; $TFILE</b> # Full name of the day of the\nweek <br>\n$ <b>echo '%T' &gt;&gt; $TFILE</b> # ISO date (YYYY-MM-DD)\n<br>\n$ <b>echo '%F' &gt;&gt; $TFILE</b> # Time (HH:MM:SS) <br>\n$ <b>date</b> <br>\n$ <b>export DATEMSK=$TFILE</b> <br>\n$ <b>./a.out Tuesday '2009-12-28' '12:22:33'</b> <br>\nSun Sep 7 06:03:36 CEST 2008 <br>\nCall 1 (&quot;Tuesday&quot;) succeeded: <br>\ntm_sec = 36 <br>\ntm_min = 3 <br>\ntm_hour = 6 <br>\ntm_mday = 9 <br>\ntm_mon = 8 <br>\ntm_year = 108 <br>\ntm_wday = 2 <br>\ntm_yday = 252 <br>\ntm_isdst = 1 <br>\nCall 2 (&quot;2009-12-28&quot;) succeeded: <br>\ntm_sec = 36 <br>\ntm_min = 3 <br>\ntm_hour = 6 <br>\ntm_mday = 28 <br>\ntm_mon = 11 <br>\ntm_year = 109 <br>\ntm_wday = 1 <br>\ntm_yday = 361 <br>\ntm_isdst = 0 <br>\nCall 3 (&quot;12:22:33&quot;) succeeded: <br>\ntm_sec = 33 <br>\ntm_min = 22 <br>\ntm_hour = 12 <br>\ntm_mday = 7 <br>\ntm_mon = 8 <br>\ntm_year = 108 <br>\ntm_wday = 0 <br>\ntm_yday = 250 <br>\ntm_isdst = 1</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Program\nsource</b> <br>\n#define _GNU_SOURCE <br>\n#include &lt;time.h&gt; <br>\n#include &lt;stdio.h&gt; <br>\n#include &lt;stdlib.h&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">int <br>\nmain(int argc, char *argv[]) <br>\n{ <br>\nstruct tm *tmp;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">for (int j = 1;\nj &lt; argc; j++) { <br>\ntmp = getdate(argv[j]);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">if (tmp ==\nNULL) { <br>\nprintf(&quot;Call %d failed; getdate_err = %d\\n&quot;, <br>\nj, getdate_err); <br>\ncontinue; <br>\n}</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">printf(&quot;Call\n%d (\\&quot;%s\\&quot;) succeeded:\\n&quot;, j, argv[j]); <br>\nprintf(&quot; tm_sec = %d\\n&quot;, tmp-&gt;tm_sec); <br>\nprintf(&quot; tm_min = %d\\n&quot;, tmp-&gt;tm_min); <br>\nprintf(&quot; tm_hour = %d\\n&quot;, tmp-&gt;tm_hour); <br>\nprintf(&quot; tm_mday = %d\\n&quot;, tmp-&gt;tm_mday); <br>\nprintf(&quot; tm_mon = %d\\n&quot;, tmp-&gt;tm_mon); <br>\nprintf(&quot; tm_year = %d\\n&quot;, tmp-&gt;tm_year); <br>\nprintf(&quot; tm_wday = %d\\n&quot;, tmp-&gt;tm_wday); <br>\nprintf(&quot; tm_yday = %d\\n&quot;, tmp-&gt;tm_yday); <br>\nprintf(&quot; tm_isdst = %d\\n&quot;, tmp-&gt;tm_isdst); <br>\n}</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">exit(EXIT_SUCCESS);\n<br>\n}</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/time\">time(2)</a>,\n<a href=\"https://man.page/3/localtime\">localtime(3)</a>, <a href=\"https://man.page/3/setlocale\">setlocale(3)</a>,\n<a href=\"https://man.page/3/strftime\">strftime(3)</a>, <a href=\"https://man.page/3/strptime\">strptime(3)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#ENVIRONMENT\">ENVIRONMENT</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}