{"name":"glib::mainloop","body":"\n\n<h1 align=\"center\">Glib::MainLoop</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Glib::MainLoop\n- An event source manager</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Event-driven\nprograms need some sort of loop which watches for events and\nlaunches the appropriate actions. Glib::MainLoop provides\nthis functionality.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Mainloops have\ncontext, provided by the MainContext object. For the most\npart you can use the default context (see\n&quot;default&quot;), but if you want to create a subcontext\nfor a nested loop which doesn&rsquo;t have the same event\nsources, etc, you can.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Event sources,\nattached to main contexts, watch for events to happen, and\nlaunch appropriate actions. Glib provides a few ready-made\nevent sources, the Glib::Timeout, Glib::Idle, and io watch\n(&quot;Glib::IO-&gt;add_watch&quot;).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Under the hood,\nGtk+ adds event sources for GdkEvents to dispatch events to\nyour widgets. In fact, Gtk2 provides an abstraction of\nGlib::MainLoop (See &quot;Gtk2-&gt;main&quot; and friends),\nso you may rarely have cause to use Glib::MainLoop\ndirectly.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note: As of\nversion 1.080, the Glib module uses a custom event source to\nensure that perl&rsquo;s safe signal handling and the glib\npolling event loop play nicely together. It is no longer\nnecessary to install a timeout to ensure that async signals\nget handled in a timely manner.</p>\n\n<h2>CONSTANTS\n<a name=\"CONSTANTS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">&quot;SOURCE_REMOVE&quot;\nand &quot;SOURCE_CONTINUE&quot; are designed for use as the\nreturn values from timeout, idle and I/O watch source\nfunctions. They return true to keep running or false to\nremove themselves. These constants can help you get that the\nright way around.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Glib::SOURCE_CONTINUE\n# true <br>\nGlib::SOURCE_REMOVE # false</p>\n\n<h2>METHODS\n<a name=\"METHODS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>maincontext\nthingamabob = Glib::MainContext-&gt;new <br>\nmainloop = Glib::MainLoop-&gt;new ($context=undef,\n$is_running=FALSE)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"61%\">\n\n\n<p>$context (Glib::MainContext thingamabob)</p></td>\n<td width=\"22%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"61%\">\n\n\n<p>$is_running (boolean)</p></td>\n<td width=\"22%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>integer =\nGlib::Timeout-&gt;add ($interval, $callback, $data=undef,\n$priority=G_PRIORITY_DEFAULT)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"65%\">\n\n\n<p style=\"margin-top: 1em\">$interval (integer) number of\nmilliseconds</p> </td>\n<td width=\"18%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"65%\">\n\n\n<p>$callback (subroutine)</p></td>\n<td width=\"18%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"65%\">\n\n\n<p>$data (scalar)</p></td>\n<td width=\"18%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"65%\">\n\n\n<p>$priority (integer)</p></td>\n<td width=\"18%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Run\n<i>$callback</i> every <i>$interval</i> milliseconds until\n<i>$callback</i> returns false. Returns a source id which\nmay be used with &quot;Glib::Source-&gt;remove&quot;. Note\nthat a mainloop must be active for the timeout to\nexecute.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>integer =\nGlib::Idle-&gt;add ($callback, $data=undef,\n$priority=G_PRIORITY_DEFAULT_IDLE)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"34%\">\n\n\n<p style=\"margin-top: 1em\">$callback (subroutine)</p></td>\n<td width=\"49%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"34%\">\n\n\n<p>$data (scalar)</p></td>\n<td width=\"49%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"34%\">\n\n\n<p>$priority (integer)</p></td>\n<td width=\"49%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Run\n<i>$callback</i> when the mainloop is idle. If\n<i>$callback</i> returns false, it will uninstall itself,\notherwise, it will run again at the next idle iteration.\nReturns a source id which may be used with\n&quot;Glib::Source-&gt;remove&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>integer =\nGlib::Timeout-&gt;add_seconds ($interval, $callback,\n$data=undef, $priority=G_PRIORITY_DEFAULT)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"29%\">\n\n\n<p style=\"margin-top: 1em\">$interval (integer)</p></td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"29%\">\n\n\n<p>$callback (scalar)</p></td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"29%\">\n\n\n<p>$data (scalar)</p></td>\n<td width=\"54%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"29%\">\n\n\n<p>$priority (integer)</p></td>\n<td width=\"54%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Since: glib\n2.14</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>integer =\nGlib::IO-&gt;add_watch ($fd, $condition, $callback,\n$data=undef, $priority=G_PRIORITY_DEFAULT)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p style=\"margin-top: 1em\">$fd (integer) file descriptor,\ne.g. fileno($filehandle)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>$condition (Glib::IOCondition)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>$callback (subroutine)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>$data (scalar)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"83%\">\n\n\n<p>$priority (integer)</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Run\n<i>$callback</i> when there is an event on <i>$fd</i> that\nmatches <i>$condition</i>. The watch uninstalls itself if\n<i>$callback</i> returns false. Returns a source id that may\nbe used with &quot;Glib::Source-&gt;remove&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Glib&rsquo;s\n<small>IO</small> channels serve the same basic purpose as\nPerl&rsquo;s file handles, so for the most part you\ndon&rsquo;t see GIOChannels in Perl. The <small>IO</small>\nwatch integrates <small>IO</small> operations with the main\nloop, which Perl file handles don&rsquo;t do. For various\nreasons, this function requires raw file descriptors, not\nfull file handles. See &quot;fileno&quot; in perlfunc.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>maincontext\nthingamabob = $loop-&gt;get_context <br>\nmaincontext thingamabob = Glib::MainContext-&gt;default <br>\nboolean = $context-&gt;is_owner</b> <br>\nSince: glib 2.12</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>boolean =\n$loop-&gt;is_running <br>\nboolean = $context-&gt;iteration ($may_block)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p style=\"margin-top: 1em\">$may_block (boolean)</p></td>\n<td width=\"52%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>integer =\nGlib::main_depth</b> <br>\nFind the current main loop recursion level. This is handy in\nfringe situations, but those are very rare; see the C\n<small>API</small> reference for a more in-depth\ndiscussion.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Since: glib\n2.4</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>boolean =\n$context-&gt;pending <br>\n$loop-&gt;quit <br>\nboolean = Glib::Source-&gt;remove ($tag)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"21%\">\n\n\n<p style=\"margin-top: 1em\">$tag (integer)</p></td>\n<td width=\"62%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Remove an event\nsource. <i>$tag</i> is the number returned by things like\n&quot;Glib::Timeout-&gt;add&quot;,\n&quot;Glib::Idle-&gt;add&quot;, and\n&quot;Glib::IO-&gt;add_watch&quot;.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>$loop-&gt;run\n<br>\ninteger = Glib::Child-&gt;watch_add ($pid, $callback,\n$data=undef, $priority=G_PRIORITY_DEFAULT)</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"48%\">\n\n\n<p style=\"margin-top: 1em\">$pid (integer) child process\n<small>ID</small></p> </td>\n<td width=\"35%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"48%\">\n\n\n<p>$callback (subroutine)</p></td>\n<td width=\"35%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"48%\">\n\n\n<p>$data (scalar)</p></td>\n<td width=\"35%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"48%\">\n\n\n<p>$priority (integer)</p></td>\n<td width=\"35%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Add a source to\nthe default main context which will call</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">&amp;$callback\n($pid, $waitstatus, $data)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">when child\nprocess $pid terminates. The return value is a source id\nwhich can be used with &quot;Glib::Source-&gt;remove&quot;.\nWhen the callback is made the source is removed\nautomatically.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In a\nnon-threaded program Glib implements this source by\ninstalling a <small>SIGCHLD</small> handler. Don&rsquo;t\nchange $SIG{ <small>CHLD</small> } in Perl or the callback\nwill never run.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Since: glib\n2.4</p>\n\n<h2>ENUMS AND FLAGS\n<a name=\"ENUMS AND FLAGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>flags\nGlib::IOCondition</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p style=\"margin-top: 1em\">&rsquo;in&rsquo; /\n&rsquo;G_IO_IN&rsquo;</p> </td>\n<td width=\"52%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p>&rsquo;out&rsquo; / &rsquo;G_IO_OUT&rsquo;</p></td>\n<td width=\"52%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p>&rsquo;pri&rsquo; / &rsquo;G_IO_PRI&rsquo;</p></td>\n<td width=\"52%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p>&rsquo;err&rsquo; / &rsquo;G_IO_ERR&rsquo;</p></td>\n<td width=\"52%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p>&rsquo;hup&rsquo; / &rsquo;G_IO_HUP&rsquo;</p></td>\n<td width=\"52%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"5%\"></td>\n<td width=\"31%\">\n\n\n<p>&rsquo;nval&rsquo; / &rsquo;G_IO_NVAL&rsquo;</p></td>\n<td width=\"52%\">\n</td></tr>\n</table>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Glib</p>\n\n<h2>COPYRIGHT\n<a name=\"COPYRIGHT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copyright (C)\n2003-2011 by the gtk2-perl team.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This software\nis licensed under the <small>LGPL.</small> See Glib for a\nfull notice.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#CONSTANTS\">CONSTANTS</a>","<a href=\"#METHODS\">METHODS</a>","<a href=\"#ENUMS AND FLAGS\">ENUMS AND FLAGS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COPYRIGHT\">COPYRIGHT</a>"],"level":3}