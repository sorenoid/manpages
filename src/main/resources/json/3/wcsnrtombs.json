{"name":"wcsnrtombs","description":"wcsnrtombs - convert a wide-character string to a multibyte string","body":"\n\n<h1 align=\"center\">WCSNRTOMBS</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">wcsnrtombs -\nconvert a wide-character string to a multibyte string</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;wchar.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>size_t\nwcsnrtombs(char *</b><i>dest</i><b>, const wchar_t\n**</b><i>src</i><b>, size_t</b> <i>nwc</i><b>, <br>\nsize_t</b> <i>len</i><b>, mbstate_t\n*</b><i>ps</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>wcsnrtombs</b>():</p>\n\n<p style=\"margin-left:17%;\">Since glibc 2.10:</p>\n\n\n<p style=\"margin-left:23%;\">_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200809L</p>\n\n<p style=\"margin-left:17%;\">Before glibc 2.10:</p>\n\n<p style=\"margin-left:23%;\">_GNU_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>wcsnrtombs</b>() function is like the <a href=\"https://man.page/3/wcsrtombs\">wcsrtombs(3)</a>\nfunction, except that the number of wide characters to be\nconverted, starting at <i>*src</i>, is limited to\n<i>nwc</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If <i>dest</i>\nis not NULL, the <b>wcsnrtombs</b>() function converts at\nmost <i>nwc</i> wide characters from the wide-character\nstring <i>*src</i> to a multibyte string starting at\n<i>dest</i>. At most <i>len</i> bytes are written to\n<i>dest</i>. The shift state <i>*ps</i> is updated. The\nconversion is effectively performed by repeatedly calling\n<i>wcrtomb(dest, *src, ps)</i>, as long as this call\nsucceeds, and then incrementing <i>dest</i> by the number of\nbytes written and <i>*src</i> by one. The conversion can\nstop for three reasons:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>1.</p></td>\n<td width=\"1%\"></td>\n<td width=\"85%\">\n\n\n<p>A wide character has been encountered that can not be\nrepresented as a multibyte sequence (according to the\ncurrent locale). In this case, <i>*src</i> is left pointing\nto the invalid wide character, <i>(size_t)&nbsp;-1</i> is\nreturned, and <i>errno</i> is set to <b>EILSEQ</b>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>2.</p></td>\n<td width=\"1%\"></td>\n<td width=\"85%\">\n\n\n<p><i>nwc</i> wide characters have been converted without\nencountering a null wide character (L'\\0'), or the length\nlimit forces a stop. In this case, <i>*src</i> is left\npointing to the next wide character to be converted, and the\nnumber of bytes written to <i>dest</i> is returned.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"3%\">\n\n\n<p>3.</p></td>\n<td width=\"1%\"></td>\n<td width=\"85%\">\n\n\n<p>The wide-character string has been completely converted,\nincluding the terminating null wide character (which has the\nside effect of bringing back <i>*ps</i> to the initial\nstate). In this case, <i>*src</i> is set to NULL, and the\nnumber of bytes written to <i>dest</i>, excluding the\nterminating null byte ('\\0'), is returned.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If <i>dest</i>\nis NULL, <i>len</i> is ignored, and the conversion proceeds\nas above, except that the converted bytes are not written\nout to memory, and that no destination length limit\nexists.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In both of the\nabove cases, if <i>ps</i> is NULL, a static anonymous state\nknown only to the <b>wcsnrtombs</b>() function is used\ninstead.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The programmer\nmust ensure that there is room for at least <i>len</i> bytes\nat <i>dest</i>.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>wcsnrtombs</b>() function returns the number of bytes\nthat make up the converted part of multibyte sequence, not\nincluding the terminating null byte. If a wide character was\nencountered which could not be converted,\n<i>(size_t)&nbsp;-1</i> is returned, and <i>errno</i> set to\n<b>EILSEQ</b>.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3363731.png\" alt=\"Image grohtml-3363731.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2008.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The behavior of\n<b>wcsnrtombs</b>() depends on the <b>LC_CTYPE</b> category\nof the current locale.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Passing NULL as\n<i>ps</i> is not multithread safe.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/iconv\">iconv(3)</a>,\n<a href=\"https://man.page/3/mbsinit\">mbsinit(3)</a>, <a href=\"https://man.page/3/wcsrtombs\">wcsrtombs(3)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}