{"name":"net::dbus::test::mockobject","description":"Net::DBus::Test::MockObject - Fake an object from the bus for unit testing","body":"\n\n<h1 align=\"center\">Net::DBus::Test::MockObject</h1>\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Net::DBus::Test::MockObject\n- Fake an object from the bus for unit testing</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">use Net::DBus;\n<br>\nuse Net::DBus::Test::MockObject; <br>\nmy $bus = Net::DBus-&gt;test <br>\n# Lets fake presence of HAL... <br>\n# First we need to define the service <br>\nmy $service =\n$bus-&gt;export_service(&quot;org.freedesktop.Hal&quot;);\n<br>\n# Then create a mock object <br>\nmy $object = Net::DBus::Test::MockObject-&gt;new($service,\n<br>\n&quot;/org/freedesktop/Hal/Manager&quot;); <br>\n# Fake the 'GetAllDevices' method <br>\n\n$object-&gt;seed_action(&quot;org.freedesktop.Hal.Manager&quot;,\n<br>\n&quot;GetAllDevices&quot;, <br>\nreply =&gt; { <br>\nreturn =&gt; [\n&quot;/org/freedesktop/Hal/devices/computer_i8042_Aux_Port&quot;,\n<br>\n\n&quot;/org/freedesktop/Hal/devices/computer_i8042_Aux_Port_logicaldev_input&quot;,\n<br>\n\n&quot;/org/freedesktop/Hal/devices/computer_i8042_Kbd_Port&quot;,\n<br>\n\n&quot;/org/freedesktop/Hal/devices/computer_i8042_Kbd_Port_logicaldev_input&quot;\n<br>\n], <br>\n}); <br>\n# Now can test any class which calls out to 'GetAllDevices'\nin HAL <br>\n....test stuff....</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This provides\nan alternate for Net::DBus::Object to enable bus objects to\nbe quickly mocked up, thus facilitating creation of unit\ntests for services which may need to call out to objects\nprovided by 3rd party services on the bus. It is typically\nused as a companion to the Net::DBus::MockBus object, to\nenable complex services to be tested without actually\nstarting a real bus.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">!!!!!\n<small>WARNING</small> !!!</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This object\n&amp; its APIs should be considered very experimental at\nthis point in time, and no guarantees about future\n<small>API</small> compatibility are provided what-so-ever.\nComments &amp; suggestions on how to evolve this framework\nare, however, welcome &amp; encouraged.</p>\n\n<h2>METHODS\n<a name=\"METHODS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">my $object =\nNet::DBus::Test::MockObject-&gt;new($service, $path, <br>\n$interface);</p>\n\n<p style=\"margin-left:17%;\">Create a new mock object,\nattaching to the service defined by the $service parameter.\nThis would be an instance of the Net::DBus::Service object.\nThe $path parameter defines the object path at which to\nattach this mock object, and $interface defines the\ninterface it will support.</p>\n\n<p style=\"margin-left:11%;\">my $service =\n$object-&gt;get_service</p>\n\n<p style=\"margin-left:17%;\">Retrieves the\nNet::DBus::Service object within which this object is\nexported.</p>\n\n<p style=\"margin-left:11%;\">my $path =\n$object-&gt;get_object_path</p>\n\n<p style=\"margin-left:17%;\">Retrieves the path under which\nthis object is exported</p>\n\n<p style=\"margin-left:11%;\">my $msg =\n$object-&gt;get_last_message</p>\n\n<p style=\"margin-left:17%;\">Retrieves the last message\nprocessed by this object. The returned object is an instance\nof Net::DBus::Binding::Message</p>\n\n<p style=\"margin-left:11%;\">my $sig =\n$object-&gt;get_last_message_signature</p>\n\n<p style=\"margin-left:17%;\">Retrieves the type signature of\nthe last processed message.</p>\n\n<p style=\"margin-left:11%;\">my $value =\n$object-&gt;get_last_message_param</p>\n\n<p style=\"margin-left:17%;\">Returns the first value\nsupplied as an argument to the last processed message.</p>\n\n<p style=\"margin-left:11%;\">my @values =\n$object-&gt;get_last_message_param_list</p>\n\n<p style=\"margin-left:17%;\">Returns a list of all the\nvalues supplied as arguments to the last processed\nmessage.</p>\n\n\n<p style=\"margin-left:11%;\">$object-&gt;seed_action($interface,\n$method, %action);</p>\n\n<p style=\"margin-left:17%;\">Registers an action to be\nperformed when a message corresponding to the method $method\nwithin the interface $interface is received. The %action\nparameter can have a number of possible keys set: <br>\nsignals</p>\n\n<p style=\"margin-left:23%;\">Causes a signal to be emitted\nwhen the method is invoked. The value associated with this\nkey should be an instance of the\nNet::DBus::Binding::Message::Signal class.</p>\n\n<p style=\"margin-left:17%;\">error</p>\n\n<p style=\"margin-left:23%;\">Causes an error to be generated\nwhen the method is invoked. The value associated with this\nkey should be a hash reference, with two elements. The\nfirst, &quot;name&quot;, giving the error name, and the\nsecond, &quot;description&quot;, providing the descriptive\ntext.</p>\n\n<p style=\"margin-left:17%;\">reply</p>\n\n<p style=\"margin-left:23%;\">Causes a normal method return\nto be generated. The value associated with this key should\nbe an array reference, whose elements are the values to be\nreturned by the method.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">It\ndoesn&rsquo;t completely replicate the <small>API</small> of\nNet::DBus::Binding::Object, merely enough to make the high\nlevel bindings work in a test scenario.</p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Daniel P.\nBerrange</p>\n\n<h2>COPYRIGHT\n<a name=\"COPYRIGHT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Copyright (C)\n2004-2009 Daniel P. Berrange</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Net::DBus,\nNet::DBus::Object, Net::DBus::Test::MockConnection,\n&lt;http://www.mockobjects.com/Faq.html&gt;</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#METHODS\">METHODS</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#AUTHOR\">AUTHOR</a>","<a href=\"#COPYRIGHT\">COPYRIGHT</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"],"level":3}