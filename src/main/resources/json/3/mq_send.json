{"name":"mq_send","description":"mq_send,\nmq_timedsend - send a message to a message queue","body":"\n\n<h1 align=\"center\">MQ_SEND</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">mq_send,\nmq_timedsend - send a message to a message queue</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;mqueue.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmq_send(mqd_t</b> <i>mqdes</i><b>, const char\n*</b><i>msg_ptr</i><b>, <br>\nsize_t</b> <i>msg_len</i><b>, unsigned int</b>\n<i>msg_prio</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;time.h&gt; <br>\n#include &lt;mqueue.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmq_timedsend(mqd_t</b> <i>mqdes</i><b>, const char\n*</b><i>msg_ptr</i><b>, <br>\nsize_t</b> <i>msg_len</i><b>, unsigned int</b>\n<i>msg_prio</i><b>, <br>\nconst struct timespec *</b><i>abs_timeout</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Link with\n<i>-lrt</i>.</p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mq_timedsend</b>():</p>\n\n\n<p style=\"margin-left:17%;\">_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200112L</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mq_send</b>()\nadds the message pointed to by <i>msg_ptr</i> to the message\nqueue referred to by the message queue descriptor\n<i>mqdes</i>. The <i>msg_len</i> argument specifies the\nlength of the message pointed to by <i>msg_ptr</i>; this\nlength must be less than or equal to the queue&rsquo;s\n<i>mq_msgsize</i> attribute. Zero-length messages are\nallowed.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>msg_prio</i> argument is a nonnegative integer that\nspecifies the priority of this message. Messages are placed\non the queue in decreasing order of priority, with newer\nmessages of the same priority being placed after older\nmessages with the same priority. See <a href=\"https://man.page/7/mq_overview\">mq_overview(7)</a>\nfor details on the range for the message priority.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the message\nqueue is already full (i.e., the number of messages on the\nqueue equals the queue&rsquo;s <i>mq_maxmsg</i> attribute),\nthen, by default, <b>mq_send</b>() blocks until sufficient\nspace becomes available to allow the message to be queued,\nor until the call is interrupted by a signal handler. If the\n<b>O_NONBLOCK</b> flag is enabled for the message queue\ndescription, then the call instead fails immediately with\nthe error <b>EAGAIN</b>.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mq_timedsend</b>()\nbehaves just like <b>mq_send</b>(), except that if the queue\nis full and the <b>O_NONBLOCK</b> flag is not enabled for\nthe message queue description, then <i>abs_timeout</i>\npoints to a structure which specifies how long the call will\nblock. This value is an absolute timeout in seconds and\nnanoseconds since the Epoch, 1970-01-01 00:00:00 +0000\n(UTC), specified in the following structure:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct timespec\n{ <br>\ntime_t tv_sec; /* seconds */ <br>\nlong tv_nsec; /* nanoseconds */ <br>\n};</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the message\nqueue is full, and the timeout has already expired by the\ntime of the call, <b>mq_timedsend</b>() returns\nimmediately.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\n<b>mq_send</b>() and <b>mq_timedsend</b>() return zero; on\nerror, -1 is returned, with <i>errno</i> set to indicate the\nerror.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EAGAIN</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">The queue was full, and the\n<b>O_NONBLOCK</b> flag was set for the message queue\ndescription referred to by <i>mqdes</i>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EBADF</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The descriptor specified in <i>mqdes</i> was invalid or\nnot opened for writing.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINTR</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The call was interrupted by a signal handler; see\n<a href=\"https://man.page/7/signal\">signal(7)</a>.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The call would have blocked, and <i>abs_timeout</i> was\ninvalid, either because <i>tv_sec</i> was less than zero, or\nbecause <i>tv_nsec</i> was less than zero or greater than\n1000 million.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>EMSGSIZE</b></p>\n\n<p style=\"margin-left:22%;\"><i>msg_len</i> was greater than\nthe <i>mq_msgsize</i> attribute of the message queue.</p>\n\n<p style=\"margin-left:11%;\"><b>ETIMEDOUT</b></p>\n\n<p style=\"margin-left:22%;\">The call timed out before a\nmessage could be transferred.</p>\n\n<h2>ATTRIBUTES\n<a name=\"ATTRIBUTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For an\nexplanation of the terms used in this section, see\n<a href=\"https://man.page/7/attributes\">attributes(7)</a>.</p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><img src=\"grohtml-3366071.png\" alt=\"Image grohtml-3366071.png\"></p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On Linux,\n<b>mq_timedsend</b>() is a system call, and <b>mq_send</b>()\nis a library function layered on top of that system\ncall.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/3/mq_close\">mq_close(3)</a>,\n<a href=\"https://man.page/3/mq_getattr\">mq_getattr(3)</a>, <a href=\"https://man.page/3/mq_notify\">mq_notify(3)</a>,\n<a href=\"https://man.page/3/mq_open\">mq_open(3)</a>, <a href=\"https://man.page/3/mq_receive\">mq_receive(3)</a>,\n<a href=\"https://man.page/3/mq_unlink\">mq_unlink(3)</a>, <a href=\"https://man.page/7/mq_overview\">mq_overview(7)</a>,\n<a href=\"https://man.page/7/time\">time(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#ATTRIBUTES\">ATTRIBUTES</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":3}