{"name":"sssd-ad","description":"sssd-ad - SSSD\nActive Directory provider\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\nThis manual\npage describes the configuration of the AD provider for\n<b>sssd</b>(8). For a detailed syntax reference, refer to\nthe &ldquo;FILE FORMAT&rdquo; section of the\n<b>sssd.conf</b>(5) manual page.\n\nThe AD provider\nis a back end used to connect to an Active Directory server.\nThis provider requires that the machine be joined to the AD\ndomain and a keytab is available. Back end communication\noccurs over a GSSAPI-encrypted channel, SSL/TLS options\nshould not be used with the AD provider and will be\nsuperseded by Kerberos usage.\n\nThe AD provider\nsupports connecting to Active Directory 2008 R2 or later.\nEarlier versions may work, but are unsupported.\n\nThe AD provider\ncan be used to get user information and authenticate users\nfrom trusted domains. Currently only trusted domains in the\nsame forest are recognized. In addition servers from trusted\ndomains are always auto-discovered.\n\nThe AD provider\nenables SSSD to use the <a href=\"https://man.page/5/sssd-ldap\">sssd-ldap(5)</a> identity\nprovider and the <a href=\"https://man.page/5/sssd-krb5\">sssd-krb5(5)</a> authentication provider\nwith optimizations for Active Directory environments. The AD\nprovider accepts the same options used by the sssd-ldap and\nsssd-krb5 providers with some exceptions. However, it is\nneither necessary nor recommended to set these options.\n\nThe AD provider\nprimarily copies the traditional ldap and krb5 provider\ndefault options with some exceptions, the differences are\nlisted in the &ldquo;MODIFIED DEFAULT OPTIONS&rdquo;\nsection.\n\nThe AD provider\ncan also be used as an access, chpass, sudo and autofs\nprovider. No configuration of the access provider is\nrequired on the client side.\n\nIf\n&ldquo;auth_provider=ad&rdquo; or\n&ldquo;access_provider=ad&rdquo; is configured in sssd.conf\nthen the id_provider must also be set to\n&ldquo;ad&rdquo;.\n\nBy default, the\nAD provider will map UID and GID values from the objectSID\nparameter in Active Directory. For details on this, see the\n&ldquo;ID MAPPING&rdquo; section below. If you want to\ndisable ID mapping and instead rely on POSIX attributes\ndefined in Active Directory, you should set\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">ldap_id_mapping\n= False\n\nIf POSIX\nattributes should be used, it is recommended for performance\nreasons that the attributes are also replicated to the\nGlobal Catalog. If POSIX attributes are replicated, SSSD\nwill attempt to locate the domain of a requested numerical\nID with the help of the Global Catalog and only search that\ndomain. In contrast, if POSIX attributes are not replicated\nto the Global Catalog, SSSD must search all the domains in\nthe forest sequentially. Please note that the\n&ldquo;cache_first&rdquo; option might be also helpful in\nspeeding up domainless searches. Note that if only a subset\nof POSIX attributes is present in the Global Catalog, the\nnon-replicated attributes are currently not read from the\nLDAP port.\n\nUsers, groups\nand other entities served by SSSD are always treated as\ncase-insensitive in the AD provider for compatibility with\nActive Directory's LDAP implementation.\n\n<h2>CONFIGURATION OPTIONS\n<a name=\"CONFIGURATION OPTIONS\"></a>\n</h2>\n\n\nRefer to the\nsection &ldquo;DOMAIN SECTIONS&rdquo; of the\n<b>sssd.conf</b>(5) manual page for details on the\nconfiguration of an SSSD domain.\n\nad_domain\n(string)\n\n<p style=\"margin-left:17%;\">Specifies the name of the\nActive Directory domain. This is optional. If not provided,\nthe configuration domain name is used.\n\n<p style=\"margin-left:17%; margin-top: 1em\">For proper\noperation, this option should be specified as the lower-case\nversion of the long version of the Active Directory\ndomain.\n\n<p style=\"margin-left:17%; margin-top: 1em\">The short\ndomain name (also known as the NetBIOS or the flat name) is\nautodetected by the SSSD.\n\n\nad_enabled_domains\n(string)\n\n<p style=\"margin-left:17%;\">A comma-separated list of\nenabled Active Directory domains. If provided, SSSD will\nignore any domains not listed in this option. If left unset,\nall domains from the AD forest will be available.\n\n<p style=\"margin-left:17%; margin-top: 1em\">For proper\noperation, this option must be specified in all lower-case\nand as the fully qualified domain name of the Active\nDirectory domain. For example:\n\n\n<p style=\"margin-left:23%; margin-top: 1em\">ad_enabled_domains\n= sales.example.com, eng.example.com\n\n<p style=\"margin-left:17%; margin-top: 1em\">The short\ndomain name (also known as the NetBIOS or the flat name)\nwill be autodetected by SSSD.\n\n<p style=\"margin-left:17%; margin-top: 1em\">Default: Not\nset\n\nad_server,\nad_backup_server (string)\n\n<p style=\"margin-left:17%;\">The comma-separated list of\nhostnames of the AD servers to which SSSD should connect in\norder of preference. For more information on failover and\nserver redundancy, see the &ldquo;FAILOVER&rdquo;\nsection.\n\n<p style=\"margin-left:17%; margin-top: 1em\">This is\noptional if autodiscovery is enabled. For more information\non service discovery, refer to the &ldquo;SERVICE\nDISCOVERY&rdquo; section.\n\n<p style=\"margin-left:17%; margin-top: 1em\">Note: Trusted\ndomains will always auto-discover servers even if the\nprimary server is explicitly defined in the ad_server\noption.\n\nad_hostname\n(string)\n\n<p style=\"margin-left:17%;\">Optional. On machines where the\nhostname(5) does not reflect the fully qualified name, sssd\nwill try to expand the short name. If it is not possible or\nthe short name should be really used instead, set this\nparameter explicitly.\n\n<p style=\"margin-left:17%; margin-top: 1em\">This field is\nused to determine the host principal in use in the keytab\nand to perform dynamic DNS updates. It must match the\nhostname for which the keytab was issued.\n\n\nad_enable_dns_sites\n(boolean)\n\n<p style=\"margin-left:17%;\">Enables DNS sites - location\nbased service discovery.\n\n<p style=\"margin-left:17%; margin-top: 1em\">If true and\nservice discovery (see Service Discovery paragraph at the\nbottom of the man page) is enabled, the SSSD will first\nattempt to discover the Active Directory server to connect\nto using the Active Directory Site Discovery and fall back\nto the DNS SRV records if no AD site is found. The DNS SRV\nconfiguration, including the discovery domain, is used\nduring site discovery as well.\n\n<p style=\"margin-left:17%; margin-top: 1em\">Default:\ntrue\n\n\nad_access_filter\n(string)\n\n<p style=\"margin-left:17%;\">This option specifies LDAP\naccess control filter that the user must match in order to\nbe allowed access. Please note that the\n&ldquo;access_provider&rdquo; option must be explicitly set\nto &ldquo;ad&rdquo; in order for this option to have an\neffect.\n\n<p style=\"margin-left:17%; margin-top: 1em\">The option also\nsupports specifying different filters per domain or forest.\nThis extended filter would consist of:\n&ldquo;KEYWORD:NAME:FILTER&rdquo;. The keyword can be either\n&ldquo;DOM&rdquo;, &ldquo;FOREST&rdquo; or missing.\n\n<p style=\"margin-left:17%; margin-top: 1em\">If the keyword\nequals to &ldquo;DOM&rdquo; or is missing, then\n&ldquo;NAME&rdquo; specifies the domain or subdomain the\nfilter applies to. If the keyword equals to\n&ldquo;FOREST&rdquo;, then the filter equals to all domains\nfrom the forest specified by &ldquo;NAME&rdquo;.\n\n<p style=\"margin-left:17%; margin-top: 1em\">Multiple\nfilters can be separated with the &ldquo;?&rdquo; character,\nsimilarly to how search bases work.\n\n<p style=\"margin-left:17%; margin-top: 1em\">Nested group\nmembership must be searched for using a special OID\n&ldquo;:1.2.840.113556.1.4.1941:&rdquo; in addition to the\nfull DOM:domain.example.org: syntax to ensure the parser\ndoes not attempt to interpret the colon characters\nassociated with the OID. If you do not use this OID then\nnested group membership will not be resolved. See usage\nexample below and refer here for further information about\nthe OID: <b><font color=\"#0000FF\">[MS-ADTS] section LDAP\nextensions</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nmost specific match is always used. For example, if the\noption specified filter for a domain the user is a member of\nand a global filter, the per-domain filter would be applied.\nIf there are more matches with the same specification, the\nfirst one is used.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Examples:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter on domain called dom1 only: <br>\n\ndom1:(memberOf=cn=admins,ou=groups,dc=dom1,dc=com)</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter on domain called dom2 only: <br>\n\nDOM:dom2:(memberOf=cn=admins,ou=groups,dc=dom2,dc=com)</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter on forest called EXAMPLE.COM only: <br>\n\nFOREST:EXAMPLE.COM:(memberOf=cn=admins,ou=groups,dc=example,dc=com)</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter for a member of a nested group in dom1: <br>\n\nDOM:dom1:(memberOf:1.2.840.113556.1.4.1941:=cn=nestedgroup,ou=groups,dc=example,dc=com)</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNot set</font>\n\n\n<font color=\"#000000\">ad_site\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Specify\nAD site to which client should try to connect. If this\noption is not provided, the AD site will be\nauto-discovered.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNot set</font>\n\n\n<font color=\"#000000\">ad_enable_gc\n(boolean)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">By\ndefault, the SSSD connects to the Global Catalog first to\nretrieve users from trusted domains and uses the LDAP port\nto retrieve group memberships or as a fallback. Disabling\nthis option makes the SSSD only connect to the LDAP port of\nthe current AD server.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that disabling Global Catalog support does not disable\nretrieving users from trusted domains. The SSSD would\nconnect to the LDAP port of trusted domains instead.\nHowever, Global Catalog must be used in order to resolve\ncross-domain group memberships.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ntrue</font>\n\n\n<font color=\"#000000\">ad_gpo_access_control\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption specifies the operation mode for GPO-based access\ncontrol functionality: whether it operates in disabled mode,\nenforcing mode, or permissive mode. Please note that the\n&ldquo;access_provider&rdquo; option must be explicitly set\nto &ldquo;ad&rdquo; in order for this option to have an\neffect.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">GPO-based\naccess control functionality uses GPO policy settings to\ndetermine whether or not a particular user is allowed to\nlogon to the host. For more information on the supported\npolicy settings please refer to the &ldquo;ad_gpo_map&rdquo;\noptions.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that current version of SSSD does not support Active\nDirectory's built-in groups. Built-in groups (such as\nAdministrators with SID S-1-5-32-544) in GPO access control\nrules will be ignored by SSSD. See upstream issue tracker\nhttps://github.com/SSSD/sssd/issues/5063 .</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Before\nperforming access control SSSD applies group policy security\nfiltering on the GPOs. For every single user login, the\napplicability of the GPOs that are linked to the host is\nchecked. In order for a GPO to apply to a user, the user or\nat least one of the groups to which it belongs must have\nfollowing permissions on the GPO:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nRead: The user or one of its groups must have read access to\nthe properties of the GPO\n(RIGHT_DS_READ_PROPERTY)</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nApply Group Policy: The user or at least one of its groups\nmust be allowed to apply the GPO\n(RIGHT_DS_CONTROL_ACCESS).</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">By\ndefault, the Authenticated Users group is present on a GPO\nand this group has both Read and Apply Group Policy access\nrights. Since authentication of a user must have been\ncompleted successfully before GPO security filtering and\naccess control are started, the Authenticated Users group\npermissions on the GPO always apply also to the\nuser.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nIf the operation mode is set to enforcing, it is possible\nthat users that were previously allowed logon access will\nnow be denied logon access (as dictated by the GPO policy\nsettings). In order to facilitate a smooth transition for\nadministrators, a permissive mode is available that will not\nenforce the access control rules, but will evaluate them and\nwill output a syslog message if access would have been\ndenied. By examining the logs, administrators can then make\nthe necessary changes before setting the mode to enforcing.\nFor logging GPO-based access control debug level 'trace\nfunctions' is required (see <b>sssctl</b>(8) manual\npage).</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">There\nare three supported values for this option:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ndisabled: GPO-based access control rules are neither\nevaluated nor enforced.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nenforcing: GPO-based access control rules are evaluated and\nenforced.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\npermissive: GPO-based access control rules are evaluated,\nbut not enforced. Instead, a syslog message will be emitted\nindicating that the user would have been denied access if\nthis option's value were set to enforcing.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nenforcing</font>\n\n\n<font color=\"#000000\">ad_gpo_implicit_deny\n(boolean)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Normally\nwhen no applicable GPOs are found the users are allowed\naccess. When this option is set to True users will be\nallowed access only when explicitly allowed by a GPO rule.\nOtherwise users will be denied access. This can be used to\nharden security but be careful when using this option\nbecause it can deny access even to users in the built-in\nAdministrators group if no GPO rules apply to\nthem.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nfollowing 2 tables should illustrate when a user is allowed\nor rejected based on the allow and deny login rights defined\non the server-side and the setting of\nad_gpo_implicit_deny.</font>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><font color=\"#000000\"><img src=\"grohtml-3470561.png\" alt=\"Image grohtml-3470561.png\"></font>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><font color=\"#000000\"><img src=\"grohtml-3470562.png\" alt=\"Image grohtml-3470562.png\"></font>\n\n\n<font color=\"#000000\">ad_gpo_ignore_unreadable\n(boolean)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Normally\nwhen some group policy containers (AD object) of applicable\ngroup policy objects are not readable by SSSD then users are\ndenied access. This option allows to ignore group policy\ncontainers and with them associated policies if their\nattributes in group policy containers are not readable for\nSSSD.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font>\n\n\n<font color=\"#000000\">ad_gpo_cache_timeout\n(integer)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The\namount of time between lookups of GPO policy files against\nthe AD server. This will reduce the latency and load on the\nAD server if there are many access-control requests made in\na short period.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n5 (seconds)</font>\n\n\n<font color=\"#000000\">ad_gpo_map_interactive\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nInteractiveLogonRight and DenyInteractiveLogonRight policy\nsettings. Only those GPOs are evaluated for which the user\nhas Read and Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny interactive logon setting for the user or\none of its groups, the user is denied local access. If none\nof the evaluated GPOs has an interactive logon right\ndefined, the user is granted local access. If at least one\nevaluated GPO contains interactive logon right settings, the\nuser is granted local access only, if it or at least one of\nits groups is part of the policy settings.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on locally&quot; and &quot;Deny log\non locally&quot;.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;login&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_interactive\n= +my_pam_service, -login</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nlogin</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsu</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsu-l</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ngdm-fingerprint</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ngdm-password</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ngdm-smartcard</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nkdm</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nlightdm</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nlxdm</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsddm</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nunity</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nxdm</font>\n\n\n<font color=\"#000000\">ad_gpo_map_remote_interactive\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nRemoteInteractiveLogonRight and\nDenyRemoteInteractiveLogonRight policy settings. Only those\nGPOs are evaluated for which the user has Read and Apply\nGroup Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny remote logon setting for the user or one\nof its groups, the user is denied remote interactive access.\nIf none of the evaluated GPOs has a remote interactive logon\nright defined, the user is granted remote access. If at\nleast one evaluated GPO contains remote interactive logon\nright settings, the user is granted remote access only, if\nit or at least one of its groups is part of the policy\nsettings.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on through Remote Desktop\nServices&quot; and &quot;Deny log on through Remote Desktop\nServices&quot;.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;sshd&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_remote_interactive\n= +my_pam_service, -sshd</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsshd</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ncockpit</font>\n\n\n<font color=\"#000000\">ad_gpo_map_network\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nNetworkLogonRight and DenyNetworkLogonRight policy settings.\nOnly those GPOs are evaluated for which the user has Read\nand Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny network logon setting for the user or one\nof its groups, the user is denied network logon access. If\nnone of the evaluated GPOs has a network logon right\ndefined, the user is granted logon access. If at least one\nevaluated GPO contains network logon right settings, the\nuser is granted logon access only, if it or at least one of\nits groups is part of the policy settings.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Access this computer from the network&quot; and\n&quot;Deny access to this computer from the\nnetwork&quot;.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;ftp&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_network\n= +my_pam_service, -ftp</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nftp</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsamba</font>\n\n\n<font color=\"#000000\">ad_gpo_map_batch\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nBatchLogonRight and DenyBatchLogonRight policy settings.\nOnly those GPOs are evaluated for which the user has Read\nand Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny batch logon setting for the user or one of\nits groups, the user is denied batch logon access. If none\nof the evaluated GPOs has a batch logon right defined, the\nuser is granted logon access. If at least one evaluated GPO\ncontains batch logon right settings, the user is granted\nlogon access only, if it or at least one of its groups is\npart of the policy settings.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on as a batch job&quot; and\n&quot;Deny log on as a batch job&quot;.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;crond&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_batch\n= +my_pam_service, -crond</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nCron service name may differ depending on Linux distribution\nused.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ncrond</font>\n\n\n<font color=\"#000000\">ad_gpo_map_service\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nServiceLogonRight and DenyServiceLogonRight policy settings.\nOnly those GPOs are evaluated for which the user has Read\nand Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny service logon setting for the user or one\nof its groups, the user is denied service logon access. If\nnone of the evaluated GPOs has a service logon right\ndefined, the user is granted logon access. If at least one\nevaluated GPO contains service logon right settings, the\nuser is granted logon access only, if it or at least one of\nits groups is part of the policy settings.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on as a service&quot; and &quot;Deny\nlog on as a service&quot;.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add a PAM service name to the default set by\nusing &ldquo;+service_name&rdquo;. Since the default set is\nempty, it is not possible to remove a PAM service name from\nthe default set. For example, in order to add a custom pam\nservice name (e.g. &ldquo;my_pam_service&rdquo;), you would\nuse the following configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_service\n= +my_pam_service</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font>\n\n\n<font color=\"#000000\">ad_gpo_map_permit\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access is always granted, regardless of any GPO\nLogon Rights.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for unconditionally\npermitted access (e.g. &ldquo;sudo&rdquo;) with a custom pam\nservice name (e.g. &ldquo;my_pam_service&rdquo;), you would\nuse the following configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_permit\n= +my_pam_service, -sudo</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\npolkit-1</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsudo</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsudo-i</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsystemd-user</font>\n\n\n<font color=\"#000000\">ad_gpo_map_deny\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access is always denied, regardless of any GPO\nLogon Rights.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add a PAM service name to the default set by\nusing &ldquo;+service_name&rdquo;. Since the default set is\nempty, it is not possible to remove a PAM service name from\nthe default set. For example, in order to add a custom pam\nservice name (e.g. &ldquo;my_pam_service&rdquo;), you would\nuse the following configuration:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_deny\n= +my_pam_service</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font>\n\n\n<font color=\"#000000\">ad_gpo_default_right\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption defines how access control is evaluated for PAM\nservice names that are not explicitly listed in one of the\nad_gpo_map_* options. This option can be set in two\ndifferent manners. First, this option can be set to use a\ndefault logon right. For example, if this option is set to\n'interactive', it means that unmapped PAM service names will\nbe processed based on the InteractiveLogonRight and\nDenyInteractiveLogonRight policy settings. Alternatively,\nthis option can be set to either always permit or always\ndeny access for unmapped PAM service names.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Supported\nvalues for this option include:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ninteractive</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nremote_interactive</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nnetwork</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nbatch</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nservice</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\npermit</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ndeny</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ndeny</font>\n\n\n<font color=\"#000000\">ad_maximum_machine_account_password_age\n(integer)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">SSSD will\ncheck once a day if the machine account password is older\nthan the given age in days and try to renew it. A value of 0\nwill disable the renewal attempt.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n30 days</font>\n\n\n<font color=\"#000000\">ad_machine_account_password_renewal_opts\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption should only be used to test the machine account\nrenewal task. The option expects 2 integers separated by a\ncolon (':'). The first integer defines the interval in\nseconds how often the task is run. The second specifies the\ninitial timeout in seconds before the task is run for the\nfirst time after startup.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n86400:750 (24h and 15m)</font>\n\n\n<font color=\"#000000\">ad_update_samba_machine_account_password\n(boolean)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If\nenabled, when SSSD renews the machine account password, it\nwill also be updated in Samba's database. This prevents\nSamba's copy of the machine account password from getting\nout of date when it is set up to use AD for\nauthentication.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nfalse</font>\n\n\n<font color=\"#000000\">ad_use_ldaps\n(bool)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">By\ndefault SSSD uses the plain LDAP port 389 and the Global\nCatalog port 3628. If this option is set to True SSSD will\nuse the LDAPS port 636 and Global Catalog port 3629 with\nLDAPS protection. Since AD does not allow to have multiple\nencryption layers on a single connection and we still want\nto use SASL/GSSAPI or SASL/GSS-SPNEGO for authentication the\nSASL security property maxssf is set to 0 (zero) for those\nconnections.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font>\n\n\n<font color=\"#000000\">ad_allow_remote_domain_local_groups\n(boolean)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If this\noption is set to &ldquo;true&rdquo; SSSD will not filter out\nDomain Local groups from remote domains in the AD forest. By\ndefault they are filtered out e.g. when following a nested\ngroup hierarchy in remote domains because they are not valid\nin the local domain. To be compatible with other solutions\nwhich make AD users and groups available on Linux client\nthis option was added.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that setting this option to &ldquo;true&rdquo; will be\nagainst the intention of Domain Local group in Active\nDirectory and <i>SHOULD ONLY BE USED TO FACILITATE MIGRATION\nFROM OTHER SOLUTIONS</i>. Although the group exists and user\ncan be member of the group the intention is that the group\nshould be only used in the domain it is defined and in no\nothers. Since there is only one type of POSIX groups the\nonly way to achieve this on the Linux side is to ignore\nthose groups. This is also done by Active Directory as can\nbe seen in the PAC of the Kerberos ticket for a local\nservice or in tokenGroups requests where remote Domain Local\ngroups are missing as well.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Given\nthe comments above, if this option is set to\n&ldquo;true&rdquo; the tokenGroups request must be disabled\nby setting &ldquo;ldap_use_tokengroups&rdquo; to\n&ldquo;false&rdquo; to get consistent group-memberships of a\nusers. Additionally the Global Catalog lookup should be\nskipped as well by setting &ldquo;ad_enable_gc&rdquo; to\n&ldquo;false&rdquo;. Finally it might be necessary to modify\n&ldquo;ldap_group_nesting_level&rdquo; if the remote Domain\nLocal groups can only be found with a deeper nesting\nlevel.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font>\n\n\n<font color=\"#000000\">dyndns_update\n(boolean)</font>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Optional.\nThis option tells SSSD to automatically update the Active\nDirectory DNS server with the IP address of this client. The\nupdate is secured using GSS-TSIG. As a consequence, the\nActive Directory administrator only needs to allow secure\nupdates for the DNS zone. The IP address of the AD LDAP\nconnection is used for the updates, if it is not otherwise\nspecified by using the &ldquo;dyndns_iface&rdquo;\noption.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nOn older systems (such as RHEL 5), for this behavior to work\nreliably, the default Kerberos realm must be set properly in\n/etc/krb5.conf</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ntrue</font>\n\n\n<font color=\"#000000\">dyndns_ttl\n(integer)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The TTL\nto apply to the client DNS record when updating it. If\ndyndns_update is false this has no effect. This will\noverride the TTL serverside if set by an\nadministrator.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n3600 (seconds)</font>\n\n\n<font color=\"#000000\">dyndns_iface\n(string)</font>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Optional.\nApplicable only when dyndns_update is true. Choose the\ninterface or a list of interfaces whose IP addresses should\nbe used for dynamic DNS updates. Special value\n&ldquo;*&rdquo; implies that IPs from all interfaces should\nbe used.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nUse the IP addresses of the interface which is used for AD\nLDAP connection</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Example:\ndyndns_iface = em1, vnet1, vnet2</font>\n\n\n<font color=\"#000000\">dyndns_refresh_interval\n(integer)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">How often\nshould the back end perform periodic DNS update in addition\nto the automatic update performed when the back end goes\nonline. This option is optional and applicable only when\ndyndns_update is true. Note that the lowest possible value\nis 60 seconds in-case if value is provided less than 60,\nparameter will assume lowest value only.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n86400 (24 hours)</font>\n\n\n<font color=\"#000000\">dyndns_update_ptr\n(bool)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe PTR record should also be explicitly updated when\nupdating the client's DNS records. Applicable only when\ndyndns_update is true.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nTrue</font>\n\n\n<font color=\"#000000\">dyndns_force_tcp\n(bool)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe nsupdate utility should default to using TCP for\ncommunicating with the DNS server.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse (let nsupdate choose the protocol)</font>\n\n\n<font color=\"#000000\">dyndns_auth\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe nsupdate utility should use GSS-TSIG authentication for\nsecure updates with the DNS server, insecure updates can be\nsent by setting this option to 'none'.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nGSS-TSIG</font>\n\n\n<font color=\"#000000\">dyndns_auth_ptr\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe nsupdate utility should use GSS-TSIG authentication for\nsecure PTR updates with the DNS server, insecure updates can\nbe sent by setting this option to 'none'.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nSame as dyndns_auth</font>\n\n\n<font color=\"#000000\">dyndns_server\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The DNS\nserver to use when performing a DNS update. In most setups,\nit's recommended to leave this option unset.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Setting\nthis option makes sense for environments where the DNS\nserver is different from the identity server.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that this option will be only used in fallback attempt\nwhen previous attempt using autodetected settings\nfailed.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNone (let nsupdate choose the server)</font>\n\n\n<font color=\"#000000\">dyndns_update_per_family\n(boolean)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">DNS\nupdate is by default performed in two steps - IPv4 update\nand then IPv6 update. In some cases it might be desirable to\nperform IPv4 and IPv6 update in single step.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ntrue</font>\n\n\n<font color=\"#000000\">override_homedir\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Override\nthe user's home directory. You can either provide an\nabsolute value or a template. In the template, the following\nsequences are substituted:</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%u</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">login\nname</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%U</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">UID\nnumber</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%d</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">domain\nname</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%f</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">fully\nqualified user name (user@domain)</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%l</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">The first\nletter of the login name.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%P</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">UPN -\nUser Principal Name (name@REALM)</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%o</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">The\noriginal home directory retrieved from the identity\nprovider.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%H</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">The value\nof configure option <i>homedir_substring</i>.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%%</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">a literal\n'%'</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">This\noption can also be set per-domain.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">example:</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">override_homedir\n= /home/%u</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNot set (SSSD will use the value retrieved from\nLDAP)</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote, the home directory from a specific override for the\nuser, either locally (see <b>sss_override</b>(8)) or\ncentrally managed IPA id-overrides, has a higher precedence\nand will be used instead of the value given by\noverride_homedir.</font>\n\n\n<font color=\"#000000\">homedir_substring\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The value\nof this option will be used in the expansion of the\n<i>override_homedir</i> option if the template contains the\nformat string <i>%H</i>. An LDAP directory entry can\ndirectly contain this template so that this option can be\nused to expand the home directory path for each client\nmachine (or operating system). It can be set per-domain or\nglobally in the [nss] section. A value specified in a domain\nsection will override one set in the [nss]\nsection.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n/home</font>\n\n\n<font color=\"#000000\">krb5_confd_path\n(string)</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Absolute\npath of a directory where SSSD should place Kerberos\nconfiguration snippets.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">To\ndisable the creation of the configuration snippets set the\nparameter to 'none'.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set (krb5.include.d subdirectory of SSSD's pubconf\ndirectory)</font>\n\n<h2>MODIFIED DEFAULT OPTIONS\n<a name=\"MODIFIED DEFAULT OPTIONS\"></a>\n</h2>\n\n\n\n<font color=\"#000000\">Certain\noption defaults do not match their respective backend\nprovider defaults, these option names and AD\nprovider-specific defaults are listed below:</font>\n\n\n<font color=\"#000000\"><b>KRB5\nProvider</b></font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">&bull;\nkrb5_validate = true</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nkrb5_use_enterprise_principal = true</font>\n\n\n<font color=\"#000000\"><b>LDAP\nProvider</b></font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">&bull;\nldap_schema = ad</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_force_upper_case_realm = true</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_id_mapping = true</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_sasl_mech = GSS-SPNEGO</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_referrals = false</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_account_expire_policy = ad</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_use_tokengroups = true</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_sasl_authid = sAMAccountName@REALM (typically\nSHORTNAME$@REALM)</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nAD provider looks for a different principal than the LDAP\nprovider by default, because in an Active Directory\nenvironment the principals are divided into two groups -\nUser Principals and Service Principals. Only User Principal\ncan be used to obtain a TGT and by default, computer\nobject's principal is constructed from its sAMAccountName\nand the AD realm. The well-known host/hostname@REALM\nprincipal is a Service Principal and thus cannot be used to\nget a TGT with.</font>\n\n\n<font color=\"#000000\"><b>NSS\nconfiguration</b></font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">&bull;\nfallback_homedir = /home/%d/%u</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nAD provider automatically sets &quot;fallback_homedir =\n/home/%d/%u&quot; to provide personal home directories for\nusers without the homeDirectory attribute. If your AD Domain\nis properly populated with Posix attributes, and you want to\navoid this fallback behavior, you can explicitly set\n&quot;fallback_homedir = %o&quot;.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note\nthat the system typically expects a home directory in\n/home/%u folder. If you decide to use a different directory\nstructure, some other parts of your system may need\nadjustments.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">For\nexample automated creation of home directories in\ncombination with selinux requires selinux adjustment,\notherwise the home directory will be created with wrong\nselinux context.</font>\n\n<h2>FAILOVER\n<a name=\"FAILOVER\"></a>\n</h2>\n\n\n\n<font color=\"#000000\">The\nfailover feature allows back ends to automatically switch to\na different server if the current server fails.</font>\n\n\n<font color=\"#000000\"><b>Failover\nSyntax</b> <br>\nThe list of servers is given as a comma-separated list; any\nnumber of spaces is allowed around the comma. The servers\nare listed in order of preference. The list can contain any\nnumber of servers.</font>\n\n\n<font color=\"#000000\">For\neach failover-enabled config option, two variants exist:\n<i>primary</i> and <i>backup</i>. The idea is that servers\nin the primary list are preferred and backup servers are\nonly searched if no primary servers can be reached. If a\nbackup server is selected, a timeout of 31 seconds is set.\nAfter this timeout SSSD will periodically try to reconnect\nto one of the primary servers. If it succeeds, it will\nreplace the current active (backup) server.</font>\n\n\n<font color=\"#000000\"><b>The\nFailover Mechanism</b> <br>\nThe failover mechanism distinguishes between a machine and a\nservice. The back end first tries to resolve the hostname of\na given machine; if this resolution attempt fails, the\nmachine is considered offline. No further attempts are made\nto connect to this machine for any other service. If the\nresolution attempt succeeds, the back end tries to connect\nto a service on this machine. If the service connection\nattempt fails, then only this particular service is\nconsidered offline and the back end automatically switches\nover to the next service. The machine is still considered\nonline and might still be tried for another\nservice.</font>\n\n\n<font color=\"#000000\">Further\nconnection attempts are made to machines or services marked\nas offline after a specified period of time; this is\ncurrently hard coded to 30 seconds.</font>\n\n\n<font color=\"#000000\">If\nthere are no more machines to try, the back end as a whole\nswitches to offline mode, and then attempts to reconnect\nevery 30 seconds.</font>\n\n\n<font color=\"#000000\"><b>Failover\ntime outs and tuning</b> <br>\nResolving a server to connect to can be as simple as running\na single DNS query or can involve several steps, such as\nfinding the correct site or trying out multiple host names\nin case some of the configured servers are not reachable.\nThe more complex scenarios can take some time and SSSD needs\nto balance between providing enough time to finish the\nresolution process but on the other hand, not trying for too\nlong before falling back to offline mode. If the SSSD debug\nlogs show that the server resolution is timing out before a\nlive server is contacted, you can consider changing the time\nouts.</font>\n\n\n<font color=\"#000000\">This\nsection lists the available tunables. Please refer to their\ndescription in the <b>sssd.conf</b>(5), manual\npage.</font>\n\n\n<font color=\"#000000\">dns_resolver_server_timeout</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Time in\nmilliseconds that sets how long would SSSD talk to a single\nDNS server before trying next one.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n1000</font>\n\n\n<font color=\"#000000\">dns_resolver_op_timeout</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Time in\nseconds to tell how long would SSSD try to resolve single\nDNS query (e.g. resolution of a hostname or an SRV record)\nbefore trying the next hostname or discovery\ndomain.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n3</font>\n\n\n<font color=\"#000000\">dns_resolver_timeout</font>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">How long\nwould SSSD try to resolve a failover service. This service\nresolution internally might include several steps, such as\nresolving DNS SRV queries or locating the site.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n6</font>\n\n\n<font color=\"#000000\">For\nLDAP-based providers, the resolve operation is performed as\npart of an LDAP connection operation. Therefore, also the\n&ldquo;ldap_opt_timeout&rdquo; timeout should be set to a\nlarger value than &ldquo;dns_resolver_timeout&rdquo; which\nin turn should be set to a larger value than\n&ldquo;dns_resolver_op_timeout&rdquo; which should be larger\nthan &ldquo;dns_resolver_server_timeout&rdquo;.</font>\n\n<h2>SERVICE DISCOVERY\n<a name=\"SERVICE DISCOVERY\"></a>\n</h2>\n\n\n\n<font color=\"#000000\">The\nservice discovery feature allows back ends to automatically\nfind the appropriate servers to connect to using a special\nDNS query. This feature is not supported for backup\nservers.</font>\n\n\n<font color=\"#000000\"><b>Configuration</b>\n<br>\nIf no servers are specified, the back end automatically uses\nservice discovery to try to find a server. Optionally, the\nuser may choose to use both fixed server addresses and\nservice discovery by inserting a special keyword,\n&ldquo;_srv_&rdquo;, in the list of servers. The order of\npreference is maintained. This feature is useful if, for\nexample, the user prefers to use service discovery whenever\npossible, and fall back to a specific server when no servers\ncan be discovered using DNS.</font>\n\n\n<font color=\"#000000\"><b>The\ndomain name</b> <br>\nPlease refer to the &ldquo;dns_discovery_domain&rdquo;\nparameter in the <b>sssd.conf</b>(5) manual page for more\ndetails.</font>\n\n\n<font color=\"#000000\"><b>The\nprotocol</b> <br>\nThe queries usually specify _tcp as the protocol. Exceptions\nare documented in respective option description.</font>\n\n\n<font color=\"#000000\"><b>See\nAlso</b> <br>\nFor more information on the service discovery mechanism,\nrefer to RFC 2782.</font>\n\n<h2>ID MAPPING\n<a name=\"ID MAPPING\"></a>\n</h2>\n\n\n\n<font color=\"#000000\">The\nID-mapping feature allows SSSD to act as a client of Active\nDirectory without requiring administrators to extend user\nattributes to support POSIX attributes for user and group\nidentifiers.</font>\n\n\n<font color=\"#000000\">NOTE:\nWhen ID-mapping is enabled, the uidNumber and gidNumber\nattributes are ignored. This is to avoid the possibility of\nconflicts between automatically-assigned and\nmanually-assigned values. If you need to use\nmanually-assigned values, ALL values must be\nmanually-assigned.</font>\n\n\n<font color=\"#000000\">Please\nnote that changing the ID mapping related configuration\noptions will cause user and group IDs to change. At the\nmoment, SSSD does not support changing IDs, so the SSSD\ndatabase must be removed. Because cached passwords are also\nstored in the database, removing the database should only be\nperformed while the authentication servers are reachable,\notherwise users might get locked out. In order to cache the\npassword, an authentication must be performed. It is not\nsufficient to use <b>sss_cache</b>(8) to remove the\ndatabase, rather the process consists of:</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nMaking sure the remote servers are reachable</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nStopping the SSSD service</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nRemoving the database</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nStarting the SSSD service</font>\n\n\n<font color=\"#000000\">Moreover,\nas the change of IDs might necessitate the adjustment of\nother system properties such as file and directory\nownership, it's advisable to plan ahead and test the ID\nmapping configuration thoroughly.</font>\n\n\n<font color=\"#000000\"><b>Mapping\nAlgorithm</b> <br>\nActive Directory provides an objectSID for every user and\ngroup object in the directory. This objectSID can be broken\nup into components that represent the Active Directory\ndomain identity and the relative identifier (RID) of the\nuser or group object.</font>\n\n\n<font color=\"#000000\">The\nSSSD ID-mapping algorithm takes a range of available UIDs\nand divides it into equally-sized component sections -\ncalled &quot;slices&quot;-. Each slice represents the space\navailable to an Active Directory domain.</font>\n\n\n<font color=\"#000000\">When\na user or group entry for a particular domain is encountered\nfor the first time, the SSSD allocates one of the available\nslices for that domain. In order to make this\nslice-assignment repeatable on different client machines, we\nselect the slice based on the following\nalgorithm:</font>\n\n\n<font color=\"#000000\">The\nSID string is passed through the murmurhash3 algorithm to\nconvert it to a 32-bit hashed value. We then take the\nmodulus of this value with the total number of available\nslices to pick the slice.</font>\n\n\n<font color=\"#000000\">NOTE:\nIt is possible to encounter collisions in the hash and\nsubsequent modulus. In these situations, we will select the\nnext available slice, but it may not be possible to\nreproduce the same exact set of slices on other machines\n(since the order that they are encountered will determine\ntheir slice). In this situation, it is recommended to either\nswitch to using explicit POSIX attributes in Active\nDirectory (disabling ID-mapping) or configure a default\ndomain to guarantee that at least one is always consistent.\nSee &ldquo;Configuration&rdquo; for details.</font>\n\n\n<font color=\"#000000\"><b>Configuration</b>\n<br>\nMinimum configuration (in the\n&ldquo;[domain/DOMAINNAME]&rdquo; section):</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_id_mapping\n= True <br>\nldap_schema = ad</font>\n\n\n<font color=\"#000000\">The\ndefault configuration results in configuring 10,000 slices,\neach capable of holding up to 200,000 IDs, starting from\n200,000 and going up to 2,000,200,000. This should be\nsufficient for most deployments.</font>\n\n\n<font color=\"#000000\"><b><big>Advanced\nConfiguration</big></b></font>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">ldap_idmap_range_min\n(integer)</font>\n\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specifies\nthe lower (inclusive) bound of the range of POSIX IDs to use\nfor mapping Active Directory user and group SIDs. It is the\nfirst POSIX ID which can be used for the mapping.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThis option is different from &ldquo;min_id&rdquo; in that\n&ldquo;min_id&rdquo; acts to filter the output of requests\nto this domain, whereas this option controls the range of ID\nassignment. This is a subtle distinction, but the good\ngeneral advice would be to have &ldquo;min_id&rdquo; be\nless-than or equal to\n&ldquo;ldap_idmap_range_min&rdquo;</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n200000</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_range_max\n(integer)</font>\n\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specifies\nthe upper (exclusive) bound of the range of POSIX IDs to use\nfor mapping Active Directory user and group SIDs. It is the\nfirst POSIX ID which cannot be used for the mapping anymore,\ni.e. one larger than the last one which can be used for the\nmapping.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThis option is different from &ldquo;max_id&rdquo; in that\n&ldquo;max_id&rdquo; acts to filter the output of requests\nto this domain, whereas this option controls the range of ID\nassignment. This is a subtle distinction, but the good\ngeneral advice would be to have &ldquo;max_id&rdquo; be\ngreater-than or equal to\n&ldquo;ldap_idmap_range_max&rdquo;</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n2000200000</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_range_size\n(integer)</font>\n\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specifies\nthe number of IDs available for each slice. If the range\nsize does not divide evenly into the min and max values, it\nwill create as many complete slices as it can.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThe value of this option must be at least as large as the\nhighest user RID planned for use on the Active Directory\nserver. User lookups and login will fail for any user whose\nRID is greater than this value.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">For\nexample, if your most recently-added Active Directory user\nhas\nobjectSid=S-1-5-21-2153326666-2176343378-3404031434-1107,\n&ldquo;ldap_idmap_range_size&rdquo; must be at least 1108 as\nrange size is equal to maximal SID minus minimal SID plus\none (e.g. 1108 = 1107 - 0 + 1).</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">It\nis important to plan ahead for future expansion, as changing\nthis value will result in changing all of the ID mappings on\nthe system, leading to users with different local IDs than\nthey previously had.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n200000</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_default_domain_sid\n(string)</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specify\nthe domain SID of the default domain. This will guarantee\nthat this domain will always be assigned to slice zero in\nthe ID map, bypassing the murmurhash algorithm described\nabove.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_default_domain\n(string)</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specify\nthe name of the default domain.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_autorid_compat\n(boolean)</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Changes\nthe behavior of the ID-mapping algorithm to behave more\nsimilarly to winbind's &ldquo;idmap_autorid&rdquo;\nalgorithm.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">When\nthis option is configured, domains will be allocated\nstarting with slice zero and increasing monatomically with\neach additional domain.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThis algorithm is non-deterministic (it depends on the order\nthat users and groups are requested). If this mode is\nrequired for compatibility with machines running winbind, it\nis recommended to also use the\n&ldquo;ldap_idmap_default_domain_sid&rdquo; option to\nguarantee that at least one domain is consistently allocated\nto slice zero.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_helper_table_size\n(integer)</font>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Maximal\nnumber of secondary slices that is tried when performing\nmapping from UNIX id to SID.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Note:\nAdditional secondary slices might be generated when SID is\nbeing mapped to UNIX id and RID part of SID is out of range\nfor secondary slices generated so far. If value of\nldap_idmap_helper_table_size is equal to 0 then no\nadditional secondary slices are generated.</font>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n10</font>\n\n\n<font color=\"#000000\"><b>Well-Known\nSIDs</b> <br>\nSSSD supports to look up the names of Well-Known SIDs, i.e.\nSIDs with a special hardcoded meaning. Since the generic\nusers and groups related to those Well-Known SIDs have no\nequivalent in a Linux/UNIX environment no POSIX IDs are\navailable for those objects.</font>\n\n\n<font color=\"#000000\">The\nSID name space is organized in authorities which can be seen\nas different domains. The authorities for the Well-Known\nSIDs are</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nNull Authority</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nWorld Authority</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nLocal Authority</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nCreator Authority</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nNT Authority</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nBuilt-in</font>\n\n\n<font color=\"#000000\">The\ncapitalized version of these names are used as domain names\nwhen returning the fully qualified name of a Well-Known\nSID.</font>\n\n\n<font color=\"#000000\">Since\nsome utilities allow to modify SID based access control\ninformation with the help of a name instead of using the SID\ndirectly SSSD supports to look up the SID by the name as\nwell. To avoid collisions only the fully qualified names can\nbe used to look up Well-Known SIDs. As a result the domain\nnames &ldquo;NULL AUTHORITY&rdquo;, &ldquo;WORLD\nAUTHORITY&rdquo;, &ldquo; LOCAL AUTHORITY&rdquo;,\n&ldquo;CREATOR AUTHORITY&rdquo;, &ldquo;NT AUTHORITY&rdquo;\nand &ldquo;BUILTIN&rdquo; should not be used as domain names\nin sssd.conf.</font>\n\n<h2>EXAMPLE\n<a name=\"EXAMPLE\"></a>\n</h2>\n\n\n\n<font color=\"#000000\">The\nfollowing example assumes that SSSD is correctly configured\nand example.com is one of the domains in the <i>[sssd]</i>\nsection. This example shows only the AD provider-specific\noptions.</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">[domain/EXAMPLE]\n<br>\nid_provider = ad <br>\nauth_provider = ad <br>\naccess_provider = ad <br>\nchpass_provider = ad</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ad_server\n= dc1.example.com <br>\nad_hostname = client.example.com <br>\nad_domain = example.com</font>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n\n<font color=\"#000000\">The\nAD access control provider checks if the account is expired.\nIt has the same effect as the following configuration of the\nLDAP provider:</font>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">access_provider\n= ldap <br>\nldap_access_order = expire <br>\nldap_account_expire_policy = ad</font>\n\n\n<font color=\"#000000\">However,\nunless the &ldquo;ad&rdquo; access control provider is\nexplicitly configured, the default access provider is\n&ldquo;permit&rdquo;. Please note that if you configure an\naccess provider other than &ldquo;ad&rdquo;, you need to set\nall the connection parameters (such as LDAP URIs and\nencryption details) manually.</font>\n\n\n<font color=\"#000000\">When\nthe autofs provider is set to &ldquo;ad&rdquo;, the RFC2307\nschema attribute mapping (nisMap, nisObject, ...) is used,\nbecause these attributes are included in the default Active\nDirectory schema.</font>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<font color=\"#000000\"><b>sssd</b>(8),\n<b>sssd.conf</b>(5), <a href=\"https://man.page/5/sssd-ldap\">sssd-ldap(5)</a>,\n<a href=\"https://man.page/5/sssd-krb5\">sssd-krb5(5)</a>, <a href=\"https://man.page/5/sssd-simple\">sssd-simple(5)</a>,\n<a href=\"https://man.page/5/sssd-ipa\">sssd-ipa(5)</a>, <a href=\"https://man.page/5/sssd-ad\">sssd-ad(5)</a>, <a href=\"https://man.page/5/sssd-files\">sssd-files(5)</a>,\n<a href=\"https://man.page/5/sssd-sudo\">sssd-sudo(5)</a>, <a href=\"https://man.page/5/sssd-session-recording\">sssd-session-recording(5)</a>,\n<b>sss_cache</b>(8), <b>sss_debuglevel</b>(8),\n<b>sss_obfuscate</b>(8), <b>sss_seed</b>(8),\n<b>sssd_krb5_locator_plugin</b>(8),\n<b>sss_ssh_authorizedkeys</b>(8),\n<b>sss_ssh_knownhostsproxy</b>(8), <a href=\"https://man.page/5/sssd-ifp\">sssd-ifp(5)</a>,\n<b>pam_sss</b>(8). <a href=\"https://man.page/5/sss_rpcidmapd\">sss_rpcidmapd(5)</a>\n<a href=\"https://man.page/5/sssd-systemtap\">sssd-systemtap(5)</a></font>\n\n<h2>AUTHORS\n<a name=\"AUTHORS\"></a>\n</h2>\n\n\n\n<font color=\"#000000\"><b>The\nSSSD upstream - https://github.com/SSSD/sssd/</b></font>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font> </td>\n<td width=\"2%\"></td>\n<td width=\"51%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">[MS-ADTS]\nsection LDAP extensions</font></td>\n<td width=\"32%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://msdn.microsoft.com/en-us/library/cc223367.aspx</font>","body":"\n\n<h1 align=\"center\">SSSD-AD</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">sssd-ad - SSSD\nActive Directory provider</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This manual\npage describes the configuration of the AD provider for\n<b>sssd</b>(8). For a detailed syntax reference, refer to\nthe &ldquo;FILE FORMAT&rdquo; section of the\n<b>sssd.conf</b>(5) manual page.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The AD provider\nis a back end used to connect to an Active Directory server.\nThis provider requires that the machine be joined to the AD\ndomain and a keytab is available. Back end communication\noccurs over a GSSAPI-encrypted channel, SSL/TLS options\nshould not be used with the AD provider and will be\nsuperseded by Kerberos usage.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The AD provider\nsupports connecting to Active Directory 2008 R2 or later.\nEarlier versions may work, but are unsupported.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The AD provider\ncan be used to get user information and authenticate users\nfrom trusted domains. Currently only trusted domains in the\nsame forest are recognized. In addition servers from trusted\ndomains are always auto-discovered.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The AD provider\nenables SSSD to use the <a href=\"https://man.page/5/sssd-ldap\">sssd-ldap(5)</a> identity\nprovider and the <a href=\"https://man.page/5/sssd-krb5\">sssd-krb5(5)</a> authentication provider\nwith optimizations for Active Directory environments. The AD\nprovider accepts the same options used by the sssd-ldap and\nsssd-krb5 providers with some exceptions. However, it is\nneither necessary nor recommended to set these options.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The AD provider\nprimarily copies the traditional ldap and krb5 provider\ndefault options with some exceptions, the differences are\nlisted in the &ldquo;MODIFIED DEFAULT OPTIONS&rdquo;\nsection.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The AD provider\ncan also be used as an access, chpass, sudo and autofs\nprovider. No configuration of the access provider is\nrequired on the client side.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If\n&ldquo;auth_provider=ad&rdquo; or\n&ldquo;access_provider=ad&rdquo; is configured in sssd.conf\nthen the id_provider must also be set to\n&ldquo;ad&rdquo;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">By default, the\nAD provider will map UID and GID values from the objectSID\nparameter in Active Directory. For details on this, see the\n&ldquo;ID MAPPING&rdquo; section below. If you want to\ndisable ID mapping and instead rely on POSIX attributes\ndefined in Active Directory, you should set</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">ldap_id_mapping\n= False</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If POSIX\nattributes should be used, it is recommended for performance\nreasons that the attributes are also replicated to the\nGlobal Catalog. If POSIX attributes are replicated, SSSD\nwill attempt to locate the domain of a requested numerical\nID with the help of the Global Catalog and only search that\ndomain. In contrast, if POSIX attributes are not replicated\nto the Global Catalog, SSSD must search all the domains in\nthe forest sequentially. Please note that the\n&ldquo;cache_first&rdquo; option might be also helpful in\nspeeding up domainless searches. Note that if only a subset\nof POSIX attributes is present in the Global Catalog, the\nnon-replicated attributes are currently not read from the\nLDAP port.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Users, groups\nand other entities served by SSSD are always treated as\ncase-insensitive in the AD provider for compatibility with\nActive Directory's LDAP implementation.</p>\n\n<h2>CONFIGURATION OPTIONS\n<a name=\"CONFIGURATION OPTIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Refer to the\nsection &ldquo;DOMAIN SECTIONS&rdquo; of the\n<b>sssd.conf</b>(5) manual page for details on the\nconfiguration of an SSSD domain.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">ad_domain\n(string)</p>\n\n<p style=\"margin-left:17%;\">Specifies the name of the\nActive Directory domain. This is optional. If not provided,\nthe configuration domain name is used.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">For proper\noperation, this option should be specified as the lower-case\nversion of the long version of the Active Directory\ndomain.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The short\ndomain name (also known as the NetBIOS or the flat name) is\nautodetected by the SSSD.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ad_enabled_domains\n(string)</p>\n\n<p style=\"margin-left:17%;\">A comma-separated list of\nenabled Active Directory domains. If provided, SSSD will\nignore any domains not listed in this option. If left unset,\nall domains from the AD forest will be available.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">For proper\noperation, this option must be specified in all lower-case\nand as the fully qualified domain name of the Active\nDirectory domain. For example:</p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\">ad_enabled_domains\n= sales.example.com, eng.example.com</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The short\ndomain name (also known as the NetBIOS or the flat name)\nwill be autodetected by SSSD.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Default: Not\nset</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">ad_server,\nad_backup_server (string)</p>\n\n<p style=\"margin-left:17%;\">The comma-separated list of\nhostnames of the AD servers to which SSSD should connect in\norder of preference. For more information on failover and\nserver redundancy, see the &ldquo;FAILOVER&rdquo;\nsection.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">This is\noptional if autodiscovery is enabled. For more information\non service discovery, refer to the &ldquo;SERVICE\nDISCOVERY&rdquo; section.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Note: Trusted\ndomains will always auto-discover servers even if the\nprimary server is explicitly defined in the ad_server\noption.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">ad_hostname\n(string)</p>\n\n<p style=\"margin-left:17%;\">Optional. On machines where the\nhostname(5) does not reflect the fully qualified name, sssd\nwill try to expand the short name. If it is not possible or\nthe short name should be really used instead, set this\nparameter explicitly.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">This field is\nused to determine the host principal in use in the keytab\nand to perform dynamic DNS updates. It must match the\nhostname for which the keytab was issued.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ad_enable_dns_sites\n(boolean)</p>\n\n<p style=\"margin-left:17%;\">Enables DNS sites - location\nbased service discovery.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">If true and\nservice discovery (see Service Discovery paragraph at the\nbottom of the man page) is enabled, the SSSD will first\nattempt to discover the Active Directory server to connect\nto using the Active Directory Site Discovery and fall back\nto the DNS SRV records if no AD site is found. The DNS SRV\nconfiguration, including the discovery domain, is used\nduring site discovery as well.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Default:\ntrue</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">ad_access_filter\n(string)</p>\n\n<p style=\"margin-left:17%;\">This option specifies LDAP\naccess control filter that the user must match in order to\nbe allowed access. Please note that the\n&ldquo;access_provider&rdquo; option must be explicitly set\nto &ldquo;ad&rdquo; in order for this option to have an\neffect.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">The option also\nsupports specifying different filters per domain or forest.\nThis extended filter would consist of:\n&ldquo;KEYWORD:NAME:FILTER&rdquo;. The keyword can be either\n&ldquo;DOM&rdquo;, &ldquo;FOREST&rdquo; or missing.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">If the keyword\nequals to &ldquo;DOM&rdquo; or is missing, then\n&ldquo;NAME&rdquo; specifies the domain or subdomain the\nfilter applies to. If the keyword equals to\n&ldquo;FOREST&rdquo;, then the filter equals to all domains\nfrom the forest specified by &ldquo;NAME&rdquo;.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Multiple\nfilters can be separated with the &ldquo;?&rdquo; character,\nsimilarly to how search bases work.</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">Nested group\nmembership must be searched for using a special OID\n&ldquo;:1.2.840.113556.1.4.1941:&rdquo; in addition to the\nfull DOM:domain.example.org: syntax to ensure the parser\ndoes not attempt to interpret the colon characters\nassociated with the OID. If you do not use this OID then\nnested group membership will not be resolved. See usage\nexample below and refer here for further information about\nthe OID: <b><font color=\"#0000FF\">[MS-ADTS] section LDAP\nextensions</font></b>\n<small><font color=\"#000000\">[1]</font></small></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nmost specific match is always used. For example, if the\noption specified filter for a domain the user is a member of\nand a global filter, the per-domain filter would be applied.\nIf there are more matches with the same specification, the\nfirst one is used.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Examples:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter on domain called dom1 only: <br>\n\ndom1:(memberOf=cn=admins,ou=groups,dc=dom1,dc=com)</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter on domain called dom2 only: <br>\n\nDOM:dom2:(memberOf=cn=admins,ou=groups,dc=dom2,dc=com)</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter on forest called EXAMPLE.COM only: <br>\n\nFOREST:EXAMPLE.COM:(memberOf=cn=admins,ou=groups,dc=example,dc=com)</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">#\napply filter for a member of a nested group in dom1: <br>\n\nDOM:dom1:(memberOf:1.2.840.113556.1.4.1941:=cn=nestedgroup,ou=groups,dc=example,dc=com)</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNot set</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_site\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Specify\nAD site to which client should try to connect. If this\noption is not provided, the AD site will be\nauto-discovered.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNot set</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_enable_gc\n(boolean)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">By\ndefault, the SSSD connects to the Global Catalog first to\nretrieve users from trusted domains and uses the LDAP port\nto retrieve group memberships or as a fallback. Disabling\nthis option makes the SSSD only connect to the LDAP port of\nthe current AD server.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that disabling Global Catalog support does not disable\nretrieving users from trusted domains. The SSSD would\nconnect to the LDAP port of trusted domains instead.\nHowever, Global Catalog must be used in order to resolve\ncross-domain group memberships.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ntrue</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_access_control\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption specifies the operation mode for GPO-based access\ncontrol functionality: whether it operates in disabled mode,\nenforcing mode, or permissive mode. Please note that the\n&ldquo;access_provider&rdquo; option must be explicitly set\nto &ldquo;ad&rdquo; in order for this option to have an\neffect.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">GPO-based\naccess control functionality uses GPO policy settings to\ndetermine whether or not a particular user is allowed to\nlogon to the host. For more information on the supported\npolicy settings please refer to the &ldquo;ad_gpo_map&rdquo;\noptions.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that current version of SSSD does not support Active\nDirectory's built-in groups. Built-in groups (such as\nAdministrators with SID S-1-5-32-544) in GPO access control\nrules will be ignored by SSSD. See upstream issue tracker\nhttps://github.com/SSSD/sssd/issues/5063 .</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Before\nperforming access control SSSD applies group policy security\nfiltering on the GPOs. For every single user login, the\napplicability of the GPOs that are linked to the host is\nchecked. In order for a GPO to apply to a user, the user or\nat least one of the groups to which it belongs must have\nfollowing permissions on the GPO:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nRead: The user or one of its groups must have read access to\nthe properties of the GPO\n(RIGHT_DS_READ_PROPERTY)</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nApply Group Policy: The user or at least one of its groups\nmust be allowed to apply the GPO\n(RIGHT_DS_CONTROL_ACCESS).</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">By\ndefault, the Authenticated Users group is present on a GPO\nand this group has both Read and Apply Group Policy access\nrights. Since authentication of a user must have been\ncompleted successfully before GPO security filtering and\naccess control are started, the Authenticated Users group\npermissions on the GPO always apply also to the\nuser.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nIf the operation mode is set to enforcing, it is possible\nthat users that were previously allowed logon access will\nnow be denied logon access (as dictated by the GPO policy\nsettings). In order to facilitate a smooth transition for\nadministrators, a permissive mode is available that will not\nenforce the access control rules, but will evaluate them and\nwill output a syslog message if access would have been\ndenied. By examining the logs, administrators can then make\nthe necessary changes before setting the mode to enforcing.\nFor logging GPO-based access control debug level 'trace\nfunctions' is required (see <b>sssctl</b>(8) manual\npage).</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">There\nare three supported values for this option:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ndisabled: GPO-based access control rules are neither\nevaluated nor enforced.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nenforcing: GPO-based access control rules are evaluated and\nenforced.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\npermissive: GPO-based access control rules are evaluated,\nbut not enforced. Instead, a syslog message will be emitted\nindicating that the user would have been denied access if\nthis option's value were set to enforcing.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nenforcing</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_implicit_deny\n(boolean)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Normally\nwhen no applicable GPOs are found the users are allowed\naccess. When this option is set to True users will be\nallowed access only when explicitly allowed by a GPO rule.\nOtherwise users will be denied access. This can be used to\nharden security but be careful when using this option\nbecause it can deny access even to users in the built-in\nAdministrators group if no GPO rules apply to\nthem.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nfollowing 2 tables should illustrate when a user is allowed\nor rejected based on the allow and deny login rights defined\non the server-side and the setting of\nad_gpo_implicit_deny.</font></p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><font color=\"#000000\"><img src=\"grohtml-3470561.png\" alt=\"Image grohtml-3470561.png\"></font></p>\n\n\n<p align=\"center\" style=\"margin-top: 1em\"><font color=\"#000000\"><img src=\"grohtml-3470562.png\" alt=\"Image grohtml-3470562.png\"></font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_ignore_unreadable\n(boolean)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Normally\nwhen some group policy containers (AD object) of applicable\ngroup policy objects are not readable by SSSD then users are\ndenied access. This option allows to ignore group policy\ncontainers and with them associated policies if their\nattributes in group policy containers are not readable for\nSSSD.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_cache_timeout\n(integer)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The\namount of time between lookups of GPO policy files against\nthe AD server. This will reduce the latency and load on the\nAD server if there are many access-control requests made in\na short period.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n5 (seconds)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_interactive\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nInteractiveLogonRight and DenyInteractiveLogonRight policy\nsettings. Only those GPOs are evaluated for which the user\nhas Read and Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny interactive logon setting for the user or\none of its groups, the user is denied local access. If none\nof the evaluated GPOs has an interactive logon right\ndefined, the user is granted local access. If at least one\nevaluated GPO contains interactive logon right settings, the\nuser is granted local access only, if it or at least one of\nits groups is part of the policy settings.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on locally&quot; and &quot;Deny log\non locally&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;login&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_interactive\n= +my_pam_service, -login</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nlogin</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsu</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsu-l</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ngdm-fingerprint</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ngdm-password</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ngdm-smartcard</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nkdm</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nlightdm</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nlxdm</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsddm</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nunity</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nxdm</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_remote_interactive\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nRemoteInteractiveLogonRight and\nDenyRemoteInteractiveLogonRight policy settings. Only those\nGPOs are evaluated for which the user has Read and Apply\nGroup Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny remote logon setting for the user or one\nof its groups, the user is denied remote interactive access.\nIf none of the evaluated GPOs has a remote interactive logon\nright defined, the user is granted remote access. If at\nleast one evaluated GPO contains remote interactive logon\nright settings, the user is granted remote access only, if\nit or at least one of its groups is part of the policy\nsettings.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on through Remote Desktop\nServices&quot; and &quot;Deny log on through Remote Desktop\nServices&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;sshd&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_remote_interactive\n= +my_pam_service, -sshd</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsshd</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ncockpit</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_network\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nNetworkLogonRight and DenyNetworkLogonRight policy settings.\nOnly those GPOs are evaluated for which the user has Read\nand Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny network logon setting for the user or one\nof its groups, the user is denied network logon access. If\nnone of the evaluated GPOs has a network logon right\ndefined, the user is granted logon access. If at least one\nevaluated GPO contains network logon right settings, the\nuser is granted logon access only, if it or at least one of\nits groups is part of the policy settings.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Access this computer from the network&quot; and\n&quot;Deny access to this computer from the\nnetwork&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;ftp&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_network\n= +my_pam_service, -ftp</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nftp</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsamba</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_batch\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nBatchLogonRight and DenyBatchLogonRight policy settings.\nOnly those GPOs are evaluated for which the user has Read\nand Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny batch logon setting for the user or one of\nits groups, the user is denied batch logon access. If none\nof the evaluated GPOs has a batch logon right defined, the\nuser is granted logon access. If at least one evaluated GPO\ncontains batch logon right settings, the user is granted\nlogon access only, if it or at least one of its groups is\npart of the policy settings.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on as a batch job&quot; and\n&quot;Deny log on as a batch job&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for this logon right\n(e.g. &ldquo;crond&rdquo;) with a custom pam service name\n(e.g. &ldquo;my_pam_service&rdquo;), you would use the\nfollowing configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_batch\n= +my_pam_service, -crond</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nCron service name may differ depending on Linux distribution\nused.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ncrond</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_service\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access control is evaluated based on the\nServiceLogonRight and DenyServiceLogonRight policy settings.\nOnly those GPOs are evaluated for which the user has Read\nand Apply Group Policy permission (see option\n&ldquo;ad_gpo_access_control&rdquo;). If an evaluated GPO\ncontains the deny service logon setting for the user or one\nof its groups, the user is denied service logon access. If\nnone of the evaluated GPOs has a service logon right\ndefined, the user is granted logon access. If at least one\nevaluated GPO contains service logon right settings, the\nuser is granted logon access only, if it or at least one of\nits groups is part of the policy settings.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note:\nUsing the Group Policy Management Editor this value is\ncalled &quot;Allow log on as a service&quot; and &quot;Deny\nlog on as a service&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add a PAM service name to the default set by\nusing &ldquo;+service_name&rdquo;. Since the default set is\nempty, it is not possible to remove a PAM service name from\nthe default set. For example, in order to add a custom pam\nservice name (e.g. &ldquo;my_pam_service&rdquo;), you would\nuse the following configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_service\n= +my_pam_service</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_permit\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access is always granted, regardless of any GPO\nLogon Rights.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add another PAM service name to the default\nset by using &ldquo;+service_name&rdquo; or to explicitly\nremove a PAM service name from the default set by using\n&ldquo;-service_name&rdquo;. For example, in order to\nreplace a default PAM service name for unconditionally\npermitted access (e.g. &ldquo;sudo&rdquo;) with a custom pam\nservice name (e.g. &ldquo;my_pam_service&rdquo;), you would\nuse the following configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_permit\n= +my_pam_service, -sudo</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nthe default set of PAM service names includes:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\npolkit-1</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsudo</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsudo-i</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nsystemd-user</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_deny\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">A\ncomma-separated list of PAM service names for which\nGPO-based access is always denied, regardless of any GPO\nLogon Rights.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">It\nis possible to add a PAM service name to the default set by\nusing &ldquo;+service_name&rdquo;. Since the default set is\nempty, it is not possible to remove a PAM service name from\nthe default set. For example, in order to add a custom pam\nservice name (e.g. &ldquo;my_pam_service&rdquo;), you would\nuse the following configuration:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_map_deny\n= +my_pam_service</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_gpo_default_right\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption defines how access control is evaluated for PAM\nservice names that are not explicitly listed in one of the\nad_gpo_map_* options. This option can be set in two\ndifferent manners. First, this option can be set to use a\ndefault logon right. For example, if this option is set to\n'interactive', it means that unmapped PAM service names will\nbe processed based on the InteractiveLogonRight and\nDenyInteractiveLogonRight policy settings. Alternatively,\nthis option can be set to either always permit or always\ndeny access for unmapped PAM service names.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Supported\nvalues for this option include:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ninteractive</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nremote_interactive</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nnetwork</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nbatch</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\nservice</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\npermit</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">&bull;\ndeny</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ndeny</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_maximum_machine_account_password_age\n(integer)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">SSSD will\ncheck once a day if the machine account password is older\nthan the given age in days and try to renew it. A value of 0\nwill disable the renewal attempt.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n30 days</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_machine_account_password_renewal_opts\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">This\noption should only be used to test the machine account\nrenewal task. The option expects 2 integers separated by a\ncolon (':'). The first integer defines the interval in\nseconds how often the task is run. The second specifies the\ninitial timeout in seconds before the task is run for the\nfirst time after startup.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n86400:750 (24h and 15m)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_update_samba_machine_account_password\n(boolean)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If\nenabled, when SSSD renews the machine account password, it\nwill also be updated in Samba's database. This prevents\nSamba's copy of the machine account password from getting\nout of date when it is set up to use AD for\nauthentication.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nfalse</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_use_ldaps\n(bool)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">By\ndefault SSSD uses the plain LDAP port 389 and the Global\nCatalog port 3628. If this option is set to True SSSD will\nuse the LDAPS port 636 and Global Catalog port 3629 with\nLDAPS protection. Since AD does not allow to have multiple\nencryption layers on a single connection and we still want\nto use SASL/GSSAPI or SASL/GSS-SPNEGO for authentication the\nSASL security property maxssf is set to 0 (zero) for those\nconnections.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">ad_allow_remote_domain_local_groups\n(boolean)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">If this\noption is set to &ldquo;true&rdquo; SSSD will not filter out\nDomain Local groups from remote domains in the AD forest. By\ndefault they are filtered out e.g. when following a nested\ngroup hierarchy in remote domains because they are not valid\nin the local domain. To be compatible with other solutions\nwhich make AD users and groups available on Linux client\nthis option was added.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that setting this option to &ldquo;true&rdquo; will be\nagainst the intention of Domain Local group in Active\nDirectory and <i>SHOULD ONLY BE USED TO FACILITATE MIGRATION\nFROM OTHER SOLUTIONS</i>. Although the group exists and user\ncan be member of the group the intention is that the group\nshould be only used in the domain it is defined and in no\nothers. Since there is only one type of POSIX groups the\nonly way to achieve this on the Linux side is to ignore\nthose groups. This is also done by Active Directory as can\nbe seen in the PAC of the Kerberos ticket for a local\nservice or in tokenGroups requests where remote Domain Local\ngroups are missing as well.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Given\nthe comments above, if this option is set to\n&ldquo;true&rdquo; the tokenGroups request must be disabled\nby setting &ldquo;ldap_use_tokengroups&rdquo; to\n&ldquo;false&rdquo; to get consistent group-memberships of a\nusers. Additionally the Global Catalog lookup should be\nskipped as well by setting &ldquo;ad_enable_gc&rdquo; to\n&ldquo;false&rdquo;. Finally it might be necessary to modify\n&ldquo;ldap_group_nesting_level&rdquo; if the remote Domain\nLocal groups can only be found with a deeper nesting\nlevel.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_update\n(boolean)</font></p>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Optional.\nThis option tells SSSD to automatically update the Active\nDirectory DNS server with the IP address of this client. The\nupdate is secured using GSS-TSIG. As a consequence, the\nActive Directory administrator only needs to allow secure\nupdates for the DNS zone. The IP address of the AD LDAP\nconnection is used for the updates, if it is not otherwise\nspecified by using the &ldquo;dyndns_iface&rdquo;\noption.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nOn older systems (such as RHEL 5), for this behavior to work\nreliably, the default Kerberos realm must be set properly in\n/etc/krb5.conf</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ntrue</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_ttl\n(integer)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The TTL\nto apply to the client DNS record when updating it. If\ndyndns_update is false this has no effect. This will\noverride the TTL serverside if set by an\nadministrator.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n3600 (seconds)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_iface\n(string)</font></p>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Optional.\nApplicable only when dyndns_update is true. Choose the\ninterface or a list of interfaces whose IP addresses should\nbe used for dynamic DNS updates. Special value\n&ldquo;*&rdquo; implies that IPs from all interfaces should\nbe used.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nUse the IP addresses of the interface which is used for AD\nLDAP connection</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Example:\ndyndns_iface = em1, vnet1, vnet2</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_refresh_interval\n(integer)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">How often\nshould the back end perform periodic DNS update in addition\nto the automatic update performed when the back end goes\nonline. This option is optional and applicable only when\ndyndns_update is true. Note that the lowest possible value\nis 60 seconds in-case if value is provided less than 60,\nparameter will assume lowest value only.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n86400 (24 hours)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_update_ptr\n(bool)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe PTR record should also be explicitly updated when\nupdating the client's DNS records. Applicable only when\ndyndns_update is true.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nTrue</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_force_tcp\n(bool)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe nsupdate utility should default to using TCP for\ncommunicating with the DNS server.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse (let nsupdate choose the protocol)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_auth\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe nsupdate utility should use GSS-TSIG authentication for\nsecure updates with the DNS server, insecure updates can be\nsent by setting this option to 'none'.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nGSS-TSIG</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_auth_ptr\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Whether\nthe nsupdate utility should use GSS-TSIG authentication for\nsecure PTR updates with the DNS server, insecure updates can\nbe sent by setting this option to 'none'.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nSame as dyndns_auth</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_server\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The DNS\nserver to use when performing a DNS update. In most setups,\nit's recommended to leave this option unset.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Setting\nthis option makes sense for environments where the DNS\nserver is different from the identity server.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that this option will be only used in fallback attempt\nwhen previous attempt using autodetected settings\nfailed.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNone (let nsupdate choose the server)</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dyndns_update_per_family\n(boolean)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">DNS\nupdate is by default performed in two steps - IPv4 update\nand then IPv6 update. In some cases it might be desirable to\nperform IPv4 and IPv6 update in single step.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\ntrue</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">override_homedir\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Override\nthe user's home directory. You can either provide an\nabsolute value or a template. In the template, the following\nsequences are substituted:</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%u</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">login\nname</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%U</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">UID\nnumber</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%d</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">domain\nname</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%f</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">fully\nqualified user name (user@domain)</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%l</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">The first\nletter of the login name.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%P</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">UPN -\nUser Principal Name (name@REALM)</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%o</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">The\noriginal home directory retrieved from the identity\nprovider.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%H</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">The value\nof configure option <i>homedir_substring</i>.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">%%</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">a literal\n'%'</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">This\noption can also be set per-domain.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">example:</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">override_homedir\n= /home/%u</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nNot set (SSSD will use the value retrieved from\nLDAP)</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Please\nnote, the home directory from a specific override for the\nuser, either locally (see <b>sss_override</b>(8)) or\ncentrally managed IPA id-overrides, has a higher precedence\nand will be used instead of the value given by\noverride_homedir.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">homedir_substring\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">The value\nof this option will be used in the expansion of the\n<i>override_homedir</i> option if the template contains the\nformat string <i>%H</i>. An LDAP directory entry can\ndirectly contain this template so that this option can be\nused to expand the home directory path for each client\nmachine (or operating system). It can be set per-domain or\nglobally in the [nss] section. A value specified in a domain\nsection will override one set in the [nss]\nsection.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n/home</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">krb5_confd_path\n(string)</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Absolute\npath of a directory where SSSD should place Kerberos\nconfiguration snippets.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">To\ndisable the creation of the configuration snippets set the\nparameter to 'none'.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set (krb5.include.d subdirectory of SSSD's pubconf\ndirectory)</font></p>\n\n<h2>MODIFIED DEFAULT OPTIONS\n<a name=\"MODIFIED DEFAULT OPTIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Certain\noption defaults do not match their respective backend\nprovider defaults, these option names and AD\nprovider-specific defaults are listed below:</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>KRB5\nProvider</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">&bull;\nkrb5_validate = true</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nkrb5_use_enterprise_principal = true</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>LDAP\nProvider</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">&bull;\nldap_schema = ad</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_force_upper_case_realm = true</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_id_mapping = true</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_sasl_mech = GSS-SPNEGO</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_referrals = false</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_account_expire_policy = ad</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_use_tokengroups = true</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nldap_sasl_authid = sAMAccountName@REALM (typically\nSHORTNAME$@REALM)</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nAD provider looks for a different principal than the LDAP\nprovider by default, because in an Active Directory\nenvironment the principals are divided into two groups -\nUser Principals and Service Principals. Only User Principal\ncan be used to obtain a TGT and by default, computer\nobject's principal is constructed from its sAMAccountName\nand the AD realm. The well-known host/hostname@REALM\nprincipal is a Service Principal and thus cannot be used to\nget a TGT with.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>NSS\nconfiguration</b></font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">&bull;\nfallback_homedir = /home/%d/%u</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">The\nAD provider automatically sets &quot;fallback_homedir =\n/home/%d/%u&quot; to provide personal home directories for\nusers without the homeDirectory attribute. If your AD Domain\nis properly populated with Posix attributes, and you want to\navoid this fallback behavior, you can explicitly set\n&quot;fallback_homedir = %o&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Note\nthat the system typically expects a home directory in\n/home/%u folder. If you decide to use a different directory\nstructure, some other parts of your system may need\nadjustments.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">For\nexample automated creation of home directories in\ncombination with selinux requires selinux adjustment,\notherwise the home directory will be created with wrong\nselinux context.</font></p>\n\n<h2>FAILOVER\n<a name=\"FAILOVER\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nfailover feature allows back ends to automatically switch to\na different server if the current server fails.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Failover\nSyntax</b> <br>\nThe list of servers is given as a comma-separated list; any\nnumber of spaces is allowed around the comma. The servers\nare listed in order of preference. The list can contain any\nnumber of servers.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">For\neach failover-enabled config option, two variants exist:\n<i>primary</i> and <i>backup</i>. The idea is that servers\nin the primary list are preferred and backup servers are\nonly searched if no primary servers can be reached. If a\nbackup server is selected, a timeout of 31 seconds is set.\nAfter this timeout SSSD will periodically try to reconnect\nto one of the primary servers. If it succeeds, it will\nreplace the current active (backup) server.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>The\nFailover Mechanism</b> <br>\nThe failover mechanism distinguishes between a machine and a\nservice. The back end first tries to resolve the hostname of\na given machine; if this resolution attempt fails, the\nmachine is considered offline. No further attempts are made\nto connect to this machine for any other service. If the\nresolution attempt succeeds, the back end tries to connect\nto a service on this machine. If the service connection\nattempt fails, then only this particular service is\nconsidered offline and the back end automatically switches\nover to the next service. The machine is still considered\nonline and might still be tried for another\nservice.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Further\nconnection attempts are made to machines or services marked\nas offline after a specified period of time; this is\ncurrently hard coded to 30 seconds.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">If\nthere are no more machines to try, the back end as a whole\nswitches to offline mode, and then attempts to reconnect\nevery 30 seconds.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Failover\ntime outs and tuning</b> <br>\nResolving a server to connect to can be as simple as running\na single DNS query or can involve several steps, such as\nfinding the correct site or trying out multiple host names\nin case some of the configured servers are not reachable.\nThe more complex scenarios can take some time and SSSD needs\nto balance between providing enough time to finish the\nresolution process but on the other hand, not trying for too\nlong before falling back to offline mode. If the SSSD debug\nlogs show that the server resolution is timing out before a\nlive server is contacted, you can consider changing the time\nouts.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">This\nsection lists the available tunables. Please refer to their\ndescription in the <b>sssd.conf</b>(5), manual\npage.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dns_resolver_server_timeout</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Time in\nmilliseconds that sets how long would SSSD talk to a single\nDNS server before trying next one.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n1000</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dns_resolver_op_timeout</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">Time in\nseconds to tell how long would SSSD try to resolve single\nDNS query (e.g. resolution of a hostname or an SRV record)\nbefore trying the next hostname or discovery\ndomain.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n3</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">dns_resolver_timeout</font></p>\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">How long\nwould SSSD try to resolve a failover service. This service\nresolution internally might include several steps, such as\nresolving DNS SRV queries or locating the site.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">Default:\n6</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">For\nLDAP-based providers, the resolve operation is performed as\npart of an LDAP connection operation. Therefore, also the\n&ldquo;ldap_opt_timeout&rdquo; timeout should be set to a\nlarger value than &ldquo;dns_resolver_timeout&rdquo; which\nin turn should be set to a larger value than\n&ldquo;dns_resolver_op_timeout&rdquo; which should be larger\nthan &ldquo;dns_resolver_server_timeout&rdquo;.</font></p>\n\n<h2>SERVICE DISCOVERY\n<a name=\"SERVICE DISCOVERY\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nservice discovery feature allows back ends to automatically\nfind the appropriate servers to connect to using a special\nDNS query. This feature is not supported for backup\nservers.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Configuration</b>\n<br>\nIf no servers are specified, the back end automatically uses\nservice discovery to try to find a server. Optionally, the\nuser may choose to use both fixed server addresses and\nservice discovery by inserting a special keyword,\n&ldquo;_srv_&rdquo;, in the list of servers. The order of\npreference is maintained. This feature is useful if, for\nexample, the user prefers to use service discovery whenever\npossible, and fall back to a specific server when no servers\ncan be discovered using DNS.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>The\ndomain name</b> <br>\nPlease refer to the &ldquo;dns_discovery_domain&rdquo;\nparameter in the <b>sssd.conf</b>(5) manual page for more\ndetails.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>The\nprotocol</b> <br>\nThe queries usually specify _tcp as the protocol. Exceptions\nare documented in respective option description.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>See\nAlso</b> <br>\nFor more information on the service discovery mechanism,\nrefer to RFC 2782.</font></p>\n\n<h2>ID MAPPING\n<a name=\"ID MAPPING\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nID-mapping feature allows SSSD to act as a client of Active\nDirectory without requiring administrators to extend user\nattributes to support POSIX attributes for user and group\nidentifiers.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nWhen ID-mapping is enabled, the uidNumber and gidNumber\nattributes are ignored. This is to avoid the possibility of\nconflicts between automatically-assigned and\nmanually-assigned values. If you need to use\nmanually-assigned values, ALL values must be\nmanually-assigned.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Please\nnote that changing the ID mapping related configuration\noptions will cause user and group IDs to change. At the\nmoment, SSSD does not support changing IDs, so the SSSD\ndatabase must be removed. Because cached passwords are also\nstored in the database, removing the database should only be\nperformed while the authentication servers are reachable,\notherwise users might get locked out. In order to cache the\npassword, an authentication must be performed. It is not\nsufficient to use <b>sss_cache</b>(8) to remove the\ndatabase, rather the process consists of:</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nMaking sure the remote servers are reachable</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nStopping the SSSD service</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nRemoving the database</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nStarting the SSSD service</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Moreover,\nas the change of IDs might necessitate the adjustment of\nother system properties such as file and directory\nownership, it's advisable to plan ahead and test the ID\nmapping configuration thoroughly.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Mapping\nAlgorithm</b> <br>\nActive Directory provides an objectSID for every user and\ngroup object in the directory. This objectSID can be broken\nup into components that represent the Active Directory\ndomain identity and the relative identifier (RID) of the\nuser or group object.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nSSSD ID-mapping algorithm takes a range of available UIDs\nand divides it into equally-sized component sections -\ncalled &quot;slices&quot;-. Each slice represents the space\navailable to an Active Directory domain.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">When\na user or group entry for a particular domain is encountered\nfor the first time, the SSSD allocates one of the available\nslices for that domain. In order to make this\nslice-assignment repeatable on different client machines, we\nselect the slice based on the following\nalgorithm:</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nSID string is passed through the murmurhash3 algorithm to\nconvert it to a 32-bit hashed value. We then take the\nmodulus of this value with the total number of available\nslices to pick the slice.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nIt is possible to encounter collisions in the hash and\nsubsequent modulus. In these situations, we will select the\nnext available slice, but it may not be possible to\nreproduce the same exact set of slices on other machines\n(since the order that they are encountered will determine\ntheir slice). In this situation, it is recommended to either\nswitch to using explicit POSIX attributes in Active\nDirectory (disabling ID-mapping) or configure a default\ndomain to guarantee that at least one is always consistent.\nSee &ldquo;Configuration&rdquo; for details.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Configuration</b>\n<br>\nMinimum configuration (in the\n&ldquo;[domain/DOMAINNAME]&rdquo; section):</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_id_mapping\n= True <br>\nldap_schema = ad</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\ndefault configuration results in configuring 10,000 slices,\neach capable of holding up to 200,000 IDs, starting from\n200,000 and going up to 2,000,200,000. This should be\nsufficient for most deployments.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b><big>Advanced\nConfiguration</big></b></font></p>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">ldap_idmap_range_min\n(integer)</font></p>\n\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specifies\nthe lower (inclusive) bound of the range of POSIX IDs to use\nfor mapping Active Directory user and group SIDs. It is the\nfirst POSIX ID which can be used for the mapping.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThis option is different from &ldquo;min_id&rdquo; in that\n&ldquo;min_id&rdquo; acts to filter the output of requests\nto this domain, whereas this option controls the range of ID\nassignment. This is a subtle distinction, but the good\ngeneral advice would be to have &ldquo;min_id&rdquo; be\nless-than or equal to\n&ldquo;ldap_idmap_range_min&rdquo;</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n200000</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_range_max\n(integer)</font></p>\n\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specifies\nthe upper (exclusive) bound of the range of POSIX IDs to use\nfor mapping Active Directory user and group SIDs. It is the\nfirst POSIX ID which cannot be used for the mapping anymore,\ni.e. one larger than the last one which can be used for the\nmapping.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThis option is different from &ldquo;max_id&rdquo; in that\n&ldquo;max_id&rdquo; acts to filter the output of requests\nto this domain, whereas this option controls the range of ID\nassignment. This is a subtle distinction, but the good\ngeneral advice would be to have &ldquo;max_id&rdquo; be\ngreater-than or equal to\n&ldquo;ldap_idmap_range_max&rdquo;</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n2000200000</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_range_size\n(integer)</font></p>\n\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specifies\nthe number of IDs available for each slice. If the range\nsize does not divide evenly into the min and max values, it\nwill create as many complete slices as it can.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThe value of this option must be at least as large as the\nhighest user RID planned for use on the Active Directory\nserver. User lookups and login will fail for any user whose\nRID is greater than this value.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">For\nexample, if your most recently-added Active Directory user\nhas\nobjectSid=S-1-5-21-2153326666-2176343378-3404031434-1107,\n&ldquo;ldap_idmap_range_size&rdquo; must be at least 1108 as\nrange size is equal to maximal SID minus minimal SID plus\none (e.g. 1108 = 1107 - 0 + 1).</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">It\nis important to plan ahead for future expansion, as changing\nthis value will result in changing all of the ID mappings on\nthe system, leading to users with different local IDs than\nthey previously had.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n200000</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_default_domain_sid\n(string)</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specify\nthe domain SID of the default domain. This will guarantee\nthat this domain will always be assigned to slice zero in\nthe ID map, bypassing the murmurhash algorithm described\nabove.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_default_domain\n(string)</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Specify\nthe name of the default domain.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\nnot set</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_autorid_compat\n(boolean)</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Changes\nthe behavior of the ID-mapping algorithm to behave more\nsimilarly to winbind's &ldquo;idmap_autorid&rdquo;\nalgorithm.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">When\nthis option is configured, domains will be allocated\nstarting with slice zero and increasing monatomically with\neach additional domain.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">NOTE:\nThis algorithm is non-deterministic (it depends on the order\nthat users and groups are requested). If this mode is\nrequired for compatibility with machines running winbind, it\nis recommended to also use the\n&ldquo;ldap_idmap_default_domain_sid&rdquo; option to\nguarantee that at least one domain is consistently allocated\nto slice zero.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\nFalse</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ldap_idmap_helper_table_size\n(integer)</font></p>\n\n<p style=\"margin-left:23%;\"><font color=\"#000000\">Maximal\nnumber of secondary slices that is tried when performing\nmapping from UNIX id to SID.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Note:\nAdditional secondary slices might be generated when SID is\nbeing mapped to UNIX id and RID part of SID is out of range\nfor secondary slices generated so far. If value of\nldap_idmap_helper_table_size is equal to 0 then no\nadditional secondary slices are generated.</font></p>\n\n\n<p style=\"margin-left:23%; margin-top: 1em\"><font color=\"#000000\">Default:\n10</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Well-Known\nSIDs</b> <br>\nSSSD supports to look up the names of Well-Known SIDs, i.e.\nSIDs with a special hardcoded meaning. Since the generic\nusers and groups related to those Well-Known SIDs have no\nequivalent in a Linux/UNIX environment no POSIX IDs are\navailable for those objects.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nSID name space is organized in authorities which can be seen\nas different domains. The authorities for the Well-Known\nSIDs are</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nNull Authority</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nWorld Authority</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nLocal Authority</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nCreator Authority</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nNT Authority</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nBuilt-in</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\ncapitalized version of these names are used as domain names\nwhen returning the fully qualified name of a Well-Known\nSID.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Since\nsome utilities allow to modify SID based access control\ninformation with the help of a name instead of using the SID\ndirectly SSSD supports to look up the SID by the name as\nwell. To avoid collisions only the fully qualified names can\nbe used to look up Well-Known SIDs. As a result the domain\nnames &ldquo;NULL AUTHORITY&rdquo;, &ldquo;WORLD\nAUTHORITY&rdquo;, &ldquo; LOCAL AUTHORITY&rdquo;,\n&ldquo;CREATOR AUTHORITY&rdquo;, &ldquo;NT AUTHORITY&rdquo;\nand &ldquo;BUILTIN&rdquo; should not be used as domain names\nin sssd.conf.</font></p>\n\n<h2>EXAMPLE\n<a name=\"EXAMPLE\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nfollowing example assumes that SSSD is correctly configured\nand example.com is one of the domains in the <i>[sssd]</i>\nsection. This example shows only the AD provider-specific\noptions.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">[domain/EXAMPLE]\n<br>\nid_provider = ad <br>\nauth_provider = ad <br>\naccess_provider = ad <br>\nchpass_provider = ad</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">ad_server\n= dc1.example.com <br>\nad_hostname = client.example.com <br>\nad_domain = example.com</font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\nAD access control provider checks if the account is expired.\nIt has the same effect as the following configuration of the\nLDAP provider:</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">access_provider\n= ldap <br>\nldap_access_order = expire <br>\nldap_account_expire_policy = ad</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">However,\nunless the &ldquo;ad&rdquo; access control provider is\nexplicitly configured, the default access provider is\n&ldquo;permit&rdquo;. Please note that if you configure an\naccess provider other than &ldquo;ad&rdquo;, you need to set\nall the connection parameters (such as LDAP URIs and\nencryption details) manually.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">When\nthe autofs provider is set to &ldquo;ad&rdquo;, the RFC2307\nschema attribute mapping (nisMap, nisObject, ...) is used,\nbecause these attributes are included in the default Active\nDirectory schema.</font></p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>sssd</b>(8),\n<b>sssd.conf</b>(5), <a href=\"https://man.page/5/sssd-ldap\">sssd-ldap(5)</a>,\n<a href=\"https://man.page/5/sssd-krb5\">sssd-krb5(5)</a>, <a href=\"https://man.page/5/sssd-simple\">sssd-simple(5)</a>,\n<a href=\"https://man.page/5/sssd-ipa\">sssd-ipa(5)</a>, <a href=\"https://man.page/5/sssd-ad\">sssd-ad(5)</a>, <a href=\"https://man.page/5/sssd-files\">sssd-files(5)</a>,\n<a href=\"https://man.page/5/sssd-sudo\">sssd-sudo(5)</a>, <a href=\"https://man.page/5/sssd-session-recording\">sssd-session-recording(5)</a>,\n<b>sss_cache</b>(8), <b>sss_debuglevel</b>(8),\n<b>sss_obfuscate</b>(8), <b>sss_seed</b>(8),\n<b>sssd_krb5_locator_plugin</b>(8),\n<b>sss_ssh_authorizedkeys</b>(8),\n<b>sss_ssh_knownhostsproxy</b>(8), <a href=\"https://man.page/5/sssd-ifp\">sssd-ifp(5)</a>,\n<b>pam_sss</b>(8). <a href=\"https://man.page/5/sss_rpcidmapd\">sss_rpcidmapd(5)</a>\n<a href=\"https://man.page/5/sssd-systemtap\">sssd-systemtap(5)</a></font></p>\n\n<h2>AUTHORS\n<a name=\"AUTHORS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>The\nSSSD upstream - https://github.com/SSSD/sssd/</b></font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"51%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">[MS-ADTS]\nsection LDAP extensions</font></p></td>\n<td width=\"32%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://msdn.microsoft.com/en-us/library/cc223367.aspx</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#CONFIGURATION OPTIONS\">CONFIGURATION OPTIONS</a>","<a href=\"#MODIFIED DEFAULT OPTIONS\">MODIFIED DEFAULT OPTIONS</a>","<a href=\"#FAILOVER\">FAILOVER</a>","<a href=\"#SERVICE DISCOVERY\">SERVICE DISCOVERY</a>","<a href=\"#ID MAPPING\">ID MAPPING</a>","<a href=\"#EXAMPLE\">EXAMPLE</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#AUTHORS\">AUTHORS</a>","<a href=\"#NOTES\">NOTES</a>"],"level":5}