{"name":"sane-apple","description":"sane-apple - SANE backend for Apple flatbed scanners","body":"\n\n<h1 align=\"center\">sane-apple</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">sane-apple -\nSANE backend for Apple flatbed scanners</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sane-apple</b> library implements a SANE (Scanner Access\nNow Easy) backend that provides access to Apple flatbed\nscanners. At present, the following scanners are supported\nfrom this backend:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">---------------\n----- ------------------ ------ <br>\nAppleScanner 4bit 16 Shades of Gray <br>\nOneScanner 8bit 256 Shades of Gray <br>\nColorOneScanner 24bit RGB color 3-pass</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you own a\nApple scanner other than the ones listed above that works\nwith this backend, please let us know by sending the\nscanner&rsquo;s model name, SCSI id, and firmware revision\nto <i>sane-devel@alioth-lists.debian.net</i>. See\n<i>http://www.sane-project.org/mailing-lists.html</i> for\ndetails on how to subscribe to sane-devel.</p>\n\n<h2>DEVICE NAMES\n<a name=\"DEVICE NAMES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This backend\nexpects device names of the form:</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\"><i>special</i></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">where\n<i>special</i> is the path-name for the special device that\ncorresponds to a SCSI scanner. For SCSI scanners, the\nspecial device name must be a generic SCSI device or a\nsymlink to such a device. Under Linux, such a device name\ncould be <i>/dev/sga</i> or <i>/dev/sge</i>, for example.\nSee <a href=\"https://man.page/5/sane-scsi\">sane-scsi(5)</a> for details.</p>\n\n<h2>CONFIGURATION\n<a name=\"CONFIGURATION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>apple.conf</i> file is a list of options and device names\nthat correspond to Apple scanners. Empty lines and lines\nstarting with a hash mark (#) are ignored. See\n<a href=\"https://man.page/5/sane-scsi\">sane-scsi(5)</a> on details of what constitutes a valid\ndevice name.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Options come in\ntwo flavors: global and positional ones. Global options\napply to all devices managed by the backend, whereas\npositional options apply just to the most recently mentioned\ndevice. Note that this means that the order in which the\noptions appear matters!</p>\n\n<h2>SCSI ADAPTER TIPS\n<a name=\"SCSI ADAPTER TIPS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">SCSI scanners\nare typically delivered with an ISA SCSI adapter.\nUnfortunately, that adapter is not worth much since it is\nnot interrupt driven. It is sometimes possible to get the\nsupplied card to work, but without an interrupt line,\nscanning will put so much load on the system that it becomes\nalmost unusable for other tasks.</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/etc/sane.d/apple.conf</i></p>\n\n<p style=\"margin-left:22%;\">The backend configuration file\n(see also description of <b>SANE_CONFIG_DIR</b> below).</p>\n\n\n<p style=\"margin-left:11%;\"><i>/usr/lib/x86_64-linux-gnu/sane/libsane-apple.a</i></p>\n\n<p style=\"margin-left:22%;\">The static library implementing\nthis backend.</p>\n\n\n<p style=\"margin-left:11%;\"><i>/usr/lib/x86_64-linux-gnu/sane/libsane-apple.so</i></p>\n\n<p style=\"margin-left:22%;\">The shared library implementing\nthis backend (present on systems that support dynamic\nloading).</p>\n\n<h2>ENVIRONMENT\n<a name=\"ENVIRONMENT\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>SANE_CONFIG_DIR</b></p>\n\n<p style=\"margin-left:22%;\">This environment variable is\nlist of directories where SANE looks for the configuration\nfile. On *NIX systems, directory names are separated by a\ncolon (&rsquo;:&rsquo;), under OS/2 by a semi-colon\n(&rsquo;;&rsquo;). If SANE_CONFIG_DIR is not set, SANE\ndefaults to searching the current working directory\n(&quot;.&quot;) and then <i>/etc/sane.d</i>. If the value of\n$SANE_CONFIG_DIR ends with the separator character, the\ndefault directories are searched after the directory list.\nFor example, setting <b>SANE_CONFIG_DIR</b> to\n&quot;/tmp/config:&quot; would result in directories\n<i>tmp/config</i>, <i>.</i>, and <i>/etc/sane.d</i> being\nsearched (in that order).</p>\n\n<p style=\"margin-left:11%;\"><b>SANE_DEBUG_APPLE</b></p>\n\n<p style=\"margin-left:22%;\">Controls the debug level. A\nvalue of 255 prints all debug output. Smaller values reduce\nverbosity. Requires a library compiled with debug\nsupport.</p>\n\n<h2>CURRENT STATUS\n<a name=\"CURRENT STATUS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The apple\nbackend is now in version 0.3 (Tue Jul 21 1998). Since I\nonly have the AppleScanner and not the other models\n(OneScanner, ColorOneScanner) I can only develop/test for\nthe AppleScanner effectively. However with this release I\nalmost completed the GUI part of all scanners. Most of the\nfunctionality is there. At least OneScanner should scan at\nthe AppleScanner&rsquo;s compatible modes (LineArt,\nHalfTone, Gray16). My personal belief is that with a slight\ntouch of debugging the OneScanner could be actually usable.\nThe ColorOneScanner needs more work. AppleScanner is of\ncourse almost fully supported.</p>\n\n<h2>MISSING FUNCTIONALITY\n<a name=\"MISSING FUNCTIONALITY\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Currently all\nthree models lack upload/download support. <b><br>\nAppleScanner</b></p>\n\n<p style=\"margin-left:22%;\">Cannot up/download a halftone\npattern.</p>\n\n<p style=\"margin-left:11%;\"><b>OneScanner</b></p>\n\n<p style=\"margin-left:22%;\">Cannot up/download halftone\npatterns or calibration vectors.</p>\n\n<p style=\"margin-left:11%;\"><b>ColorOneScanner</b></p>\n\n<p style=\"margin-left:22%;\">Cannot up/download halftone\npatterns, calibration vectors, custom Color Correction\nTables (CCT) and of course custom gamma tables.</p>\n\n<p style=\"margin-left:11%;\"><b>Park/UnPark (OneScanner,\nColorOneScanner)</b></p>\n\n<p style=\"margin-left:22%;\">Some capabilities are\nmissing.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The above\nfunctionalities are missing because I don&rsquo;t have the\nhardware to experiment on. Another reason is my lack of\nunderstanding as to how or if the SANE API provide means to\ndescribe any array type besides gamma.</p>\n\n<h2>UNSUPPORTED FEATURES\n<a name=\"UNSUPPORTED FEATURES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\n&quot;features&quot; will never be supported, at least while\nI maintain the sane-apple backend. <b><br>\nNoHome (AppleScanner)</b></p>\n\n<p style=\"margin-left:22%;\">The scanner lamp stays on and\nthe carriage assembly remains where it stops at the end of\nthe scan. After two minutes, if the scanner does not receive\nanother SCAN command, the lamp goes off and the carriage\nreturns to the home position.</p>\n\n<p style=\"margin-left:11%;\"><b>Compression\n(AppleScanner)</b></p>\n\n<p style=\"margin-left:22%;\">The Scanner can compress data\nwith CCITT Group III one dimensional algorithm (fax) and the\nSkip White Line algorithm.</p>\n\n<p style=\"margin-left:11%;\"><b>Multiple Windows\n(AppleScanner)</b></p>\n\n<p style=\"margin-left:22%;\">AppleScanner may support\nmultiple windows. It would be a cool feature and a challenge\nfor me to code if it could intermix different options for\ndifferent windows (scan areas). This way it could scan a\ndocument in LineArt mode but the figures in it in Gray and\nat a different resolution. Unfortunately this is\nimpossible.</p>\n\n<p style=\"margin-left:11%;\"><b>Scan Direction\n(OneScanner)</b></p>\n\n<p style=\"margin-left:22%;\">It controls the scan direction.\n(?)</p>\n\n<p style=\"margin-left:11%;\"><b>Status/Reset Button\n(OneScanner)</b></p>\n\n<p style=\"margin-left:22%;\">This option controls the status\nof the button on the OneScanner model. You can also reset\nthe button status by software.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">SANE backend\nbugs are divided in two classes. We have <b>GUI</b> bugs and\n<b>scanner specific</b> bugs.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">We know we have\na GUI bug when a parameter is not showing up when it should\n(active) or vice versa. Finding out which parameters are\nactive across various Apple modes and models from the\ndocumentation\n<i>ftp://ftpdev.info.apple.com/devworld/Technical_Documentation/Peripherals_Documentation/</i>\nis an interesting exercise. I may have missed some\ndependencies. For example of the threshold parameter the\nApple Scanners Programming Guide says nothing. I had to\nassume it is valid only in LineArt mode.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Scanner\nspecific bugs are mostly due to mandatory round-offs in\norder to scan. In the documentation in one place states that\nthe width of the scan area should be a byte multiple. In\nanother place it says that the width of the scan area should\nbe an even byte multiple. Go figure...</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Other sources\nof bugs are due to scsi communication, scsi connects and\ndisconnects. However the classical bugs are still there. So\nyou may encounter buffer overruns, null pointers, memory\ncorruption and <b>SANE</b> API violations. <b><br>\nSIGSEGV on SliceBars</b></p>\n\n<p style=\"margin-left:22%;\">When you try to modify the scan\narea from the slice bar you have a nice little cute core\ndump. I don&rsquo;t know why. If you select the scan area\nfrom the preview window or by hand typing the numbers\neverything is fine. The SIGSEGV happens deep in gtk library\n(gdk). I really cannot debug it.</p>\n\n<p style=\"margin-left:11%;\"><b>Options too much</b></p>\n\n<p style=\"margin-left:22%;\">It is possible, especially for\nthe ColorOneScanner, for the backend&rsquo;s options panel\nto extend beyond your screen. It happens with mine and I am\nrunning my X Server at 1024x768. What can I say? Try smaller\nfonts in the X server, or virtual screens.</p>\n\n<p style=\"margin-left:11%;\"><b>Weird SCSI behaviour</b></p>\n\n<p style=\"margin-left:22%;\">I am quoting David Myers\nHere...</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">&gt;&gt; OS:\nFreeBSD 2.2.6 <br>\n&gt;&gt; CC: egcs-1.02 <br>\nJust wanted to follow up on this... I recently changed my\nSCSI card from the Adaptec 2940UW to a dual-channel Symbios\n786 chipset. When I started up SANE with your driver, I\nmanaged to scan line art drawings okay, but Gray16 scans led\nto a stream of SCSI error messages on the console,\nultimately hanging with a message saying the scanner\nwasn&rsquo;t releasing the SCSI bus. This may be that the\nSymbios is simply less tolerant of ancient hardware, or may\nbe bugs in your driver or in SANE itself...</p>\n\n<h2>DEBUG\n<a name=\"DEBUG\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you\nencounter a GUI bug please set the environmental variable\n<b>SANE_DEBUG_APPLE</b> to 255 and rerun the exact sequence\nof keystrokes and menu selections to reproduce it. Then send\nme a report with the log attached.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you have an\nApple Macintosh with the AppleScanners driver installed,\nreporting to me which options are grayed out (inactive) in\nwhat modes would be very helpful.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you want to\noffer some help but you don&rsquo;t have a scanner, or you\ndon&rsquo;t have the model you would like to help with, or\nyou are a SANE developer and you just want to take a look at\nhow the apple backend looks like, goto to <i>apple.h</i> and\n#define the <b>NEUTRALIZE_BACKEND</b> macro. You can select\nthe scanner model through the APPLE_MODEL_SELECT macro.\nAvailable options are <b>APPLESCANNER</b>,\n<b>ONESCANNER</b>, and <b>COLORONESCANNER</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If you\nencounter a SCSI bus error or trimmed and/or displaced\nimages please set the environment variable\nSANE_DEBUG_SANEI_SCSI to 255 before sending me the\nreport.</p>\n\n<h2>TODO\n<a name=\"TODO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Non Blocking\nSupport</b></p>\n\n<p style=\"margin-left:22%;\">Make <b>sane-apple</b> a non\nblocking backend. Properly support <b>sane_set_io_mode</b>()\nand <b>sane_get_select_fd</b>()</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>Scan</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"78%\">\n\n\n<p>Make scanning possible for all models in all supported\nmodes.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Add other\nmissing functionality</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/7/sane\">sane(7)</a>,\n<a href=\"https://man.page/5/sane-scsi\">sane-scsi(5)</a></p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>sane-apple</b> backend was written not entirely from\nscratch by Milon Firikis. It is mostly based on the\n<a href=\"https://man.page/5/sane-mustek\">sane-mustek(5)</a> backend from David Mosberger and\nAndreas Czechanowski</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#DEVICE NAMES\">DEVICE NAMES</a>","<a href=\"#CONFIGURATION\">CONFIGURATION</a>","<a href=\"#SCSI ADAPTER TIPS\">SCSI ADAPTER TIPS</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#ENVIRONMENT\">ENVIRONMENT</a>","<a href=\"#CURRENT STATUS\">CURRENT STATUS</a>","<a href=\"#MISSING FUNCTIONALITY\">MISSING FUNCTIONALITY</a>","<a href=\"#UNSUPPORTED FEATURES\">UNSUPPORTED FEATURES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#DEBUG\">DEBUG</a>","<a href=\"#TODO\">TODO</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#AUTHOR\">AUTHOR</a>"],"level":5}