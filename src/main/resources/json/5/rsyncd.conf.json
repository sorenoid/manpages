{"name":"rsyncd.conf","description":"rsyncd.conf -\nconfiguration file for rsync in daemon mode","body":"\n\n<h1 align=\"center\">rsyncd.conf</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">rsyncd.conf -\nconfiguration file for rsync in daemon mode</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">rsyncd.conf</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The rsyncd.conf\nfile is the runtime configuration file for rsync when run as\nan rsync daemon.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The rsyncd.conf\nfile controls authentication, access, logging and available\nmodules.</p>\n\n<h2>FILE FORMAT\n<a name=\"FILE FORMAT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The file\nconsists of modules and parameters. A module begins with the\nname of the module in square brackets and continues until\nthe next module begins. Modules contain parameters of the\nform <b>name&nbsp;=&nbsp;value</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The file is\nline-based&nbsp;-- that is, each newline-terminated line\nrepresents either a comment, a module name or a\nparameter.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Only the first\nequals sign in a parameter is significant. Whitespace before\nor after the first equals sign is discarded. Leading,\ntrailing and internal whitespace in module and parameter\nnames is irrelevant. Leading and trailing whitespace in a\nparameter value is discarded. Internal whitespace within a\nparameter value is retained verbatim.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Any line\n<b>beginning</b> with a hash (<b>#</b>) is ignored, as are\nlines containing only whitespace. (If a hash occurs after\nanything other than leading whitespace, it is considered a\npart of the line&rsquo;s content.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Any line ending\nin a <b>\\</b> is &quot;continued&quot; on the next line in\nthe customary UNIX fashion.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The values\nfollowing the equals sign in parameters are all either a\nstring (no quotes needed) or a boolean, which may be given\nas yes/no, 0/1 or true/false. Case is not significant in\nboolean values, but is preserved in string values.</p>\n\n<h2>LAUNCHING THE RSYNC DAEMON\n<a name=\"LAUNCHING THE RSYNC DAEMON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The rsync\ndaemon is launched by specifying the <b>--daemon</b> option\nto rsync.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The daemon must\nrun with root privileges if you wish to use chroot, to bind\nto a port numbered under 1024 (as is the default 873), or to\nset file ownership. Otherwise, it must just have permission\nto read and write the appropriate data, log, and lock\nfiles.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">You can launch\nit either via inetd, as a stand-alone daemon, or from an\nrsync client via a remote shell. If run as a stand-alone\ndaemon then just run the command\n&quot;<b>rsync&nbsp;--daemon</b>&quot; from a suitable\nstartup script.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When run via\ninetd you should add a line like this to /etc/services:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">rsync\n873/tcp</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">and a single\nline something like this to /etc/inetd.conf:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">rsync stream\ntcp nowait root /usr/bin/rsync rsyncd --daemon</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Replace\n&quot;/usr/bin/rsync&quot; with the path to where you have\nrsync installed on your system. You will then need to send\ninetd a HUP signal to tell it to reread its config file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that you\nshould <b>not</b> send the rsync daemon a HUP signal to\nforce it to reread the <b>rsyncd.conf</b> file. The file is\nre-read on each client connection.</p>\n\n<h2>GLOBAL PARAMETERS\n<a name=\"GLOBAL PARAMETERS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The first\nparameters in the file (before a [module] header) are the\nglobal parameters. Rsync also allows for the use of a\n&quot;[global]&quot; module name to indicate the start of\none or more global-parameter sections (the name must be\nlower case).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">You may also\ninclude any module parameters in the global part of the\nconfig file in which case the supplied value will override\nthe default for that parameter.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">You may use\nreferences to environment variables in the values of\nparameters. String parameters will have %VAR% references\nexpanded as late as possible (when the string is first used\nin the program), allowing for the use of variables that\nrsync sets at connection time, such as RSYNC_USER_NAME.\nNon-string parameters (such as true/false settings) are\nexpanded when read from the config file. If a variable does\nnot exist in the environment, or if a sequence of characters\nis not a valid reference (such as an un-paired percent\nsign), the raw characters are passed through unchanged. This\nhelps with backward compatibility and safety (e.g. expanding\na non-existent %VAR% to an empty string in a path could\nresult in a very unsafe path). The safest way to insert a\nliteral % into a value is to use %%. <b><br>\nmotd&nbsp;file</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify a &quot;message of the day&quot; to display to\nclients on each connect. This usually contains site\ninformation and any legal notices. The default is no motd\nfile. This can be overridden by the\n<b>--dparam=motdfile=FILE</b> command-line option when\nstarting the daemon.</p>\n\n<p style=\"margin-left:11%;\"><b>pid&nbsp;file</b></p>\n\n<p style=\"margin-left:22%;\">This parameter tells the rsync\ndaemon to write its process ID to that file. The rsync keeps\nthe file locked so that it can know when it is safe to\noverwrite an existing file.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The filename\ncan be overridden by the <b>--dparam=pidfile=FILE</b>\ncommand-line option when starting the daemon.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>port</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"78%\">\n\n\n<p>You can override the default port the daemon will listen\non by specifying this value (defaults to 873). This is\nignored if the daemon is being run by inetd, and is\nsuperseded by the <b>--port</b> command-line option.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>address</b></p>\n\n<p style=\"margin-left:22%;\">You can override the default IP\naddress the daemon will listen on by specifying this value.\nThis is ignored if the daemon is being run by inetd, and is\nsuperseded by the <b>--address</b> command-line option.</p>\n\n<p style=\"margin-left:11%;\"><b>socket&nbsp;options</b></p>\n\n<p style=\"margin-left:22%;\">This parameter can provide\nendless fun for people who like to tune their systems to the\nutmost degree. You can set all sorts of socket options which\nmay make transfers faster (or slower!). Read the man page\nfor the <b>setsockopt()</b> system call for details on some\nof the options you may be able to set. By default no special\nsocket options are set. These settings can also be specified\nvia the <b>--sockopts</b> command-line option.</p>\n\n<p style=\"margin-left:11%;\"><b>listen&nbsp;backlog</b></p>\n\n<p style=\"margin-left:22%;\">You can override the default\nbacklog value when the daemon listens for connections. It\ndefaults to 5.</p>\n\n<h2>MODULE PARAMETERS\n<a name=\"MODULE PARAMETERS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">After the\nglobal parameters you should define a number of modules,\neach module exports a directory tree as a symbolic name.\nModules are exported by specifying a module name in square\nbrackets [module] followed by the parameters for that\nmodule. The module name cannot contain a slash or a closing\nsquare bracket. If the name contains whitespace, each\ninternal sequence of whitespace will be changed into a\nsingle space, while leading or trailing whitespace will be\ndiscarded. Also, the name cannot be &quot;global&quot; as\nthat exact name indicates that global parameters follow (see\nabove).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">As with GLOBAL\nPARAMETERS, you may use references to environment variables\nin the values of parameters. See the GLOBAL PARAMETERS\nsection for more details. <b><br>\ncomment</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies a\ndescription string that is displayed next to the module name\nwhen clients obtain a list of available modules. The default\nis no comment.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>path</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"78%\">\n\n\n<p>This parameter specifies the directory in the\ndaemon&rsquo;s filesystem to make available in this module.\nYou must specify this parameter for each module in\n<b>rsyncd.conf</b>.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">You may base\nthe path&rsquo;s value off of an environment variable by\nsurrounding the variable name with percent signs. You can\neven reference a variable that is set by rsync when the user\nconnects. For example, this would use the authorizing\nuser&rsquo;s name in the path:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">path =\n/home/%RSYNC_USER_NAME%</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">It is fine if\nthe path includes internal spaces&nbsp;-- they will be\nretained verbatim (which means that you shouldn&rsquo;t try\nto escape them). If your final directory has a trailing\nspace (and this is somehow not something you wish to fix),\nappend a trailing slash to the path to avoid losing the\ntrailing whitespace.</p>\n\n<p style=\"margin-left:11%;\"><b>use&nbsp;chroot</b></p>\n\n<p style=\"margin-left:22%;\">If &quot;use chroot&quot; is\ntrue, the rsync daemon will chroot to the &quot;path&quot;\nbefore starting the file transfer with the client. This has\nthe advantage of extra protection against possible\nimplementation security holes, but it has the disadvantages\nof requiring super-user privileges, of not being able to\nfollow symbolic links that are either absolute or outside of\nthe new root path, and of complicating the preservation of\nusers and groups by name (see below).</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">As an\nadditional safety feature, you can specify a dot-dir in the\nmodule&rsquo;s &quot;path&quot; to indicate the point where\nthe chroot should occur. This allows rsync to run in a\nchroot with a non-&quot;/&quot; path for the top of the\ntransfer hierarchy. Doing this guards against unintended\nlibrary loading (since those absolute paths will not be\ninside the transfer hierarchy unless you have used an unwise\npathname), and lets you setup libraries for the chroot that\nare outside of the transfer. For example, specifying\n&quot;/var/rsync/./module1&quot; will chroot to the\n&quot;/var/rsync&quot; directory and set the inside-chroot\npath to &quot;/module1&quot;. If you had omitted the\ndot-dir, the chroot would have used the whole path, and the\ninside-chroot path would have been &quot;/&quot;.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When both\n&quot;use chroot&quot; and &quot;daemon chroot&quot; are\nfalse, OR the inside-chroot path of &quot;use chroot&quot;\nis not &quot;/&quot;, rsync will: (1) munge symlinks by\ndefault for security reasons (see &quot;munge symlinks&quot;\nfor a way to turn this off, but only if you trust your\nusers), (2) substitute leading slashes in absolute paths\nwith the module&rsquo;s path (so that options such as\n<b>--backup-dir</b>, <b>--compare-dest</b>, etc. interpret\nan absolute path as rooted in the module&rsquo;s\n&quot;path&quot; dir), and (3) trim &quot;..&quot; path\nelements from args if rsync believes they would escape the\nmodule hierarchy. The default for &quot;use chroot&quot; is\ntrue, and is the safer choice (especially if the module is\nnot read-only).</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When this\nparameter is enabled <i>and</i> the &quot;name\nconverter&quot; parameter is <i>not</i> set, the\n&quot;numeric ids&quot; parameter will default to being\nenabled (disabling name lookups). This means that if you\nmanually setup name-lookup libraries in your chroot (instead\nof using a name converter) that you need to explicitly set\n<b>numeric&nbsp;ids&nbsp;=&nbsp;false</b> for rsync to do\nname lookups.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If you copy\nlibrary resources into the module&rsquo;s chroot area, you\nshould protect them through your OS&rsquo;s normal\nuser/group or ACL settings (to prevent the rsync\nmodule&rsquo;s user from being able to change them), and\nthen hide them from the user&rsquo;s view via\n&quot;exclude&quot; (see how in the discussion of that\nparameter). However, it&rsquo;s easier and safer to setup a\nname converter.</p>\n\n<p style=\"margin-left:11%;\"><b>daemon&nbsp;chroot</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies a path\nto which the daemon will chroot before beginning\ncommunication with clients. Module paths (and any &quot;use\nchroot&quot; settings) will then be related to this one.\nThis lets you choose if you want the whole daemon to be\nchrooted (with this setting), just the transfers to be\nchrooted (with &quot;use chroot&quot;), or both. Keep in\nmind that the &quot;daemon chroot&quot; area may need\nvarious OS/lib/etc files installed to allow the daemon to\nfunction. By default the daemon runs without any\nchrooting.</p>\n\n<p style=\"margin-left:11%;\"><b>proxy&nbsp;protocol</b></p>\n\n<p style=\"margin-left:22%;\">When this parameter is enabled,\nall incoming connections must start with a V1 or V2 proxy\nprotocol header. If the header is not found, the connection\nis closed.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Setting this to\n<b>true</b> requires a proxy server to forward source IP\ninformation to rsync, allowing you to log proper IP/host\ninfo and make use of client-oriented IP restrictions. The\ndefault of <b>false</b> means that the IP information comes\ndirectly from the socket&rsquo;s metadata. If rsync is not\nbehind a proxy, this should be disabled.</p>\n\n\n<p style=\"margin-left:22%; margin-top: 1em\"><i>CAUTION</i>:\nusing this option can be dangerous if you do not ensure that\nonly the proxy is allowed to connect to the rsync port. If\nany non-proxied connections are allowed through, the client\nwill be able to use a modified rsync to spoof any remote IP\naddress that they desire. You can lock this down using\nsomething like iptables <b>-uid-owner&nbsp;root</b> rules\n(for strict localhost access), various firewall rules, or\nyou can require password authorization so that any spoofing\nby users will not grant extra access.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">This setting is\nglobal. If you need some modules to require this and not\nothers, then you will need to setup multiple rsync daemon\nprocesses on different ports.</p>\n\n<p style=\"margin-left:11%;\"><b>name&nbsp;converter</b></p>\n\n<p style=\"margin-left:22%;\">This parameter lets you specify\na program that will be run by the rsync daemon to do user\n&amp; group conversions between names &amp; ids. This script\nis started prior to any chroot being setup, and runs as the\ndaemon user (not the transfer user). You can specify a fully\nqualified pathname or a program name that is on the\n$PATH.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The program can\nbe used to do normal user &amp; group lookups without having\nto put any extra files into the chroot area of the module\n<i>or</i> you can do customized conversions.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The nameconvert\nprogram has access to all of the environment variables that\nare described in the section on <b>pre-xfer&nbsp;exec</b>.\nThis is useful if you want to customize the conversion using\ninformation about the module and/or the copy request.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">There is a\nsample python script in the support dir named\n&quot;nameconvert&quot; that implements the normal user\n&amp; group lookups. Feel free to customize it or just use\nit as documentation to implement your own.</p>\n\n<p style=\"margin-left:11%;\"><b>numeric&nbsp;ids</b></p>\n\n<p style=\"margin-left:22%;\">Enabling this parameter\ndisables the mapping of users and groups by name for the\ncurrent daemon module. This prevents the daemon from trying\nto load any user/group-related files or libraries. This\nenabling makes the transfer behave as if the client had\npassed the <b>--numeric-ids</b> command-line option. By\ndefault, this parameter is enabled for chroot modules and\ndisabled for non-chroot modules. Also keep in mind that\nuid/gid preservation requires the module to be running as\nroot (see &quot;uid&quot;) or for &quot;fake super&quot; to\nbe configured.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">A\nchroot-enabled module should not have this parameter set to\nfalse unless you&rsquo;re using a &quot;name converter&quot;\nprogram <i>or</i> you&rsquo;ve taken steps to ensure that\nthe module has the necessary resources it needs to translate\nnames and that it is not possible for a user to change those\nresources.</p>\n\n<p style=\"margin-left:11%;\"><b>munge&nbsp;symlinks</b></p>\n\n<p style=\"margin-left:22%;\">This parameter tells rsync to\nmodify all symlinks in the same way as the\n(non-daemon-affecting) <b>--munge-links</b> command-line\noption (using a method described below). This should help\nprotect your files from user trickery when your daemon\nmodule is writable. The default is disabled when &quot;use\nchroot&quot; is on with an inside-chroot path of\n&quot;/&quot;, OR if &quot;daemon chroot&quot; is on,\notherwise it is enabled.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If you disable\nthis parameter on a daemon that is not read-only, there are\ntricks that a user can play with uploaded symlinks to access\ndaemon-excluded items (if your module has any), and, if\n&quot;use chroot&quot; is off, rsync can even be tricked\ninto showing or changing data that is outside the\nmodule&rsquo;s path (as access-permissions allow).</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The way rsync\ndisables the use of symlinks is to prefix each one with the\nstring &quot;/rsyncd-munged/&quot;. This prevents the links\nfrom being used as long as that directory does not exist.\nWhen this parameter is enabled, rsync will refuse to run if\nthat path is a directory or a symlink to a directory. When\nusing the &quot;munge symlinks&quot; parameter in a chroot\narea that has an inside-chroot path of &quot;/&quot;, you\nshould add &quot;/rsyncd-munged/&quot; to the exclude\nsetting for the module so that a user can&rsquo;t try to\ncreate it.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note: rsync\nmakes no attempt to verify that any pre-existing symlinks in\nthe module&rsquo;s hierarchy are as safe as you want them to\nbe (unless, of course, it just copied in the whole\nhierarchy). If you setup an rsync daemon on a new area or\nlocally add symlinks, you can manually protect your symlinks\nfrom being abused by prefixing &quot;/rsyncd-munged/&quot;\nto the start of every symlink&rsquo;s value. There is a perl\nscript in the support directory of the source code named\n&quot;munge-symlinks&quot; that can be used to add or remove\nthis prefix from your symlinks.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When this\nparameter is disabled on a writable module and &quot;use\nchroot&quot; is off (or the inside-chroot path is not\n&quot;/&quot;), incoming symlinks will be modified to drop a\nleading slash and to remove &quot;..&quot; path elements\nthat rsync believes will allow a symlink to escape the\nmodule&rsquo;s hierarchy. There are tricky ways to work\naround this, though, so you had better trust your users if\nyou choose this combination of parameters.</p>\n\n<p style=\"margin-left:11%;\"><b>charset</b></p>\n\n<p style=\"margin-left:22%;\">This specifies the name of the\ncharacter set in which the module&rsquo;s filenames are\nstored. If the client uses an <b>--iconv</b> option, the\ndaemon will use the value of the &quot;charset&quot;\nparameter regardless of the character set the client\nactually passed. This allows the daemon to support charset\nconversion in a chroot module without extra files in the\nchroot area, and also ensures that name-translation is done\nin a consistent manner. If the &quot;charset&quot; parameter\nis not set, the <b>--iconv</b> option is refused, just as if\n&quot;iconv&quot; had been specified via &quot;refuse\noptions&quot;.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If you wish to\nforce users to always use <b>--iconv</b> for a particular\nmodule, add &quot;no-iconv&quot; to the &quot;refuse\noptions&quot; parameter. Keep in mind that this will\nrestrict access to your module to very new rsync\nclients.</p>\n\n\n<p style=\"margin-left:11%;\"><b>max&nbsp;connections</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify the maximum number of simultaneous connections you\nwill allow. Any clients connecting when the maximum has been\nreached will receive a message telling them to try later.\nThe default is 0, which means no limit. A negative value\ndisables the module. See also the &quot;lock file&quot;\nparameter.</p>\n\n<p style=\"margin-left:11%;\"><b>log&nbsp;file</b></p>\n\n<p style=\"margin-left:22%;\">When the &quot;log file&quot;\nparameter is set to a non-empty string, the rsync daemon\nwill log messages to the indicated file rather than using\nsyslog. This is particularly useful on systems (such as AIX)\nwhere <b>syslog()</b> doesn&rsquo;t work for chrooted\nprograms. The file is opened before <b>chroot()</b> is\ncalled, allowing it to be placed outside the transfer. If\nthis value is set on a per-module basis instead of globally,\nthe global log will still contain any authorization failures\nor config-file error messages.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If the daemon\nfails to open the specified file, it will fall back to using\nsyslog and output an error about the failure. (Note that the\nfailure to open the specified log file used to be a fatal\nerror.)</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">This setting\ncan be overridden by using the <b>--log-file=FILE</b> or\n<b>--dparam=logfile=FILE</b> command-line options. The\nformer overrides all the log-file parameters of the daemon\nand all module settings. The latter sets the daemon&rsquo;s\nlog file and the default for all the modules, which still\nallows modules to override the default setting.</p>\n\n\n<p style=\"margin-left:11%;\"><b>syslog&nbsp;facility</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify the syslog facility name to use when logging\nmessages from the rsync daemon. You may use any standard\nsyslog facility name which is defined on your system. Common\nnames are auth, authpriv, cron, daemon, ftp, kern, lpr,\nmail, news, security, syslog, user, uucp, local0, local1,\nlocal2, local3, local4, local5, local6 and local7. The\ndefault is daemon. This setting has no effect if the\n&quot;log file&quot; setting is a non-empty string (either\nset in the per-modules settings, or inherited from the\nglobal settings).</p>\n\n<p style=\"margin-left:11%;\"><b>syslog&nbsp;tag</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify the syslog tag to use when logging messages from the\nrsync daemon. The default is &quot;rsyncd&quot;. This\nsetting has no effect if the &quot;log file&quot; setting is\na non-empty string (either set in the per-modules settings,\nor inherited from the global settings).</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">For example, if\nyou wanted each authenticated user&rsquo;s name to be\nincluded in the syslog tag, you could do something like\nthis:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">syslog tag =\nrsyncd.%RSYNC_USER_NAME%</p>\n\n<p style=\"margin-left:11%;\"><b>max&nbsp;verbosity</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\ncontrol the maximum amount of verbose information that\nyou&rsquo;ll allow the daemon to generate (since the\ninformation goes into the log file). The default is 1, which\nallows the client to request one level of verbosity.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">This also\naffects the user&rsquo;s ability to request higher levels of\n<b>--info</b> and <b>--debug</b> logging. If the max value\nis 2, then no info and/or debug value that is higher than\nwhat would be set by <b>-vv</b> will be honored by the\ndaemon in its logging. To see how high of a verbosity level\nyou need to accept for a particular info/debug level, refer\nto <b>rsync&nbsp;--info=help</b> and\n<b>rsync&nbsp;--debug=help</b>. For instance, it takes\nmax-verbosity 4 to be able to output debug TIME2 and\nFLIST3.</p>\n\n<p style=\"margin-left:11%;\"><b>lock&nbsp;file</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies the\nfile to use to support the &quot;max connections&quot;\nparameter. The rsync daemon uses record locking on this file\nto ensure that the max connections limit is not exceeded for\nthe modules sharing the lock file. The default is\n<b>/var/run/rsyncd.lock</b>.</p>\n\n<p style=\"margin-left:11%;\"><b>read&nbsp;only</b></p>\n\n<p style=\"margin-left:22%;\">This parameter determines\nwhether clients will be able to upload files or not. If\n&quot;read only&quot; is true then any attempted uploads\nwill fail. If &quot;read only&quot; is false then uploads\nwill be possible if file permissions on the daemon side\nallow them. The default is for all modules to be read\nonly.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note that\n&quot;auth users&quot; can override this setting on a\nper-user basis.</p>\n\n<p style=\"margin-left:11%;\"><b>write&nbsp;only</b></p>\n\n<p style=\"margin-left:22%;\">This parameter determines\nwhether clients will be able to download files or not. If\n&quot;write only&quot; is true then any attempted downloads\nwill fail. If &quot;write only&quot; is false then downloads\nwill be possible if file permissions on the daemon side\nallow them. The default is for this parameter to be\ndisabled.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Helpful hint:\nyou probably want to specify &quot;refuse options =\ndelete&quot; for a write-only module.</p>\n\n<p style=\"margin-left:11%;\"><b>open&nbsp;noatime</b></p>\n\n<p style=\"margin-left:22%;\">When set to True, this\nparameter tells the rsync daemon to open files with the\nO_NOATIME flag (on systems that support it) to avoid\nchanging the access time of the files that are being\ntransferred. If your OS does not support the O_NOATIME flag\nthen rsync will silently ignore this option. Note also that\nsome filesystems are mounted to avoid updating the atime on\nread access even without the O_NOATIME flag being set.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When set to\nFalse, this parameters ensures that files on the server are\nnot opened with O_NOATIME.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When set to\nUnset (the default) the user controls the setting via\n<b>--open-noatime</b>.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>list</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"78%\">\n\n\n<p>This parameter determines whether this module is listed\nwhen the client asks for a listing of available modules. In\naddition, if this is false, the daemon will pretend the\nmodule does not exist when a client denied by &quot;hosts\nallow&quot; or &quot;hosts deny&quot; attempts to access it.\nRealize that if &quot;reverse lookup&quot; is disabled\nglobally but enabled for the module, the resulting reverse\nlookup to a potentially client-controlled DNS server may\nstill reveal to the client that it hit an existing module.\nThe default is for modules to be listable.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"6%\">\n\n\n<p><b>uid</b></p></td>\n<td width=\"5%\"></td>\n<td width=\"78%\">\n\n\n<p>This parameter specifies the user name or user ID that\nfile transfers to and from that module should take place as\nwhen the daemon was run as root. In combination with the\n&quot;gid&quot; parameter this determines what file\npermissions are available. The default when run by a\nsuper-user is to switch to the system&rsquo;s\n&quot;nobody&quot; user. The default for a non-super-user is\nto not try to change the user. See also the &quot;gid&quot;\nparameter.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The\nRSYNC_USER_NAME environment variable may be used to request\nthat rsync run as the authorizing user. For example, if you\nwant a rsync to run as the same user that was received for\nthe rsync authentication, this setup is useful:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">uid =\n%RSYNC_USER_NAME% <br>\ngid = *</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"4%\">\n\n\n<p style=\"margin-top: 1em\"><b>gid</b></p></td>\n<td width=\"7%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">This parameter specifies one or\nmore group names/IDs that will be used when accessing the\nmodule. The first one will be the default group, and any\nextra ones be set as supplemental groups. You may also\nspecify a &quot;<b>*</b>&quot; as the first gid in the list,\nwhich will be replaced by all the normal groups for the\ntransfer&rsquo;s user (see &quot;uid&quot;). The default\nwhen run by a super-user is to switch to your OS&rsquo;s\n&quot;nobody&quot; (or perhaps &quot;nogroup&quot;) group\nwith no other supplementary groups. The default for a\nnon-super-user is to not change any group attributes (and\nindeed, your OS may not allow a non-super-user to try to\nchange their group settings).</p></td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The specified\nlist is normally split into tokens based on spaces and\ncommas. However, if the list starts with a comma, then the\nlist is only split on commas, which allows a group name to\ncontain a space. In either case any leading and/or trailing\nwhitespace is removed from the tokens and empty tokens are\nignored.</p>\n\n<p style=\"margin-left:11%;\"><b>daemon&nbsp;uid</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies a uid\nunder which the daemon will run. The daemon usually runs as\nuser root, and when this is left unset the user is left\nunchanged. See also the &quot;uid&quot; parameter.</p>\n\n<p style=\"margin-left:11%;\"><b>daemon&nbsp;gid</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies a gid\nunder which the daemon will run. The daemon usually runs as\ngroup root, and when this is left unset, the group is left\nunchanged. See also the &quot;gid&quot; parameter.</p>\n\n<p style=\"margin-left:11%;\"><b>fake&nbsp;super</b></p>\n\n<p style=\"margin-left:22%;\">Setting &quot;fake super =\nyes&quot; for a module causes the daemon side to behave as\nif the <b>--fake-super</b> command-line option had been\nspecified. This allows the full attributes of a file to be\nstored without having to have the daemon actually running as\nroot.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>filter</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The daemon has its own filter chain that determines what\nfiles it will let the client access. This chain is not sent\nto the client and is independent of any filters the client\nmay have specified. Files excluded by the daemon filter\nchain (<b>daemon-excluded</b> files) are treated as\nnon-existent if the client tries to pull them, are skipped\nwith an error message if the client tries to push them\n(triggering exit code 23), and are never deleted from the\nmodule. You can use daemon filters to prevent clients from\ndownloading or tampering with private administrative files,\nsuch as files you may add to support uid/gid name\ntranslations.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The daemon\nfilter chain is built from the &quot;filter&quot;,\n&quot;include from&quot;, &quot;include&quot;, &quot;exclude\nfrom&quot;, and &quot;exclude&quot; parameters, in that\norder of priority. Anchored patterns are anchored at the\nroot of the module. To prevent access to an entire subtree,\nfor example, &quot;<b>/secret</b>&quot;, you <b>must</b>\nexclude everything in the subtree; the easiest way to do\nthis is with a triple-star pattern like\n&quot;<b>/secret/***</b>&quot;.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The\n&quot;filter&quot; parameter takes a space-separated list of\ndaemon filter rules, though it is smart enough to know not\nto split a token at an internal space in a rule (e.g.\n&quot;<b>-&nbsp;/foo&nbsp;-&nbsp;/bar</b>&quot; is parsed as\ntwo rules). You may specify one or more merge-file rules\nusing the normal syntax. Only one &quot;filter&quot;\nparameter can apply to a given module in the config file, so\nput all the rules you want in a single parameter. Note that\nper-directory merge-file rules do not provide as much\nprotection as global rules, but they can be used to make\n<b>--delete</b> work better during a client download\noperation if the per-dir merge files are included in the\ntransfer and the client requests that they be used.</p>\n\n<p style=\"margin-left:11%;\"><b>exclude</b></p>\n\n<p style=\"margin-left:22%;\">This parameter takes a\nspace-separated list of daemon exclude patterns. As with the\nclient <b>--exclude</b> option, patterns can be qualified\nwith &quot;<b>-</b>&quot; or &quot;<b>+</b>&quot; to\nexplicitly indicate exclude/include. Only one\n&quot;exclude&quot; parameter can apply to a given module.\nSee the &quot;filter&quot; parameter for a description of\nhow excluded files affect the daemon.</p>\n\n<p style=\"margin-left:11%;\"><b>include</b></p>\n\n<p style=\"margin-left:22%;\">Use an &quot;include&quot; to\noverride the effects of the &quot;exclude&quot; parameter.\nOnly one &quot;include&quot; parameter can apply to a given\nmodule. See the &quot;filter&quot; parameter for a\ndescription of how excluded files affect the daemon.</p>\n\n<p style=\"margin-left:11%;\"><b>exclude&nbsp;from</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies the\nname of a file on the daemon that contains daemon exclude\npatterns, one per line. Only one &quot;exclude from&quot;\nparameter can apply to a given module; if you have multiple\nexclude-from files, you can specify them as a merge file in\nthe &quot;filter&quot; parameter. See the &quot;filter&quot;\nparameter for a description of how excluded files affect the\ndaemon.</p>\n\n<p style=\"margin-left:11%;\"><b>include&nbsp;from</b></p>\n\n<p style=\"margin-left:22%;\">Analogue of &quot;exclude\nfrom&quot; for a file of daemon include patterns. Only one\n&quot;include from&quot; parameter can apply to a given\nmodule. See the &quot;filter&quot; parameter for a\ndescription of how excluded files affect the daemon.</p>\n\n<p style=\"margin-left:11%;\"><b>incoming&nbsp;chmod</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify a set of comma-separated chmod strings that will\naffect the permissions of all incoming files (files that are\nbeing received by the daemon). These changes happen after\nall other permission calculations, and this will even\noverride destination-default and/or existing permissions\nwhen the client does not specify <b>--perms</b>. See the\ndescription of the <b>--chmod</b> rsync option and the\n<a href=\"https://man.page/1/chmod\">chmod(1)</a> manpage for information on the format of\nthis string.</p>\n\n<p style=\"margin-left:11%;\"><b>outgoing&nbsp;chmod</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify a set of comma-separated chmod strings that will\naffect the permissions of all outgoing files (files that are\nbeing sent out from the daemon). These changes happen first,\nmaking the sent permissions appear to be different than\nthose stored in the filesystem itself. For instance, you\ncould disable group write permissions on the server while\nhaving it appear to be on to the clients. See the\ndescription of the <b>--chmod</b> rsync option and the\n<a href=\"https://man.page/1/chmod\">chmod(1)</a> manpage for information on the format of\nthis string.</p>\n\n<p style=\"margin-left:11%;\"><b>auth&nbsp;users</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies a\ncomma and/or space-separated list of authorization rules. In\nits simplest form, you list the usernames that will be\nallowed to connect to this module. The usernames do not need\nto exist on the local system. The rules may contain shell\nwildcard characters that will be matched against the\nusername provided by the client for authentication. If\n&quot;auth users&quot; is set then the client will be\nchallenged to supply a username and password to connect to\nthe module. A challenge response authentication protocol is\nused for this exchange. The plain text usernames and\npasswords are stored in the file specified by the\n&quot;secrets file&quot; parameter. The default is for all\nusers to be able to connect without a password (this is\ncalled &quot;anonymous rsync&quot;).</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">In addition to\nusername matching, you can specify groupname matching via a\n&rsquo;@&rsquo; prefix. When using groupname matching, the\nauthenticating username must be a real user on the system,\nor it will be assumed to be a member of no groups. For\nexample, specifying &quot;@rsync&quot; will match the\nauthenticating user if the named user is a member of the\nrsync group.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Finally,\noptions may be specified after a colon (:). The options\nallow you to &quot;deny&quot; a user or a group, set the\naccess to &quot;ro&quot; (read-only), or set the access to\n&quot;rw&quot; (read/write). Setting an auth-rule-specific\nro/rw setting overrides the module&rsquo;s &quot;read\nonly&quot; setting.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Be sure to put\nthe rules in the order you want them to be matched, because\nthe checking stops at the first matching user or group, and\nthat is the only auth that is checked. For example:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">auth users =\njoe:deny @guest:deny admin:rw @rsync:ro susan joe sam</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">In the above\nrule, user joe will be denied access no matter what. Any\nuser that is in the group &quot;guest&quot; is also denied\naccess. The user &quot;admin&quot; gets access in read/write\nmode, but only if the admin user is not in group\n&quot;guest&quot; (because the admin user-matching rule\nwould never be reached if the user is in group\n&quot;guest&quot;). Any other user who is in group\n&quot;rsync&quot; will get read-only access. Finally, users\nsusan, joe, and sam get the ro/rw setting of the module, but\nonly if the user didn&rsquo;t match an earlier\ngroup-matching rule.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If you need to\nspecify a user or group name with a space in it, start your\nlist with a comma to indicate that the list should only be\nsplit on commas (though leading and trailing whitespace will\nalso be removed, and empty entries are just ignored). For\nexample:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">auth users = ,\njoe:deny, @Some Group:deny, admin:rw, @RO Group:ro</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See the\ndescription of the secrets file for how you can have\nper-user passwords as well as per-group passwords. It also\nexplains how a user can authenticate using their user\npassword or (when applicable) a group password, depending on\nwhat rule is being authenticated.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See also the\nsection entitled &quot;USING RSYNC-DAEMON FEATURES VIA A\nREMOTE SHELL CONNECTION&quot; in <a href=\"https://man.page/1/rsync\">rsync(1)</a> for\ninformation on how handle an rsyncd.conf-level username that\ndiffers from the remote-shell-level username when using a\nremote shell to connect to an rsync daemon.</p>\n\n<p style=\"margin-left:11%;\"><b>secrets&nbsp;file</b></p>\n\n<p style=\"margin-left:22%;\">This parameter specifies the\nname of a file that contains the username:password and/or\n@groupname:password pairs used for authenticating this\nmodule. This file is only consulted if the &quot;auth\nusers&quot; parameter is specified. The file is line-based\nand contains one name:password pair per line. Any line has a\nhash (#) as the very first character on the line is\nconsidered a comment and is skipped. The passwords can\ncontain any characters but be warned that many operating\nsystems limit the length of passwords that can be typed at\nthe client end, so you may find that passwords longer than 8\ncharacters don&rsquo;t work.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The use of\ngroup-specific lines are only relevant when the module is\nbeing authorized using a matching &quot;@groupname&quot;\nrule. When that happens, the user can be authorized via\neither their &quot;username:password&quot; line or the\n&quot;@groupname:password&quot; line for the group that\ntriggered the authentication.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">It is up to you\nwhat kind of password entries you want to include, either\nusers, groups, or both. The use of group rules in &quot;auth\nusers&quot; does not require that you specify a group\npassword if you do not want to use shared passwords.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">There is no\ndefault for the &quot;secrets file&quot; parameter, you must\nchoose a name (such as <b>/etc/rsyncd.secrets</b>). The file\nmust normally not be readable by &quot;other&quot;; see\n&quot;strict modes&quot;. If the file is not found or is\nrejected, no logins for a &quot;user auth&quot; module will\nbe possible.</p>\n\n<p style=\"margin-left:11%;\"><b>strict&nbsp;modes</b></p>\n\n<p style=\"margin-left:22%;\">This parameter determines\nwhether or not the permissions on the secrets file will be\nchecked. If &quot;strict modes&quot; is true, then the\nsecrets file must not be readable by any user ID other than\nthe one that the rsync daemon is running under. If\n&quot;strict modes&quot; is false, the check is not\nperformed. The default is true. This parameter was added to\naccommodate rsync running on the Windows operating\nsystem.</p>\n\n<p style=\"margin-left:11%;\"><b>hosts&nbsp;allow</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify a list of comma- and/or whitespace-separated\npatterns that are matched against a connecting\nclient&rsquo;s hostname and IP address. If none of the\npatterns match, then the connection is rejected.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Each pattern\ncan be in one of six forms:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>a dotted decimal IPv4 address of the form a.b.c.d, or an\nIPv6 address of the form a:b:c::d:e:f. In this case the\nincoming machine&rsquo;s IP address must match exactly.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>an address/mask in the form ipaddr/n where ipaddr is the\nIP address and n is the number of one bits in the netmask.\nAll IP addresses which match the masked IP address will be\nallowed in.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>an address/mask in the form ipaddr/maskaddr where ipaddr\nis the IP address and maskaddr is the netmask in dotted\ndecimal notation for IPv4, or similar for IPv6, e.g.\nffff:ffff:ffff:ffff:: instead of /64. All IP addresses which\nmatch the masked IP address will be allowed in.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>a hostname pattern using wildcards. If the hostname of\nthe connecting IP (as determined by a reverse lookup)\nmatches the wildcarded name (using the same rules as normal\nunix filename matching), the client is allowed in. This only\nworks if &quot;reverse lookup&quot; is enabled (the\ndefault).</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>a hostname. A plain hostname is matched against the\nreverse DNS of the connecting IP (if &quot;reverse\nlookup&quot; is enabled), and/or the IP of the given\nhostname is matched against the connecting IP (if\n&quot;forward lookup&quot; is enabled, as it is by default).\nAny match will be allowed in.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>an &rsquo;@&rsquo; followed by a netgroup name, which\nwill match if the reverse DNS of the connecting IP is in the\nspecified netgroup.</p></td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note IPv6\nlink-local addresses can have a scope in the address\nspecification:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">fe80::1%link1\n<br>\nfe80::%link1/64 <br>\nfe80::%link1/ffff:ffff:ffff:ffff::</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">You can also\ncombine &quot;hosts allow&quot; with &quot;hosts deny&quot;\nas a way to add exceptions to your deny list. When both\nparameters are specified, the &quot;hosts allow&quot;\nparameter is checked first and a match results in the client\nbeing able to connect. A non-allowed host is then matched\nagainst the &quot;hosts deny&quot; list to see if it should\nbe rejected. A host that does not match either list is\nallowed to connect.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The default is\nno &quot;hosts allow&quot; parameter, which means all hosts\ncan connect.</p>\n\n<p style=\"margin-left:11%;\"><b>hosts&nbsp;deny</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify a list of comma- and/or whitespace-separated\npatterns that are matched against a connecting clients\nhostname and IP address. If the pattern matches then the\nconnection is rejected. See the &quot;hosts allow&quot;\nparameter for more information.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The default is\nno &quot;hosts deny&quot; parameter, which means all hosts\ncan connect.</p>\n\n<p style=\"margin-left:11%;\"><b>reverse&nbsp;lookup</b></p>\n\n<p style=\"margin-left:22%;\">Controls whether the daemon\nperforms a reverse lookup on the client&rsquo;s IP address\nto determine its hostname, which is used for &quot;hosts\nallow&quot; &amp; &quot;hosts deny&quot; checks and the\n&quot;%h&quot; log escape. This is enabled by default, but\nyou may wish to disable it to save time if you know the\nlookup will not return a useful result, in which case the\ndaemon will use the name &quot;UNDETERMINED&quot;\ninstead.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If this\nparameter is enabled globally (even by default), rsync\nperforms the lookup as soon as a client connects, so\ndisabling it for a module will not avoid the lookup. Thus,\nyou probably want to disable it globally and then enable it\nfor modules that need the information.</p>\n\n<p style=\"margin-left:11%;\"><b>forward&nbsp;lookup</b></p>\n\n<p style=\"margin-left:22%;\">Controls whether the daemon\nperforms a forward lookup on any hostname specified in an\nhosts allow/deny setting. By default this is enabled,\nallowing the use of an explicit hostname that would not be\nreturned by reverse DNS of the connecting IP.</p>\n\n<p style=\"margin-left:11%;\"><b>ignore&nbsp;errors</b></p>\n\n<p style=\"margin-left:22%;\">This parameter tells rsyncd to\nignore I/O errors on the daemon when deciding whether to run\nthe delete phase of the transfer. Normally rsync skips the\n<b>--delete</b> step if any I/O errors have occurred in\norder to prevent disastrous deletion due to a temporary\nresource shortage or other I/O error. In some cases this\ntest is counter productive so you can use this parameter to\nturn off this behavior.</p>\n\n\n<p style=\"margin-left:11%;\"><b>ignore&nbsp;nonreadable</b></p>\n\n<p style=\"margin-left:22%;\">This tells the rsync daemon to\ncompletely ignore files that are not readable by the user.\nThis is useful for public archives that may have some\nnon-readable files among the directories, and the sysadmin\ndoesn&rsquo;t want those files to be seen at all.</p>\n\n\n<p style=\"margin-left:11%;\"><b>transfer&nbsp;logging</b></p>\n\n<p style=\"margin-left:22%;\">This parameter enables per-file\nlogging of downloads and uploads in a format somewhat\nsimilar to that used by ftp daemons. The daemon always logs\nthe transfer at the end, so if a transfer is aborted, no\nmention will be made in the log file.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If you want to\ncustomize the log lines, see the &quot;log format&quot;\nparameter.</p>\n\n<p style=\"margin-left:11%;\"><b>log&nbsp;format</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify the format used for logging file transfers when\ntransfer logging is enabled. The format is a text string\ncontaining embedded single-character escape sequences\nprefixed with a percent (%) character. An optional numeric\nfield width may also be specified between the percent and\nthe escape letter (e.g.\n&quot;<b>%-50n&nbsp;%8l&nbsp;%07p</b>&quot;). In addition,\none or more apostrophes may be specified prior to a\nnumerical escape to indicate that the numerical value should\nbe made more human-readable. The 3 supported levels are the\nsame as for the <b>--human-readable</b> command-line option,\nthough the default is for human-readability to be off. Each\nadded apostrophe increases the level (e.g.\n&quot;<b>%&rsquo;&rsquo;l&nbsp;%&rsquo;b&nbsp;%f</b>&quot;).</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The default log\nformat is\n&quot;<b>%o&nbsp;%h&nbsp;[%a]&nbsp;%m&nbsp;(%u)&nbsp;%f&nbsp;%l</b>&quot;,\nand a &quot;<b>%t&nbsp;[%p]</b>&quot; is always prefixed\nwhen using the &quot;log file&quot; parameter. (A perl\nscript that will summarize this default log format is\nincluded in the rsync source code distribution in the\n&quot;support&quot; subdirectory: rsyncstats.)</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The\nsingle-character escapes that are understood are as\nfollows:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%a the remote IP address (only available for a\ndaemon)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%b the number of bytes actually transferred</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%B the permission bits of the file (e.g. rwxrwxrwt)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%c the total size of the block checksums received for\nthe basis file (only when sending)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%C the full-file checksum if it is known for the file.\nFor older rsync protocols/versions, the checksum was salted,\nand is thus not a useful value (and is not displayed when\nthat is the case). For the checksum to output for a file,\neither the <b>--checksum</b> option must be in-effect or the\nfile must have been transferred without a salted checksum\nbeing used. See the <b>--checksum-choice</b> option for a\nway to choose the algorithm.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%f the filename (long form on sender; no trailing\n&quot;/&quot;)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%G the gid of the file (decimal) or\n&quot;DEFAULT&quot;</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%h the remote host name (only available for a\ndaemon)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%i an itemized list of what is being updated</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%l the length of the file in bytes</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%L the string &quot;<b>-&gt;&nbsp;SYMLINK</b>&quot;,\n&quot;<b>=&gt;&nbsp;HARDLINK</b>&quot;, or &quot;&quot;\n(where <b>SYMLINK</b> or <b>HARDLINK</b> is a filename)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%m the module name</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%M the last-modified time of the file</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%n the filename (short form; trailing &quot;/&quot; on\ndir)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%o the operation, which is &quot;send&quot;,\n&quot;recv&quot;, or &quot;del.&quot; (the latter includes\nthe trailing period)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%p the process ID of this rsync session</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%P the module path</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%t the current date time</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%u the authenticated username or an empty string</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p>%U the uid of the file (decimal)</p></td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">For a list of\nwhat the characters mean that are output by &quot;%i&quot;,\nsee the <b>--itemize-changes</b> option in the rsync\nmanpage.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note that some\nof the logged output changes when talking with older rsync\nversions. For instance, deleted files were only output as\nverbose messages prior to rsync 2.6.4.</p>\n\n<p style=\"margin-left:11%;\"><b>timeout</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\noverride the clients choice for I/O timeout for this module.\nUsing this parameter you can ensure that rsync won&rsquo;t\nwait on a dead client forever. The timeout is specified in\nseconds. A value of zero means no timeout and is the\ndefault. A good choice for anonymous rsync daemons may be\n600 (giving a 10 minute timeout).</p>\n\n<p style=\"margin-left:11%;\"><b>refuse&nbsp;options</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nspecify a space-separated list of rsync command-line options\nthat will be refused by your rsync daemon. You may specify\nthe full option name, its one-letter abbreviation, or a\nwild-card string that matches multiple options. Beginning in\n3.2.0, you can also negate a match term by starting it with\na &quot;!&quot;.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When an option\nis refused, the daemon prints an error message and\nexits.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">For example,\nthis would refuse <b>--checksum</b> (<b>-c</b>) and all the\nvarious delete options:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">refuse options\n= c delete</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The reason the\nabove refuses all delete options is that the options imply\n<b>--delete</b>, and implied options are refused just like\nexplicit options.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The use of a\nnegated match allows you to fine-tune your refusals after a\nwild-card, such as this:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">refuse options\n= delete-* !delete-during</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Negated\nmatching can also turn your list of refused options into a\nlist of accepted options. To do this, begin the list with a\n&quot;<b>*</b>&quot; (to refuse all options) and then\nspecify one or more negated matches to accept. For\nexample:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">refuse options\n= * !a !v !compress*</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Don&rsquo;t\nworry that the &quot;<b>*</b>&quot; will refuse certain\nvital options such as <b>--dry-run</b>, <b>--server</b>,\n<b>--no-iconv</b>, <b>--protect-args</b>, etc. These\nimportant options are not matched by wild-card, so they must\nbe overridden by their exact name. For instance, if\nyou&rsquo;re forcing iconv transfers you could use something\nlike this:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">refuse options\n= * no-iconv !a !v</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">As an\nadditional aid (beginning in 3.2.0), refusing (or\n&quot;<b>!refusing</b>&quot;) the &quot;a&quot; or\n&quot;archive&quot; option also affects all the options that\nthe <b>--archive</b> option implies (<b>-rdlptgoD</b>), but\nonly if the option is matched explicitly (not using a\nwildcard). If you want to do something tricky, you can use\n&quot;<b>archive*</b>&quot; to avoid this side-effect, but\nkeep in mind that no normal rsync client ever sends the\nactual archive option to the server.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">As an\nadditional safety feature, the refusal of &quot;delete&quot;\nalso refuses <b>remove-source-files</b> when the daemon is\nthe sender; if you want the latter without the former,\ninstead refuse &quot;<b>delete-*</b>&quot; as that refuses\nall the delete modes without affecting\n<b>--remove-source-files</b>. (Keep in mind that the\nclient&rsquo;s <b>--delete</b> option typically results in\n<b>--delete-during</b>.)</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">When\nun-refusing delete options, you should either specify\n&quot;<b>!delete*</b>&quot; (to accept all delete options)\nor specify a limited set that includes &quot;delete&quot;,\nsuch as:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">refuse options\n= * !a !delete !delete-during</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">... whereas\nthis accepts any delete option except\n<b>--delete-after</b>:</p>\n\n<p style=\"margin-left:28%; margin-top: 1em\">refuse options\n= * !a !delete* delete-after</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">A note on\nrefusing &quot;compress&quot;&nbsp;-- it is better to set\nthe &quot;dont compress&quot; daemon parameter to\n&quot;<b>*</b>&quot; because that disables compression\nsilently instead of returning an error that forces the\nclient to remove the <b>-z</b> option.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">If you are\nun-refusing the compress option, you probably want to match\n&quot;<b>!compress*</b>&quot; so that you also accept the\n<b>--compress-level</b> option.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note that the\n&quot;copy-devices&quot; &amp; &quot;write-devices&quot;\noptions are refused by default, but they can be explicitly\naccepted with &quot;<b>!copy-devices</b>&quot; and/or\n&quot;<b>!write-devices</b>&quot;. The options\n&quot;log-file&quot; and &quot;log-file-format&quot; are\nforcibly refused and cannot be accepted.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Here are all\nthe options that are not matched by wild-cards:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--server</b>: Required for rsync to even work.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--rsh</b>, <b>-e</b>: Required to convey\ncompatibility flags to the server.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--out-format</b>: This is required to convey output\nbehavior to a remote receiver. While rsync passes the older\nalias <b>--log-format</b> for compatibility reasons, this\noptions should not be confused with\n<b>--log-file-format</b>.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--sender</b>: Use &quot;write only&quot; parameter\ninstead of refusing this.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--dry-run</b>, <b>-n</b>: Who would want to disable\nthis?</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--protect-args</b>, <b>-s</b>: This actually makes\ntransfers safer.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--from0</b>, <b>-0</b>: Makes it easier to\naccept/refuse <b>--files-from</b> without affecting this\nhelpful modifier.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--iconv</b>: This is auto-disabled based on\n&quot;charset&quot; parameter.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--no-iconv</b>: Most transfers use this option.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--checksum-seed</b>: Is a fairly rare, safe\noption.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>--write-devices</b>: Is non-wild but also\nauto-disabled.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>dont&nbsp;compress</b></p>\n\n<p style=\"margin-left:22%;\">This parameter allows you to\nselect filenames based on wildcard patterns that should not\nbe compressed when pulling files from the daemon (no\nanalogous parameter exists to govern the pushing of files to\na daemon). Compression can be expensive in terms of CPU\nusage, so it is usually good to not try to compress files\nthat won&rsquo;t compress well, such as already compressed\nfiles.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The &quot;dont\ncompress&quot; parameter takes a space-separated list of\ncase-insensitive wildcard patterns. Any source filename\nmatching one of the patterns will be compressed as little as\npossible during the transfer. If the compression algorithm\nhas an &quot;off&quot; level (such as zlib/zlibx) then no\ncompression occurs for those files. Other algorithms have\nthe level minimized to reduces the CPU usage as much as\npossible.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">See the\n<b>--skip-compress</b> parameter in the <a href=\"https://man.page/1/rsync\">rsync(1)</a>\nmanpage for the list of file suffixes that are not\ncompressed by default. Specifying a value for the &quot;dont\ncompress&quot; parameter changes the default when the daemon\nis the sender.</p>\n\n<p style=\"margin-left:11%;\"><b>early&nbsp;exec</b>,\n<b>pre-xfer&nbsp;exec</b>, <b>post-xfer&nbsp;exec</b></p>\n\n<p style=\"margin-left:22%;\">You may specify a command to be\nrun in the early stages of the connection, or right before\nand/or after the transfer. If the <b>early&nbsp;exec</b> or\n<b>pre-xfer&nbsp;exec</b> command returns an error code, the\ntransfer is aborted before it begins. Any output from the\n<b>pre-xfer&nbsp;exec</b> command on stdout (up to several\nKB) will be displayed to the user when aborting, but is\n<i>not</i> displayed if the script returns success. The\nother programs cannot send any text to the user. All output\nexcept for the <b>pre-xfer&nbsp;exec</b> stdout goes to the\ncorresponding daemon&rsquo;s stdout/stderr, which is\ntypically discarded. See the <b>--no-detatch</b> option for\na way to see the daemon&rsquo;s output, which can assist\nwith debugging.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note that the\n<b>early&nbsp;exec</b> command runs before any part of the\ntransfer request is known except for the module name. This\nhelper script can be used to setup a disk mount or decrypt\nsome data into a module dir, but you may need to use\n<b>lock&nbsp;file</b> and <b>max&nbsp;connections</b> to\navoid concurrency issues. If the client rsync specified the\n<b>--early-input=FILE</b> option, it can send up to about 5K\nof data to the stdin of the early script. The stdin will\notherwise be empty.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Note that the\n<b>post-xfer&nbsp;exec</b> command is still run even if one\nof the other scripts returns an error code. The\n<b>pre-xfer&nbsp;exec</b> command will <i>not</i> be run,\nhowever, if the <b>early&nbsp;exec</b> command fails.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">The following\nenvironment variables will be set, though some are specific\nto the pre-xfer or the post-xfer environment:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_MODULE_NAME</b>: The name of the module being\naccessed.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_MODULE_PATH</b>: The path configured for the\nmodule.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_HOST_ADDR</b>: The accessing host&rsquo;s IP\naddress.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_HOST_NAME</b>: The accessing host&rsquo;s\nname.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_USER_NAME</b>: The accessing user&rsquo;s name\n(empty if no user).</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_PID</b>: A unique number for this transfer.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_REQUEST</b>: (pre-xfer only) The module/path\ninfo specified by the user. Note that the user can specify\nmultiple source files, so the request can be something like\n&quot;mod/path1 mod/path2&quot;, etc.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_ARG#</b>: (pre-xfer only) The pre-request\narguments are set in these numbered values. RSYNC_ARG0 is\nalways &quot;rsyncd&quot;, followed by the options that were\nused in RSYNC_ARG1, and so on. There will be a value of\n&quot;.&quot; indicating that the options are done and the\npath args are beginning&nbsp;-- these contain similar\ninformation to RSYNC_REQUEST, but with values separated and\nthe module name stripped off.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_EXIT_STATUS</b>: (post-xfer only) the server\nside&rsquo;s exit value. This will be 0 for a successful\nrun, a positive value for an error that the server\ngenerated, or a -1 if rsync failed to exit properly. Note\nthat an error that occurs on the client side does not\ncurrently get sent to the server side, so this is not the\nfinal exit status for the whole transfer.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"22%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"9%\"></td>\n<td width=\"68%\">\n\n\n<p><b>RSYNC_RAW_STATUS</b>: (post-xfer only) the raw exit\nvalue from <b>waitpid()</b>.</p></td></tr>\n</table>\n\n<p style=\"margin-left:22%; margin-top: 1em\">Even though the\ncommands can be associated with a particular module, they\nare run using the permissions of the user that started the\ndaemon (not the module&rsquo;s uid/gid setting) without any\nchroot restrictions.</p>\n\n<p style=\"margin-left:22%; margin-top: 1em\">These settings\nhonor 2 environment variables: use RSYNC_SHELL to set a\nshell to use when running the command (which otherwise uses\nyour <b>system()</b> call&rsquo;s default shell), and use\nRSYNC_NO_XFER_EXEC to disable both options completely.</p>\n\n<h2>CONFIG DIRECTIVES\n<a name=\"CONFIG DIRECTIVES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">There are\ncurrently two config directives available that allow a\nconfig file to incorporate the contents of other files:\n<b>&amp;include</b> and <b>&amp;merge</b>. Both allow a\nreference to either a file or a directory. They differ in\nhow segregated the file&rsquo;s contents are considered to\nbe.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>&amp;include</b> directive treats each file as more\ndistinct, with each one inheriting the defaults of the\nparent file, starting the parameter parsing as\nglobals/defaults, and leaving the defaults unchanged for the\nparsing of the rest of the parent file.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>&amp;merge</b> directive, on the other hand, treats the\nfile&rsquo;s contents as if it were simply inserted in place\nof the directive, and thus it can set parameters in a module\nstarted in another file, can affect the defaults for other\nfiles, etc.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When an\n<b>&amp;include</b> or <b>&amp;merge</b> directive refers to\na directory, it will read in all the <b>*.conf</b> or\n<b>*.inc</b> files (respectively) that are contained inside\nthat directory (without any recursive scanning), with the\nfiles sorted into alpha order. So, if you have a directory\nnamed &quot;rsyncd.d&quot; with the files\n&quot;foo.conf&quot;, &quot;bar.conf&quot;, and\n&quot;baz.conf&quot; inside it, this directive:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&amp;include\n/path/rsyncd.d</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">would be the\nsame as this set of directives:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&amp;include\n/path/rsyncd.d/bar.conf <br>\n&amp;include /path/rsyncd.d/baz.conf <br>\n&amp;include /path/rsyncd.d/foo.conf</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">except that it\nadjusts as files are added and removed from the\ndirectory.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The advantage\nof the <b>&amp;include</b> directive is that you can define\none or more modules in a separate file without worrying\nabout unintended side-effects between the self-contained\nmodule files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The advantage\nof the <b>&amp;merge</b> directive is that you can load\nconfig snippets that can be included into multiple module\ndefinitions, and you can also set global values that will\naffect connections (such as <b>motd&nbsp;file</b>), or\nglobals that will affect other include files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For example,\nthis is a useful /etc/rsyncd.conf file:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">port = 873 <br>\nlog file = /var/log/rsync.log <br>\npid file = /var/lock/rsync.lock</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">&amp;merge\n/etc/rsyncd.d <br>\n&amp;include /etc/rsyncd.d</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This would\nmerge any <b>/etc/rsyncd.d/*.inc</b> files (for global\nvalues that should stay in effect), and then include any\n<b>/etc/rsyncd.d/*.conf</b> files (defining modules without\nany global-value cross-talk).</p>\n\n<h2>AUTHENTICATION STRENGTH\n<a name=\"AUTHENTICATION STRENGTH\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\nauthentication protocol used in rsync is a 128 bit MD4 based\nchallenge response system. This is fairly weak protection,\nthough (with at least one brute-force hash-finding algorithm\npublicly available), so if you want really top-quality\nsecurity, then I recommend that you run rsync over ssh.\n(Yes, a future version of rsync will switch over to a\nstronger hashing method.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Also note that\nthe rsync daemon protocol does not currently provide any\nencryption of the data that is transferred over the\nconnection. Only authentication is provided. Use ssh as the\ntransport if you want encryption.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">You can also\nmake use of SSL/TLS encryption if you put rsync behind an\nSSL proxy.</p>\n\n<h2>SSL/TLS Daemon Setup\n<a name=\"SSL/TLS Daemon Setup\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">When setting up\nan rsync daemon for access via SSL/TLS, you will need to\nconfigure a proxy (such as haproxy or nginx) as the\nfront-end that handles the encryption.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p style=\"margin-top: 1em\">o</p></td>\n<td width=\"10%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">You should limit the access to\nthe backend-rsyncd port to only allow the proxy to connect.\nIf it is on the same host as the proxy, then configuring it\nto only listen on localhost is a good idea.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>o</p></td>\n<td width=\"10%\"></td>\n<td width=\"78%\">\n\n\n<p>You should consider turning on the\n<b>proxy&nbsp;protocol</b> parameter if your proxy supports\nsending that information. The examples below assume that\nthis is enabled.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">An example\nhaproxy setup is as follows:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">frontend\nfe_rsync-ssl <br>\nbind :::874 ssl crt\n/etc/letsencrypt/example.com/combined.pem <br>\nmode tcp <br>\nuse_backend be_rsync</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">backend\nbe_rsync <br>\nmode tcp <br>\nserver local-rsync 127.0.0.1:873 check send-proxy</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">An example\nnginx proxy setup is as follows:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">stream { <br>\nserver { <br>\nlisten 874 ssl; <br>\nlisten [::]:874 ssl;</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">ssl_certificate\n/etc/letsencrypt/example.com/fullchain.pem; <br>\nssl_certificate_key\n/etc/letsencrypt/example.com/privkey.pem;</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">proxy_pass\nlocalhost:873; <br>\nproxy_protocol on; # Requires &quot;proxy protocol =\ntrue&quot; <br>\nproxy_timeout 1m; <br>\nproxy_connect_timeout 5s; <br>\n} <br>\n}</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">A simple\nrsyncd.conf file that allow anonymous rsync to a ftp area at\n<b>/home/ftp</b> would be:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[ftp] <br>\npath = /home/ftp <br>\ncomment = ftp export area</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A more\nsophisticated example would be:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">uid = nobody\n<br>\ngid = nobody <br>\nuse chroot = yes <br>\nmax connections = 4 <br>\nsyslog facility = local5 <br>\npid file = /var/run/rsyncd.pid</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[ftp] <br>\npath = /var/ftp/./pub <br>\ncomment = whole ftp area (approx 6.1 GB)</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[sambaftp] <br>\npath = /var/ftp/./pub/samba <br>\ncomment = Samba ftp area (approx 300 MB)</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[rsyncftp] <br>\npath = /var/ftp/./pub/rsync <br>\ncomment = rsync ftp area (approx 6 MB)</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[sambawww] <br>\npath = /public_html/samba <br>\ncomment = Samba WWW pages (approx 240 MB)</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[cvs] <br>\npath = /data/cvs <br>\ncomment = CVS repository (requires authentication) <br>\nauth users = tridge, susan <br>\nsecrets file = /etc/rsyncd.secrets</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n/etc/rsyncd.secrets file would look something like this:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">tridge:mypass\n<br>\nsusan:herpass</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/rsyncd.conf\nor rsyncd.conf</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/rsync\">rsync(1)</a>,\n<a href=\"https://man.page/1/rsync-ssl\">rsync-ssl(1)</a></p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Please report\nbugs! The rsync bug tracking system is online at\nhttps://rsync.samba.org/.</p>\n\n<h2>VERSION\n<a name=\"VERSION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This man page\nis current for version 3.2.3 of rsync.</p>\n\n<h2>CREDITS\n<a name=\"CREDITS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">rsync is\ndistributed under the GNU General Public License. See the\nfile COPYING for details.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The primary ftp\nsite for rsync is ftp://rsync.samba.org/pub/rsync</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A web site is\navailable at https://rsync.samba.org/.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">We would be\ndelighted to hear from you if you like this program.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This program\nuses the zlib compression library written by Jean-loup\nGailly and Mark Adler.</p>\n\n<h2>THANKS\n<a name=\"THANKS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Thanks to\nWarren Stanley for his original idea and patch for the rsync\ndaemon. Thanks to Karsten Thygesen for his many suggestions\nand documentation!</p>\n\n<h2>AUTHOR\n<a name=\"AUTHOR\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">rsync was\nwritten by Andrew Tridgell and Paul Mackerras. Many people\nhave later contributed to it.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Mailing lists\nfor support and development are available at\nhttps://lists.samba.org/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#FILE FORMAT\">FILE FORMAT</a>","<a href=\"#LAUNCHING THE RSYNC DAEMON\">LAUNCHING THE RSYNC DAEMON</a>","<a href=\"#GLOBAL PARAMETERS\">GLOBAL PARAMETERS</a>","<a href=\"#MODULE PARAMETERS\">MODULE PARAMETERS</a>","<a href=\"#CONFIG DIRECTIVES\">CONFIG DIRECTIVES</a>","<a href=\"#AUTHENTICATION STRENGTH\">AUTHENTICATION STRENGTH</a>","<a href=\"#SSL/TLS Daemon Setup\">SSL/TLS Daemon Setup</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#VERSION\">VERSION</a>","<a href=\"#CREDITS\">CREDITS</a>","<a href=\"#THANKS\">THANKS</a>","<a href=\"#AUTHOR\">AUTHOR</a>"],"level":5}