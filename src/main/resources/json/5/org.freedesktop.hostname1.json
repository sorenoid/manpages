{"name":"org.freedesktop.hostname1","description":"org.freedesktop.hostname1 - The D-Bus interface of systemd-hostnamed","body":"\n\n<h1 align=\"center\">ORG.FREEDESKTOP.HOSTNAME1</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">org.freedesktop.hostname1\n- The D-Bus interface of systemd-hostnamed</p>\n\n<h2>INTRODUCTION\n<a name=\"INTRODUCTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>systemd-hostnamed.service</b>(8)\nis a system service that can be used to control the hostname\nand related machine metadata from user programs. This page\ndescribes the hostname semantics and the D-Bus\ninterface.</p>\n\n<h2>THE D-BUS API\n<a name=\"THE D-BUS API\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The service\nexposes the following interfaces on the bus:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">node\n/org/freedesktop/hostname1 { <br>\ninterface org.freedesktop.hostname1 { <br>\nmethods: <br>\nSetHostname(in s hostname, <br>\nin b interactive); <br>\nSetStaticHostname(in s hostname, <br>\nin b interactive); <br>\nSetPrettyHostname(in s hostname, <br>\nin b interactive); <br>\nSetIconName(in s icon, <br>\nin b interactive); <br>\nSetChassis(in s chassis, <br>\nin b interactive); <br>\nSetDeployment(in s deployment, <br>\nin b interactive); <br>\nSetLocation(in s location, <br>\nin b interactive); <br>\nGetProductUUID(in b interactive, <br>\nout ay uuid); <br>\nDescribe(out s json); <br>\nproperties: <br>\nreadonly s Hostname = '...'; <br>\nreadonly s StaticHostname = '...'; <br>\nreadonly s PrettyHostname = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s DefaultHostname = '...'; <br>\nreadonly s HostnameSource = '...'; <br>\nreadonly s IconName = '...'; <br>\nreadonly s Chassis = '...'; <br>\nreadonly s Deployment = '...'; <br>\nreadonly s Location = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s KernelName = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s KernelRelease = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s KernelVersion = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s OperatingSystemPrettyName = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s OperatingSystemCPEName = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s HomeURL = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s HardwareVendor = '...'; <br>\n\n@org.freedesktop.DBus.Property.EmitsChangedSignal(&quot;const&quot;)\n<br>\nreadonly s HardwareModel = '...'; <br>\n}; <br>\ninterface org.freedesktop.DBus.Peer { ... }; <br>\ninterface org.freedesktop.DBus.Introspectable { ... }; <br>\ninterface org.freedesktop.DBus.Properties { ... }; <br>\n};</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Whenever the\nhostname or other metadata is changed via the daemon,\n<b>PropertyChanged</b> signals are sent out to subscribed\nclients. Changing a hostname using this interface is\nauthenticated via <b><font color=\"#0000FF\">polkit</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n<font color=\"#000000\">.</font></p>\n\n<h2>SEMANTICS\n<a name=\"SEMANTICS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>StaticHostname</i> property exposes the\n&quot;static&quot; hostname configured in /etc/hostname. It\nis not always in sync with the current hostname as returned\nby the <a href=\"https://man.page/3/gethostname\">gethostname(3)</a> system call. If no static\nhostname is configured this property will be the empty\nstring.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">When\n<a href=\"https://man.page/1/systemd\">systemd(1)</a> or <b>systemd-hostnamed.service</b>(8) set\nthe hostname, this static hostname <i>has the highest\npriority</i>.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>Hostname</i> property exposes the actual hostname\nconfigured in the kernel via <a href=\"https://man.page/3/sethostname\">sethostname(3)</a>. It can\nbe different from the static hostname. This property is\nnever empty.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>PrettyHostname</i> property exposes the <i>pretty\nhostname</i> which is a free-form UTF-8 hostname for\npresentation to the user. User interfaces should ensure that\nthe pretty hostname and the static hostname stay in sync.\nE.g. when the former is &quot;Lennart&rsquo;s Computer&quot;\nthe latter should be &quot;lennarts-computer&quot;. If no\npretty hostname is set this setting will be the empty\nstring. Applications should then find a suitable fallback,\nsuch as the dynamic hostname.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>DefaultHostname</i> property exposes the default hostname\n(configured through <a href=\"https://man.page/5/os-release\">os-release(5)</a>, or a fallback set\nat compilation time).</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>HostnameSource</i> property exposes the origin of the\ncurrently configured hostname. One of &quot;static&quot;\n(set from /etc/hostname), &quot;transient&quot; (a\nnon-permanent hostname from an external source),\n&quot;default&quot; (the value from os-release or the\ncompiled-in fallback).</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>IconName</i> property exposes the <i>icon name</i>\nfollowing the XDG icon naming spec. If not set, information\nsuch as the chassis type (see below) is used to find a\nsuitable fallback icon name (i.e.\n&quot;computer-laptop&quot; vs. &quot;computer-desktop&quot;\nis picked based on the chassis information). If no such data\nis available, the empty string is returned. In that case an\napplication should fall back to a replacement icon, for\nexample &quot;computer&quot;. If this property is set to the\nempty string, the automatic fallback name selection is\nenabled again.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\n<i>Chassis</i> property exposes a <i>chassis type</i>, one\nof the currently defined chassis types: &quot;desktop&quot;,\n&quot;laptop&quot;, &quot;server&quot;, &quot;tablet&quot;,\n&quot;handset&quot;, as well as the special chassis types\n&quot;vm&quot; and &quot;container&quot; for virtualized\nsystems. Note that in most cases the chassis type will be\ndetermined automatically from DMI/SMBIOS/ACPI firmware\ninformation. Writing to this setting is hence useful only to\noverride misdetected chassis types, or to configure the\nchassis type if it could not be auto-detected. Set this\nproperty to the empty string to reenable the automatic\ndetection of the chassis type from firmware\ninformation.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Note\nthat systemd-hostnamed starts only on request and terminates\nafter a short idle period. This effectively means that\n<b>PropertyChanged</b> messages are not sent out for changes\nmade directly on the files (as in: administrator edits the\nfiles with vi). This is the intended behavior: manual\nconfiguration changes should require manual\nreloading.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\ntransient (dynamic) hostname exposed by the <i>Hostname</i>\nproperty maps directly to the kernel hostname. This hostname\nshould be assumed to be highly dynamic, and hence should be\nwatched directly, without depending on\n<b>PropertyChanged</b> messages from systemd-hostnamed. To\naccomplish this, open /proc/sys/kernel/hostname and\n<a href=\"https://man.page/3/poll\">poll(3)</a> for <b>SIGHUP</b> which is triggered by the\nkernel every time the hostname changes. Again: this is\nspecial for the transient (dynamic) hostname, and does not\napply to the configured (fixed) hostname.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Applications\nmay read the hostname data directly if hostname change\nnotifications are not necessary. Use <a href=\"https://man.page/3/gethostname\">gethostname(3)</a>,\n/etc/hostname (possibly with per-distribution fallbacks),\nand <a href=\"https://man.page/3/machine-info\">machine-info(3)</a> for that. For more information on\nthese files and syscalls see the respective man\npages.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><i>KernelName</i>,\n<i>KernelRelease</i>, and <i>KernelVersion</i> expose the\nkernel name (e.g. &quot;Linux&quot;), release (e.g.\n&quot;5.0.0-11&quot;), and version (i.e. the build number,\ne.g. &quot;#11&quot;) as reported by <a href=\"https://man.page/2/uname\">uname(2)</a>.\n<i>OperatingSystemPrettyName</i>,\n<i>OperatingSystemCPEName</i>, and <i>HomeURL</i> expose the\n<i>PRETTY_NAME=</i>, <i>CPE_NAME=</i> and <i>HOME_URL=</i>\nfields from <a href=\"https://man.page/5/os-release\">os-release(5)</a>. The purpose of those\nproperties is to allow remote clients to access this\ninformation over D-Bus. Local clients can access the\ninformation directly.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Methods\n<br>\nSetHostname()</b> sets the transient (dynamic) hostname,\nwhich is used if no static hostname is set. This value must\nbe an internet-style hostname, 7-bit lowercase ASCII, no\nspecial chars/spaces. An empty string will unset the\ntransient hostname.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>SetStaticHostname()</b>\nsets the static hostname which is exposed by the\n<i>StaticHostname</i> property. When called with an empty\nargument, the static configuration in /etc/hostname is\nremoved. Since the static hostname has the highest priority,\ncalling this function usually affects also the\n<i>Hostname</i> property and the effective hostname\nconfigured in the kernel.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>SetPrettyHostname()</b>\nsets the pretty hostname which is exposed by the\n<i>PrettyHostname</i> property.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>SetIconName()</b>,\n<b>SetChassis()</b>, <b>SetDeployment()</b>, and\n<b>SetLocation()</b> set the properties <i>IconName</i> (the\nname of the icon representing for the machine),\n<i>Chassis</i> (the machine form factor), <i>Deployment</i>\n(the system deployment environment), and <i>Location</i>\n(physical system location), respectively.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><i>PrettyHostname</i>,\n<i>IconName</i>, <i>Chassis</i>, <i>Deployment</i>, and\n<i>Location</i> are stored in /etc/machine-info. See\n<a href=\"https://man.page/5/machine-info\">machine-info(5)</a> for the semantics of those\nsettings.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>GetProductUUID()</b>\nreturns the &quot;product UUID&quot; as exposed by the\nkernel based on DMI information in\n/sys/class/dmi/id/product_uuid. Reading the file directly\nrequires root privileges, and this method allows access to\nunprivileged clients through the polkit\nframework.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Describe()</b>\nreturns a JSON representation of all properties in\none.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Security</b>\n<br>\nThe <i>interactive</i> boolean parameters can be used to\ncontrol whether polkit should interactively ask the user for\nauthentication credentials if required.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">The\npolkit action for <b>SetHostname()</b> is\norg.freedesktop.hostname1.set-hostname. For\n<b>SetStaticHostname()</b> and <b>SetPrettyHostname()</b> it\nis org.freedesktop.hostname1.set-static-hostname. For\n<b>SetIconName()</b>, <b>SetChassis()</b>,\n<b>SetDeployment()</b> and <b>SetLocation()</b> it is\norg.freedesktop.hostname1.set-machine-info.</font></p>\n\n<h2>RECOMMENDATIONS\n<a name=\"RECOMMENDATIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Here\nare three examples that show how the pretty hostname and the\nicon name should be used:</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nWhen registering DNS-SD services: use the pretty hostname in\nthe service name, and pass the icon name in the TXT data, if\nthere is an icon name. Browsing clients can then show the\nserver icon on each service. This is especially useful for\nWebDAV applications or UPnP media sharing.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nSet the bluetooth name to the pretty hostname.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nWhen your file browser has a &quot;Computer&quot; icon,\nreplace the name with the pretty hostname if set, and the\nicon with the icon name, if it is set.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">To\nproperly handle name lookups with changing local hostnames\nwithout having to edit /etc/hosts, we recommend using\nsystemd-hostnamed in combination with\n<a href=\"https://man.page/3/nss-myhostname\">nss-myhostname(3)</a>.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Here\nare some recommendations to follow when generating a static\n(internet) hostname from a pretty name:</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nGenerate a single DNS label only, not an FQDN. That means no\ndots allowed. Strip them, or replace them with\n&quot;-&quot;.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nIt's probably safer to not use any non-ASCII chars, even if\nDNS allows this in some way these days. In fact, restrict\nyour charset to &quot;a-zA-Z0-9&quot; and &quot;-&quot;.\nStrip other chars, or try to replace them in some smart way\nwith chars from this set, for example\n&quot;&Atilde;&curren;&quot; &acirc; &quot;ae&quot;, and use\n&quot;-&quot; as the replacement for all punctuation\ncharacters and whitespace.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nTry to avoid creating repeated &quot;-&quot;, as well as\n&quot;-&quot; as the first or last char.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nLimit the hostname to 63 chars, which is the length of a DNS\nlabel.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nIf after stripping special chars the empty string is the\nresult, you can pass this as-is to systemd-hostnamed in\nwhich case it will automatically use a suitable\nfallback.</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\nUppercase charaacters should be replaced with their\nlowercase equivalents.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Note\nthat while systemd-hostnamed applies some checks to the\nhostname you pass they are much looser than the\nrecommendations above. For example, systemd-hostnamed will\nalso accept &quot;_&quot; in the hostname, but we recommend\nnot using this to avoid clashes with DNS-SD service types.\nAlso systemd-hostnamed allows longer hostnames, but because\nof the DNS label limitations, we recommend not making use of\nthis.</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Here\nare a couple of example conversions:</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;Lennart's PC&quot; &acirc;\n&quot;lennarts-pc&quot;</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;M&Atilde;&frac14;llers Computer&quot; &acirc;\n&quot;muellers-computer&quot;</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;Voran!&quot; &acirc; &quot;voran&quot;</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;Es war einmal ein M&Atilde;&curren;nnlein&quot;\n&acirc; &quot;es-war-einmal-ein-maennlein&quot;</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;Jawoll. Ist doch wahr!&quot; &acirc;\n&quot;jawoll-ist-doch-wahr&quot;</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;&atilde;&not;&atilde;&atilde;&frac14;&atilde;&quot;\n&acirc; &quot;localhost&quot;</font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">&bull;\n&quot;...zack!!! zack!...&quot; &acirc;\n&quot;zack-zack&quot;</font></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">Of\ncourse, an already valid internet hostname label you enter\nand pass through this conversion should stay unmodified, so\nthat users have direct control of it, if they want &mdash;\nby simply ignoring the fact that the pretty hostname is\npretty and just edit it as if it was the normal internet\nname.</font></p>\n\n<h2>VERSIONING\n<a name=\"VERSIONING\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">These\nD-Bus interfaces follow</font> <b><font color=\"#0000FF\">the\nusual interface versioning guidelines</font></b>\n<small><font color=\"#000000\">[2]</font></small>\n<font color=\"#000000\">.</font></p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\"><b>Example&nbsp;1.&nbsp;Introspect\norg.freedesktop.hostname1 on the bus</b></font></p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\"><font color=\"#000000\">$\ngdbus introspect --system \\ <br>\n--dest org.freedesktop.hostname1 \\ <br>\n--object-path /org/freedesktop/hostname1</font></p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><font color=\"#000000\">David\nZeuthen's original Fedora</font>\n<b><font color=\"#0000FF\">Feature page about\nxdg-hostname</font></b>\n<small><font color=\"#000000\">[3]</font></small></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"9%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">polkit</font></p> </td>\n<td width=\"74%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://www.freedesktop.org/software/polkit/docs/latest/</font></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">2.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"63%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">the usual\ninterface versioning guidelines</font></p></td>\n<td width=\"20%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">http://0pointer.de/blog/projects/versioning-dbus.html</font></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">3.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"48%\">\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">Feature\npage about xdg-hostname</font></p></td>\n<td width=\"35%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://fedoraproject.org/wiki/Features/BetterHostname</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#INTRODUCTION\">INTRODUCTION</a>","<a href=\"#THE D-BUS API\">THE D-BUS API</a>","<a href=\"#SEMANTICS\">SEMANTICS</a>","<a href=\"#RECOMMENDATIONS\">RECOMMENDATIONS</a>","<a href=\"#VERSIONING\">VERSIONING</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#NOTES\">NOTES</a>"],"level":5}