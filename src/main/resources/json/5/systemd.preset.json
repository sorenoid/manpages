{"name":"systemd.preset","description":"systemd.preset - Service enablement presets","body":"\n\n<h1 align=\"center\">SYSTEMD.PRESET</h1>\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">systemd.preset\n- Service enablement presets</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/systemd/system-preset/*.preset</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/run/systemd/system-preset/*.preset</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/lib/systemd/system-preset/*.preset</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/systemd/user-preset/*.preset</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/run/systemd/user-preset/*.preset</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/usr/lib/systemd/user-preset/*.preset</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Preset files\nmay be used to encode policy which units shall be enabled by\ndefault and which ones shall be disabled. They are read by\n<b>systemctl preset</b> which uses this information to\nenable or disable a unit. Depending on that policy,\n<b>systemctl preset</b> is identical to <b>systemctl\nenable</b> or <b>systemctl disable</b>. <b>systemctl\npreset</b> is used by the post install scriptlets of rpm\npackages (or other OS package formats), to enable/disable\nspecific units by default on package installation, enforcing\ndistribution, spin or administrator preset policy. This\nallows choosing a certain set of units to be\nenabled/disabled even before installing the actual package.\nFor more information, see <a href=\"https://man.page/1/systemctl\">systemctl(1)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">It is not\nrecommended to ship preset files within the respective\nsoftware packages implementing the units, but rather\ncentralize them in a distribution or spin default policy,\nwhich can be amended by administrator policy, see below.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If no preset\nfiles exist, <b>systemctl preset</b> will enable all units\nthat are installed by default. If this is not desired and\nall units shall rather be disabled, it is necessary to ship\na preset file with a single, catchall &quot;disable *&quot;\nline. (See example 1, below.)</p>\n\n<h2>PRESET FILE FORMAT\n<a name=\"PRESET FILE FORMAT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The preset\nfiles contain a list of directives consisting of either the\nword &quot;enable&quot; or &quot;disable&quot; followed by a\nspace and a unit name (possibly with shell style wildcards),\nseparated by newlines. Empty lines and lines whose first\nnon-whitespace character is &quot;#&quot; or &quot;;&quot;\nare ignored. Multiple instance names for unit templates may\nbe specified as a space separated list at the end of the\nline instead of the customary position between &quot;@&quot;\nand the unit suffix.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Presets must\nrefer to the &quot;real&quot; unit file, and not to any\naliases. See <b>systemd.unit</b>(5) for a description of\nunit aliasing.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Two different\ndirectives are understood: &quot;enable&quot; may be used to\nenable units by default, &quot;disable&quot; to disable\nunits by default.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If multiple\nlines apply to a unit name, the first matching one takes\nprecedence over all others.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Each preset\nfile shall be named in the style of\n&lt;priority&gt;-&lt;policy-name&gt;.preset. Files in /etc/\noverride files with the same name in /usr/lib/ and /run/.\nFiles in /run/ override files with the same name in /lib/.\nPackages should install their preset files in /lib/. Files\nin /etc/ are reserved for the local administrator, who may\nuse this logic to override the preset files installed by\nvendor packages. All preset files are sorted by their\nfilename in lexicographic order, regardless of which of the\ndirectories they reside in. If multiple files specify the\nsame unit name, the entry in the file with the\nlexicographically earliest name will be applied. It is\nrecommended to prefix all filenames with a two-digit number\nand a dash, to simplify the ordering of the files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\nadministrator wants to disable a preset file supplied by the\nvendor, the recommended way is to place a symlink to\n/dev/null in /etc/systemd/system-preset/ bearing the same\nfilename.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;1.&nbsp;Default\nto off</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/lib/systemd/system-preset/99-default.preset</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">disable *</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This disables\nall units. Due to the filename prefix &quot;99-&quot;, it\nwill be read last and hence can easily be overridden by spin\nor administrator preset policy.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;2.&nbsp;Enable\nmultiple template instances</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/lib/systemd/system-preset/80-dirsrv.preset</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">enable\ndirsrv@.service foo bar baz</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This enables\nall three of dirsrv@foo.service, dirsrv@bar.service and\ndirsrv@baz.service.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;3.&nbsp;A\nGNOME spin</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/lib/systemd/system-preset/50-gnome.preset</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">enable\ngdm.service <br>\nenable colord.service <br>\nenable accounts-daemon.service <br>\nenable avahi-daemon.*</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This enables\nthe three mentioned units, plus all avahi-daemon regardless\nof which unit type. A file like this could be useful for\ninclusion in a GNOME spin of a distribution. It will ensure\nthat the units necessary for GNOME are properly enabled as\nthey are installed. It leaves all other units untouched, and\nsubject to other (later) preset files, for example like the\none from the first example above.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;4.&nbsp;Administrator\npolicy</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">#\n/etc/systemd/system-preset/00-lennart.preset</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">enable\nhttpd.service <br>\nenable sshd.service <br>\nenable postfix.service <br>\ndisable *</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This enables\nthree specific services and disables all others. This is\nuseful for administrators to specifically select the units\nto enable, and disable all others. Due to the filename\nprefix &quot;00-&quot; it will be read early and override\nall other preset policy files.</p>\n\n<h2>MOTIVATION FOR THE PRESET LOGIC\n<a name=\"MOTIVATION FOR THE PRESET LOGIC\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Different\ndistributions have different policies on which services\nshall be enabled by default when the package they are\nshipped in is installed. On Fedora all services stay off by\ndefault, so that installing a package will not cause a\nservice to be enabled (with some exceptions). On Debian all\nservices are immediately enabled by default, so that\ninstalling a package will cause its services to be enabled\nright-away.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Even within a\nsingle distribution, different spins (flavours, remixes,\nwhatever you might want to call them) of a distribution also\nhave different policies on what services to enable, and what\nservices to leave off. For example, Fedora Workstation will\nenable <b>gdm</b> as display manager by default, while the\nFedora KDE spin will enable <b>sddm</b> instead.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Different sites\nmight also have different policies what to turn on by\ndefault and what to turn off. For example, one administrator\nwould prefer to enforce the policy of &quot;<b>sshd</b>\nshould be always on, but everything else off&quot;, while\nanother one might say &quot;<b>snmpd</b> always on, and for\neverything else use the distribution policy\ndefaults&quot;.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Traditionally,\npolicy about which services shall be enabled were\nimplemented in each package individually. This made it\ncumbersome to implement different policies per spin or per\nsite, or to create software packages that do the right thing\non more than one distribution. The enablement mechanism was\nalso encoding the enablement policy.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The preset\nmechanism allows clean separation of the enablement\nmechanism (inside the package scriptlets, by invoking\n<b>systemctl preset</b>) and enablement policy (centralized\nin the preset files), and lifts the configuration out of\nindividual packages. Preset files may be written for\nspecific distributions, for specific spins or for specific\nsites, in order to enforce different policies as needed. It\nis recommended to apply the policy encoded in preset files\nin package installation scriptlets.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/systemd\">systemd(1)</a>,\n<a href=\"https://man.page/1/systemctl\">systemctl(1)</a>, <a href=\"https://man.page/1/systemd-delta\">systemd-delta(1)</a></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/7/daemon\">daemon(7)</a>\nhas a discussion of packaging scriptlets.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Fedora page\nintroducing the use of presets:\n<b><font color=\"#0000FF\">Features/PackagePresets</font></b>\n<small><font color=\"#000000\">[1]</font></small>\n<font color=\"#000000\">.</font></p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"12%\"></td>\n<td width=\"3%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">1.</font></p> </td>\n<td width=\"2%\"></td>\n<td width=\"35%\">\n\n\n\n<p style=\"margin-top: 1em\"><font color=\"#000000\">Features/PackagePresets</font></p> </td>\n<td width=\"48%\">\n</td></tr>\n</table>\n\n\n<p style=\"margin-left:17%;\"><font color=\"#000000\">https://fedoraproject.org/wiki/Features/PackagePresets</font></p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#PRESET FILE FORMAT\">PRESET FILE FORMAT</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#MOTIVATION FOR THE PRESET LOGIC\">MOTIVATION FOR THE PRESET LOGIC</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#NOTES\">NOTES</a>"],"level":5}