{"name":"sysctl.d","description":"sysctl.d - Configure kernel parameters at boot","body":"\n\n<h1 align=\"center\">SYSCTL.D</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">sysctl.d -\nConfigure kernel parameters at boot</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/sysctl.d/*.conf</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/run/sysctl.d/*.conf</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/usr/lib/sysctl.d/*.conf</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">key.name.under.proc.sys\n= some value <br>\nkey/name/under/proc/sys = some value <br>\nkey/middle.part.with.dots/foo = 123 <br>\nkey.middle/part/with/dots.foo = 123 <br>\n-key.that.will.not.fail = value <br>\nkey.pattern.*.with.glob = whatever <br>\n-key.pattern.excluded.with.glob <br>\nkey.pattern.overridden.with.glob = custom</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">At boot,\n<b>systemd-sysctl.service</b>(8) reads configuration files\nfrom the above directories to configure <b>sysctl</b>(8)\nkernel parameters.</p>\n\n<h2>CONFIGURATION FORMAT\n<a name=\"CONFIGURATION FORMAT\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\nconfiguration files contain a list of variable assignments,\nseparated by newlines. Empty lines and lines whose first\nnon-whitespace character is &quot;#&quot; or &quot;;&quot;\nare ignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that\neither &quot;/&quot; or &quot;.&quot; may be used as\nseparators within sysctl variable names. If the first\nseparator is a slash, remaining slashes and dots are left\nintact. If the first separator is a dot, dots and slashes\nare interchanged. &quot;kernel.domainname=foo&quot; and\n&quot;kernel/domainname=foo&quot; are equivalent and will\ncause &quot;foo&quot; to be written to\n/proc/sys/kernel/domainname. Either\n&quot;net.ipv4.conf.enp3s0/200.forwarding&quot; or\n&quot;net/ipv4/conf/enp3s0.200/forwarding&quot; may be used\nto refer to /proc/sys/net/ipv4/conf/enp3s0.200/forwarding. A\nglob <a href=\"https://man.page/7/glob\">glob(7)</a> pattern may be used to write the same\nvalue to all matching keys. Keys for which an explicit\npattern exists will be excluded from any glob matching. In\naddition, a key may be explicitly excluded from being set by\nany matching glob patterns by specifying the key name\nprefixed with a &quot;-&quot; character and not followed by\n&quot;=&quot;, see SYNOPSIS.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Any access\npermission errors and attempts to write variables not\npresent on the local system are logged at debug level and do\nnot cause the service to fail. Other types of errors when\nsetting variables are logged with higher priority and cause\nthe service to return failure at the end (after processing\nother variables). As an exception, if a variable assignment\nis prefixed with a single &quot;-&quot; character, failure\nto set the variable for any reason will be logged at debug\nlevel and will not cause the service to fail.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The settings\nconfigured with sysctl.d files will be applied early on\nboot. The network interface-specific options will also be\napplied individually for each network interface as it shows\nup in the system. (More specifically, net.ipv4.conf.*,\nnet.ipv6.conf.*, net.ipv4.neigh.* and net.ipv6.neigh.*).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Many sysctl\nparameters only become available when certain kernel modules\nare loaded. Modules are usually loaded on demand, e.g. when\ncertain hardware is plugged in or network brought up. This\nmeans that <b>systemd-sysctl.service</b>(8) which runs\nduring early boot will not configure such parameters if they\nbecome available after it has run. To set such parameters,\nit is recommended to add an <a href=\"https://man.page/7/udev\">udev(7)</a> rule to set those\nparameters when they become available. Alternatively, a\nslightly simpler and less efficient option is to add the\nmodule to <b>modules-load.d</b>(5), causing it to be loaded\nstatically before sysctl settings are applied (see example\nbelow).</p>\n\n<h2>CONFIGURATION DIRECTORIES AND PRECEDENCE\n<a name=\"CONFIGURATION DIRECTORIES AND PRECEDENCE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Configuration\nfiles are read from directories in /etc/, /run/,\n/usr/local/lib/, and /lib/, in order of precedence, as\nlisted in the SYNOPSIS section above. Files must have the\n&quot;.conf&quot; extension. Files in /etc/ override files\nwith the same name in /run/, /usr/local/lib/, and /lib/.\nFiles in /run/ override files with the same name under\n/usr/.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">All\nconfiguration files are sorted by their filename in\nlexicographic order, regardless of which of the directories\nthey reside in. If multiple files specify the same option,\nthe entry in the file with the lexicographically latest name\nwill take precedence. Thus, the configuration in a certain\nfile may either be replaced completely (by placing a file\nwith the same name in a directory with higher priority), or\nindividual settings might be changed (by specifying\nadditional settings in a file with a different name that is\nordered later).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Packages should\ninstall their configuration files in /usr/lib/ (distribution\npackages) or /usr/local/lib/ (local installs). Files in\n/etc/ are reserved for the local administrator, who may use\nthis logic to override the configuration files installed by\nvendor packages. It is recommended to prefix all filenames\nwith a two-digit number and a dash, to simplify the ordering\nof the files.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\nadministrator wants to disable a configuration file supplied\nby the vendor, the recommended way is to place a symlink to\n/dev/null in the configuration directory in /etc/, with the\nsame filename as the vendor configuration file. If the\nvendor configuration file is included in the initrd image,\nthe image has to be regenerated.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;1.&nbsp;Set\nkernel YP domain name</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/sysctl.d/domain-name.conf:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">kernel.domainname=example.com</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;2.&nbsp;Apply\nsettings available only when a certain module is loaded\n(method one)</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/udev/rules.d/99-bridge.rules:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">ACTION==&quot;add&quot;,\nSUBSYSTEM==&quot;module&quot;,\nKERNEL==&quot;br_netfilter&quot;, \\ <br>\nRUN+=&quot;/lib/systemd/systemd-sysctl\n--prefix=/net/bridge&quot;</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/sysctl.d/bridge.conf:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">net.bridge.bridge-nf-call-ip6tables\n= 0 <br>\nnet.bridge.bridge-nf-call-iptables = 0 <br>\nnet.bridge.bridge-nf-call-arptables = 0</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This method\napplies settings when the module is loaded. Please note\nthat, unless the br_netfilter module is loaded, bridged\npackets will not be filtered by Netfilter (starting with\nkernel 3.18), so simply not loading the module is sufficient\nto avoid filtering.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;3.&nbsp;Apply\nsettings available only when a certain module is loaded\n(method two)</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/modules-load.d/bridge.conf:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">br_netfilter</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/sysctl.d/bridge.conf:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">net.bridge.bridge-nf-call-ip6tables\n= 0 <br>\nnet.bridge.bridge-nf-call-iptables = 0 <br>\nnet.bridge.bridge-nf-call-arptables = 0</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This method\nforces the module to be always loaded. Please note that,\nunless the br_netfilter module is loaded, bridged packets\nwill not be filtered with Netfilter (starting with kernel\n3.18), so simply not loading the module is sufficient to\navoid filtering.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;4.&nbsp;Set\nnetwork routing properties for all interfaces</b></p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/etc/sysctl.d/20-rp_filter.conf:</p>\n\n\n<p style=\"margin-left:17%; margin-top: 1em\">net.ipv4.conf.default.rp_filter\n= 2 <br>\nnet.ipv4.conf.*.rp_filter = 2 <br>\n-net.ipv4.conf.all.rp_filter <br>\nnet.ipv4.conf.hub0.rp_filter = 1</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>rp_filter</b> key will be set to &quot;2&quot; for all\ninterfaces, except &quot;hub0&quot;. We set\nnet.ipv4.conf.default.rp_filter first, so any interfaces\nwhich are added <i>later</i> will get this value (this also\ncovers any interfaces detected while we're running). The\nglob matches any interfaces which were detected\n<i>earlier</i>. The glob will also match\nnet.ipv4.conf.all.rp_filter, which we don't want to set at\nall, so it is explicitly excluded. And &quot;hub0&quot; is\nexcluded from the glob because it has an explicit\nsetting.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/systemd\">systemd(1)</a>,\n<b>systemd-sysctl.service</b>(8), <a href=\"https://man.page/1/systemd-delta\">systemd-delta(1)</a>,\n<b>sysctl</b>(8), <b>sysctl.conf</b>(5),\n<b>modprobe</b>(8)</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#CONFIGURATION FORMAT\">CONFIGURATION FORMAT</a>","<a href=\"#CONFIGURATION DIRECTORIES AND PRECEDENCE\">CONFIGURATION DIRECTORIES AND PRECEDENCE</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"],"level":5}