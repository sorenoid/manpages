{"name":"user@.service","body":"\n\n<h1 align=\"center\">USER@.SERVICE</h1>\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">user@.service,\nuser-runtime-dir@.service, systemd-user-runtime-dir - System\nunits to start the user manager</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">user@<i>UID</i>.service</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">user-runtime-dir@<i>UID</i>.service</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">/lib/systemd/systemd-user-runtime-dir</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">user-<i>UID</i>.slice</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<a href=\"https://man.page/1/systemd\">systemd(1)</a> system manager (PID 1) starts user manager\ninstances as user@<i>UID</i>.service, with the user's\nnumerical UID used as the instance identifier. These\ninstances use the same executable as the system manager, but\nrunning in a mode where it starts a different set of units.\nEach <b>systemd --user</b> instance manages a hierarchy of\nunits specific to that user. See <a href=\"https://man.page/1/systemd\">systemd(1)</a> for a\ndiscussion of units and <b>systemd.special</b>(7) for a list\nof units that form the basis of the unit hierarchies of\nsystem and user units.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">user@<i>UID</i>.service\nis accompanied by the system unit\nuser-runtime-dir@<i>UID</i>.service, which creates the\nuser's runtime directory /run/user/<i>UID</i>, and then\nremoves it when this unit is stopped.\nuser-runtime-dir@<i>UID</i>.service executes the\nsystemd-user-runtime-dir binary to do the actual work.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">User processes\nmay be started by the user@.service instance, in which case\nthey will be part of that unit in the system hierarchy. They\nmay also be started elsewhere, for example by <b>sshd</b>(8)\nor a display manager like <b>gdm</b>, in which case they\nform a .scope unit (see <b>systemd.scope</b>(5)). Both\nuser@<i>UID</i>.service and the scope units are collected\nunder the user-<i>UID</i>.slice.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Individual\nuser-<i>UID</i>.slice slices are collected under user.slice,\nsee <b>systemd.special</b>(7).</p>\n\n<h2>CONTROLLING RESOURCES FOR LOGGED-IN USERS\n<a name=\"CONTROLLING RESOURCES FOR LOGGED-IN USERS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Options that\ncontrol resources available to logged-in users can be\nconfigured at a few different levels. As described in the\nprevious section, user.slice contains processes of all\nusers, so any resource limits on that slice apply to all\nusers together. The usual way to configure them would be\nthrough drop-ins, e.g.\n/etc/systemd/system/user.slice.d/resources.conf.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The processes\nof a single user are collected under user-<i>UID</i>.slice.\nResource limits for that user can be configured through\ndrop-ins for that unit, e.g.\n/etc/systemd/system/user-1000.slice.d/resources.conf. If the\nlimits should apply to all users instead, they may be\nconfigured through drop-ins for the truncated unit name,\nuser-.slice. For example, configuration in\n/etc/systemd/system/user-.slice.d/resources.conf is included\nin all user-<i>UID</i>.slice units, see\n<b>systemd.unit</b>(5) for a discussion of the drop-in\nmechanism.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When a user\nlogs in and a .scope unit is created for the session (see\nprevious section), the creation of the scope may be managed\nthrough <b>pam_systemd</b>(8). This PAM module communicates\nwith <b>systemd-logind</b>(8) to create the session scope\nand provide access to hardware resources. Resource limits\nfor the scope may be configured through the PAM module\nconfiguration, see <b>pam_systemd</b>(8). Configuring them\nthrough the normal unit configuration is also possible, but\nsince the name of the slice unit is generally unpredictable,\nthis is less useful.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">In general any\nresources that apply to units may be set for\nuser@<i>UID</i>.service and the slice units discussed above,\nsee <b>systemd.resource-control</b>(5) for an overview.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;1.&nbsp;Hierarchy\nof control groups with two logged in users</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ systemd-cgls\n<br>\nControl group /: <br>\n-.slice <br>\n&acirc;&acirc;user.slice <br>\n&acirc; &acirc;&acirc;user-1000.slice <br>\n&acirc; &acirc; &acirc;&acirc;user@1000.service <br>\n&acirc; &acirc; &acirc; &acirc;&acirc;pulseaudio.service\n<br>\n&acirc; &acirc; &acirc; &acirc; &acirc;&acirc;2386\n/usr/bin/pulseaudio --daemonize=no <br>\n&acirc; &acirc; &acirc;\n&acirc;&acirc;gnome-terminal-server.service <br>\n&acirc; &acirc; &acirc; &acirc;&acirc;init.scope <br>\n&acirc; &acirc; &acirc; &acirc;&acirc; 4127\n/libexec/gnome-terminal-server <br>\n&acirc; &acirc; &acirc; &acirc;&acirc; 4198 zsh <br>\n&acirc; &acirc; ... <br>\n&acirc; &acirc; &acirc;&acirc;session-4.scope <br>\n&acirc; &acirc; &acirc;&acirc; 1264 gdm-session-worker\n[pam/gdm-password] <br>\n&acirc; &acirc; &acirc;&acirc; 2339 /usr/bin/gnome-shell\n<br>\n&acirc; &acirc; ... <br>\n&acirc; &acirc; &acirc;&acirc;session-19.scope <br>\n&acirc; &acirc; &acirc;&acirc;6497 sshd: zbyszek [priv] <br>\n&acirc; &acirc; &acirc;&acirc;6502 sshd: zbyszek@pts/6 <br>\n&acirc; &acirc; &acirc;&acirc;6509 -zsh <br>\n&acirc; &acirc; &acirc;&acirc;6602 systemd-cgls --no-pager\n<br>\n&acirc; ... <br>\n&acirc; &acirc;&acirc;user-1001.slice <br>\n&acirc; &acirc;&acirc;session-20.scope <br>\n&acirc; &acirc; &acirc;&acirc;6675 sshd: guest [priv] <br>\n&acirc; &acirc; &acirc;&acirc;6708 sshd: guest@pts/6 <br>\n&acirc; &acirc; &acirc;&acirc;6717 -bash <br>\n&acirc; &acirc;&acirc;user@1001.service <br>\n&acirc; &acirc;&acirc;init.scope <br>\n&acirc; &acirc; &acirc;&acirc;6680 /lib/systemd/systemd\n--user <br>\n&acirc; &acirc; &acirc;&acirc;6688 (sd-pam) <br>\n&acirc; &acirc;&acirc;sleep.service <br>\n&acirc; &acirc;&acirc;6706 /usr/bin/sleep 30 <br>\n...</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">User with UID\n1000 is logged in using <b>gdm</b> (session-4.scope) and\n<a href=\"https://man.page/1/ssh\">ssh(1)</a> (session-19.scope), and also has a user\nmanager instance running (user@1000.service). User with UID\n1001 is logged in using <b>ssh</b> (session-20.scope) and\nalso has a user manager instance running\n(user@1001.service). Those are all (leaf) system units, and\nform part of the slice hierarchy, with user-1000.slice and\nuser-1001.slice below user.slice. User units are visible\nbelow the user@.service instances (pulseaudio.service,\ngnome-terminal-server.service, init.scope,\nsleep.service).</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Example&nbsp;2.&nbsp;Default\nuser resource limits</b></p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">$ systemctl cat\nuser-1000.slice <br>\n# /lib/systemd/system/user-.slice.d/10-defaults.conf <br>\n# ... <br>\n[Unit] <br>\nDescription=User Slice of UID %j <br>\nAfter=systemd-user-sessions.service</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">[Slice] <br>\nTasksMax=33%</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\nuser-<i>UID</i>.slice units by default don't have a unit\nfile. The resource limits are set through a drop-in, which\ncan be easily replaced or extended following standard\ndrop-in mechanisms discussed in the first section.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/systemd\">systemd(1)</a>,\n<b>systemd.service</b>(5), <b>systemd.slice</b>(5),\n<b>systemd.resource-control</b>(5), <b>systemd.exec</b>(5),\n<b>systemd.special</b>(7), <b>pam</b>(8)</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#CONTROLLING RESOURCES FOR LOGGED-IN USERS\">CONTROLLING RESOURCES FOR LOGGED-IN USERS</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>"],"level":5}