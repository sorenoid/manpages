{"name":"swapon","description":"swapon, swapoff - start/stop swapping to file/device","body":"\n\n<h1 align=\"center\">SWAPON</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">swapon, swapoff\n- start/stop swapping to file/device</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;unistd.h&gt; <br>\n#include &lt;sys/swap.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nswapon(const char *</b><i>path</i><b>, int</b>\n<i>swapflags</i><b>); <br>\nint swapoff(const char *</b><i>path</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>swapon</b>()\nsets the swap area to the file or block device specified by\n<i>path</i>. <b>swapoff</b>() stops swapping to the file or\nblock device specified by <i>path</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\n<b>SWAP_FLAG_PREFER</b> flag is specified in the\n<b>swapon</b>() <i>swapflags</i> argument, the new swap area\nwill have a higher priority than default. The priority is\nencoded within <i>swapflags</i> as:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\"><i>(prio\n&lt;&lt; SWAP_FLAG_PRIO_SHIFT) &amp;\nSWAP_FLAG_PRIO_MASK</i></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\n<b>SWAP_FLAG_DISCARD</b> flag is specified in the\n<b>swapon</b>() <i>swapflags</i> argument, freed swap pages\nwill be discarded before they are reused, if the swap device\nsupports the discard or trim operation. (This may improve\nperformance on some Solid State Devices, but often it does\nnot.) See also NOTES.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">These functions\nmay be used only by a privileged process (one having the\n<b>CAP_SYS_ADMIN</b> capability).</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Priority</b>\n<br>\nEach swap area has a priority, either high or low. The\ndefault priority is low. Within the low-priority areas,\nnewer areas are even lower priority than older areas.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">All priorities\nset with <i>swapflags</i> are high-priority, higher than\ndefault. They may have any nonnegative value chosen by the\ncaller. Higher numbers mean higher priority.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Swap pages are\nallocated from areas in priority order, highest priority\nfirst. For areas with different priorities, a\nhigher-priority area is exhausted before using a\nlower-priority area. If two or more areas have the same\npriority, and it is the highest priority available, pages\nare allocated on a round-robin basis between them.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">As of Linux\n1.3.6, the kernel usually follows these rules, but there are\nexceptions.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nzero is returned. On error, -1 is returned, and <i>errno</i>\nis set appropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EBUSY</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">(for <b>swapon</b>()) The\nspecified <i>path</i> is already being used as a swap\narea.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The file <i>path</i> exists, but refers neither to a\nregular file nor to a block device;</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>(<b>swapon</b>()) The indicated path does not contain a\nvalid swap signature or resides on an in-memory filesystem\nsuch as <a href=\"https://man.page/5/tmpfs\">tmpfs(5)</a>.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>EINVAL</b> (since Linux\n3.4)</p>\n\n<p style=\"margin-left:22%;\">(<b>swapon</b>()) An invalid\nflag value was specified in <i>swapflags</i>.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>(<b>swapoff</b>()) <i>path</i> is not currently a swap\narea.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENFILE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The system-wide limit on the total number of open files\nhas been reached.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOENT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The file <i>path</i> does not exist.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The system has insufficient memory to start\nswapping.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EPERM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The caller does not have the <b>CAP_SYS_ADMIN</b>\ncapability. Alternatively, the maximum number of swap files\nare already in use; see NOTES below.</p></td></tr>\n</table>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">These functions\nare Linux-specific and should not be used in programs\nintended to be portable. The second <i>swapflags</i>\nargument was introduced in Linux 1.3.2.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The partition\nor path must be prepared with <b>mkswap</b>(8).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">There is an\nupper limit on the number of swap files that may be used,\ndefined by the kernel constant <b>MAX_SWAPFILES</b>. Before\nkernel 2.4.10, <b>MAX_SWAPFILES</b> has the value 8; since\nkernel 2.4.10, it has the value 32. Since kernel 2.6.18, the\nlimit is decreased by 2 (thus: 30) if the kernel is built\nwith the <b>CONFIG_MIGRATION</b> option (which reserves two\nswap table entries for the page migration features of\n<a href=\"https://man.page/2/mbind\">mbind(2)</a> and <a href=\"https://man.page/2/migrate_pages\">migrate_pages(2)</a>). Since kernel\n2.6.32, the limit is further decreased by 1 if the kernel is\nbuilt with the <b>CONFIG_MEMORY_FAILURE</b> option.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Discard of swap\npages was introduced in kernel 2.6.29, then made conditional\non the <b>SWAP_FLAG_DISCARD</b> flag in kernel 2.6.36, which\nstill discards the entire swap area when <b>swapon</b>() is\ncalled, even if that flag bit is not set.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mkswap</b>(8),\n<b>swapoff</b>(8), <b>swapon</b>(8)</p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}