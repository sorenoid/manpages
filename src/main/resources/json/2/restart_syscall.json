{"name":"restart_syscall","description":"restart_syscall\n- restart a system call after interruption by a stop\nsignal","body":"\n\n<h1 align=\"center\">RESTART_SYSCALL</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">restart_syscall\n- restart a system call after interruption by a stop\nsignal</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>long\nrestart_syscall(void);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Note</i>:\nThere is no glibc wrapper for this system call; see\nNOTES.</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>restart_syscall</b>() system call is used to restart\ncertain system calls after a process that was stopped by a\nsignal (e.g., <b>SIGSTOP</b> or <b>SIGTSTP</b>) is later\nresumed after receiving a <b>SIGCONT</b> signal. This system\ncall is designed only for internal use by the kernel.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>restart_syscall</b>()\nis used for restarting only those system calls that, when\nrestarted, should adjust their time-related\nparameters&mdash;namely <a href=\"https://man.page/2/poll\">poll(2)</a> (since Linux 2.6.24),\n<a href=\"https://man.page/2/nanosleep\">nanosleep(2)</a> (since Linux 2.6),\n<a href=\"https://man.page/2/clock_nanosleep\">clock_nanosleep(2)</a> (since Linux 2.6), and\n<a href=\"https://man.page/2/futex\">futex(2)</a>, when employed with the <b>FUTEX_WAIT</b>\n(since Linux 2.6.22) and <b>FUTEX_WAIT_BITSET</b> (since\nLinux 2.6.31) operations. <b>restart_syscall</b>() restarts\nthe interrupted system call with a time argument that is\nsuitably adjusted to account for the time that has already\nelapsed (including the time where the process was stopped by\na signal). Without the <b>restart_syscall</b>() mechanism,\nrestarting these system calls would not correctly deduct the\nalready elapsed time when the process continued\nexecution.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The return\nvalue of <b>restart_syscall</b>() is the return value of\nwhatever system call is being restarted.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>errno</i> is\nset as per the errors for whatever system call is being\nrestarted by <b>restart_syscall</b>().</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>restart_syscall</b>() system call is present since Linux\n2.6.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This system\ncall is Linux-specific.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">There is no\nglibc wrapper for this system call, because it is intended\nfor use only by the kernel and should never be called by\napplications.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The kernel uses\n<b>restart_syscall</b>() to ensure that when a system call\nis restarted after a process has been stopped by a signal\nand then resumed by <b>SIGCONT</b>, then the time that the\nprocess spent in the stopped state is counted against the\ntimeout interval specified in the original system call. In\nthe case of system calls that take a timeout argument and\nautomatically restart after a stop signal plus\n<b>SIGCONT</b>, but which do not have the\n<b>restart_syscall</b>() mechanism built in, then, after the\nprocess resumes execution, the time that the process spent\nin the stop state is <i>not</i> counted against the timeout\nvalue. Notable examples of system calls that suffer this\nproblem are <a href=\"https://man.page/2/ppoll\">ppoll(2)</a>, <a href=\"https://man.page/2/select\">select(2)</a>, and\n<a href=\"https://man.page/2/pselect\">pselect(2)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">From user\nspace, the operation of <b>restart_syscall</b>() is largely\ninvisible: to the process that made the system call that is\nrestarted, it appears as though that system call executed\nand returned in the usual fashion.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/sigaction\">sigaction(2)</a>,\n<a href=\"https://man.page/2/sigreturn\">sigreturn(2)</a>, <a href=\"https://man.page/7/signal\">signal(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}