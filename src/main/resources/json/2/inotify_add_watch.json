{"name":"inotify_add_watch","description":"inotify_add_watch - add a watch to an initialized inotify instance","body":"\n\n<h1 align=\"center\">INOTIFY_ADD_WATCH</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">inotify_add_watch\n- add a watch to an initialized inotify instance</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/inotify.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ninotify_add_watch(int</b> <i>fd</i><b>, const char\n*</b><i>pathname</i><b>, uint32_t</b>\n<i>mask</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>inotify_add_watch</b>()\nadds a new watch, or modifies an existing watch, for the\nfile whose location is specified in <i>pathname</i>; the\ncaller must have read permission for this file. The\n<i>fd</i> argument is a file descriptor referring to the\ninotify instance whose watch list is to be modified. The\nevents to be monitored for <i>pathname</i> are specified in\nthe <i>mask</i> bit-mask argument. See <a href=\"https://man.page/7/inotify\">inotify(7)</a> for\na description of the bits that can be set in\n<i>mask</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A successful\ncall to <b>inotify_add_watch</b>() returns a unique watch\ndescriptor for this inotify instance, for the filesystem\nobject (inode) that corresponds to <i>pathname</i>. If the\nfilesystem object was not previously being watched by this\ninotify instance, then the watch descriptor is newly\nallocated. If the filesystem object was already being\nwatched (perhaps via a different link to the same object),\nthen the descriptor for the existing watch is returned.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The watch\ndescriptor is returned by later <a href=\"https://man.page/2/read\">read(2)</a>s from the\ninotify file descriptor. These reads fetch\n<i>inotify_event</i> structures (see <a href=\"https://man.page/7/inotify\">inotify(7)</a>)\nindicating filesystem events; the watch descriptor inside\nthis structure identifies the object for which the event\noccurred.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\n<b>inotify_add_watch</b>() returns a watch descriptor (a\nnonnegative integer). On error, -1 is returned and\n<i>errno</i> is set appropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EACCES</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">Read access to the given file is\nnot permitted.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EBADF</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The given file descriptor is not valid.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EEXIST</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>mask</i> contains <b>IN_MASK_CREATE</b> and\n<i>pathname</i> refers to a file already being watched by\nthe same <i>fd</i>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>pathname</i> points outside of the process&rsquo;s\naccessible address space.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The given event mask contains no valid events; or\n<i>mask</i> contains both <b>IN_MASK_ADD</b> and\n<b>IN_MASK_CREATE</b>; or <i>fd</i> is not an inotify file\ndescriptor.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENAMETOOLONG</b></p>\n\n<p style=\"margin-left:22%;\"><i>pathname</i> is too\nlong.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOENT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>A directory component in <i>pathname</i> does not exist\nor is a dangling symbolic link.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Insufficient kernel memory was available.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOSPC</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The user limit on the total number of inotify watches\nwas reached or the kernel failed to allocate a needed\nresource.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOTDIR</b></p>\n\n<p style=\"margin-left:22%;\"><i>mask</i> contains\n<b>IN_ONLYDIR</b> and <i>pathname</i> is not a\ndirectory.</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Inotify was\nmerged into the 2.6.13 Linux kernel.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This system\ncall is Linux-specific.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">See\n<a href=\"https://man.page/7/inotify\">inotify(7)</a>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/inotify_init\">inotify_init(2)</a>,\n<a href=\"https://man.page/2/inotify_rm_watch\">inotify_rm_watch(2)</a>, <a href=\"https://man.page/7/inotify\">inotify(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}