{"name":"listen","description":"listen - listen\nfor connections on a socket","body":"\n\n<h1 align=\"center\">LISTEN</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">listen - listen\nfor connections on a socket</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/types.h&gt;</b> /* See NOTES */ <b><br>\n#include &lt;sys/socket.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nlisten(int</b> <i>sockfd</i><b>, int</b>\n<i>backlog</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>listen</b>()\nmarks the socket referred to by <i>sockfd</i> as a passive\nsocket, that is, as a socket that will be used to accept\nincoming connection requests using <a href=\"https://man.page/2/accept\">accept(2)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>sockfd</i> argument is a file descriptor that refers to a\nsocket of type <b>SOCK_STREAM</b> or\n<b>SOCK_SEQPACKET</b>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>backlog</i> argument defines the maximum length to which\nthe queue of pending connections for <i>sockfd</i> may grow.\nIf a connection request arrives when the queue is full, the\nclient may receive an error with an indication of\n<b>ECONNREFUSED</b> or, if the underlying protocol supports\nretransmission, the request may be ignored so that a later\nreattempt at connection succeeds.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nzero is returned. On error, -1 is returned, and <i>errno</i>\nis set appropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>EADDRINUSE</b></p>\n\n<p style=\"margin-left:22%;\">Another socket is already\nlistening on the same port.</p>\n\n<p style=\"margin-left:11%;\"><b>EADDRINUSE</b></p>\n\n<p style=\"margin-left:22%;\">(Internet domain sockets) The\nsocket referred to by <i>sockfd</i> had not previously been\nbound to an address and, upon attempting to bind it to an\nephemeral port, it was determined that all port numbers in\nthe ephemeral port range are currently in use. See the\ndiscussion of <i>/proc/sys/net/ipv4/ip_local_port_range</i>\nin <a href=\"https://man.page/7/ip\">ip(7)</a>.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EBADF</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>The argument <i>sockfd</i> is not a valid file\ndescriptor.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOTSOCK</b></p>\n\n<p style=\"margin-left:22%;\">The file descriptor\n<i>sockfd</i> does not refer to a socket.</p>\n\n<p style=\"margin-left:11%;\"><b>EOPNOTSUPP</b></p>\n\n<p style=\"margin-left:22%;\">The socket is not of a type\nthat supports the <b>listen</b>() operation.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008, 4.4BSD (<b>listen</b>() first appeared in\n4.2BSD).</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">To accept\nconnections, the following steps are performed:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>1.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>A socket is created with <a href=\"https://man.page/2/socket\">socket(2)</a>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>2.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>The socket is bound to a local address using\n<a href=\"https://man.page/2/bind\">bind(2)</a>, so that other sockets may be\n<a href=\"https://man.page/2/connect\">connect(2)</a>ed to it.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>3.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>A willingness to accept incoming connections and a queue\nlimit for incoming connections are specified with\n<b>listen</b>().</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"17%\"></td>\n<td width=\"3%\">\n\n\n<p>4.</p></td>\n<td width=\"3%\"></td>\n<td width=\"77%\">\n\n\n<p>Connections are accepted with <a href=\"https://man.page/2/accept\">accept(2)</a>.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1 does\nnot require the inclusion of <i>&lt;sys/types.h&gt;</i>, and\nthis header file is not required on Linux. However, some\nhistorical (BSD) implementations required this header file,\nand portable applications are probably wise to include\nit.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The behavior of\nthe <i>backlog</i> argument on TCP sockets changed with\nLinux 2.2. Now it specifies the queue length for\n<i>completely</i> established sockets waiting to be\naccepted, instead of the number of incomplete connection\nrequests. The maximum length of the queue for incomplete\nsockets can be set using\n<i>/proc/sys/net/ipv4/tcp_max_syn_backlog</i>. When\nsyncookies are enabled there is no logical maximum length\nand this setting is ignored. See <a href=\"https://man.page/7/tcp\">tcp(7)</a> for more\ninformation.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the\n<i>backlog</i> argument is greater than the value in\n<i>/proc/sys/net/core/somaxconn</i>, then it is silently\ntruncated to that value. Since Linux 5.4, the default in\nthis file is 4096; in earlier kernels, the default value is\n128. In kernels before 2.4.25, this limit was a hard coded\nvalue, <b>SOMAXCONN</b>, with the value 128.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">See\n<a href=\"https://man.page/2/bind\">bind(2)</a>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/accept\">accept(2)</a>,\n<a href=\"https://man.page/2/bind\">bind(2)</a>, <a href=\"https://man.page/2/connect\">connect(2)</a>, <a href=\"https://man.page/2/socket\">socket(2)</a>,\n<a href=\"https://man.page/7/socket\">socket(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}