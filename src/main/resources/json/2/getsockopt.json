{"name":"getsockopt","description":"getsockopt,\nsetsockopt - get and set options on sockets","body":"\n\n<h1 align=\"center\">GETSOCKOPT</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">getsockopt,\nsetsockopt - get and set options on sockets</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/types.h&gt;</b> /* See NOTES */ <b><br>\n#include &lt;sys/socket.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ngetsockopt(int</b> <i>sockfd</i><b>, int</b>\n<i>level</i><b>, int</b> <i>optname</i><b>, <br>\nvoid *</b><i>optval</i><b>, socklen_t\n*</b><i>optlen</i><b>); <br>\nint setsockopt(int</b> <i>sockfd</i><b>, int</b>\n<i>level</i><b>, int</b> <i>optname</i><b>, <br>\nconst void *</b><i>optval</i><b>, socklen_t</b>\n<i>optlen</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>getsockopt</b>()\nand <b>setsockopt</b>() manipulate options for the socket\nreferred to by the file descriptor <i>sockfd</i>. Options\nmay exist at multiple protocol levels; they are always\npresent at the uppermost socket level.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When\nmanipulating socket options, the level at which the option\nresides and the name of the option must be specified. To\nmanipulate options at the sockets API level, <i>level</i> is\nspecified as <b>SOL_SOCKET</b>. To manipulate options at any\nother level the protocol number of the appropriate protocol\ncontrolling the option is supplied. For example, to indicate\nthat an option is to be interpreted by the <b>TCP</b>\nprotocol, <i>level</i> should be set to the protocol number\nof <b>TCP</b>; see <a href=\"https://man.page/3/getprotoent\">getprotoent(3)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The arguments\n<i>optval</i> and <i>optlen</i> are used to access option\nvalues for <b>setsockopt</b>(). For <b>getsockopt</b>() they\nidentify a buffer in which the value for the requested\noption(s) are to be returned. For <b>getsockopt</b>(),\n<i>optlen</i> is a value-result argument, initially\ncontaining the size of the buffer pointed to by\n<i>optval</i>, and modified on return to indicate the actual\nsize of the value returned. If no option value is to be\nsupplied or returned, <i>optval</i> may be NULL.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Optname</i>\nand any specified options are passed uninterpreted to the\nappropriate protocol module for interpretation. The include\nfile <i>&lt;sys/socket.h&gt;</i> contains definitions for\nsocket level options, described below. Options at other\nprotocol levels vary in format and name; consult the\nappropriate entries in section 4 of the manual.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Most\nsocket-level options utilize an <i>int</i> argument for\n<i>optval</i>. For <b>setsockopt</b>(), the argument should\nbe nonzero to enable a boolean option, or zero if the option\nis to be disabled.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For a\ndescription of the available socket options see\n<a href=\"https://man.page/7/socket\">socket(7)</a> and the appropriate protocol man pages.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nzero is returned for the standard options. On error, -1 is\nreturned, and <i>errno</i> is set appropriately.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Netfilter\nallows the programmer to define custom socket options with\nassociated handlers; for such options, the return value on\nsuccess is the value returned by the handler.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EBADF</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">The argument <i>sockfd</i> is\nnot a valid file descriptor.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The address pointed to by <i>optval</i> is not in a\nvalid part of the process address space. For\n<b>getsockopt</b>(), this error may also be returned if\n<i>optlen</i> is not in a valid part of the process address\nspace.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>optlen</i> invalid in <b>setsockopt</b>(). In some\ncases this error can also occur for an invalid value in\n<i>optval</i> (e.g., for the <b>IP_ADD_MEMBERSHIP</b> option\ndescribed in <a href=\"https://man.page/7/ip\">ip(7)</a>).</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOPROTOOPT</b></p>\n\n<p style=\"margin-left:22%;\">The option is unknown at the\nlevel indicated.</p>\n\n<p style=\"margin-left:11%;\"><b>ENOTSOCK</b></p>\n\n<p style=\"margin-left:22%;\">The file descriptor\n<i>sockfd</i> does not refer to a socket.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008, SVr4, 4.4BSD (these system calls first\nappeared in 4.2BSD).</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1 does\nnot require the inclusion of <i>&lt;sys/types.h&gt;</i>, and\nthis header file is not required on Linux. However, some\nhistorical (BSD) implementations required this header file,\nand portable applications are probably wise to include\nit.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For background\non the <i>socklen_t</i> type, see <a href=\"https://man.page/2/accept\">accept(2)</a>.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Several of the\nsocket options should be handled at lower levels of the\nsystem.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/ioctl\">ioctl(2)</a>,\n<a href=\"https://man.page/2/socket\">socket(2)</a>, <a href=\"https://man.page/3/getprotoent\">getprotoent(3)</a>,\n<a href=\"https://man.page/5/protocols\">protocols(5)</a>, <a href=\"https://man.page/7/ip\">ip(7)</a>, <a href=\"https://man.page/7/packet\">packet(7)</a>,\n<a href=\"https://man.page/7/socket\">socket(7)</a>, <a href=\"https://man.page/7/tcp\">tcp(7)</a>, <a href=\"https://man.page/7/udp\">udp(7)</a>,\n<a href=\"https://man.page/7/unix\">unix(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}