{"name":"cacheflush","description":"cacheflush -\nflush contents of instruction and/or data cache","body":"\n\n<h1 align=\"center\">CACHEFLUSH</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">cacheflush -\nflush contents of instruction and/or data cache</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;asm/cachectl.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ncacheflush(char *</b><i>addr</i><b>, int</b>\n<i>nbytes</i><b>, int</b> <i>cache</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Note</i>: On\nsome architectures, there is no glibc wrapper for this\nsystem call; see NOTES.</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>cacheflush</b>()\nflushes the contents of the indicated cache(s) for the user\naddresses in the range <i>addr</i> to\n<i>(addr+nbytes-1)</i>. <i>cache</i> may be one of:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ICACHE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Flush the instruction cache.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>DCACHE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Write back to memory and invalidate the affected valid\ncache lines.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>BCACHE</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Same as <b>(ICACHE|DCACHE)</b>.</p></td></tr>\n</table>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>cacheflush</b>()\nreturns 0 on success or -1 on error. If errors are detected,\n<i>errno</i> will indicate the error.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">Some or all of the address range\n<i>addr</i> to <i>(addr+nbytes-1)</i> is not accessible.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>cache</i> is not one of <b>ICACHE</b>, <b>DCACHE</b>,\nor <b>BCACHE</b> (but see BUGS).</p></td></tr>\n</table>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Historically,\nthis system call was available on all MIPS UNIX variants\nincluding RISC/os, IRIX, Ultrix, NetBSD, OpenBSD, and\nFreeBSD (and also on some non-UNIX MIPS operating systems),\nso that the existence of this call in MIPS operating systems\nis a de-facto standard.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Caveat <br>\ncacheflush</b>() should not be used in programs intended to\nbe portable. On Linux, this call first appeared on the MIPS\narchitecture, but nowadays, Linux provides a\n<b>cacheflush</b>() system call on some other architectures,\nbut with different arguments.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Architecture-specific\nvariants</b> <br>\nGlibc provides a wrapper for this system call, with the\nprototype shown in SYNOPSIS, for the following\narchitectures: ARC, CSKY, MIPS, and NIOS2.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On some other\narchitectures, Linux provides this system call, with\ndifferent arguments:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p style=\"margin-top: 1em\">M68K:</p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\"><b>int cacheflush(unsigned\nlong</b> <i>addr</i><b>, int</b> <i>scope</i><b>, int</b>\n<i>cache</i><b>,</b></p> </td></tr>\n</table>\n\n<p style=\"margin-left:22%;\"><b>unsigned long</b>\n<i>len</i><b>);</b></p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\">SH:</p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\"><b>int cacheflush(unsigned\nlong</b> <i>addr</i><b>, unsigned long</b> <i>len</i><b>,\nint</b> <i>op</i><b>);</b></p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p>NDS32:</p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><b>int cacheflush(unsigned int</b> <i>start</i><b>,\nunsigned int</b> <i>end</i><b>, int</b>\n<i>cache</i><b>);</b></p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On the above\narchitectures, glibc does not provide a wrapper for this\nsystem call; call it using <a href=\"https://man.page/2/syscall\">syscall(2)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>GCC\nalternative</b> <br>\nUnless you need the finer grained control that this system\ncall provides, you probably want to use the GCC built-in\nfunction <b>__builtin___clear_cache</b>(), which provides a\nportable interface across platforms supported by GCC and\ncompatible compilers:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\"><b>void\n__builtin___clear_cache(void *</b><i>begin</i><b>, void\n*</b><i>end</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On platforms\nthat don&rsquo;t require instruction cache flushes,\n<b>__builtin___clear_cache</b>() has no effect.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>Note</i>: On\nsome GCC-compatible compilers, the prototype for this\nbuilt-in function uses <i>char *</i> instead of <i>void\n*</i> for the parameters.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Linux kernels\nolder than version 2.6.11 ignore the <i>addr</i> and\n<i>nbytes</i> arguments, making this function fairly\nexpensive. Therefore, the whole cache is always flushed.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This function\nalways behaves as if <b>BCACHE</b> has been passed for the\n<i>cache</i> argument and does not do any error checking on\nthe <i>cache</i> argument.</p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}