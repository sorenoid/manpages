{"name":"umask","body":"\n\n<h1 align=\"center\">UMASK</h1>\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">umask - set\nfile mode creation mask</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/types.h&gt; <br>\n#include &lt;sys/stat.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>mode_t\numask(mode_t</b> <i>mask</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>umask</b>()\nsets the calling process&rsquo;s file mode creation mask\n(umask) to <i>mask</i> &amp; 0777 (i.e., only the file\npermission bits of <i>mask</i> are used), and returns the\nprevious value of the mask.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The umask is\nused by <a href=\"https://man.page/2/open\">open(2)</a>, <a href=\"https://man.page/2/mkdir\">mkdir(2)</a>, and other system\ncalls that create files to modify the permissions placed on\nnewly created files or directories. Specifically,\npermissions in the umask are turned off from the <i>mode</i>\nargument to <a href=\"https://man.page/2/open\">open(2)</a> and <a href=\"https://man.page/2/mkdir\">mkdir(2)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Alternatively,\nif the parent directory has a default ACL (see\n<a href=\"https://man.page/5/acl\">acl(5)</a>), the umask is ignored, the default ACL is\ninherited, the permission bits are set based on the\ninherited ACL, and permission bits absent in the <i>mode</i>\nargument are turned off. For example, the following default\nACL is equivalent to a umask of 022:</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">u::rwx,g::r-x,o::r-x</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Combining the\neffect of this default ACL with a <i>mode</i> argument of\n0666 (rw-rw-rw-), the resulting file permissions would be\n0644 (rw-r--r--).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The constants\nthat should be used to specify <i>mask</i> are described in\n<a href=\"https://man.page/7/inode\">inode(7)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The typical\ndefault value for the process umask is\n<i>S_IWGRP&nbsp;|&nbsp;S_IWOTH</i> (octal 022). In the usual\ncase where the <i>mode</i> argument to <a href=\"https://man.page/2/open\">open(2)</a> is\nspecified as:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">S_IRUSR |\nS_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">(octal 0666)\nwhen creating a new file, the permissions on the resulting\nfile will be:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">S_IRUSR |\nS_IWUSR | S_IRGRP | S_IROTH</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">(because 0666\n&amp; ~022 = 0644; i.e., rw-r--r--).</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This system\ncall always succeeds and the previous value of the mask is\nreturned.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008, SVr4, 4.3BSD.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">A child process\ncreated via <a href=\"https://man.page/2/fork\">fork(2)</a> inherits its parent&rsquo;s\numask. The umask is left unchanged by <a href=\"https://man.page/2/execve\">execve(2)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">It is\nimpossible to use <b>umask</b>() to fetch a process&rsquo;s\numask without at the same time changing it. A second call to\n<b>umask</b>() would then be needed to restore the umask.\nThe nonatomicity of these two steps provides the potential\nfor races in multithreaded programs.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Since Linux\n4.7, the umask of any process can be viewed via the\n<i>Umask</i> field of <i>/proc/[pid]/status</i>. Inspecting\nthis field in <i>/proc/self/status</i> allows a process to\nretrieve its umask without at the same time changing it.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The umask\nsetting also affects the permissions assigned to POSIX IPC\nobjects (<a href=\"https://man.page/3/mq_open\">mq_open(3)</a>, <a href=\"https://man.page/3/sem_open\">sem_open(3)</a>,\n<a href=\"https://man.page/3/shm_open\">shm_open(3)</a>), FIFOs (<a href=\"https://man.page/3/mkfifo\">mkfifo(3)</a>), and UNIX\ndomain sockets (<a href=\"https://man.page/7/unix\">unix(7)</a>) created by the process. The\numask does not affect the permissions assigned to\nSystem&nbsp;V IPC objects created by the process (using\n<a href=\"https://man.page/2/msgget\">msgget(2)</a>, <a href=\"https://man.page/2/semget\">semget(2)</a>, <a href=\"https://man.page/2/shmget\">shmget(2)</a>).</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/chmod\">chmod(2)</a>,\n<a href=\"https://man.page/2/mkdir\">mkdir(2)</a>, <a href=\"https://man.page/2/open\">open(2)</a>, <a href=\"https://man.page/2/stat\">stat(2)</a>,\n<a href=\"https://man.page/5/acl\">acl(5)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}