{"name":"msgget","description":"msgget - get a\nSystem V message queue identifier","body":"\n\n<h1 align=\"center\">MSGGET</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">msgget - get a\nSystem V message queue identifier</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/types.h&gt; <br>\n#include &lt;sys/ipc.h&gt; <br>\n#include &lt;sys/msg.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nmsgget(key_t</b> <i>key</i><b>, int</b>\n<i>msgflg</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>msgget</b>() system call returns the System&nbsp;V\nmessage queue identifier associated with the value of the\n<i>key</i> argument. It may be used either to obtain the\nidentifier of a previously created message queue (when\n<i>msgflg</i> is zero and <i>key</i> does not have the value\n<b>IPC_PRIVATE</b>), or to create a new set.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">A new message\nqueue is created if <i>key</i> has the value\n<b>IPC_PRIVATE</b> or <i>key</i> isn&rsquo;t\n<b>IPC_PRIVATE</b>, no message queue with the given key\n<i>key</i> exists, and <b>IPC_CREAT</b> is specified in\n<i>msgflg</i>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If\n<i>msgflg</i> specifies both <b>IPC_CREAT</b> and\n<b>IPC_EXCL</b> and a message queue already exists for\n<i>key</i>, then <b>msgget</b>() fails with <i>errno</i> set\nto <b>EEXIST</b>. (This is analogous to the effect of the\ncombination <b>O_CREAT | O_EXCL</b> for <a href=\"https://man.page/2/open\">open(2)</a>.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Upon creation,\nthe least significant bits of the argument <i>msgflg</i>\ndefine the permissions of the message queue. These\npermission bits have the same format and semantics as the\npermissions specified for the <i>mode</i> argument of\n<a href=\"https://man.page/2/open\">open(2)</a>. (The execute permissions are not used.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If a new\nmessage queue is created, then its associated data structure\n<i>msqid_ds</i> (see <a href=\"https://man.page/2/msgctl\">msgctl(2)</a>) is initialized as\nfollows:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><i>msg_perm.cuid</i> and <i>msg_perm.uid</i> are set to\nthe effective user ID of the calling process.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><i>msg_perm.cgid</i> and <i>msg_perm.gid</i> are set to\nthe effective group ID of the calling process.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p>The least significant 9 bits of <i>msg_perm.mode</i> are\nset to the least significant 9 bits of <i>msgflg</i>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><i>msg_qnum</i>, <i>msg_lspid</i>, <i>msg_lrpid</i>,\n<i>msg_stime</i>, and <i>msg_rtime</i> are set to 0.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><i>msg_ctime</i> is set to the current time.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>&bull;</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><i>msg_qbytes</i> is set to the system limit\n<b>MSGMNB</b>.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the message\nqueue already exists the permissions are verified, and a\ncheck is made to see if it is marked for destruction.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">If successful,\nthe return value will be the message queue identifier (a\nnonnegative integer), otherwise -1 with <i>errno</i>\nindicating the error.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On failure,\n<i>errno</i> is set to one of the following values:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EACCES</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">A message queue exists for\n<i>key</i>, but the calling process does not have permission\nto access the queue, and does not have the\n<b>CAP_IPC_OWNER</b> capability in the user namespace that\ngoverns its IPC namespace.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EEXIST</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><b>IPC_CREAT</b> and <b>IPC_EXCL</b> were specified in\n<i>msgflg</i>, but a message queue already exists for\n<i>key</i>.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOENT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>No message queue exists for <i>key</i> and <i>msgflg</i>\ndid not specify <b>IPC_CREAT</b>.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>A message queue has to be created but the system does\nnot have enough memory for the new data structure.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOSPC</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>A message queue has to be created but the system limit\nfor the maximum number of message queues (<b>MSGMNI</b>)\nwould be exceeded.</p></td></tr>\n</table>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008, SVr4.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The inclusion\nof <i>&lt;sys/types.h&gt;</i> and <i>&lt;sys/ipc.h&gt;</i>\nisn&rsquo;t required on Linux or by any version of POSIX.\nHowever, some old implementations required the inclusion of\nthese header files, and the SVID also documented their\ninclusion. Applications intended to be portable to such old\nsystems may need to include these header files.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>IPC_PRIVATE</b>\nisn&rsquo;t a flag field but a <i>key_t</i> type. If this\nspecial value is used for <i>key</i>, the system call\nignores everything but the least significant 9 bits of\n<i>msgflg</i> and creates a new message queue (on\nsuccess).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The following\nis a system limit on message queue resources affecting a\n<b>msgget</b>() call:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>MSGMNI</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">System-wide limit on the number\nof message queues. Before Linux 3.19, the default value for\nthis limit was calculated using a formula based on available\nsystem memory. Since Linux 3.19, the default value is\n32,000. On Linux, this limit can be read and modified via\n<i>/proc/sys/kernel/msgmni</i>.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Linux\nnotes</b> <br>\nUntil version 2.3.20, Linux would return <b>EIDRM</b> for a\n<b>msgget</b>() on a message queue scheduled for\ndeletion.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The name choice\n<b>IPC_PRIVATE</b> was perhaps unfortunate, <b>IPC_NEW</b>\nwould more clearly show its function.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/msgctl\">msgctl(2)</a>,\n<a href=\"https://man.page/2/msgrcv\">msgrcv(2)</a>, <a href=\"https://man.page/2/msgsnd\">msgsnd(2)</a>, <a href=\"https://man.page/3/ftok\">ftok(3)</a>,\n<a href=\"https://man.page/7/capabilities\">capabilities(7)</a>, <a href=\"https://man.page/7/mq_overview\">mq_overview(7)</a>,\n<a href=\"https://man.page/7/sysvipc\">sysvipc(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}