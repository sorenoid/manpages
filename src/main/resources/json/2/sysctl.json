{"name":"sysctl","description":"sysctl -\nread/write system parameters","body":"\n\n<h1 align=\"center\">SYSCTL</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">sysctl -\nread/write system parameters</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;unistd.h&gt; <br>\n#include &lt;linux/sysctl.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\n_sysctl(struct __sysctl_args *</b><i>args</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>This system\ncall no longer exists on current kernels!</b> See NOTES.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>_sysctl</b>() call reads and/or writes kernel parameters.\nFor example, the hostname, or the maximum number of open\nfiles. The argument has the form</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">struct\n__sysctl_args { <br>\nint *name; /* integer vector describing variable */ <br>\nint nlen; /* length of this vector */ <br>\nvoid *oldval; /* 0 or address where to store old value */\n<br>\nsize_t *oldlenp; /* available room for old value, <br>\noverwritten by actual size of old value */ <br>\nvoid *newval; /* 0 or address of new value */ <br>\nsize_t newlen; /* size of new value */ <br>\n};</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This call does\na search in a tree structure, possibly resembling a\ndirectory tree under <i>/proc/sys</i>, and if the requested\nitem is found calls some appropriate routine to read or\nmodify the value.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Upon successful\ncompletion, <b>_sysctl</b>() returns 0. Otherwise, a value\nof -1 is returned and <i>errno</i> is set to indicate the\nerror.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>EACCES</b>,\n<b>EPERM</b></p>\n\n<p style=\"margin-left:22%;\">No search permission for one of\nthe encountered &quot;directories&quot;, or no read\npermission where <i>oldval</i> was nonzero, or no write\npermission where <i>newval</i> was nonzero.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The invocation asked for the previous value by setting\n<i>oldval</i> non-NULL, but allowed zero room in\n<i>oldlenp</i>.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOTDIR</b></p>\n\n<p style=\"margin-left:22%;\"><i>name</i> was not found.</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This system\ncall first appeared in Linux 1.3.57. It was removed in Linux\n5.5; glibc support was removed in version 2.32.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This call is\nLinux-specific, and should not be used in programs intended\nto be portable. It originated in 4.4BSD. Only Linux has the\n<i>/proc/sys</i> mirror, and the object naming schemes\ndiffer between Linux and 4.4BSD, but the declaration of the\n<b>sysctl</b>() function is the same in both.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Use of this\nsystem call was long discouraged: since Linux 2.6.24, uses\nof this system call result in warnings in the kernel log,\nand in Linux 5.5, the system call was finally removed. Use\nthe <i>/proc/sys</i> interface instead.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that on\nolder kernels where this system call still exists, it is\navailable only if the kernel was configured with the\n<b>CONFIG_SYSCTL_SYSCALL</b> option. Furthermore, glibc does\nnot provide a wrapper for this system call, necessitating\nthe use of <a href=\"https://man.page/2/syscall\">syscall(2)</a>.</p>\n\n<h2>BUGS\n<a name=\"BUGS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The object\nnames vary between kernel versions, making this system call\nworthless for applications.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Not all\navailable objects are properly documented.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">It is not yet\npossible to change operating system by writing to\n<i>/proc/sys/kernel/ostype</i>.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">#define\n_GNU_SOURCE <br>\n#include &lt;unistd.h&gt; <br>\n#include &lt;sys/syscall.h&gt; <br>\n#include &lt;string.h&gt; <br>\n#include &lt;stdio.h&gt; <br>\n#include &lt;stdlib.h&gt; <br>\n#include &lt;linux/sysctl.h&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">int\n_sysctl(struct __sysctl_args *args );</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">#define\nOSNAMESZ 100</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">int <br>\nmain(void) <br>\n{ <br>\nstruct __sysctl_args args; <br>\nchar osname[OSNAMESZ]; <br>\nsize_t osnamelth; <br>\nint name[] = { CTL_KERN, KERN_OSTYPE };</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">memset(&amp;args,\n0, sizeof(args)); <br>\nargs.name = name; <br>\nargs.nlen = sizeof(name)/sizeof(name[0]); <br>\nargs.oldval = osname; <br>\nargs.oldlenp = &amp;osnamelth;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">osnamelth =\nsizeof(osname);</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">if\n(syscall(SYS__sysctl, &amp;args) == -1) { <br>\nperror(&quot;_sysctl&quot;); <br>\nexit(EXIT_FAILURE); <br>\n} <br>\nprintf(&quot;This machine is running %*s\\n&quot;, osnamelth,\nosname); <br>\nexit(EXIT_SUCCESS); <br>\n}</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/5/proc\">proc(5)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#BUGS\">BUGS</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}