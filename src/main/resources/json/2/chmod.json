{"name":"chmod","description":"chmod, fchmod,\nfchmodat - change permissions of a file","body":"\n\n<h1 align=\"center\">CHMOD</h1>\n\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">chmod, fchmod,\nfchmodat - change permissions of a file</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/stat.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nchmod(const char *</b><i>pathname</i><b>, mode_t</b>\n<i>mode</i><b>); <br>\nint fchmod(int</b> <i>fd</i><b>, mode_t</b>\n<i>mode</i><b>);</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;fcntl.h&gt;</b> /* Definition of AT_* constants */\n<b><br>\n#include &lt;sys/stat.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\nfchmodat(int</b> <i>dirfd</i><b>, const char\n*</b><i>pathname</i><b>, mode_t</b> <i>mode</i><b>, int</b>\n<i>flags</i><b>);</b></p>\n\n<p style=\"margin-left:5%; margin-top: 1em\">Feature Test\nMacro Requirements for glibc (see\n<a href=\"https://man.page/7/feature_test_macros\">feature_test_macros(7)</a>):</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fchmod</b>():</p>\n\n<p style=\"margin-left:17%;\">Since glibc 2.24: <br>\n_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;199309L <br>\nGlibc 2.19 to 2.23 <br>\n_POSIX_C_SOURCE <br>\nGlibc 2.16 to 2.19: <br>\n_BSD_SOURCE || _POSIX_C_SOURCE <br>\nGlibc 2.12 to 2.16: <br>\n_BSD_SOURCE || _XOPEN_SOURCE&nbsp;&gt;=&nbsp;500 || <br>\n_POSIX_C_SOURCE &gt;= 200809L <br>\nGlibc 2.11 and earlier: <br>\n_BSD_SOURCE || _XOPEN_SOURCE&nbsp;&gt;=&nbsp;500</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fchmodat</b>():</p>\n\n<p style=\"margin-left:17%;\">Since glibc 2.10:</p>\n\n\n<p style=\"margin-left:23%;\">_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200809L</p>\n\n<p style=\"margin-left:17%;\">Before glibc 2.10:</p>\n\n<p style=\"margin-left:23%;\">_ATFILE_SOURCE</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<b>chmod</b>() and <b>fchmod</b>() system calls change a\nfiles mode bits. (The file mode consists of the file\npermission bits plus the set-user-ID, set-group-ID, and\nsticky bits.) These system calls differ only in how the file\nis specified:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><b>chmod</b>() changes the mode of the file specified\nwhose pathname is given in <i>pathname</i>, which is\ndereferenced if it is a symbolic link.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"1%\">\n\n\n<p>*</p></td>\n<td width=\"2%\"></td>\n<td width=\"86%\">\n\n\n<p><b>fchmod</b>() changes the mode of the file referred to\nby the open file descriptor <i>fd</i>.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The new file\nmode is specified in <i>mode</i>, which is a bit mask\ncreated by ORing together zero or more of the following:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p style=\"margin-top: 1em\"><b>S_ISUID</b> (04000)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p style=\"margin-top: 1em\">set-user-ID (set process\neffective user ID on <a href=\"https://man.page/2/execve\">execve(2)</a>)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_ISGID</b> (02000)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>set-group-ID (set process effective group ID on\n<a href=\"https://man.page/2/execve\">execve(2)</a>; mandatory locking, as described in\n<a href=\"https://man.page/2/fcntl\">fcntl(2)</a>; take a new file&rsquo;s group from parent\ndirectory, as described in <a href=\"https://man.page/2/chown\">chown(2)</a> and\n<a href=\"https://man.page/2/mkdir\">mkdir(2)</a>)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_ISVTX</b> (01000)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>sticky bit (restricted deletion flag, as described in\n<a href=\"https://man.page/2/unlink\">unlink(2)</a>)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IRUSR</b> (00400)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>read by owner</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IWUSR</b> (00200)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>write by owner</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IXUSR</b> (00100)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>execute/search by owner (&quot;search&quot; applies for\ndirectories, and means that entries within the directory can\nbe accessed)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IRGRP</b> (00040)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>read by group</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IWGRP</b> (00020)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>write by group</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IXGRP</b> (00010)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>execute/search by group</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IROTH</b> (00004)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>read by others</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IWOTH</b> (00002)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>write by others</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"24%\">\n\n\n<p><b>S_IXOTH</b> (00001)</p></td>\n<td width=\"3%\"></td>\n<td width=\"62%\">\n\n\n<p>execute/search by others</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The effective\nUID of the calling process must match the owner of the file,\nor the process must be privileged (Linux: it must have the\n<b>CAP_FOWNER</b> capability).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the calling\nprocess is not privileged (Linux: does not have the\n<b>CAP_FSETID</b> capability), and the group of the file\ndoes not match the effective group ID of the process or one\nof its supplementary group IDs, the <b>S_ISGID</b> bit will\nbe turned off, but this will not cause an error to be\nreturned.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">As a security\nmeasure, depending on the filesystem, the set-user-ID and\nset-group-ID execution bits may be turned off if a file is\nwritten. (On Linux, this occurs if the writing process does\nnot have the <b>CAP_FSETID</b> capability.) On some\nfilesystems, only the superuser can set the sticky bit,\nwhich may have a special meaning. For the sticky bit, and\nfor set-user-ID and set-group-ID bits on directories, see\n<a href=\"https://man.page/7/inode\">inode(7)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">On NFS\nfilesystems, restricting the permissions will immediately\ninfluence already open files, because the access control is\ndone on the server, but open files are maintained by the\nclient. Widening the permissions may be delayed for other\nclients if attribute caching is enabled on them.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fchmodat()</b>\n<br>\nThe <b>fchmodat</b>() system call operates in exactly the\nsame way as <b>chmod</b>(), except for the differences\ndescribed here.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If the pathname\ngiven in <i>pathname</i> is relative, then it is interpreted\nrelative to the directory referred to by the file descriptor\n<i>dirfd</i> (rather than relative to the current working\ndirectory of the calling process, as is done by\n<b>chmod</b>() for a relative pathname).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If\n<i>pathname</i> is relative and <i>dirfd</i> is the special\nvalue <b>AT_FDCWD</b>, then <i>pathname</i> is interpreted\nrelative to the current working directory of the calling\nprocess (like <b>chmod</b>()).</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">If\n<i>pathname</i> is absolute, then <i>dirfd</i> is\nignored.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>flags</i>\ncan either be 0, or include the following flag: <b><br>\nAT_SYMLINK_NOFOLLOW</b></p>\n\n<p style=\"margin-left:22%;\">If <i>pathname</i> is a\nsymbolic link, do not dereference it: instead operate on the\nlink itself. This flag is not currently implemented.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">See\n<a href=\"https://man.page/2/openat\">openat(2)</a> for an explanation of the need for\n<b>fchmodat</b>().</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nzero is returned. On error, -1 is returned, and <i>errno</i>\nis set appropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Depending on\nthe filesystem, errors other than those listed below can be\nreturned.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The more\ngeneral errors for <b>chmod</b>() are listed below:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EACCES</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Search permission is denied on a component of the path\nprefix. (See also <a href=\"https://man.page/7/path_resolution\">path_resolution(7)</a>.)</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>pathname</i> points outside your accessible address\nspace.</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EIO</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>An I/O error occurred.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ELOOP</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>Too many symbolic links were encountered in resolving\n<i>pathname</i>.</p> </td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENAMETOOLONG</b></p>\n\n<p style=\"margin-left:22%;\"><i>pathname</i> is too\nlong.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOENT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"63%\">\n\n\n<p>The file does not exist.</p></td>\n<td width=\"15%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>ENOMEM</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"63%\">\n\n\n<p>Insufficient kernel memory was available.</p></td>\n<td width=\"15%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOTDIR</b></p>\n\n<p style=\"margin-left:22%;\">A component of the path prefix\nis not a directory.</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EPERM</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>The effective UID does not match the owner of the file,\nand the process is not privileged (Linux: it does not have\nthe <b>CAP_FOWNER</b> capability).</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EPERM</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>The file is marked immutable or append-only. (See\n<a href=\"https://man.page/2/ioctl_iflags\">ioctl_iflags(2)</a>.)</p> </td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EROFS</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"78%\">\n\n\n<p>The named file resides on a read-only filesystem.</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The general\nerrors for <b>fchmod</b>() are listed below:</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p style=\"margin-top: 1em\"><b>EBADF</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"55%\">\n\n\n<p style=\"margin-top: 1em\">The file descriptor <i>fd</i> is\nnot valid.</p></td>\n<td width=\"23%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EIO</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"55%\">\n\n\n<p>See above.</p></td>\n<td width=\"23%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EPERM</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"55%\">\n\n\n<p>See above.</p></td>\n<td width=\"23%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"7%\">\n\n\n<p><b>EROFS</b></p></td>\n<td width=\"4%\"></td>\n<td width=\"55%\">\n\n\n<p>See above.</p></td>\n<td width=\"23%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The same errors\nthat occur for <b>chmod</b>() can also occur for\n<b>fchmodat</b>(). The following additional errors can occur\nfor <b>fchmodat</b>():</p>\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EBADF</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"56%\">\n\n\n<p style=\"margin-top: 1em\"><i>dirfd</i> is not a valid file\ndescriptor.</p> </td>\n<td width=\"22%\">\n</td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"56%\">\n\n\n<p>Invalid flag specified in <i>flags</i>.</p></td>\n<td width=\"22%\">\n</td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOTDIR</b></p>\n\n<p style=\"margin-left:22%;\"><i>pathname</i> is relative and\n<i>dirfd</i> is a file descriptor referring to a file other\nthan a directory.</p>\n\n<p style=\"margin-left:11%;\"><b>ENOTSUP</b></p>\n\n<p style=\"margin-left:22%;\"><i>flags</i> specified\n<b>AT_SYMLINK_NOFOLLOW</b>, which is not supported.</p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fchmodat</b>()\nwas added to Linux in kernel 2.6.16; library support was\nadded to glibc in version 2.4.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>chmod</b>(),\n<b>fchmod</b>(): 4.4BSD, SVr4, POSIX.1-2001i,\nPOSIX.1-2008.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>fchmodat</b>():\nPOSIX.1-2008.</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>C\nlibrary/kernel differences</b> <br>\nThe GNU C library <b>fchmodat</b>() wrapper function\nimplements the POSIX-specified interface described in this\npage. This interface differs from the underlying Linux\nsystem call, which does <i>not</i> have a <i>flags</i>\nargument.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>Glibc\nnotes</b> <br>\nOn older kernels where <b>fchmodat</b>() is unavailable, the\nglibc wrapper function falls back to the use of\n<b>chmod</b>(). When <i>pathname</i> is a relative pathname,\nglibc constructs a pathname based on the symbolic link in\n<i>/proc/self/fd</i> that corresponds to the <i>dirfd</i>\nargument.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/1/chmod\">chmod(1)</a>,\n<a href=\"https://man.page/2/chown\">chown(2)</a>, <a href=\"https://man.page/2/execve\">execve(2)</a>, <a href=\"https://man.page/2/open\">open(2)</a>,\n<a href=\"https://man.page/2/stat\">stat(2)</a>, <a href=\"https://man.page/7/inode\">inode(7)</a>, <a href=\"https://man.page/7/path_resolution\">path_resolution(7)</a>,\n<a href=\"https://man.page/7/symlink\">symlink(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}