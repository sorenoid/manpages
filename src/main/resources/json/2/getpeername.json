{"name":"getpeername","description":"getpeername - get name of connected peer socket","body":"\n\n<h1 align=\"center\">GETPEERNAME</h1>\n\n\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">getpeername -\nget name of connected peer socket</p>\n\n<h2>SYNOPSIS\n<a name=\"SYNOPSIS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>#include\n&lt;sys/socket.h&gt;</b></p>\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>int\ngetpeername(int</b> <i>sockfd</i><b>, struct sockaddr\n*</b><i>addr</i><b>, socklen_t\n*</b><i>addrlen</i><b>);</b></p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><b>getpeername</b>()\nreturns the address of the peer connected to the socket\n<i>sockfd</i>, in the buffer pointed to by <i>addr</i>. The\n<i>addrlen</i> argument should be initialized to indicate\nthe amount of space pointed to by <i>addr</i>. On return it\ncontains the actual size of the name returned (in bytes).\nThe name is truncated if the buffer provided is too\nsmall.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The returned\naddress is truncated if the buffer provided is too small; in\nthis case, <i>addrlen</i> will return a value greater than\nwas supplied to the call.</p>\n\n<h2>RETURN VALUE\n<a name=\"RETURN VALUE\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">On success,\nzero is returned. On error, -1 is returned, and <i>errno</i>\nis set appropriately.</p>\n\n<h2>ERRORS\n<a name=\"ERRORS\"></a>\n</h2>\n\n\n<table width=\"100%\" border=\"0\" rules=\"none\" frame=\"void\"\n       cellspacing=\"0\" cellpadding=\"0\">\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p style=\"margin-top: 1em\"><b>EBADF</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p style=\"margin-top: 1em\">The argument <i>sockfd</i> is\nnot a valid file descriptor.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EFAULT</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p>The <i>addr</i> argument points to memory not in a valid\npart of the process address space.</p></td></tr>\n<tr valign=\"top\" align=\"left\">\n<td width=\"11%\"></td>\n<td width=\"9%\">\n\n\n<p><b>EINVAL</b></p></td>\n<td width=\"2%\"></td>\n<td width=\"78%\">\n\n\n<p><i>addrlen</i> is invalid (e.g., is negative).</p></td></tr>\n</table>\n\n<p style=\"margin-left:11%;\"><b>ENOBUFS</b></p>\n\n<p style=\"margin-left:22%;\">Insufficient resources were\navailable in the system to perform the operation.</p>\n\n<p style=\"margin-left:11%;\"><b>ENOTCONN</b></p>\n\n<p style=\"margin-left:22%;\">The socket is not\nconnected.</p>\n\n<p style=\"margin-left:11%;\"><b>ENOTSOCK</b></p>\n\n<p style=\"margin-left:22%;\">The file descriptor\n<i>sockfd</i> does not refer to a socket.</p>\n\n<h2>CONFORMING TO\n<a name=\"CONFORMING TO\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">POSIX.1-2001,\nPOSIX.1-2008, SVr4, 4.4BSD (<b>getpeername</b>() first\nappeared in 4.2BSD).</p>\n\n<h2>NOTES\n<a name=\"NOTES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">For background\non the <i>socklen_t</i> type, see <a href=\"https://man.page/2/accept\">accept(2)</a>.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">For stream\nsockets, once a <a href=\"https://man.page/2/connect\">connect(2)</a> has been performed, either\nsocket can call <b>getpeername</b>() to obtain the address\nof the peer socket. On the other hand, datagram sockets are\nconnectionless. Calling <a href=\"https://man.page/2/connect\">connect(2)</a> on a datagram\nsocket merely sets the peer address for outgoing datagrams\nsent with <a href=\"https://man.page/2/write\">write(2)</a> or <a href=\"https://man.page/2/recv\">recv(2)</a>. The caller of\n<a href=\"https://man.page/2/connect\">connect(2)</a> can use <b>getpeername</b>() to obtain the\npeer address that it earlier set for the socket. However,\nthe peer socket is unaware of this information, and calling\n<b>getpeername</b>() on the peer socket will return no\nuseful information (unless a <a href=\"https://man.page/2/connect\">connect(2)</a> call was also\nexecuted on the peer). Note also that the receiver of a\ndatagram can obtain the address of the sender when using\n<a href=\"https://man.page/2/recvfrom\">recvfrom(2)</a>.</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/accept\">accept(2)</a>,\n<a href=\"https://man.page/2/bind\">bind(2)</a>, <a href=\"https://man.page/2/getsockname\">getsockname(2)</a>, <a href=\"https://man.page/7/ip\">ip(7)</a>,\n<a href=\"https://man.page/7/socket\">socket(7)</a>, <a href=\"https://man.page/7/unix\">unix(7)</a></p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#SYNOPSIS\">SYNOPSIS</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#RETURN VALUE\">RETURN VALUE</a>","<a href=\"#ERRORS\">ERRORS</a>","<a href=\"#CONFORMING TO\">CONFORMING TO</a>","<a href=\"#NOTES\">NOTES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":2}