{"name":"vcs","description":"vcs, vcsa - virtual console memory","body":"\n\n<h1 align=\"center\">VCS</h1>\n\n\n\n\n\n\n\n\n\n<hr>\n\n\n<h2>NAME\n<a name=\"NAME\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">vcs, vcsa -\nvirtual console memory</p>\n\n<h2>DESCRIPTION\n<a name=\"DESCRIPTION\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/dev/vcs0</i>\nis a character device with major number 7 and minor number\n0, usually with mode 0644 and ownership root:tty. It refers\nto the memory of the currently displayed virtual console\nterminal.</p>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/dev/vcs[1-63]</i>\nare character devices for virtual console terminals, they\nhave major number 7 and minor number 1 to 63, usually mode\n0644 and ownership root:tty. <i>/dev/vcsa[0-63]</i> are the\nsame, but using <i>unsigned short</i>s (in host byte order)\nthat include attributes, and prefixed with four bytes giving\nthe screen dimensions and cursor position: <i>lines</i>,\n<i>columns</i>, <i>x</i>, <i>y</i>. (<i>x</i> = <i>y</i> = 0\nat the top left corner of the screen.)</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">When a\n512-character font is loaded, the 9th bit position can be\nfetched by applying the <a href=\"https://man.page/2/ioctl\">ioctl(2)</a>\n<b>VT_GETHIFONTMASK</b> operation (available in Linux\nkernels 2.6.18 and above) on <i>/dev/tty[1-63]</i>; the\nvalue is returned in the <i>unsigned short</i> pointed to by\nthe third <a href=\"https://man.page/2/ioctl\">ioctl(2)</a> argument.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">These devices\nreplace the screendump <a href=\"https://man.page/2/ioctl\">ioctl(2)</a> operations of\n<a href=\"https://man.page/2/ioctl_console\">ioctl_console(2)</a>, so the system administrator can\ncontrol access using filesystem permissions.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The devices for\nthe first eight virtual consoles may be created by:</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">for x in 0 1 2\n3 4 5 6 7 8; do <br>\nmknod -m 644 /dev/vcs$x c 7 $x; <br>\nmknod -m 644 /dev/vcsa$x c 7 $[$x+128]; <br>\ndone <br>\nchown root:tty /dev/vcs*</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">No\n<a href=\"https://man.page/2/ioctl\">ioctl(2)</a> requests are supported.</p>\n\n<h2>FILES\n<a name=\"FILES\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><i>/dev/vcs[0-63]\n<br>\n/dev/vcsa[0-63]</i></p>\n\n<h2>VERSIONS\n<a name=\"VERSIONS\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">Introduced with\nversion 1.1.92 of the Linux kernel.</p>\n\n<h2>EXAMPLES\n<a name=\"EXAMPLES\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">You may do a\nscreendump on vt3 by switching to vt1 and typing</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">cat /dev/vcs3\n&gt;foo</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">Note that the\noutput does not contain newline characters, so some\nprocessing may be required, like in</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">fold -w 81\n/dev/vcs3 | lpr</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">or\n(horrors)</p>\n\n<p style=\"margin-left:17%; margin-top: 1em\">setterm -dump 3\n-file /proc/self/fd/1</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">The\n<i>/dev/vcsa0</i> device is used for Braille support.</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">This program\ndisplays the character and screen attributes under the\ncursor of the second virtual console, then changes the\nbackground color there:</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">#include\n&lt;unistd.h&gt; <br>\n#include &lt;stdlib.h&gt; <br>\n#include &lt;stdio.h&gt; <br>\n#include &lt;fcntl.h&gt; <br>\n#include &lt;sys/ioctl.h&gt; <br>\n#include &lt;linux/vt.h&gt;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">int <br>\nmain(void) <br>\n{ <br>\nint fd; <br>\nchar *device = &quot;/dev/vcsa2&quot;; <br>\nchar *console = &quot;/dev/tty2&quot;; <br>\nstruct {unsigned char lines, cols, x, y;} scrn; <br>\nunsigned short s; <br>\nunsigned short mask; <br>\nunsigned char attrib; <br>\nint ch;</p>\n\n<p style=\"margin-left:11%; margin-top: 1em\">fd =\nopen(console, O_RDWR); <br>\nif (fd &lt; 0) { <br>\nperror(console); <br>\nexit(EXIT_FAILURE); <br>\n} <br>\nif (ioctl(fd, VT_GETHIFONTMASK, &amp;mask) &lt; 0) { <br>\nperror(&quot;VT_GETHIFONTMASK&quot;); <br>\nexit(EXIT_FAILURE); <br>\n} <br>\n(void) close(fd); <br>\nfd = open(device, O_RDWR); <br>\nif (fd &lt; 0) { <br>\nperror(device); <br>\nexit(EXIT_FAILURE); <br>\n} <br>\n(void) read(fd, &amp;scrn, 4); <br>\n(void) lseek(fd, 4 + 2*(scrn.y*scrn.cols + scrn.x),\nSEEK_SET); <br>\n(void) read(fd, &amp;s, 2); <br>\nch = s &amp; 0xff; <br>\nif (s &amp; mask) <br>\nch |= 0x100; <br>\nattrib = ((s &amp; ~mask) &gt;&gt; 8); <br>\nprintf(&quot;ch=%#03x attrib=%#02x\\n&quot;, ch, attrib);\n<br>\ns ^= 0x1000; <br>\n(void) lseek(fd, -2, SEEK_CUR); <br>\n(void) write(fd, &amp;s, 2); <br>\nexit(EXIT_SUCCESS); <br>\n}</p>\n\n<h2>SEE ALSO\n<a name=\"SEE ALSO\"></a>\n</h2>\n\n\n\n<p style=\"margin-left:11%; margin-top: 1em\"><a href=\"https://man.page/2/ioctl_console\">ioctl_console(2)</a>,\n<a href=\"https://man.page/4/tty\">tty(4)</a>, <a href=\"https://man.page/4/ttyS\">ttyS(4)</a>, <b>gpm</b>(8)</p>\n\n<h2>COLOPHON\n<a name=\"COLOPHON\"></a>\n</h2>\n\n\n<p style=\"margin-left:11%; margin-top: 1em\">This page is\npart of release 5.10 of the Linux <i>man-pages</i> project.\nA description of the project, information about reporting\nbugs, and the latest version of this page, can be found at\nhttps://www.kernel.org/doc/man-pages/.</p>\n<hr>\n","headings":["<a href=\"#NAME\">NAME</a>","<a href=\"#DESCRIPTION\">DESCRIPTION</a>","<a href=\"#FILES\">FILES</a>","<a href=\"#VERSIONS\">VERSIONS</a>","<a href=\"#EXAMPLES\">EXAMPLES</a>","<a href=\"#SEE ALSO\">SEE ALSO</a>","<a href=\"#COLOPHON\">COLOPHON</a>"],"level":4}