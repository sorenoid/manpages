<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sat Nov 26 20:40:19 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GROFF_DIFF</title>

</head>
<body>

<h1 align="center">GROFF_DIFF</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GROFF LANGUAGE">GROFF LANGUAGE</a><br>
<a href="#INTERMEDIATE OUTPUT FORMAT">INTERMEDIATE OUTPUT FORMAT</a><br>
<a href="#INCOMPATIBILITIES">INCOMPATIBILITIES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">groff_diff -
differences between GNU troff and classical troff</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page describes the language differences between
<i>groff</i>, the GNU <i>roff</i> text processing system,
and the classical <i>roff</i> formatter of the freely
available Unix&nbsp;7 of the 1970s, documented in the
<i>Troff User&rsquo;s Manual</i> by <i>Ossanna</i> and
<i>Kernighan</i>. This includes the roff language as well as
the intermediate output format (troff output).</p>

<p style="margin-left:11%; margin-top: 1em">Section
&ldquo;See Also&rdquo; below gives pointers to both the
classical <i>roff</i> and the modern <i>groff</i>
documentation.</p>

<h2>GROFF LANGUAGE
<a name="GROFF LANGUAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In this
section, all additional features of <i>groff</i> compared to
the classical Unix&nbsp;7 <i>troff</i> are described in
detail.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Long
names</b> <br>
The names of number registers, fonts,
strings/macros/diversions, special characters (glyphs), and
colors can be of any length. In escape sequences,
additionally to the classical
&rsquo;<b>(</b><i>xx</i>&rsquo; construction for a
two-character glyph name, you can use
&rsquo;<b>[</b><i>xxx</i><b>]</b>&rsquo; for a name of
arbitrary length.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\[</b><i>xxx</i><b>]</b></p></td>
<td width="2%"></td>
<td width="72%">


<p>Print the special character (glyph) called
<i>xxx</i>.</p> </td>
<td width="6%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>\[</b><i>comp1 comp2
...</i><b>]</b></p>

<p style="margin-left:22%;">Print composite glyph
consisting of multiple components. Example:
&rsquo;\[A&nbsp;ho]&rsquo; is capital letter A with ogonek
which finally maps to glyph name &rsquo;u0041_0328&rsquo;.
See <i>Groff: The GNU Implementation of troff</i>, the
<i>groff</i> Texinfo manual, for details of how a glyph name
for a composite glyph is constructed, and
<b>groff_char</b>(7) for a list of glyph name components
used in composite glyph names.</p>


<p style="margin-left:11%;"><b>\f[</b><i>xxx</i><b>]</b></p>

<p style="margin-left:22%;">Set font <i>xxx</i>.
Additionally, <b>\f[]</b> is a new syntax form equal to
<b>\fP</b>, i.e., to return to the previous font.</p>

<p style="margin-left:11%;"><b>\*[</b><i>xxx arg1 arg2
...</i><b>]</b></p>

<p style="margin-left:22%;">Interpolate string <i>xxx</i>,
taking <i>arg1</i>, <i>arg2</i>, <i>...</i>, as
arguments.</p>


<p style="margin-left:11%;"><b>\n[</b><i>xxx</i><b>]</b></p>

<p style="margin-left:22%;">Interpolate number register
<i>xxx</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Fractional
point sizes</b> <br>
A <i>scaled point</i> is equal to <b>1/sizescale</b> points,
where <b>sizescale</b> is specified in the <i>DESC</i> file
(1 by default). There is a new scale indicator&nbsp;<b>z</b>
that has the effect of multiplying by sizescale. Requests
and escape sequences in troff interpret arguments that
represent a point size as being in units of scaled points,
but they evaluate each such argument using a default scale
indicator of&nbsp;<b>z</b>. Arguments treated in this way
are the argument to the <b>ps</b> request, the third
argument to the <b>cs</b> request, the second and fourth
arguments to the <b>tkf</b> request, the argument to the
<b>\H</b> escape sequence, and those variants of the
<b>\s</b> escape sequence that take a numeric expression as
their argument.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
suppose sizescale is 1000; then a scaled point is equivalent
to a millipoint; the call <b>.ps&nbsp;10.25</b> is
equivalent to <b>.ps&nbsp;10.25z</b> and so sets the point
size to 10250 scaled points, which is equal to 10.25
points.</p>

<p style="margin-left:11%; margin-top: 1em">The number
register <b>\n[.s]</b> returns the point size in points as
decimal fraction. There is also a new number register
<b>\n[.ps]</b> that returns the point size in scaled
points.</p>

<p style="margin-left:11%; margin-top: 1em">It would make
no sense to use the <b>z&nbsp;</b>scale indicator in a
numeric expression whose default scale indicator was neither
<b>u</b> nor&nbsp;<b>z</b>, and so <b>troff</b> disallows
this. Similarly it would make no sense to use a scaling
indicator other than <b>z</b> or&nbsp;<b>u</b> in a numeric
expression whose default scale indicator was&nbsp;<b>z</b>,
and so <b>troff</b> disallows this as well.</p>

<p style="margin-left:11%; margin-top: 1em">There is also
new scale indicator&nbsp;<b>s</b> which multiplies by the
number of units in a scaled point. So, for example,
<b>\n[.ps]s</b> is equal to <b>1m</b>. Be sure not to
confuse the <b>s</b> and <b>z&nbsp;</b>scale indicators.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Numeric
expressions</b> <br>
Spaces are permitted in a number expression within
parentheses.</p>

<p style="margin-left:11%; margin-top: 1em"><b>M</b>
indicates a scale of 100ths of an em. <b>f</b> indicates a
scale of 65536 units, providing fractions for color
definitions with the <b>defcolor</b> request. For example,
0.5f = 32768u.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>e1</i><b>&gt;?</b><i>e2</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>The maximum of <i>e1</i> and <i>e2</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>e1</i><b>&lt;?</b><i>e2</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>The minimum of <i>e1</i> and <i>e2</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>(</b><i>c</i><b>;</b><i>e</i><b>)</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Evaluate <i>e</i> using <i>c</i> as the default scaling
indicator. If <i>c</i> is missing, ignore scaling indicators
in the evaluation of&nbsp;<i>e</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>New escape
sequences <br>
\A&rsquo;</b><i>anything</i><b>&rsquo;</b></p>

<p style="margin-left:22%;">This expands to <b>1</b>
or&nbsp;<b>0</b>, depending on whether <i>anything</i> is or
is not acceptable as the name of a string, macro, diversion,
number register, environment, font, or color. It
returns&nbsp;<b>0</b> if <i>anything</i> is empty. This is
useful if you want to look up user input in some sort of
associative table.</p>


<p style="margin-left:11%;"><b>\B&rsquo;</b><i>anything</i><b>&rsquo;</b></p>

<p style="margin-left:22%;">This expands to <b>1</b>
or&nbsp;<b>0</b>, depending on whether <i>anything</i> is or
is not a valid numeric expression. It returns&nbsp;<b>0</b>
if <i>anything</i> is empty.</p>


<p style="margin-left:11%;"><b>\C&rsquo;</b><i>xxx</i><b>&rsquo;</b></p>

<p style="margin-left:22%;">Typeset glyph named <i>xxx</i>.
Normally it is more convenient to use
<b>\[</b><i>xxx</i><b>]</b>. But <b>\C</b> has the advantage
that it is compatible with recent versions of Unix and is
available in compatibility mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\E</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This is equivalent to an escape character, but it is not
interpreted in copy mode. For example, strings to start and
end superscripting could be defined like this</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">.ds {
\v&rsquo;-.3m&rsquo;\s&rsquo;\En[.s]*6u/10u&rsquo; <br>
.ds } \s0\v&rsquo;.3m&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">The use of
<b>\E</b> ensures that these definitions work even if
<b>\*{</b> gets interpreted in copy mode (for example, by
being used in a macro argument).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>\F</b><i>f</i></p></td>
<td width="82%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\F(</b><i>fm</i></p></td>
<td width="82%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>\F[</b><i>fam</i><b>]</b></p>

<p style="margin-left:22%;">Change font family. This is the
same as the <b>fam</b> request. <b>\F[]</b> switches back to
the previous font family (note that <b>\FP</b> won&rsquo;t
work; it selects font family &rsquo;P&rsquo; instead).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\m</b><i>x</i></p></td>
<td width="82%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\m(</b><i>xx</i></p></td>
<td width="82%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>\m[</b><i>xxx</i><b>]</b></p>

<p style="margin-left:22%;">Set drawing color. <b>\m[]</b>
switches back to the previous color.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\M</b><i>x</i></p></td>
<td width="82%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\M(</b><i>xx</i></p></td>
<td width="82%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>\M[</b><i>xxx</i><b>]</b></p>

<p style="margin-left:22%;">Set background color for filled
objects drawn with the
<b>\D&rsquo;</b><i>...</i><b>&rsquo;</b> commands.
<b>\M[]</b> switches back to the previous color.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\N&rsquo;</b><i>n</i><b>&rsquo;</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Typeset the glyph with index&nbsp;<i>n</i> in the
current font. <i>n&nbsp;</i>can be any integer. Most devices
only have glyphs with indices between 0 and 255. If the
current font does not contain a glyph with that code,
special fonts are <i>not</i> searched. The <b>\N</b> escape
sequence can be conveniently used in conjunction with the
<b>char</b> request, for example</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">.char \[phone]
\f(ZD\N&rsquo;37&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">The index of
each glyph is given in the fourth column in the font
description file after the <b>charset</b> command. It is
possible to include unnamed glyphs in the font description
file by using a name of <b>---</b>; the <b>\N</b> escape
sequence is the only way to use these.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>\O</b><i>n</i></p></td>
<td width="4%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\O[</b><i>n</i><b>]</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Suppress troff output. The escapes <b>\O2</b>,
<b>\O3</b>, <b>\O4</b>, and <b>\O5</b> are intended for
internal use by <b>grohtml</b>.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>\O0</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%"></td>
<td width="6%"></td>
<td width="68%">


<p style="margin-top: 1em">Disable any ditroff glyphs from
being emitted to the device driver, provided that the escape
occurs at the outer level (see <b>\O3</b> and
<b>\O4</b>).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>\O1</b></p></td>
<td width="6%"></td>
<td width="68%">


<p>Enable output of glyphs, provided that the escape occurs
at the outer level.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>\O0</b> and
<b>\O1</b> also reset the registers <b>\n[opminx]</b>,
<b>\n[opminy]</b>, <b>\n[opmaxx]</b>, and <b>\n[opmaxy]</b>
to&nbsp;-1. These four registers mark the top left and
bottom right hand corners of a box which encompasses all
written glyphs.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>\O2</b></p></td>
<td width="6%"></td>
<td width="68%">


<p style="margin-top: 1em">Provided that the escape occurs
at the outer level, enable output of glyphs and also write
out to stderr the page number and four registers
encompassing the glyphs previously written since the last
call to <b>\O</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>\O3</b></p></td>
<td width="6%"></td>
<td width="68%">


<p>Begin a nesting level. At start-up, <b>troff</b> is at
outer level. This is really an internal mechanism for
<b>grohtml</b> while producing images. They are generated by
running the troff source through <b>troff</b> to the
PostScript device and <b>ghostscript</b> to produce images
in PNG format. The <b>\O3</b> escape starts a new page if
the device is not html (to reduce the possibility of images
crossing a page boundary).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>\O4</b></p></td>
<td width="6%"></td>
<td width="68%">


<p>End a nesting level.</p></td></tr>
</table>


<p style="margin-left:22%;"><b>\O5[</b><i>Pfilename</i><b>]</b></p>

<p style="margin-left:32%;">This escape is <b>grohtml</b>
specific. Provided that this escape occurs at the outer
nesting level, write <i>filename</i> to stderr. The position
of the image, <i>P</i>, must be specified and must be one of
<b>l</b>, <b>r</b>, <b>c</b>, or <b>i</b> (left, right,
centered, inline). <i>filename</i> is associated with the
production of the next inline image.</p>


<p style="margin-left:11%;"><b>\R&rsquo;</b><i>name&nbsp;&plusmn;n</i><b>&rsquo;</b></p>

<p style="margin-left:22%;">This has the same effect as</p>


<p style="margin-left:32%; margin-top: 1em"><b>.nr&nbsp;</b><i>name&nbsp;&plusmn;n</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\s(</b><i>nn</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\s&plusmn;(</b><i>nn</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the point size to <i>nn</i> points; <i>nn</i> must
be exactly two digits.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\s[&plusmn;</b><i>n</i><b>]</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\s&plusmn;[</b><i>n</i><b>]</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\s&rsquo;&plusmn;</b><i>n</i><b>&rsquo;</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\s&plusmn;&rsquo;</b><i>n</i><b>&rsquo;</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the point size to <i>n</i> scaled points; <i>n</i>
is a numeric expression with a default scale indicator
of&nbsp;<b>z</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\V</b><i>x</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\V(</b><i>xx</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>\V[</b><i>xxx</i><b>]</b></p>

<p style="margin-left:22%;">Interpolate the contents of the
environment variable <i>xxx</i>, as returned by
<b>getenv</b>(3). <b>\V</b> is interpreted in copy mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\Y</b><i>x</i></p></td>
<td width="82%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\Y(</b><i>xx</i></p></td>
<td width="82%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>\Y[</b><i>xxx</i><b>]</b></p>

<p style="margin-left:22%;">This is approximately
equivalent to <b>\X&rsquo;\*[</b><i>xxx</i><b>]&rsquo;</b>.
However the contents of the string or macro <i>xxx</i> are
not interpreted; also it is permitted for <i>xxx</i> to have
been defined as a macro and thus contain newlines (it is not
permitted for the argument to <b>\X</b> to contain
newlines). The inclusion of newlines requires an extension
to the Unix troff output format, and confuses drivers that
do not know about this extension.</p>


<p style="margin-left:11%;"><b>\Z&rsquo;</b><i>anything</i><b>&rsquo;</b></p>

<p style="margin-left:22%;">Print anything and then restore
the horizontal and vertical position; <i>anything</i> may
not contain tabs or leaders.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\$0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>The name by which the current macro was invoked. The
<b>als</b> request can make a macro have more than one
name.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\$*</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>In a macro or string, the concatenation of all the
arguments separated by spaces.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\$@</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>In a macro or string, the concatenation of all the
arguments with each surrounded by double quotes, and
separated by spaces.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\$^</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>In a macro, the representation of all parameters as if
they were an argument to the <b>ds</b> request.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>\$(</b><i>nn</i></p></td>
<td width="4%"></td>
<td width="78%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>\$[</b><i>nnn</i><b>]</b></p>

<p style="margin-left:22%;">In a macro or string, this
gives the <i>nn</i>-th or <i>nnn</i>-th argument. Macros and
strings can have an unlimited number of arguments.</p>


<p style="margin-left:11%;"><b>\?</b><i>anything</i><b>\?</b></p>

<p style="margin-left:22%;">When used in a diversion, this
transparently embeds <i>anything</i> in the diversion.
<i>anything</i> is read in copy mode. When the diversion is
reread, <i>anything</i> is interpreted. <i>anything</i> may
not contain newlines; use <b>\!</b> if you want to embed
newlines in a diversion. The escape sequence <b>\?</b> is
also recognized in copy mode and turned into a single
internal code; it is this code that terminates
<i>anything</i>. Thus</p>

<p style="margin-left:32%; margin-top: 1em">.nr x 1 <br>
.nf <br>
.di d <br>
\?\\?\\\\?\\\\\\\\nx\\\\?\\?\? <br>
.di <br>
.nr x 2 <br>
.di e <br>
.d <br>
.di <br>
.nr x 3 <br>
.di f <br>
.e <br>
.di <br>
.nr x 4 <br>
.f</p>


<p style="margin-left:22%; margin-top: 1em">prints&nbsp;<b>4</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\/</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This increases the width of the preceding glyph so that
the spacing between that glyph and the following glyph is
correct if the following glyph is a roman glyph. It is a
good idea to use this escape sequence whenever an italic
glyph is immediately followed by a roman glyph without any
intervening space.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\,</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This modifies the spacing of the following glyph so that
the spacing between that glyph and the preceding glyph is
correct if the preceding glyph is a roman glyph. It is a
good idea to use this escape sequence whenever a roman glyph
is immediately followed by an italic glyph without any
intervening space.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\)</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Like <b>\&amp;</b> except that it behaves like a
character declared with the <b>cflags</b> request to be
transparent for the purposes of end-of-sentence
recognition.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\~</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This produces an unbreakable space that stretches like a
normal inter-word space when a line is adjusted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\:</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This causes the insertion of a zero-width break point.
It is equal to <b>\%</b> within a word but without insertion
of a soft hyphen glyph.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>\#</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Everything up to and including the next newline is
ignored. This is interpreted in copy mode. It is like
<b>\&quot;</b> except that <b>\&quot;</b> does not ignore
the terminating newline.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>New requests
<br>
.aln&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Create an alias <i>xx</i> for
number register object named <i>yy</i>. The new name and the
old name are exactly equivalent. If <i>yy</i> is undefined,
a warning of type <b>reg</b> is generated, and the request
is ignored.</p>


<p style="margin-left:11%;"><b>.als&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Create an alias <i>xx</i> for
request, string, macro, or diversion object named <i>yy</i>.
The new name and the old name are exactly equivalent (it is
similar to a hard rather than a soft link). If <i>yy</i> is
undefined, a warning of type <b>mac</b> is generated, and
the request is ignored. The <b>de</b>, <b>am</b>, <b>di</b>,
<b>da</b>, <b>ds</b>, and <b>as</b> requests only create a
new object if the name of the macro, diversion or string is
currently undefined or if it is defined to be a request;
normally they modify the value of an existing object.</p>


<p style="margin-left:11%;"><b>.am1&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Similar to <b>.am</b>, but
compatibility mode is switched off during execution. To be
more precise, a &rsquo;compatibility save&rsquo; token is
inserted at the beginning of the macro addition, and a
&rsquo;compatibility restore&rsquo; token at the end. As a
consequence, the requests <b>am</b>, <b>am1</b>, <b>de</b>,
and <b>de1</b> can be intermixed freely since the
compatibility save/restore tokens only affect the macro
parts defined by <b>.am1</b> and <b>.ds1</b>.</p>


<p style="margin-left:11%;"><b>.ami&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Append to macro indirectly. See
the <b>dei</b> request below for more information.</p>


<p style="margin-left:11%;"><b>.ami1&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Same as the <b>ami</b> request
but compatibility mode is switched off during execution.</p>


<p style="margin-left:11%;"><b>.as1&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Similar to <b>.as</b>, but
compatibility mode is switched off during expansion. To be
more precise, a &rsquo;compatibility save&rsquo; token is
inserted at the beginning of the string, and a
&rsquo;compatibility restore&rsquo; token at the end. As a
consequence, the requests <b>as</b>, <b>as1</b>, <b>ds</b>,
and <b>ds1</b> can be intermixed freely since the
compatibility save/restore tokens only affect the
(sub)strings defined by <b>as1</b> and <b>ds1</b>.</p>


<p style="margin-left:11%;"><b>.asciify&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">This request
&rsquo;unformats&rsquo; the diversion <i>xx</i> in such a
way that ASCII and space characters (and some escape
sequences) that were formatted and diverted into <i>xx</i>
are treated like ordinary input characters when <i>xx</i> is
reread. Useful for diversions in conjunction with the
<b>writem</b> request. It can be also used for gross hacks;
for example, this</p>

<p style="margin-left:32%; margin-top: 1em">.tr @. <br>
.di x <br>
@nr n 1 <br>
.br <br>
.di <br>
.tr @@ <br>
.asciify x <br>
.x</p>

<p style="margin-left:22%; margin-top: 1em">sets
register&nbsp;<b>n</b> to&nbsp;1. Note that glyph
information (font, font size, etc.) is not preserved; use
<b>.unformat</b> instead.</p>

<p style="margin-left:11%;"><b>.backtrace</b></p>

<p style="margin-left:22%;">Print a backtrace of the input
stack on stderr.</p>

<p style="margin-left:11%;"><b>.blm&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">Set the blank line macro to
<i>xx</i>. If there is a blank line macro, it is invoked
when a blank line is encountered instead of the usual troff
behaviour.</p>

<p style="margin-left:11%;"><b>.box&nbsp;</b><i>xx</i>
<b><br>
.boxa&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">These requests are similar to
the <b>di</b> and <b>da</b> requests with the exception that
a partially filled line does not become part of the
diversion (i.e., the diversion always starts with a new
line) but is restored after ending the diversion, discarding
the partially filled line which possibly comes from the
diversion.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.break</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Break out of a while loop. See also the <b>while</b> and
<b>continue</b> requests. Be sure not to confuse this with
the <b>br</b> request.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.brp</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is the same as <b>\p</b>.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>.cflags&nbsp;</b><i>n c1 c2
...</i></p>

<p style="margin-left:22%;">Characters <i>c1</i>,
<i>c2</i>, <i>...</i>, have properties determined by
<i>n</i>, which is ORed from the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>1</p></td>
<td width="6%"></td>
<td width="68%">


<p>The character ends sentences (initially characters
<b>.?!</b> have this property).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>2</p></td>
<td width="6%"></td>
<td width="68%">


<p>Lines can be broken before the character (initially no
characters have this property); a line is not broken at a
character with this property unless the characters on each
side both have non-zero hyphenation codes. This can be
overridden with value 64.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>4</p></td>
<td width="6%"></td>
<td width="68%">


<p>Lines can be broken after the character (initially
characters <b>-\[hy]\[em]</b> have this property); a line is
not broken at a character with this property unless the
characters on each side both have non-zero hyphenation
codes. This can be overridden with value 64.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>8</p></td>
<td width="6%"></td>
<td width="68%">


<p>The glyph associated with this character overlaps
horizontally (initially characters
<b>\[ul]\[rn]\[ru]\[radicalex]\[sqrtex]</b> have this
property).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>16</p></td>
<td width="6%"></td>
<td width="68%">


<p>The glyph associated with this character overlaps
vertically (initially glyph <b>\[br]</b> has this
property).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>32</p></td>
<td width="6%"></td>
<td width="68%">


<p>An end-of-sentence character followed by any number of
characters with this property is treated as the end of a
sentence if followed by a newline or two spaces; in other
words the character is transparent for the purposes of
end-of-sentence recognition; this is the same as having a
zero space factor in TeX (initially characters
<b>&quot;&rsquo;)]*\[dg]\[rq]\[cq]</b> have this
property).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>64</p></td>
<td width="6%"></td>
<td width="68%">


<p>Ignore hyphenation code values of the surrounding
characters. Use this in combination with values 2 and&nbsp;4
(initially no characters have this property).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>128</p></td>
<td width="6%"></td>
<td width="68%">


<p>Prohibit a line break before the character, but allow a
line break after the character. This works only in
combination with flags 256 and 512 and has no effect
otherwise.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>256</p></td>
<td width="6%"></td>
<td width="68%">


<p>Prohibit a line break after the character, but allow a
line break before the character. This works only in
combination with flags 128 and 512 and has no effect
otherwise.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>512</p></td>
<td width="6%"></td>
<td width="68%">


<p>Allow line break before or after the character. This
works only in combination with flags 128 and 256 and has no
effect otherwise.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Contrary to
flag values 2 and&nbsp;4, the flags 128, 256, and 512 work
pairwise. If, for example, the left character has value 512,
and the right character 128, no line break gets inserted. If
we use value&nbsp;6 instead for the left character, a line
break after the character can&rsquo;t be suppressed since
the right neighbour character doesn&rsquo;t get
examined.</p>


<p style="margin-left:11%;"><b>.char&nbsp;</b><i>c&nbsp;string</i></p>

<p style="margin-left:22%;">[This request can both define
characters and glyphs.]</p>

<p style="margin-left:22%; margin-top: 1em">Define
entity&nbsp;<i>c</i> to be <i>string</i>. To be more
precise, define (or even override) a groff entity which can
be accessed with name&nbsp;<i>c</i> on the input side, and
which uses <i>string</i> on the output side. Every time
glyph&nbsp;<i>c</i> needs to be printed, <i>string</i> is
processed in a temporary environment and the result is
wrapped up into a single object. Compatibility mode is
turned off and the escape character is set to&nbsp;<b>\</b>
while <i>string</i> is being processed. Any emboldening,
constant spacing or track kerning is applied to this object
rather than to individual glyphs in <i>string</i>.</p>

<p style="margin-left:22%; margin-top: 1em">A groff object
defined by this request can be used just like a normal glyph
provided by the output device. In particular other
characters can be translated to it with the <b>tr</b>
request; it can be made the leader glyph by the <b>lc</b>
request; repeated patterns can be drawn with the glyph using
the <b>\l</b> and <b>\L</b> escape sequences; words
containing&nbsp;<i>c</i> can be hyphenated correctly, if the
<b>hcode</b> request is used to give the object a
hyphenation code.</p>

<p style="margin-left:22%; margin-top: 1em">There is a
special anti-recursion feature: Use of glyph within the
glyph&rsquo;s definition is handled like normal glyphs not
defined with <b>char</b>.</p>

<p style="margin-left:22%; margin-top: 1em">A glyph
definition can be removed with the <b>rchar</b> request.</p>


<p style="margin-left:11%;"><b>.chop&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">Chop the last element off
macro, string, or diversion <i>xx</i>. This is useful for
removing the newline from the end of diversions that are to
be interpolated as strings.</p>

<p style="margin-left:11%;"><b>.class&nbsp;</b><i>name c1
c2 ...</i></p>

<p style="margin-left:22%;">Assign <i>name</i> to a set of
characters <i>c1</i>, <i>c2</i>, <i>...</i>, so that they
can be referred to from other requests easily (currently
<b>.cflags</b> only). Character ranges (indicated by an
intermediate &rsquo;-&rsquo;) and nested classes are
possible also. This is useful to assign properties to a
large set of characters.</p>


<p style="margin-left:11%;"><b>.close&nbsp;</b><i>stream</i></p>

<p style="margin-left:22%;">Close the stream named
<i>stream</i>; <i>stream</i> will no longer be an acceptable
argument to the <b>write</b> request. See the <b>open</b>
request.</p>


<p style="margin-left:11%;"><b>.composite&nbsp;</b><i>glyph1&nbsp;glyph2</i></p>

<p style="margin-left:22%;">Map glyph name <i>glyph1</i> to
glyph name <i>glyph2</i> if it is used in
<b>\[</b><i>...</i><b>]</b> with more than one
component.</p>

<p style="margin-left:11%;"><b>.continue</b></p>

<p style="margin-left:22%;">Finish the current iteration of
a while loop. See also the <b>while</b> and <b>break</b>
requests.</p>


<p style="margin-left:11%;"><b>.color&nbsp;</b><i>n</i></p>

<p style="margin-left:22%;">If <i>n</i> is non-zero or
missing, enable colors (this is the default), otherwise
disable them.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>.cp&nbsp;</b><i>n</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>If <i>n</i> is non-zero or missing, enable compatibility
mode, otherwise disable it. In compatibility mode, long
names are not recognized, and the incompatibilities caused
by long names do not arise.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.defcolor&nbsp;</b><i>xxx&nbsp;scheme&nbsp;color_components</i></p>

<p style="margin-left:22%;">Define color <i>xxx</i>.
<i>scheme</i> can be one of the following values: <b>rgb</b>
(three components), <b>cmy</b> (three components),
<b>cmyk</b> (four components), and <b>gray</b> or
<b>grey</b> (one component). Color components can be given
either as a hexadecimal string or as positive decimal
integers in the range 0&ndash;65535. A hexadecimal string
contains all color components concatenated; it must start
with either <b>#</b> or <b>##</b>. The former specifies hex
values in the range 0&ndash;255 (which are internally
multiplied by&nbsp;257), the latter in the range
0&ndash;65535. Examples: #FFC0CB (pink), ##ffff0000ffff
(magenta). A new scaling indicator&nbsp;<b>f</b> has been
introduced which multiplies its value by&nbsp;65536; this
makes it convenient to specify color components as fractions
in the range 0 to&nbsp;1. Example:</p>

<p style="margin-left:32%; margin-top: 1em">.defcolor
darkgreen rgb 0.1f 0.5f 0.2f</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<b>f</b> is the default scaling indicator for the
<b>defcolor</b> request, thus the above statement is
equivalent to</p>

<p style="margin-left:32%; margin-top: 1em">.defcolor
darkgreen rgb 0.1 0.5 0.2</p>

<p style="margin-left:22%; margin-top: 1em">The color named
<b>default</b> (which is device-specific) can&rsquo;t be
redefined. It is possible that the default color for
<b>\M</b> and <b>\m</b> is not the same.</p>


<p style="margin-left:11%;"><b>.de1&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Similar to <b>.de</b>, but
compatibility mode is switched off during execution. On
entry, the current compatibility mode is saved and restored
at exit.</p>


<p style="margin-left:11%;"><b>.dei&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Define macro indirectly. The
following example</p>

<p style="margin-left:32%; margin-top: 1em">.ds xx aa <br>
.ds yy bb <br>
.dei xx yy</p>

<p style="margin-left:22%; margin-top: 1em">is equivalent
to</p>

<p style="margin-left:32%; margin-top: 1em">.de aa bb</p>


<p style="margin-left:11%;"><b>.dei1&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Similar to the <b>dei</b>
request but compatibility mode is switched off during
execution.</p>


<p style="margin-left:11%;"><b>.device&nbsp;</b><i>anything</i></p>

<p style="margin-left:22%;">This is (almost) the same as
the <b>\X</b> escape. <i>anything</i> is read in copy mode;
a leading&nbsp;<b>&quot;</b> is stripped.</p>


<p style="margin-left:11%;"><b>.devicem&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">This is the same as the
<b>\Y</b> escape (to embed the contents of a macro into the
intermediate output preceded with
&rsquo;x&nbsp;X&rsquo;).</p>

<p style="margin-left:11%;"><b>.do&nbsp;</b><i>xxx</i></p>

<p style="margin-left:22%;">Interpret <i>.xxx</i> with
compatibility mode disabled. For example,</p>

<p style="margin-left:32%; margin-top: 1em">.do fam T</p>

<p style="margin-left:22%; margin-top: 1em">would have the
same effect as</p>

<p style="margin-left:32%; margin-top: 1em">.fam T</p>

<p style="margin-left:22%; margin-top: 1em">except that it
would work even if compatibility mode had been enabled. Note
that the previous compatibility mode is restored before any
files sourced by <i>xxx</i> are interpreted.</p>


<p style="margin-left:11%;"><b>.ds1&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Similar to <b>.ds</b>, but
compatibility mode is switched off during expansion. To be
more precise, a &rsquo;compatibility save&rsquo; token is
inserted at the beginning of the string, and a
&rsquo;compatibility restore&rsquo; token at the end.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>.ecs</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Save current escape character.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>.ecr</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Restore escape character saved with <b>ecs</b>. Without
a previous call to <b>ecs</b>, &rsquo;<b>\</b>&rsquo; will
be the new escape character.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>.evc&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">Copy the contents of
environment <i>xx</i> to the current environment. No pushing
or popping of environments is done.</p>

<p style="margin-left:11%;"><b>.fam&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">Set the current font family to
<i>xx</i>. The current font family is part of the current
environment. If <i>xx</i> is missing, switch back to
previous font family. The value at start-up is
&rsquo;T&rsquo;. See the description of the <b>sty</b>
request for more information on font families.</p>


<p style="margin-left:11%;"><b>.fchar&nbsp;</b><i>c&nbsp;string</i></p>

<p style="margin-left:22%;">Define fallback character (or
glyph)&nbsp;<i>c</i> to be <i>string</i>. The syntax of this
request is the same as the <b>char</b> request; the only
difference is that a glyph defined with <b>char</b> hides
the glyph with the same name in the current font, whereas a
glyph defined with <b>fchar</b> is checked only if the
particular glyph isn&rsquo;t found in the current font. This
test happens before checking special fonts.</p>


<p style="margin-left:11%;"><b>.fcolor&nbsp;</b><i>c</i></p>

<p style="margin-left:22%;">Set the fill color
to&nbsp;<i>c</i>. If <i>c</i> is missing, switch to the
previous fill color.</p>


<p style="margin-left:11%;"><b>.fschar&nbsp;</b><i>f&nbsp;c&nbsp;string</i></p>

<p style="margin-left:22%;">Define fallback character (or
glyph)&nbsp;<i>c</i> for font&nbsp;<i>f</i> to be
<i>string</i>. The syntax of this request is the same as the
<b>char</b> request (with an additional argument to specify
the font); a glyph defined with <b>fschar</b> is searched
after the list of fonts declared with the <b>fspecial</b>
request but before the list of fonts declared with
<b>.special</b>.</p>

<p style="margin-left:11%;"><b>.fspecial&nbsp;</b><i>f s1
s2 ...</i></p>

<p style="margin-left:22%;">When the current font
is&nbsp;<i>f</i>, fonts <i>s1</i>, <i>s2</i>, <i>...</i>,
are special, that is, they are searched for glyphs not in
the current font. Any fonts specified in the <b>special</b>
request are searched after fonts specified in the
<b>fspecial</b> request. Without argument, reset the list of
global special fonts to be empty.</p>


<p style="margin-left:11%;"><b>.ftr&nbsp;</b><i>f&nbsp;g</i></p>

<p style="margin-left:22%;">Translate font&nbsp;<i>f</i>
to&nbsp;<i>g</i>. Whenever a font named&nbsp;<i>f</i> is
referred to in an <b>\f</b> escape sequence, in the <b>F</b>
and <b>S</b> conditional operators, or in the <b>ft</b>,
<b>ul</b>, <b>bd</b>, <b>cs</b>, <b>tkf</b>, <b>special</b>,
<b>fspecial</b>, <b>fp</b>, or <b>sty</b> requests,
font&nbsp;<i>g</i> is used. If <i>g</i> is missing, or equal
to&nbsp;<i>f</i> then font&nbsp;<i>f</i> is not
translated.</p>


<p style="margin-left:11%;"><b>.fzoom&nbsp;</b><i>f&nbsp;zoom</i></p>

<p style="margin-left:22%;">Set zoom factor <i>zoom</i> for
font&nbsp;<i>f</i>. <i>zoom</i> must a non-negative integer
multiple of 1/1000th. If it is missing or is equal to zero,
it means the same as 1000, namely no magnification.
<i>f&nbsp;</i>must be a real font name, not a style.</p>


<p style="margin-left:11%;"><b>.gcolor&nbsp;</b><i>c</i></p>

<p style="margin-left:22%;">Set the glyph color
to&nbsp;<i>c</i>. If <i>c</i> is missing, switch to the
previous glyph color.</p>

<p style="margin-left:11%;"><b>.hcode&nbsp;</b><i>c1 code1
c2 code2 ...</i></p>

<p style="margin-left:22%;">Set the hyphenation code of
character <i>c1</i> to <i>code1</i> and that of <i>c2</i> to
<i>code2</i>, and so on. A hyphenation code must be a single
input character (not a special character) other than a digit
or a space. Initially each lower-case letter a&ndash;z has a
hyphenation code, which is itself, and each upper-case
letter A&ndash;Z has a hyphenation code which is the
lower-case version of itself. See also the <b>hpf</b>
request.</p>


<p style="margin-left:11%;"><b>.hla&nbsp;</b><i>lang</i></p>

<p style="margin-left:22%;">Set the current hyphenation
language to <i>lang</i>. Hyphenation exceptions specified
with the <b>hw</b> request and hyphenation patterns
specified with the <b>hpf</b> request are both associated
with the current hyphenation language. The <b>hla</b>
request is usually invoked by the <b>troffrc</b> file to set
up a default language.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.hlm&nbsp;</b><i>n</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the maximum number of consecutive hyphenated lines
to&nbsp;<i>n</i>. If <i>n</i> is negative, there is no
maximum. The default value is&nbsp;-1. This value is
associated with the current environment. Only lines output
from an environment count towards the maximum associated
with that environment. Hyphens resulting from <b>\%</b> are
counted; explicit hyphens are not.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.hpf&nbsp;</b><i>file</i></p>

<p style="margin-left:22%;">Read hyphenation patterns from
<i>file</i>; this is searched for in the same way that
<i>name</i><b>.tmac</b> is searched for when the
<b>-m</b><i>name</i> option is specified. It should have the
same format as (simple) TeX patterns files. More
specifically, the following scanning rules are
implemented.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p>A percent sign starts a comment (up to the end of the
line) even if preceded by a backslash.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p>No support for &rsquo;digraphs&rsquo; like
<b>\$</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>^^</b><i>xx</i> (<i>x</i> is 0&ndash;9 or a&ndash;f)
and <b>^^</b><i>x</i> (character code of&nbsp;<i>x</i> in
the range 0&ndash;127) are recognized; other use
of&nbsp;<b>^</b> causes an error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p>No macro expansion.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>hpf</b> checks for the expression
<b>\patterns{</b>...<b>}</b> (possibly with whitespace
before and after the braces). Everything between the braces
is taken as hyphenation patterns. Consequently,
<b>{&nbsp;</b>and&nbsp;<b>}</b> are not allowed in
patterns.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p>Similarly, <b>\hyphenation{</b>...<b>}</b> gives a list
of hyphenation exceptions.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>\endinput</b> is recognized also.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="68%">


<p>For backwards compatibility, if <b>\patterns</b> is
missing, the whole file is treated as a list of hyphenation
patterns (only recognizing the <b>%&nbsp;</b>character as
the start of a comment).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Use the
<b>hpfcode</b> request to map the encoding used in
hyphenation patterns files to <b>groff</b>&rsquo;s input
encoding. By default, everything maps to itself except
letters &rsquo;A&rsquo; to &rsquo;Z&rsquo; which map to
&rsquo;a&rsquo; to &rsquo;z&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The set of
hyphenation patterns is associated with the current language
set by the <b>hla</b> request. The <b>hpf</b> request is
usually invoked by the <b>troffrc</b> file; a second call
replaces the old patterns with the new ones.</p>


<p style="margin-left:11%;"><b>.hpfa&nbsp;</b><i>file</i></p>

<p style="margin-left:22%;">The same as <b>hpf</b> except
that the hyphenation patterns from <i>file</i> are appended
to the patterns already loaded in the current language.</p>

<p style="margin-left:11%;"><b>.hpfcode&nbsp;</b><i>a b c d
...</i></p>

<p style="margin-left:22%;">After reading a hyphenation
patterns file with the <b>hpf</b> or <b>hpfa</b> request,
convert all characters with character code&nbsp;<i>a</i> in
the recently read patterns to character code&nbsp;<i>b</i>,
character code&nbsp;<i>c</i> to&nbsp;<i>d</i>, etc.
Initially, all character codes map to themselves. The
arguments of <b>hpfcode</b> must be integers in the range 0
to&nbsp;255. Note that it is even possible to use character
codes which are invalid in <b>groff</b> otherwise.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.hym&nbsp;</b><i>n</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the <i>hyphenation margin</i> to&nbsp;<i>n</i>: when
the current adjustment mode is not&nbsp;<b>b</b>, the line
is not hyphenated if the line is no more than <i>n</i>
short. The default hyphenation margin is&nbsp;0. The default
scaling indicator for this request is&nbsp;<b>m</b>. The
hyphenation margin is associated with the current
environment. The current hyphenation margin is available in
the <b>\n[.hym]</b> register.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.hys&nbsp;</b><i>n</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the <i>hyphenation space</i> to&nbsp;<i>n</i>: When
the current adjustment mode is&nbsp;<b>b</b> don&rsquo;t
hyphenate the line if the line can be justified by adding no
more than <i>n</i> extra space to each word space. The
default hyphenation space is&nbsp;0. The default scaling
indicator for this request is&nbsp;<b>m</b>. The hyphenation
space is associated with the current environment. The
current hyphenation space is available in the
<b>\n[.hys]</b> register.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.itc&nbsp;</b><i>n&nbsp;macro</i></p>

<p style="margin-left:22%;">Variant of <b>.it</b> for which
a line interrupted with <b>\c</b> is not counted as an input
line.</p>

<p style="margin-left:11%;"><b>.kern&nbsp;</b><i>n</i></p>

<p style="margin-left:22%;">If <i>n</i> is non-zero or
missing, enable pairwise kerning, otherwise disable it.</p>


<p style="margin-left:11%;"><b>.length&nbsp;</b><i>xx&nbsp;string</i></p>

<p style="margin-left:22%;">Compute the length of
<i>string</i> and return it in the number register <i>xx</i>
(which is not necessarily defined before).</p>


<p style="margin-left:11%;"><b>.linetabs&nbsp;</b><i>n</i></p>

<p style="margin-left:22%;">If <i>n</i> is non-zero or
missing, enable line-tabs mode, otherwise disable it (which
is the default). In line-tabs mode, tab distances are
computed relative to the (current) output line. Otherwise
they are taken relative to the input line. For example, the
following</p>

<p style="margin-left:32%; margin-top: 1em">.ds x a\t\c
<br>
.ds y b\t\c <br>
.ds z c <br>
.ta 1i 3i <br>
\*x <br>
\*y <br>
\*z</p>

<p style="margin-left:22%; margin-top: 1em">yields</p>

<p style="margin-left:32%; margin-top: 1em">a b c</p>

<p style="margin-left:22%; margin-top: 1em">In line-tabs
mode, the same code gives</p>

<p style="margin-left:32%; margin-top: 1em">a b c</p>

<p style="margin-left:22%; margin-top: 1em">Line-tabs mode
is associated with the current environment; the read-only
number register <b>\n[.linetabs]</b> is set to&nbsp;1 if in
line-tabs mode, and 0 otherwise.</p>

<p style="margin-left:11%;"><b>.lsm&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">Set the leading spaces macro to
<i>xx</i>. If there are leading spaces in an input line, it
is invoked instead of the usual troff behaviour; the leading
spaces are removed. Registers <b>\n[lsn]</b> and
<b>\n[lss]</b> hold the number of removed leading spaces and
the corresponding horizontal space, respectively.</p>


<p style="margin-left:11%;"><b>.mso&nbsp;</b><i>file</i></p>

<p style="margin-left:22%;">The same as the <b>so</b>
request except that <i>file</i> is searched for in the same
directories as macro files for the <b>-m</b> command-line
option. If the file name to be included has the form
<i>name</i><b>.tmac</b> and it isn&rsquo;t found, <b>mso</b>
tries to include <b>tmac.</b><i>name</i> instead and vice
versa. A warning of type <b>file</b> is generated if
<i>file</i> can&rsquo;t be loaded, and the request is
ignored.</p>


<p style="margin-left:11%;"><b>.nop&nbsp;</b><i>anything</i></p>

<p style="margin-left:22%;">Execute <i>anything</i>. This
is similar to &rsquo;.if&nbsp;1&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.nroff</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Make the <b>n</b> built-in condition true and the
<b>t</b> built-in condition false. This can be reversed
using the <b>troff</b> request.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.open&nbsp;</b><i>stream&nbsp;filename</i></p>

<p style="margin-left:22%;">Open <i>filename</i> for
writing and associate the stream named <i>stream</i> with
it. See also the <b>close</b> and <b>write</b> requests.</p>


<p style="margin-left:11%;"><b>.opena&nbsp;</b><i>stream&nbsp;filename</i></p>

<p style="margin-left:22%;">Like <b>open</b>, but if
<i>filename</i> exists, append to it instead of truncating
it.</p>


<p style="margin-left:11%;"><b>.output&nbsp;</b><i>string</i></p>

<p style="margin-left:22%;">Emit <i>string</i> directly to
the intermediate output (subject to copy-mode
interpretation); this is similar to <b>\!</b> used at the
top level. An initial double quote in <i>string</i> is
stripped off to allow initial blanks.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>.pev</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Print the current environment and each defined
environment state on stderr.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>.pnr</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Print the names and contents of all currently defined
number registers on stderr.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.psbb&nbsp;</b><i>filename</i></p>

<p style="margin-left:22%;">Get the bounding box of a
PostScript image <i>filename</i>. This file must conform to
Adobe&rsquo;s Document Structuring Conventions; the command
looks for a <b>%%BoundingBox</b> comment to extract the
bounding box values. After a successful call, the
coordinates (in PostScript units) of the lower left and
upper right corner can be found in the registers
<b>\n[llx]</b>, <b>\n[lly]</b>, <b>\n[urx]</b>, and
<b>\n[ury]</b>, respectively. If some error has occurred,
the four registers are set to zero.</p>


<p style="margin-left:11%;"><b>.pso&nbsp;</b><i>command</i></p>

<p style="margin-left:22%;">This behaves like the <b>so</b>
request except that input comes from the standard output of
<i>command</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>.ptr</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Print the names and positions of all traps (not
including input line traps and diversion traps) on stderr.
Empty slots in the page trap list are printed as well,
because they can affect the priority of subsequently planted
traps.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>.pvs&nbsp;</b><i>&plusmn;n</i></p>

<p style="margin-left:22%;">Set the post-vertical line
space to&nbsp;<i>n</i>; default scale indicator
is&nbsp;<b>p</b>. This value is added to each line after it
has been output. With no argument, the post-vertical line
space is set to its previous value.</p>

<p style="margin-left:22%; margin-top: 1em">The total
vertical line spacing consists of four components:
<b>.vs</b> and <b>\x</b> with a negative value which are
applied before the line is output, and <b>.pvs</b> and
<b>\x</b> with a positive value which are applied after the
line is output.</p>

<p style="margin-left:11%;"><b>.rchar&nbsp;</b><i>c1 c2
...</i></p>

<p style="margin-left:22%;">Remove the definitions of
glyphs <i>c1</i>, <i>c2</i>, <i>...&nbsp;</i> This undoes
the effect of a <b>char</b> request.</p>

<p style="margin-left:11%;"><b>.return</b></p>

<p style="margin-left:22%;">Within a macro, return
immediately. If called with an argument, return twice,
namely from the current macro and from the macro one level
higher. No effect otherwise.</p>

<p style="margin-left:11%;"><b>.rfschar&nbsp;</b><i>c1 c2
...</i></p>

<p style="margin-left:22%;">Remove the font-specific
definitions of glyphs <i>c1</i>, <i>c2</i>, <i>...&nbsp;</i>
This undoes the effect of an <b>fschar</b> request.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>.rj</b></p></td>
<td width="4%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>.rj&nbsp;</b><i>n</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>Right justify the next <i>n&nbsp;</i>input lines.
Without an argument right justify the next input line. The
number of lines to be right justified is available in the
<b>\n[.rj]</b> register. This implicitly does
<b>.ce&nbsp;0</b>. The <b>ce</b> request implicitly does
<b>.rj&nbsp;0</b>.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>.rnn&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">Rename number register
<i>xx</i> to <i>yy</i>.</p>


<p style="margin-left:11%;"><b>.schar&nbsp;</b><i>c&nbsp;string</i></p>

<p style="margin-left:22%;">Define global fallback
character (or glyph)&nbsp;<i>c</i> to be <i>string</i>. The
syntax of this request is the same as the <b>char</b>
request; a glyph defined with <b>schar</b> is searched after
the list of fonts declared with the <b>special</b> request
but before the mounted special fonts.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.shc&nbsp;</b><i>c</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the soft hyphen character to&nbsp;<i>c</i>. If
<i>c</i> is omitted, the soft hyphen character is set to the
default <b>\[hy]</b>. The soft hyphen character is the glyph
which is inserted when a word is hyphenated at a line break.
If the soft hyphen character does not exist in the font of
the glyph immediately preceding a potential break point,
then the line is not broken at that point. Neither
definitions (specified with the <b>char</b> request) nor
translations (specified with the <b>tr</b> request) are
considered when finding the soft hyphen character.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.shift&nbsp;</b><i>n</i></p>

<p style="margin-left:22%;">In a macro, shift the arguments
by <i>n</i> positions: argument&nbsp;<i>i</i> becomes
argument <i>i</i>-<i>n</i>; arguments 1 to&nbsp;<i>n</i> are
no longer available. If <i>n</i> is missing, arguments are
shifted by&nbsp;1. Shifting by negative amounts is currently
undefined.</p>


<p style="margin-left:11%;"><b>.sizes&nbsp;</b><i>s1&nbsp;s2&nbsp;...&nbsp;sn&nbsp;</i><b>[0]</b></p>

<p style="margin-left:22%;">This command is similar to the
<b>sizes</b> command of a <i>DESC</i> file. It sets the
available font sizes for the current font to <i>s1</i>,
<i>s2</i>, <i>...</i>,&nbsp;<i>sn</i> scaled points. The
list of sizes can be terminated by an
optional&nbsp;<b>0</b>. Each <i>si</i> can also be a range
of sizes <i>m</i>&ndash;<i>n</i>. Contrary to the font file
command, the list can&rsquo;t extend over more than a single
line.</p>

<p style="margin-left:11%;"><b>.special&nbsp;</b><i>s1 s2
...</i></p>

<p style="margin-left:22%;">Fonts <i>s1</i>, <i>s2</i>,
<i>...</i>, are special and are searched for glyphs not in
the current font. Without arguments, reset the list of
special fonts to be empty.</p>


<p style="margin-left:11%;"><b>.spreadwarn&nbsp;</b><i>limit</i></p>

<p style="margin-left:22%;">Make <b>troff</b> emit a
warning if the additional space inserted for each space
between words in an output line is larger or equal to
<i>limit</i>. A negative value is changed to zero; no
argument toggles the warning on and off without changing
<i>limit</i>. The default scaling indicator
is&nbsp;<b>m</b>. At startup, <b>spreadwarn</b> is
deactivated, and <i>limit</i> is set to 3m. For example,
<b>.spreadwarn&nbsp;0.2m</b> causes a warning if
<b>troff</b> must add 0.2m or more for each interword space
in a line. This request is active only if text is justified
to both margins (using <b>.ad&nbsp;b</b>).</p>


<p style="margin-left:11%;"><b>.sty&nbsp;</b><i>n&nbsp;f</i></p>

<p style="margin-left:22%;">Associate style&nbsp;<i>f</i>
with font position&nbsp;<i>n</i>. A font position can be
associated either with a font or with a style. The current
font is the index of a font position and so is also either a
font or a style. When it is a style, the font that is
actually used is the font the name of which is the
concatenation of the name of the current family and the name
of the current style. For example, if the current font
is&nbsp;1 and font position&nbsp;1 is associated with
style&nbsp;<b>R</b> and the current font family
is&nbsp;<b>T</b>, then font <b>TR</b> is used. If the
current font is not a style, then the current family is
ignored. When the requests <b>cs</b>, <b>bd</b>, <b>tkf</b>,
<b>uf</b>, or <b>fspecial</b> are applied to a style, then
they are applied instead to the member of the current family
corresponding to that style. The default family can be set
with the <b>-f</b> command-line option. The <b>styles</b>
command in the DESC file controls which font positions (if
any) are initially associated with styles rather than
fonts.</p>


<p style="margin-left:11%;"><b>.substring&nbsp;</b><i>xx&nbsp;n1&nbsp;</i><b>[</b><i>n2</i><b>]</b></p>

<p style="margin-left:22%;">Replace the string named
<i>xx</i> with the substring defined by the indices
<i>n1</i> and <i>n2</i>. The first character in the string
has index&nbsp;0. If <i>n2</i> is omitted, it is taken to be
equal to the string&rsquo;s length. If the index value
<i>n1</i> or <i>n2</i> is negative, it is counted from the
end of the string, going backwards: The last character has
index&nbsp;-1, the character before the last character has
index&nbsp;-2, etc.</p>


<p style="margin-left:11%;"><b>.tkf&nbsp;</b><i>f&nbsp;s1&nbsp;n1&nbsp;s2&nbsp;n2</i></p>

<p style="margin-left:22%;">Enable track kerning for
font&nbsp;<i>f</i>. When the current font is&nbsp;<i>f</i>
the width of every glyph is increased by an amount between
<i>n1</i> and <i>n2</i>; when the current point size is less
than or equal to <i>s1</i> the width is increased by
<i>n1</i>; when it is greater than or equal to <i>s2</i> the
width is increased by <i>n2</i>; when the point size is
greater than or equal to <i>s1</i> and less than or equal to
<i>s2</i> the increase in width is a linear function of the
point size.</p>


<p style="margin-left:11%;"><b>.tm1&nbsp;</b><i>string</i></p>

<p style="margin-left:22%;">Similar to the <b>tm</b>
request, <i>string</i> is read in copy mode and written on
the standard error, but an initial double quote in
<i>string</i> is stripped off to allow initial blanks.</p>


<p style="margin-left:11%;"><b>.tmc&nbsp;</b><i>string</i></p>

<p style="margin-left:22%;">Similar to <b>tm1</b> but
without writing a final newline.</p>


<p style="margin-left:11%;"><b>.trf&nbsp;</b><i>filename</i></p>

<p style="margin-left:22%;">Transparently output the
contents of file <i>filename</i>. Each line is output as if
preceded by <b>\!</b>; however, the lines are not subject to
copy-mode interpretation. If the file does not end with a
newline, then a newline is added. For example, you can
define a macro&nbsp;<i>x</i> containing the contents of
file&nbsp;<i>f</i>, using</p>

<p style="margin-left:32%; margin-top: 1em">.di x <br>
.trf f <br>
.di</p>

<p style="margin-left:22%; margin-top: 1em">Unlike with the
<b>cf</b> request, the file cannot contain characters, such
as NUL, that are not valid troff input characters.</p>


<p style="margin-left:11%;"><b>.trin&nbsp;</b><i>abcd</i></p>

<p style="margin-left:22%;">This is the same as the
<b>tr</b> request except that the <b>asciify</b> request
uses the character code (if any) before the character
translation. Example:</p>

<p style="margin-left:32%; margin-top: 1em">.trin ax <br>
.di xxx <br>
a <br>
.br <br>
.di <br>
.xxx <br>
.trin aa <br>
.asciify xxx <br>
.xxx</p>

<p style="margin-left:22%; margin-top: 1em">The result is
<b>x&nbsp;a</b>. Using <b>tr</b>, the result would be
<b>x&nbsp;x</b>.</p>


<p style="margin-left:11%;"><b>.trnt&nbsp;</b><i>abcd</i></p>

<p style="margin-left:22%;">This is the same as the
<b>tr</b> request except that the translations do not apply
to text that is transparently throughput into a diversion
with <b>\!</b>. For example,</p>

<p style="margin-left:32%; margin-top: 1em">.tr ab <br>
.di x <br>
\!.tm a <br>
.di <br>
.x</p>


<p style="margin-left:22%; margin-top: 1em">prints&nbsp;<b>b</b>;
if <b>trnt</b> is used instead of <b>tr</b> it
prints&nbsp;<b>a</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.troff</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Make the <b>n</b> built-in condition false, and the
<b>t</b> built-in condition true. This undoes the effect of
the <b>nroff</b> request.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.unformat&nbsp;</b><i>xx</i></p>

<p style="margin-left:22%;">This request
&rsquo;unformats&rsquo; the diversion <i>xx</i>. Contrary to
the <b>asciify</b> request, which tries to convert formatted
elements of the diversion back to input tokens as much as
possible, <b>.unformat</b> only handles tabs and spaces
between words (usually caused by spaces or newlines in the
input) specially. The former are treated as if they were
input tokens, and the latter are stretchable again. Note
that the vertical size of lines is not preserved. Glyph
information (font, font size, space width, etc.) is
retained. Useful in conjunction with the <b>box</b> and
<b>boxa</b> requests.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.vpt&nbsp;</b><i>n</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Enable vertical position traps if <i>n</i> is non-zero,
disable them otherwise. Vertical position traps are traps
set by the <b>wh</b> or <b>dt</b> requests. Traps set by the
<b>it</b> request are not vertical position traps. The
parameter that controls whether vertical position traps are
enabled is global. Initially vertical position traps are
enabled.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>.warn&nbsp;</b><i>n</i></p>

<p style="margin-left:22%;">Control warnings.
<i>n&nbsp;</i>is the sum of the numbers associated with each
warning that is to be enabled; all other warnings are
disabled. The number associated with each warning is listed
in <b>troff</b>(1). For example, <b>.warn&nbsp;0</b>
disables all warnings, and <b>.warn&nbsp;1</b> disables all
warnings except that about missing glyphs. If <i>n</i> is
not given, all warnings are enabled.</p>


<p style="margin-left:11%;"><b>.warnscale&nbsp;</b><i>si</i></p>

<p style="margin-left:22%;">Set the scaling indicator used
in warnings to <i>si</i>. Valid values for <i>si</i> are
<b>u</b>, <b>i</b>, <b>c</b>, <b>p</b>, and&nbsp;<b>P</b>.
At startup, it is set to&nbsp;<b>i</b>.</p>


<p style="margin-left:11%;"><b>.while&nbsp;</b><i>c&nbsp;anything</i></p>

<p style="margin-left:22%;">While condition&nbsp;<i>c</i>
is true, accept <i>anything</i> as input; <i>c&nbsp;</i>can
be any condition acceptable to an <b>if</b> request;
<i>anything</i> can comprise multiple lines if the first
line starts with <b>\{</b> and the last line ends with
<b>\}</b>. See also the <b>break</b> and <b>continue</b>
requests.</p>


<p style="margin-left:11%;"><b>.write&nbsp;</b><i>stream&nbsp;anything</i></p>

<p style="margin-left:22%;">Write <i>anything</i> to the
stream named <i>stream</i>. <i>stream</i> must previously
have been the subject of an <b>open</b> request.
<i>anything</i> is read in copy mode; a
leading&nbsp;<b>&quot;</b> is stripped.</p>


<p style="margin-left:11%;"><b>.writec&nbsp;</b><i>stream&nbsp;anything</i></p>

<p style="margin-left:22%;">Similar to <b>write</b> but
without writing a final newline.</p>


<p style="margin-left:11%;"><b>.writem&nbsp;</b><i>stream&nbsp;xx</i></p>

<p style="margin-left:22%;">Write the contents of the macro
or string <i>xx</i> to the stream named <i>stream</i>.
<i>stream</i> must previously have been the subject of an
<b>open</b> request. <i>xx</i> is read in copy mode.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Extended
escape sequences <br>
\D&rsquo;</b>...<b>&rsquo;</b></p>

<p style="margin-left:22%;">All drawing commands of
groff&rsquo;s intermediate output are accepted. See
subsection &ldquo;Drawing Commands&rdquo; below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Extended
requests <br>
.cf&nbsp;</b><i>filename</i></p>

<p style="margin-left:22%;">When used in a diversion, this
embeds in the diversion an object which, when reread, will
cause the contents of <i>filename</i> to be transparently
copied through to the output. In Unix troff, the contents of
<i>filename</i> is immediately copied through to the output
regardless of whether there is a current diversion; this
behaviour is so anomalous that it must be considered a
bug.</p>


<p style="margin-left:11%;"><b>.de&nbsp;</b><i>xx&nbsp;yy</i>
<b><br>
.am&nbsp;</b><i>xx&nbsp;yy</i> <b><br>
.ds&nbsp;</b><i>xx&nbsp;yy</i> <b><br>
.as&nbsp;</b><i>xx&nbsp;yy</i></p>

<p style="margin-left:22%;">In compatibility mode, these
requests behaves similar to <b>.de1</b>, <b>.am1</b>,
<b>.ds1</b>, and <b>.as1</b>, respectively: A
&rsquo;compatibility save&rsquo; token is inserted at the
beginning, and a &rsquo;compatibility restore&rsquo; token
at the end, with compatibility mode switched on during
execution.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.ev&nbsp;</b><i>xx</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>If <i>xx</i> is not a number, this switches to a named
environment called <i>xx</i>. The environment should be
popped with a matching <b>ev</b> request without any
arguments, just as for numbered environments. There is no
limit on the number of named environments; they are created
the first time that they are referenced.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.hy&nbsp;</b><i>n</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>New additive values 16 and&nbsp;32 are available; the
former enables hyphenation before the last character, the
latter enables hyphenation after the first character.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>.ss&nbsp;</b><i>m&nbsp;n</i></p>

<p style="margin-left:22%;">When two arguments are given to
the <b>ss</b> request, the second argument gives the
<i>sentence space size</i>. If the second argument is not
given, the sentence space size is the same as the word space
size. Like the word space size, the sentence space is in
units of one twelfth of the spacewidth parameter for the
current font. Initially both the word space size and the
sentence space size are&nbsp;12. Contrary to Unix troff, GNU
troff handles this request in nroff mode also; a given value
is then rounded down to the nearest multiple of&nbsp;12. The
sentence space size is used in two circumstances. If the end
of a sentence occurs at the end of a line in fill mode, then
both an inter-word space and a sentence space are added; if
two spaces follow the end of a sentence in the middle of a
line, then the second space is a sentence space. Note that
the behaviour of Unix troff is exactly that exhibited by GNU
troff if a second argument is never given to the <b>ss</b>
request. In GNU troff, as in Unix troff, you should always
follow a sentence with either a newline or two spaces.</p>

<p style="margin-left:11%;"><b>.ta&nbsp;</b><i>n1 n2 ...
nn</i> <b>T</b> <i>r1 r2 ... rn</i></p>

<p style="margin-left:22%;">Set tabs at positions
<i>n1</i>, <i>n2</i>, <i>...</i>, <i>nn</i> and then set
tabs at <i>nn</i>+<i>r1</i>, <i>nn</i>+<i>r2</i>,
<i>...</i>, <i>nn</i>+<i>rn</i> and then at
<i>nn</i>+<i>rn</i>+<i>r1</i>,
<i>nn</i>+<i>rn</i>+<i>r2</i>, <i>...</i>,
<i>nn</i>+<i>rn</i>+<i>rn</i>, and so on. For example,</p>

<p style="margin-left:32%; margin-top: 1em">.ta T .5i</p>

<p style="margin-left:22%; margin-top: 1em">sets tabs every
half an inch.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New number
registers</b> <br>
The following read-only registers are available: <b><br>
\n[.br]</b></p>

<p style="margin-left:22%;">Within a macro call, it is set
to&nbsp;1 if the macro is called with the
&rsquo;normal&rsquo; control character (&rsquo;.&rsquo; by
default), and set to&nbsp;0 otherwise. This allows the
reliable modification of requests.</p>

<p style="margin-left:32%; margin-top: 1em">.als bp*orig bp
<br>
.de bp <br>
.tm before bp <br>
.ie \\n[.br] .bp*orig <br>
.el &rsquo;bp*orig <br>
.tm after bp <br>
..</p>

<p style="margin-left:22%; margin-top: 1em">Using this
register outside of a macro makes no sense (it always
returns zero in such cases).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.C]</b></p></td>
<td width="2%"></td>
<td width="76%">


<p>1&nbsp;if compatibility mode is in effect,
0&nbsp;otherwise.</p> </td>
<td width="2%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>\n[.cdp]</b></p>

<p style="margin-left:22%;">The depth of the last glyph
added to the current environment. It is positive if the
glyph extends below the baseline.</p>

<p style="margin-left:11%;"><b>\n[.ce]</b></p>

<p style="margin-left:22%;">The number of lines remaining
to be centered, as set by the <b>ce</b> request.</p>

<p style="margin-left:11%;"><b>\n[.cht]</b></p>

<p style="margin-left:22%;">The height of the last glyph
added to the current environment. It is positive if the
glyph extends above the baseline.</p>

<p style="margin-left:11%;"><b>\n[.color]</b></p>

<p style="margin-left:22%;">1&nbsp;if colors are enabled,
0&nbsp;otherwise.</p>

<p style="margin-left:11%;"><b>\n[.csk]</b></p>

<p style="margin-left:22%;">The skew of the last glyph
added to the current environment. The <i>skew</i> of a glyph
is how far to the right of the center of a glyph the center
of an accent over that glyph should be placed.</p>

<p style="margin-left:11%;"><b>\n[.ev]</b></p>

<p style="margin-left:22%;">The name or number of the
current environment. This is a string-valued register.</p>

<p style="margin-left:11%;"><b>\n[.fam]</b></p>

<p style="margin-left:22%;">The current font family. This
is a string-valued register.</p>

<p style="margin-left:11%;"><b>\n[.fn]</b></p>

<p style="margin-left:22%;">The current (internal) real
font name. This is a string-valued register. If the current
font is a style, the value of <b>\n[.fn]</b> is the proper
concatenation of family and style name.</p>

<p style="margin-left:11%;"><b>\n[.fp]</b></p>

<p style="margin-left:22%;">The number of the next free
font position.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.g]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Always&nbsp;1. Macros should use this to determine
whether they are running under GNU troff.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>\n[.height]</b></p>

<p style="margin-left:22%;">The current height of the font
as set with <b>\H</b>.</p>

<p style="margin-left:11%;"><b>\n[.hla]</b></p>

<p style="margin-left:22%;">The current hyphenation
language as set by the <b>hla</b> request.</p>

<p style="margin-left:11%;"><b>\n[.hlc]</b></p>

<p style="margin-left:22%;">The number of immediately
preceding consecutive hyphenated lines.</p>

<p style="margin-left:11%;"><b>\n[.hlm]</b></p>

<p style="margin-left:22%;">The maximum allowed number of
consecutive hyphenated lines, as set by the <b>hlm</b>
request.</p>

<p style="margin-left:11%;"><b>\n[.hy]</b></p>

<p style="margin-left:22%;">The current hyphenation flags
(as set by the <b>hy</b> request).</p>

<p style="margin-left:11%;"><b>\n[.hym]</b></p>

<p style="margin-left:22%;">The current hyphenation margin
(as set by the <b>hym</b> request).</p>

<p style="margin-left:11%;"><b>\n[.hys]</b></p>

<p style="margin-left:22%;">The current hyphenation space
(as set by the <b>hys</b> request).</p>

<p style="margin-left:11%;"><b>\n[.in]</b></p>

<p style="margin-left:22%;">The indentation that applies to
the current output line.</p>

<p style="margin-left:11%;"><b>\n[.int]</b></p>

<p style="margin-left:22%;">Set to a positive value if last
output line is interrupted (i.e., if it contains
<b>\c</b>).</p>

<p style="margin-left:11%;"><b>\n[.kern]</b></p>

<p style="margin-left:22%;">1&nbsp;if pairwise kerning is
enabled, 0&nbsp;otherwise.</p>

<p style="margin-left:11%;"><b>\n[.lg]</b></p>

<p style="margin-left:22%;">The current ligature mode (as
set by the <b>lg</b> request).</p>

<p style="margin-left:11%;"><b>\n[.linetabs]</b></p>

<p style="margin-left:22%;">The current line-tabs mode (as
set by the <b>linetabs</b> request).</p>

<p style="margin-left:11%;"><b>\n[.ll]</b></p>

<p style="margin-left:22%;">The line length that applies to
the current output line.</p>

<p style="margin-left:11%;"><b>\n[.lt]</b></p>

<p style="margin-left:22%;">The title length as set by the
<b>lt</b> request.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.m]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The name of the current drawing color. This is a
string-valued register.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.M]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The name of the current background color. This is a
string-valued register.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>\n[.ne]</b></p>

<p style="margin-left:22%;">The amount of space that was
needed in the last <b>ne</b> request that caused a trap to
be sprung. Useful in conjunction with the <b>\n[.trunc]</b>
register.</p>

<p style="margin-left:11%;"><b>\n[.ns]</b></p>

<p style="margin-left:22%;">1&nbsp;if no-space mode is
active, 0&nbsp;otherwise.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.O]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The current output level as set with <b>\O</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.P]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>1&nbsp;if the current page is in the output list set
with <b>-o</b>.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>\n[.pe]</b></p>

<p style="margin-left:22%;">1&nbsp;during a page ejection
caused by the <b>bp</b> request, 0&nbsp;otherwise.</p>

<p style="margin-left:11%;"><b>\n[.pn]</b></p>

<p style="margin-left:22%;">The number of the next page,
either the value set by a <b>pn</b> request, or the number
of the current page plus&nbsp;1.</p>

<p style="margin-left:11%;"><b>\n[.ps]</b></p>

<p style="margin-left:22%;">The current point size in
scaled points.</p>

<p style="margin-left:11%;"><b>\n[.psr]</b></p>

<p style="margin-left:22%;">The last-requested point size
in scaled points.</p>

<p style="margin-left:11%;"><b>\n[.pvs]</b></p>

<p style="margin-left:22%;">The current post-vertical line
space as set with the <b>pvs</b> request.</p>

<p style="margin-left:11%;"><b>\n[.rj]</b></p>

<p style="margin-left:22%;">The number of lines to be
right-justified as set by the <b>rj</b> request.</p>

<p style="margin-left:11%;"><b>\n[.slant]</b></p>

<p style="margin-left:22%;">The slant of the current font
as set with <b>\S</b>.</p>

<p style="margin-left:11%;"><b>\n[.sr]</b></p>

<p style="margin-left:22%;">The last requested point size
in points as a decimal fraction. This is a string-valued
register.</p>

<p style="margin-left:11%;"><b>\n[.ss] <br>
\n[.sss]</b></p>

<p style="margin-left:22%;">These give the values of the
parameters set by the first and second arguments of the
<b>ss</b> request.</p>

<p style="margin-left:11%;"><b>\n[.sty]</b></p>

<p style="margin-left:22%;">The current font style. This is
a string-valued register.</p>

<p style="margin-left:11%;"><b>\n[.tabs]</b></p>

<p style="margin-left:22%;">A string representation of the
current tab settings suitable for use as an argument to the
<b>ta</b> request.</p>

<p style="margin-left:11%;"><b>\n[.trunc]</b></p>

<p style="margin-left:22%;">The amount of vertical space
truncated by the most recently sprung vertical position
trap, or, if the trap was sprung by an <b>ne</b> request,
minus the amount of vertical motion produced by the
<b>ne</b> request. In other words, at the point a trap is
sprung, it represents the difference of what the vertical
position would have been but for the trap, and what the
vertical position actually is. Useful in conjunction with
the <b>\n[.ne]</b> register.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.U]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set to&nbsp;1 if in safer mode and to&nbsp;0 if in
unsafe mode (as given with the <b>-U</b> command-line
option).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>\n[.vpt]</b></p>

<p style="margin-left:22%;">1&nbsp;if vertical position
traps are enabled, 0&nbsp;otherwise.</p>

<p style="margin-left:11%;"><b>\n[.warn]</b></p>

<p style="margin-left:22%;">The sum of the numbers
associated with each of the currently enabled warnings. The
number associated with each warning is listed in
<b>troff</b>(1).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.x]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The major version number. For example, if the version
number is 1.03, then <b>\n[.x]</b> contains&nbsp;1.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.y]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The minor version number. For example, if the version
number is 1.03, then <b>\n[.y]</b> contains&nbsp;03.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[.Y]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The revision number of groff.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>\n[.zoom]</b></p>

<p style="margin-left:22%;">The zoom value of the current
font, in multiples of 1/1000th. Zero if no
magnification.</p>

<p style="margin-left:11%;"><b>\n[llx] <br>
\n[lly] <br>
\n[urx] <br>
\n[ury]</b></p>

<p style="margin-left:22%;">These four read/write registers
are set by the <b>psbb</b> request and contain the bounding
box values (in PostScript units) of a given PostScript
image.</p>

<p style="margin-left:11%; margin-top: 1em">The following
read/write registers are set by the <b>\w</b> escape
sequence: <b><br>
\n[rst] <br>
\n[rsb]</b></p>

<p style="margin-left:22%;">Like the <b>st</b> and
<b>sb</b> registers, but take account of the heights and
depths of glyphs.</p>

<p style="margin-left:11%;"><b>\n[ssc]</b></p>

<p style="margin-left:22%;">The amount of horizontal space
(possibly negative) that should be added to the last glyph
before a subscript.</p>

<p style="margin-left:11%;"><b>\n[skw]</b></p>

<p style="margin-left:22%;">How far to right of the center
of the last glyph in the <b>\w</b> argument, the center of
an accent from a roman font should be placed over that
glyph.</p>

<p style="margin-left:11%; margin-top: 1em">Other available
read/write number registers are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[c.]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The current input line number. <b>\n[.c]</b> is a
read-only alias to this register.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>\n[hours]</b></p>

<p style="margin-left:22%;">The number of hours past
midnight. Initialized at start-up.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n[hp]</b></p></td>
<td width="2%"></td>
<td width="70%">


<p>The current horizontal position at input line.</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>\n[lsn] <br>
\n[lss]</b></p>

<p style="margin-left:22%;">If there are leading spaces in
an input line, these registers hold the number of leading
spaces and the corresponding horizontal space,
respectively.</p>

<p style="margin-left:11%;"><b>\n[minutes]</b></p>

<p style="margin-left:22%;">The number of minutes after the
hour. Initialized at start-up.</p>

<p style="margin-left:11%;"><b>\n[seconds]</b></p>

<p style="margin-left:22%;">The number of seconds after the
minute. Initialized at start-up.</p>

<p style="margin-left:11%;"><b>\n[systat]</b></p>

<p style="margin-left:22%;">The return value of the
system() function executed by the last <b>sy</b>
request.</p>

<p style="margin-left:11%;"><b>\n[slimit]</b></p>

<p style="margin-left:22%;">If greater than&nbsp;0, the
maximum number of objects on the input stack. If less than
or equal to&nbsp;0, there is no limit on the number of
objects on the input stack. With no limit, recursion can
continue until virtual memory is exhausted.</p>

<p style="margin-left:11%;"><b>\n[year]</b></p>

<p style="margin-left:22%;">The current year. Note that the
traditional <b>troff</b> number register <b>\n[yr]</b> is
the current year minus 1900.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous
<br>
troff</b> predefines a single (read/write) string-based
register, <b>\*[.T]</b>, which contains the argument given
to the <b>-T</b> command-line option, namely the current
output device (for example, <i>latin1</i> or <i>ascii</i>).
Note that this is not the same as the (read-only) number
register <b>\n[.T]</b> which is defined to be&nbsp;1 if
<b>troff</b> is called with the <b>-T</b> command-line
option, and zero otherwise. This behaviour is different from
Unix troff.</p>

<p style="margin-left:11%; margin-top: 1em">Fonts not
listed in the DESC file are automatically mounted on the
next available font position when they are referenced. If a
font is to be mounted explicitly with the <b>fp</b> request
on an unused font position, it should be mounted on the
first unused font position, which can be found in the
<b>\n[.fp]</b> register; although <b>troff</b> does not
enforce this strictly, it does not allow a font to be
mounted at a position whose number is much greater than that
of any currently used position.</p>

<p style="margin-left:11%; margin-top: 1em">Interpolating a
string does not hide existing macro arguments. Thus in a
macro, a more efficient way of doing</p>


<p style="margin-left:22%; margin-top: 1em"><b>.</b><i>xx&nbsp;</i><b>\\$@</b></p>

<p style="margin-left:11%; margin-top: 1em">is</p>


<p style="margin-left:22%; margin-top: 1em"><b>\\*[</b><i>xx</i><b>]\\</b></p>

<p style="margin-left:11%; margin-top: 1em">If the font
description file contains pairwise kerning information,
glyphs from that font are kerned. Kerning between two glyphs
can be inhibited by placing a <b>\&amp;</b> between
them.</p>

<p style="margin-left:11%; margin-top: 1em">In a string
comparison in a condition, characters that appear at
different input levels to the first delimiter character are
not recognized as the second or third delimiters. This
applies also to the <b>tl</b> request. In a <b>\w</b> escape
sequence, a character that appears at a different input
level to the starting delimiter character is not recognized
as the closing delimiter character. The same is true for
<b>\A</b>, <b>\b</b>, <b>\B</b>, <b>\C</b>, <b>\l</b>,
<b>\L</b>, <b>\o</b>, <b>\X</b>, and <b>\Z</b>. When
decoding a macro or string argument that is delimited by
double quotes, a character that appears at a different input
level to the starting delimiter character is not recognized
as the closing delimiter character. The implementation of
<b>\$@</b> ensures that the double quotes surrounding an
argument appear at the same input level, which is different
to the input level of the argument itself. In a long escape
name <b>]</b> is not recognized as a closing delimiter
except when it occurs at the same input level as the
opening&nbsp;<b>[</b>. In compatibility mode, no attention
is paid to the input-level.</p>

<p style="margin-left:11%; margin-top: 1em">There are some
new types of condition: <b><br>
.if&nbsp;r</b><i>xxx</i></p>

<p style="margin-left:22%;">True if there is a number
register named <i>xxx</i>.</p>


<p style="margin-left:11%;"><b>.if&nbsp;d</b><i>xxx</i></p>

<p style="margin-left:22%;">True if there is a string,
macro, diversion, or request named <i>xxx</i>.</p>


<p style="margin-left:11%;"><b>.if&nbsp;m</b><i>xxx</i></p>

<p style="margin-left:22%;">True if there is a color named
<i>xxx</i>.</p>

<p style="margin-left:11%;"><b>.if&nbsp;c</b><i>ch</i></p>

<p style="margin-left:22%;">True if there is a character
(or glyph) <i>ch</i> available; <i>ch</i> is either an ASCII
character or a glyph (special character)
<b>\N&rsquo;</b><i>xxx</i><b>&rsquo;</b>, <b>\(</b><i>xx</i>
or <b>\[</b><i>xxx</i><b>]</b>; the condition is also true
if <i>ch</i> has been defined by the <b>char</b>
request.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.if&nbsp;F</b><i>f</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>True if font&nbsp;<i>f</i> exists. <b>f&nbsp;</b>is
handled as if it was opened with the <b>ft</b> request (this
is, font translation and styles are applied), without
actually mounting it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>.if&nbsp;S</b><i>s</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>True if style&nbsp;<i>s</i> has been registered. Font
translation is applied.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The <b>tr</b>
request can now map characters onto <b>\~</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The space width
emitted by the <b>\|</b> and <b>\^</b> escape sequences can
be controlled on a per-font basis. If there is a glyph named
<b>\|</b> or <b>\^</b>, respectively (note the leading
backslash), defined in the current font file, use this
glyph&rsquo;s width instead of the default value.</p>

<p style="margin-left:11%; margin-top: 1em">It is now
possible to have whitespace between the first and second dot
(or the name of the ending macro) to end a macro definition.
Example:</p>

<p style="margin-left:22%; margin-top: 1em">.if t \{\ <br>
. de bar <br>
. nop Hello, I&rsquo;m &rsquo;bar&rsquo;. <br>
. . <br>
.\}</p>

<h2>INTERMEDIATE OUTPUT FORMAT
<a name="INTERMEDIATE OUTPUT FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
describes the format output by GNU troff. The output format
used by GNU troff is very similar to that used by Unix
device-independent troff. Only the differences are
documented here.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Units</b>
<br>
The argument to the <b>s&nbsp;</b>command is in scaled
points (units of points/<i>n</i>, where <i>n</i> is the
argument to the <b>sizescale</b> command in the DESC file).
The argument to the <b>x&nbsp;Height</b> command is also in
scaled points.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Text
Commands</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>N</b><i>n</i></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Print glyph with
index&nbsp;<i>n</i> (a non-negative integer) of the current
font.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If the
<b>tcommand</b> line is present in the DESC file, troff uses
the following two commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>t</b><i>xxx</i></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em"><i>xxx</i> is any sequence of
characters terminated by a space or a newline (to be more
precise, it is a sequence of glyphs which are accessed with
the corresponding characters); the first character should be
printed at the current position, the current horizontal
position should be increased by the width of the first
character, and so on for each character. The width of the
glyph is that given in the font file, appropriately scaled
for the current point size, and rounded so that it is a
multiple of the horizontal resolution. Special characters
cannot be printed using this command.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>u</b><i>n&nbsp;xxx</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is same as the <b>t&nbsp;</b>command except that
after printing each character, the current horizontal
position is increased by the sum of the width of that
character and&nbsp;<i>n</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note that
single characters can have the eighth bit set, as can the
names of fonts and special characters.</p>

<p style="margin-left:11%; margin-top: 1em">The names of
glyphs and fonts can be of arbitrary length; drivers should
not assume that they are only two characters long.</p>

<p style="margin-left:11%; margin-top: 1em">When a glyph is
to be printed, that glyph is always in the current font.
Unlike device-independent troff, it is not necessary for
drivers to search special fonts to find a glyph.</p>

<p style="margin-left:11%; margin-top: 1em">For color
support, some new commands have been added: <b><br>
mc</b> <i>cyan magenta yellow</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>md</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>mg</b> <i>gray</i> <b><br>
mk</b> <i>cyan magenta yellow black</i> <b><br>
mr</b> <i>red green blue</i></p>

<p style="margin-left:22%;">Set the color components of the
current drawing color, using various color schemes.
<b>md</b> resets the drawing color to the default value. The
arguments are integers in the range 0 to 65536.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>x&nbsp;</b>device control command has been extended.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>x u</b> <i>n</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>If <i>n</i> is&nbsp;1, start underlining of spaces. If
<i>n</i> is&nbsp;0, stop underlining of spaces. This is
needed for the <b>cu</b> request in nroff mode and is
ignored otherwise.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Drawing
Commands</b> <br>
The <b>D</b> drawing command has been extended. These
extensions are not used by GNU pic if the <b>-n</b> option
is given.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>Df</b> <i>n</i>\n</p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Set the shade of gray to be used
for filling solid objects to <i>n</i>; <i>n</i> must be an
integer between 0 and 1000, where 0 corresponds solid white
and 1000 to solid black, and values in between correspond to
intermediate shades of gray. This applies only to solid
circles, solid ellipses and solid polygons. By default, a
level of 1000 is used. Whatever color a solid object has, it
should completely obscure everything beneath it. A value
greater than 1000 or less than&nbsp;0 can also be used: this
means fill with the shade of gray that is currently being
used for lines and text. Normally this is black, but some
drivers may provide a way of changing this.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The
corresponding <b>\D&rsquo;f</b><i>...</i><b>&rsquo;</b>
command shouldn&rsquo;t be used since its argument is always
rounded to an integer multiple of the horizontal resolution
which can lead to surprising results.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>DC</b> <i>d</i>\n</p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Draw a solid circle with a
diameter of <i>d</i> with the leftmost point at the current
position.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>DE</b> <i>dx dy</i>\n</p>

<p style="margin-left:22%;">Draw a solid ellipse with a
horizontal diameter of <i>dx</i> and a vertical diameter of
<i>dy</i> with the leftmost point at the current
position.</p>


<p align="center"><img src="grohtml-3548361.png" alt="Image grohtml-3548361.png"></p>

<p style="margin-left:11%;"><b>Dp</b> $dx sub 1$ $dy sub 1$
$dx sub 2$ $dy sub 2$ $...$ $dx sub n$ $dy sub <br>
n$\n</p>

<p style="margin-left:22%;">Draw a polygon with, for $i = 1
,..., n+1$, the <i>i</i>-th vertex at the current position
$+ sum from j=1 to i-1 ( dx sub j , dy sub j )$. At the
moment, GNU pic only uses this command to generate triangles
and rectangles.</p>

<p style="margin-left:11%;"><b>DP</b> $dx sub 1$ $dy sub 1$
$dx sub 2$ $dy sub 2$ $...$ $dx sub n$ $dy sub <br>
n$\n</p>

<p style="margin-left:22%;">Like <b>Dp</b> but draw a solid
rather than outlined polygon.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>Dt</b> <i>n</i>\n</p></td>
<td width="2%"></td>
<td width="78%">


<p>Set the current line thickness to <i>n&nbsp;</i>machine
units. Traditionally Unix troff drivers use a line thickness
proportional to the current point size; drivers should
continue to do this if no <b>Dt</b> command has been given,
or if a <b>Dt</b> command has been given with a negative
value of&nbsp;<i>n</i>. A zero value of&nbsp;<i>n</i>
selects the smallest available line thickness.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">A difficulty
arises in how the current position should be changed after
the execution of these commands. This is not of great
importance since the code generated by GNU pic does not
depend on this. Given a drawing command of the form</p>


<p style="margin-left:22%; margin-top: 1em"><b>\D&rsquo;</b><i>c</i>
$x sub 1$ $y sub 1$ $x sub 2$ $y sub 2$ $...$ $x sub n$ $y
sub n$<b>&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">where <i>c</i>
is not one of <b>c</b>, <b>e</b>, <b>l</b>, <b>a</b>,
or&nbsp;<b>~</b>, Unix troff treats each of the $x sub i$ as
a horizontal quantity, and each of the $y sub i$ as a
vertical quantity and assumes that the width of the drawn
object is $sum from i=1 to n x sub i$, and that the height
is $sum from i=1 to n y sub i$. (The assumption about the
height can be seen by examining the <b>st</b> and <b>sb</b>
registers after using such a <b>D&nbsp;</b>command in a
<b>\w</b> escape sequence). This rule also holds for all the
original drawing commands with the exception of <b>De</b>.
For the sake of compatibility GNU troff also follows this
rule, even though it produces an ugly result in the case of
the <b>Dt</b> and <b>Df</b>, and, to a lesser extent,
<b>DE</b> commands. Thus after executing a
<b>D&nbsp;</b>command of the form</p>


<p style="margin-left:22%; margin-top: 1em"><b>D</b><i>c</i>
$x sub 1$ $y sub 1$ $x sub 2$ $y sub 2$ $...$ $x sub n$ $y
sub n$\n</p>

<p style="margin-left:11%; margin-top: 1em">the current
position should be increased by $( sum from i=1 to n x sub i
, sum from i=1 to n y sub i )$.</p>

<p style="margin-left:11%; margin-top: 1em">Another set of
extensions is <b><br>
DFc</b> <i>cyan magenta yellow</i>\n</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>DFd</b>\n</p></td>
<td width="82%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>DFg</b> <i>gray</i>\n
<b><br>
DFk</b> <i>cyan magenta yellow black</i>\n <b><br>
DFr</b> <i>red green blue</i>\n</p>

<p style="margin-left:22%;">Set the color components of the
filling color similar to the <b>m&nbsp;</b>commands
above.</p>

<p style="margin-left:11%; margin-top: 1em">The current
position isn&rsquo;t changed by those colour commands
(contrary to <b>Df</b>).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Device
Control Commands</b> <br>
There is a continuation convention which permits the
argument to the <b>x&nbsp;X</b> command to contain newlines:
when outputting the argument to the <b>x&nbsp;X</b> command,
GNU troff follows each newline in the argument with a
<b>+</b> character (as usual, it terminates the entire
argument with a newline); thus if the line after the line
containing the <b>x&nbsp;X</b> command starts with <b>+</b>,
then the newline ending the line containing the
<b>x&nbsp;X</b> command should be treated as part of the
argument to the <b>x&nbsp;X</b> command, the <b>+</b> should
be ignored, and the part of the line following the <b>+</b>
should be treated like the part of the line following the
<b>x&nbsp;X</b> command.</p>

<p style="margin-left:11%; margin-top: 1em">The first three
output commands are guaranteed to be:</p>


<p style="margin-left:22%; margin-top: 1em"><b>x&nbsp;T&nbsp;</b><i>device</i>
<b><br>
x&nbsp;res&nbsp;</b><i>n&nbsp;h&nbsp;v</i> <b><br>
x init</b></p>

<h2>INCOMPATIBILITIES
<a name="INCOMPATIBILITIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In spite of the
many extensions, groff has retained compatibility to
classical troff to a large degree. For the cases where the
extensions lead to collisions, a special compatibility mode
with the restricted, old functionality was created for
groff.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Groff
Language</b> <i><br>
groff</i> provides a <b>compatibility mode</b> that allows
the processing of roff code written for classical
<b>troff</b> or for other implementations of roff in a
consistent way.</p>

<p style="margin-left:11%; margin-top: 1em">Compatibility
mode can be turned on with the <b>-C</b> command-line
option, and turned on or off with the <b>.cp</b> request.
The number register <b>\n(.C</b> is&nbsp;1 if compatibility
mode is on, 0&nbsp;otherwise.</p>

<p style="margin-left:11%; margin-top: 1em">This became
necessary because the GNU concept for long names causes some
incompatibilities. <i>Classical troff</i> interprets</p>


<p style="margin-left:22%; margin-top: 1em"><b>.dsabcd</b></p>

<p style="margin-left:11%; margin-top: 1em">as defining a
string <b>ab</b> with contents <b>cd</b>. In <i>groff</i>
mode, this is considered as a call of a macro named
<b>dsabcd</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Also
<i>classical troff</i> interprets <b>\*[</b> or <b>\n[</b>
as references to a string or number register
called&nbsp;<b>[</b> while <i>groff</i> takes this as the
start of a long name.</p>

<p style="margin-left:11%; margin-top: 1em">In
<i>compatibility mode</i>, groff interprets these things in
the traditional way; so long names are not recognized.</p>

<p style="margin-left:11%; margin-top: 1em">On the other
hand, groff in <i>GNU native mode</i> does not allow to use
the single-character escapes <b>\\</b> (backslash),
<b>\|</b> (vertical bar), <b>\^</b> (caret), <b>\&amp;</b>
(ampersand), <b>\{</b> (opening brace), <b>\}</b> (closing
brace), &rsquo;<b>\&nbsp;</b>&rsquo; (space), <b>\'</b>
(single quote), <b>\`</b> (backquote), <b>\-</b> (minus),
<b>\_</b> (underline), <b>\!</b> (bang), <b>\%</b>
(percent), and <b>\c</b> (character&nbsp;c) in names of
strings, macros, diversions, number registers, fonts or
environments, whereas <i>classical troff</i> does.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>\A</b>
escape sequence can be helpful in avoiding these escape
sequences in names.</p>

<p style="margin-left:11%; margin-top: 1em">Fractional
point sizes cause one noteworthy incompatibility. In
<i>classical troff</i>, the <b>ps</b> request ignores scale
indicators and so</p>


<p style="margin-left:22%; margin-top: 1em"><b>.ps&nbsp;10u</b></p>

<p style="margin-left:11%; margin-top: 1em">sets the point
size to 10&nbsp;points, whereas in groff native mode the
point size is set to 10&nbsp;scaled points.</p>

<p style="margin-left:11%; margin-top: 1em">In
<i>groff</i>, there is a fundamental difference between
unformatted input characters, and formatted output
characters (glyphs). Everything that affects how a glyph is
output is stored with the glyph; once a glyph has been
constructed it is unaffected by any subsequent requests that
are executed, including the <b>bd</b>, <b>cs</b>,
<b>tkf</b>, <b>tr</b>, or <b>fp</b> requests.</p>

<p style="margin-left:11%; margin-top: 1em">Normally glyphs
are constructed from input characters at the moment
immediately before the glyph is added to the current output
line. Macros, diversions and strings are all, in fact, the
same type of object; they contain lists of input characters
and glyphs in any combination.</p>

<p style="margin-left:11%; margin-top: 1em">Special
characters can be both; before being added to the output,
they act as input entities, afterwards they denote
glyphs.</p>

<p style="margin-left:11%; margin-top: 1em">A glyph does
not behave like an input character for the purposes of macro
processing; it does not inherit any of the special
properties that the input character from which it was
constructed might have had. The following example makes
things clearer.</p>

<p style="margin-left:22%; margin-top: 1em">.di x <br>
\\\\ <br>
.br <br>
.di <br>
.x</p>

<p style="margin-left:11%; margin-top: 1em">With <i>GNU
troff</i> this is printed as <b>\\</b>. So each pair of
input backslashes &rsquo;\\&rsquo; is turned into a single
output backslash glyph &rsquo;\&rsquo; and the resulting
output backslashes are not interpreted as escape characters
when they are reread.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Classical
troff</i> would interpret them as escape characters when
they were reread and would end up printing a single
backslash &rsquo;\&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">In GNU, the
correct way to get a printable version of the backslash
character &rsquo;\&rsquo; is the <b>\(rs</b> escape
sequence, but classical troff does not provide a clean
feature for getting a non-syntactical backslash. A close
method is the printable version of the current escape
character using the <b>\e</b> escape sequence; this works if
the current escape character is not redefined. It works in
both GNU mode and compatibility mode, while dirty tricks
like specifying a sequence of multiple backslashes do not
work reliably; for the different handling in diversions,
macro definitions, or text mode quickly leads to a confusion
about the necessary number of backslashes.</p>

<p style="margin-left:11%; margin-top: 1em">To store an
escape sequence in a diversion that is interpreted when the
diversion is reread, either the traditional <b>\!</b>
transparent output facility or the new <b>\?</b> escape
sequence can be used.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Intermediate
Output</b> <br>
The groff intermediate output format is in a state of
evolution. So far it has some incompatibilities, but it is
intended to establish a full compatibility to the classical
troff output format. Actually the following
incompatibilities exist:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>The positioning after the drawing of the polygons
conflicts with the classical definition.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p>The intermediate output cannot be rescaled to other
devices as classical &rsquo;device-independent&rsquo; troff
did.</p> </td></tr>
</table>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
was written by <a href="mailto:jjc@jclark.com">James
Clark</a> and modified by <a href="mailto:wl@gnu.org">Werner
Lemberg</a> and
<a href="mailto:groff-bernd.warken-72@web.de">Bernd
Warken</a>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>Groff: The
GNU Implementation of troff</i>, by Trent A. Fisher and
Werner Lemberg, is the primary <i>groff</i> manual. You can
browse it interactively with &ldquo;info groff&rdquo;.
<b><br>
groff</b>(1)</p>

<p style="margin-left:22%;">A list of all documentation
around <i>groff</i>.</p>

<p style="margin-left:11%;"><b>groff</b>(7)</p>

<p style="margin-left:22%;">A description of the
<i>groff</i> language, including a short, but complete
reference of all predefined requests, registers, and escapes
of plain <i>groff</i>. From the command line, this is called
using</p>

<p style="margin-left:32%; margin-top: 1em">man 7 groff</p>

<p style="margin-left:11%;"><b>roff</b>(7)</p>

<p style="margin-left:22%;">A survey of <i>roff</i>
systems, including pointers to further historical
documentation.</p>

<p style="margin-left:11%;">[<i>CSTR&nbsp;#54</i>]</p>

<p style="margin-left:22%;">The <i>Nroff/Troff User&rsquo;s
Manual</i> by <i>J. F. Ossanna</i> of 1976 in the revision
of <i>Brian Kernighan</i> of 1992, being the
<a href="http://cm.bell-labs.com/cm/cs/cstr/54.ps.gz">classical
troff documentation</a>.</p>
<hr>
</body>
</html>
