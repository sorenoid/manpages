<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sat Nov 26 20:39:52 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>USER-SESSION-KEYRING</title>

</head>
<body>

<h1 align="center">USER-SESSION-KEYRING</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COLOPHON">COLOPHON</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">user-session-keyring
- per-user default session keyring</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The user
session keyring is a keyring used to anchor keys on behalf
of a user. Each UID the kernel deals with has its own user
session keyring that is shared by all processes with that
UID. The user session keyring has a name (description) of
the form <i>_uid_ses.&lt;UID&gt;</i> where
<i>&lt;UID&gt;</i> is the user ID of the corresponding
user.</p>

<p style="margin-left:11%; margin-top: 1em">The user
session keyring is associated with the record that the
kernel maintains for the UID. It comes into existence upon
the first attempt to access either the user session keyring,
the <a href="https://man.page/7/user-keyring">user-keyring(7)</a>, or the
<a href="https://man.page/7/session-keyring">session-keyring(7)</a>. The keyring remains pinned in
existence so long as there are processes running with that
real UID or files opened by those processes remain open.
(The keyring can also be pinned indefinitely by linking it
into another keyring.)</p>

<p style="margin-left:11%; margin-top: 1em">The user
session keyring is created on demand when a thread requests
it or when a thread asks for its <a href="https://man.page/7/session-keyring">session-keyring(7)</a>
and that keyring doesn&rsquo;t exist. In the latter case, a
user session keyring will be created and, if the session
keyring wasn&rsquo;t to be created, the user session keyring
will be set as the process&rsquo;s actual session
keyring.</p>

<p style="margin-left:11%; margin-top: 1em">The user
session keyring is searched by <a href="https://man.page/2/request_key">request_key(2)</a> if the
actual session keyring does not exist and is ignored
otherwise.</p>

<p style="margin-left:11%; margin-top: 1em">A special
serial number value, <b>KEY_SPEC_USER_SESSION_KEYRING</b>,
is defined that can be used in lieu of the actual serial
number of the calling process&rsquo;s user session
keyring.</p>

<p style="margin-left:11%; margin-top: 1em">From the
<a href="https://man.page/1/keyctl">keyctl(1)</a> utility, &rsquo;<b>@us</b>&rsquo; can be
used instead of a numeric key ID in much the same way.</p>

<p style="margin-left:11%; margin-top: 1em">User session
keyrings are independent of <a href="https://man.page/2/clone">clone(2)</a>, <a href="https://man.page/2/fork">fork(2)</a>,
<a href="https://man.page/2/vfork">vfork(2)</a>, <a href="https://man.page/2/execve">execve(2)</a>, and <a href="https://man.page/2/_exit">_exit(2)</a>
excepting that the keyring is destroyed when the UID record
is destroyed when the last process pinning it exits.</p>

<p style="margin-left:11%; margin-top: 1em">If a user
session keyring does not exist when it is accessed, it will
be created.</p>

<p style="margin-left:11%; margin-top: 1em">Rather than
relying on the user session keyring, it is strongly
recommended&mdash;especially if the process is running as
root&mdash;that a <a href="https://man.page/7/session-keyring">session-keyring(7)</a> be set
explicitly, for example by <b>pam_keyinit</b>(8).</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The user
session keyring was added to support situations where a
process doesn&rsquo;t have a session keyring, perhaps
because it was created via a pathway that didn&rsquo;t
involve PAM (e.g., perhaps it was a daemon started by
<b>inetd</b>(8)). In such a scenario, the user session
keyring acts as a substitute for the
<a href="https://man.page/7/session-keyring">session-keyring(7)</a>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><a href="https://man.page/1/keyctl">keyctl(1)</a>,
<a href="https://man.page/3/keyctl">keyctl(3)</a>, <a href="https://man.page/7/keyrings">keyrings(7)</a>,
<a href="https://man.page/7/persistent-keyring">persistent-keyring(7)</a>, <a href="https://man.page/7/process-keyring">process-keyring(7)</a>,
<a href="https://man.page/7/session-keyring">session-keyring(7)</a>, <a href="https://man.page/7/thread-keyring">thread-keyring(7)</a>,
<a href="https://man.page/7/user-keyring">user-keyring(7)</a></p>

<h2>COLOPHON
<a name="COLOPHON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This page is
part of release 5.10 of the Linux <i>man-pages</i> project.
A description of the project, information about reporting
bugs, and the latest version of this page, can be found at
https://www.kernel.org/doc/man-pages/.</p>
<hr>
</body>
</html>
