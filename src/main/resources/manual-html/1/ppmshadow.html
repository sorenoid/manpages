<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon Nov  7 04:40:00 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ppmshadow</title>

</head>
<body>

<h1 align="center">ppmshadow</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#LIMITATIONS">LIMITATIONS</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ppmshadow - add
simulated shadows to a portable pixmap image</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ppmshadow</b>
[<b>-b</b> <i>blur_size</i>] [<b>-k</b>] [<b>-t</b>]
[<b>-x</b> <i>xoffset</i>] [<b>-y</b> <i>yoffset</i>]
[<b>-u</b>] [<i>pnmfile</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ppmshadow</b>
adds a simulated shadow to an image, giving the appearance
that the contents of the image float above the page, casting
a diffuse shadow on the background. Shadows can either be
black, as cast by opaque objects, or translucent, where the
shadow takes on the colour of the object which casts it. You
can specify the extent of the shadow and its displacement
from the image with command line options.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>-b</b>
<i>blur_size</i></p>

<p style="margin-left:22%; margin-top: 1em">Sets the
distance of the light source from the image. Larger values
move the light source closer, casting a more diffuse shadow,
while smaller settings move the light further away, yielding
a sharper shadow. <i>blur_size</i> defaults to 11
pixels.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-k</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Keep the intermediate temporary image files. When
debugging, these intermediate files provide many clues as to
the source of an error. See <b>FILES</b> below for a list of
the contents of each file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-t</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Consider the non-background material in the image
translucent -- it casts shadows of its own colour rather
than a black shadow, which is default. This often results in
fuzzy, difficult-to-read images but in some circumstances
may look better.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Print command syntax and a summary of options.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-x</b> <i>xoffset</i></p>

<p style="margin-left:22%;">Specifies the displacement of
the light source to the left of the image. Larger settings
of <b>xoffset</b> displace the shadow to the right, as would
be cast by a light further to the left. If not specified,
the horizontal offset is half of <i>blur_size</i> (above),
to the left.</p>

<p style="margin-left:11%;"><b>-y</b> <i>yoffset</i></p>

<p style="margin-left:22%;">Specifies the displacement of
the light source above the top of the image. Larger settings
displace the shadow downward, corresponding to moving the
light further above the top of the image. If you don&rsquo;t
specify <b>-y</b>, the vertical offset defaults to the same
as the horizontal offset (above), upward.</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Input is an
anymap named by the <i>pnmfile</i> command line argument; if
you don&rsquo;t specify <i>pnmfile</i>, the input is the
Standard Input file.</p>

<p style="margin-left:11%; margin-top: 1em">Output is a
always a PPM file, written to Standard Output.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pnmfile</b>
creates a number of temporary files as it executes. It
creates them in the /tmp directory, with names of the
form:</p>


<p style="margin-left:11%; margin-top: 1em"><b>_PPMshadow</b><i>pid</i><b>-</b><i>N</i><b>.ppm</b></p>

<p style="margin-left:11%; margin-top: 1em">where
<i>pid</i> is the process number of the <b>ppmshadow</b>
process and <i>N</i> is a number identifying the file as
described below. In normal operation, <b>ppmshadow</b>
deletes temporary files as soon as it is done with them and
leaves no debris around after it completes. To preserve the
intermediate files for debugging, use the <b>-k</b> command
line option.</p>

<p style="margin-left:11%; margin-top: 1em"><i>N</i> in the
filename means:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>1</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Positive binary mask</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>2</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Convolution kernel for blurring shadow</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>3</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Blurred shadow image</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>4</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Clipped shadow image, offset as requested</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>5</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Blank image with background of source image</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>6</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Offset shadow</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>7</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Inverse mask file</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>8</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Original image times inverse mask</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>9</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Generated shadow times positive mask</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>10</b></p></td>
<td width="8%"></td>
<td width="66%">


<p>Shadow times background colour</p></td>
<td width="12%">
</td></tr>
</table>

<h2>LIMITATIONS
<a name="LIMITATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The source
image must contain sufficient space on the edges in the
direction in which the shadow is cast to contain the shadow
-- if it doesn&rsquo;t some of the internal steps may fail.
You can usually expand the border of a too-tightly-cropped
image with <b>pnmmargin</b> before processing it with
<b>ppmshadow</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Black pixels
and pixels with the same color as the image background
don&rsquo;t cast a shadow. If this causes unintentional
&quot;holes&quot; in the shadow, fill the offending areas
with a color which differs from black or the background by
RGB values of 1, which will be imperceptible to the viewer.
Since the comparison is exact, the modified areas will now
cast shadows.</p>

<p style="margin-left:11%; margin-top: 1em">The background
color of the source image (which is preserved in the output)
is deemed to be the color of the pixel at the top left of
the input image. If that pixel isn&rsquo;t part of the
background, simply add a one-pixel border at the top of the
image, generate the shadow image, then delete the border
from it.</p>

<p style="margin-left:11%; margin-top: 1em">If something
goes wrong along the way, the error messages from the
various Netpbm programs <b>ppmshadow</b> calls will, in
general, provide little or no clue as to where
<b>ppmshadow</b> went astray. In this case, Specify the
<b>-k</b> option and examine the intermediate results in the
temporary files (which this option causes to be preserved).
If you manually run the commands that <b>ppmshadow</b> runs
on these files, you can figure out where the problem is. In
problem cases where you want to manually tweak the image
generation process along the way, you can keep the
intermediate files with the <b>-k</b> option, modify them
appropriately with an image editor, then recombine them with
the steps used by the code in <b>ppmshadow</b>. See the
<b>ppmshadow.doc</b> document for additional details and
examples of the intermediate files.</p>

<p style="margin-left:11%; margin-top: 1em">Shadows are by
default black, as cast by opaque material in the image
occluding white light. Use the <b>-t</b> option to simulate
translucent material, where the shadow takes on the colour
of the object that casts it. If the contrast between the
image and background is insufficient, the <b>-t</b> option
may yield unattractive results which resemble simple
blurring of the original image.</p>

<p style="margin-left:11%; margin-top: 1em">Because Netpbm
used to have a maximum maxval of 255, which meant that the
largest convolution kernel <b>pnmconvol</b> could use was 11
by 11, <b>ppmshadow</b> includes a horrid, CPU-time-burning
kludge which, if a blur of greater than 11 is requested,
performs an initial convolution with an 11&Atilde;11 kernel,
then calls <b>pnmsmooth</b> (which is actually a script that
calls pnmconvol with a 3&Atilde;3 kernel) as many times as
the requested blur exceeds 11. It&rsquo;s ugly, but it gets
the job done on those rare occasions where you need a blur
greater than 11.</p>

<p style="margin-left:11%; margin-top: 1em">If you wish to
generate an image at high resolution, then scale it to
publication size with <b>pnmscale</b> in order to eliminate
jagged edges by resampling, it&rsquo;s best to generate the
shadow in the original high resolution image, prior to
scaling it down in size. If you scale first and then add the
shadow, you&rsquo;ll get an unsightly jagged stripe between
the edge of material and its shadow, due to resampled pixels
intermediate between the image and background obscuring the
shadow.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ppmshadow</b>
returns status 0 if processing was completed without errors,
and a nonzero Unix error code if an error prevented
generation of output. Some errors may result in the script
aborting, usually displaying error messages from various
Netpbm components it uses, without returning a nonzero error
code. When this happens, the output file will be empty, so
be sure to test this if you need to know if the program
succeeded.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><a href="https://man.page/5/pnm">pnm(5)</a>,
<a href="https://man.page/1/pnmmargin">pnmmargin(1)</a>, <a href="https://man.page/1/pnmconvol">pnmconvol(1)</a>,
<a href="https://man.page/1/pnmscale">pnmscale(1)</a>, <a href="https://man.page/1/pnmsmooth">pnmsmooth(1)</a>, <a href="https://man.page/5/ppm">ppm(5)</a></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">John Walker
&lt;http://www.fourmilab.ch&gt; August 8, 1997</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This software
is in the public domain. Permission to use, copy, modify,
and distribute this software and its documentation for any
purpose and without fee is hereby granted, without any
conditions or restrictions.</p>
<hr>
</body>
</html>
