<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon Nov  7 04:39:53 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>rpcgen</title>

</head>
<body>

<h1 align="center">rpcgen</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>rpcgen</i></b>
- an RPC protocol compiler</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>rpcgen</i></b>
<i>infile</i> <b><i><br>
rpcgen
[-D</i></b><i>name</i><b><i>[=</i></b><i>value</i><b><i>]]
[-T] [-K</i></b> <i>secs</i><b><i>]</i></b> <i>infile</i>
<b><i><br>
rpcgen -c|-h|-l|-m|-M|-t [-o</i></b> <i>outfile</i>
<b><i>]</i></b> <i>infile</i> <b><i><br>
rpcgen [-I] -s</i></b> <i>nettype</i> <b><i>[-o</i></b>
<i>outfile</i><b><i>]</i></b> <i>infile</i> <b><i><br>
rpcgen -n</i></b> <i>netid</i> <b><i>[-o</i></b>
<i>outfile</i><b><i>]</i></b> <i>infile</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><b>rpcgen</b></i>
is a tool that generates C code to implement an RPC
protocol. The input to <b><i>rpcgen</i></b> is a language
similar to C known as RPC Language (Remote Procedure Call
Language).</p>


<p style="margin-left:11%; margin-top: 1em"><b><i>rpcgen</i></b>
is normally used as in the first synopsis where it takes an
input file and generates up to four output files. If the
<i>infile</i> is named <b><i>proto.x</i></b>, then
<b><i>rpcgen</i></b> will generate a header file in
<b><i>proto.h</i></b>, XDR routines in
<b><i>proto_xdr.c</i></b>, server-side stubs in
<b><i>proto_svc.c</i></b>, and client-side stubs in
<b><i>proto_clnt.c</i></b>. With the <b><i>-T</i></b>
option, it will also generate the RPC dispatch table in
<b><i>proto_tbl.i</i></b>. With the <b><i>-Sc</i></b>
option, it will also generate sample code which would
illustrate how to use the remote procedures on the client
side. This code would be created in
<b><i>proto_client.c</i></b>. With the <b><i>-Ss</i></b>
option, it will also generate a sample server code which
would illustrate how to write the remote procedures. This
code would be created in <b><i>proto_server.c</i></b>.</p>

<p style="margin-left:11%; margin-top: 1em">The server
created can be started both by the port monitors (for
example, <b><i>inetd</i></b> or <b><i>listen</i></b>) or by
itself. When it is started by a port monitor, it creates
servers only for the transport for which the file descriptor
<b><i>0</i></b> was passed. The name of the transport must
be specified by setting up the environmental variable
<b><i>PM_TRANSPORT</i></b>. When the server generated by
<b><i>rpcgen</i></b> is executed, it creates server handles
for all the transports specified in <b><i>NETPATH</i></b>
environment variable, or if it is unset, it creates server
handles for all the visible transports from
<b><i>/etc/netconfig</i></b> file. Note: the transports are
chosen at run time and not at compile time.</p>

<p style="margin-left:11%; margin-top: 1em">When built for
a port monitor (<b><i>rpcgen -I</i></b>), and that the
server is self-started, it backgrounds itself by default. A
special define symbol <b><i>RPC_SVC_FG</i></b> can be used
to run the server process in foreground.</p>

<p style="margin-left:11%; margin-top: 1em">The second
synopsis provides special features which allow for the
creation of more sophisticated RPC servers. These features
include support for user provided <b><i>#defines</i></b> and
RPC dispatch tables. The entries in the RPC dispatch table
contain:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="74%">


<p>pointers to the service routine corresponding to that
procedure,</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="74%">


<p>a pointer to the input and output arguments</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="74%">


<p>the size of these routines</p></td></tr>
</table>

<p style="margin-left:11%;">A server can use the dispatch
table to check authorization and then to execute the service
routine; a client library may use it to deal with the
details of storage management and XDR data conversion.</p>

<p style="margin-left:11%; margin-top: 1em">The other three
synopses shown above are used when one does not want to
generate all the output files, but only a particular one.
Some examples of their usage is described in the EXAMPLE
section below. When <b><i>rpcgen</i></b> is executed with
the <b><i>-s</i></b> option, it creates servers for that
particular class of transports. When executed with the
<b><i>-n</i></b> option, it creates a server for the
transport specified by <i>netid</i>. If <i>infile</i> is not
specified, <b><i>rpcgen</i></b> accepts the standard
input.</p>

<p style="margin-left:11%; margin-top: 1em">The C
preprocessor, <b><i>cc -E</i></b> [see <b><i>cc</i></b>(1)],
is run on the input file before it is actually interpreted
by <b><i>rpcgen</i></b>. For each type of output file,
<b><i>rpcgen</i></b> defines a special preprocessor symbol
for use by the <b><i>rpcgen</i></b> programmer:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em"><b><i>RPC_HDR</i></b></p></td>
<td width="6%"></td>
<td width="71%">


<p style="margin-top: 1em">defined when compiling into
header files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p><b><i>RPC_XDR</i></b></p></td>
<td width="6%"></td>
<td width="71%">


<p>defined when compiling into XDR routines</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p><b><i>RPC_SVC</i></b></p></td>
<td width="6%"></td>
<td width="71%">


<p>defined when compiling into server-side stubs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p><b><i>RPC_CLNT</i></b></p></td>
<td width="6%"></td>
<td width="71%">


<p>defined when compiling into client-side stubs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p><b><i>RPC_TBL</i></b></p></td>
<td width="6%"></td>
<td width="71%">


<p>defined when compiling into RPC dispatch tables</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Any line
beginning with &rsquo;<b><i>%</i></b>&rsquo; is passed
directly into the output file, uninterpreted by
<b><i>rpcgen</i></b>.</p>

<p style="margin-left:11%; margin-top: 1em">For every data
type referred to in <i>infile</i>, <b><i>rpcgen</i></b>
assumes that there exists a routine with the string
<b><i>xdr_</i></b> prepended to the name of the data type.
If this routine does not exist in the RPC/XDR library, it
must be provided. Providing an undefined data type allows
customization of XDR routines.</p>

<p style="margin-left:11%; margin-top: 1em">The following
options are available:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b><i>-a</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Generate all the files including
sample code for client and server side.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-b</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This generates code for the SunOS4.1 style of rpc. It is
for backward compatibility. This is the default.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-5</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This generates code for the SysVr4 style of rpc. It is
used by the Transport Independent RPC that is in Svr4
systems. By default rpcgen generates code for SunOS4.1 stype
of rpc.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-c</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Compile into XDR routines.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-C</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Generate code in ANSI C. This option also generates code
that could be compiled with the C++ compiler. This is the
default.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-k</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Generate code in K&amp;R C. The default is ANSI C.</p></td></tr>
</table>


<p style="margin-left:11%;"><b><i>-D</i></b><i>name</i><b><i>[=</i></b><i>value</i><b><i>]</i></b></p>

<p style="margin-left:22%;">Define a symbol <i>name</i>.
Equivalent to the <b><i>#define</i></b> directive in the
source. If no <i>value</i> is given, <i>value</i> is defined
as <b><i>1</i></b>. This option may be specified more than
once.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-h</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Compile into <b><i>C</i></b> data-definitions (a header
file). <b><i>-T</i></b> option can be used in conjunction to
produce a header file which supports RPC dispatch
tables.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-I</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Generate a service that can be started from inetd. The
default is to generate a static service that handles
transports selected with <b><i>-s</i></b>. Using
<b><i>-I</i></b> allows starting a service by either
method.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b><i>-K</i></b>
<i>secs</i></p>

<p style="margin-left:22%;">By default, services created
using <b><i>rpcgen</i></b> wait <b><i>120</i></b> seconds
after servicing a request before exiting. That interval can
be changed using the <b><i>-K</i></b> flag. To create a
server that exits immediately upon servicing a request,
<b><i>-K&nbsp;0</i></b> can be used. To create a server that
never exits, the appropriate argument is
<b><i>-K&nbsp;-1</i></b>.</p>

<p style="margin-left:22%; margin-top: 1em">When monitoring
for a server, some portmonitors, like
<b><i>listen</i></b>(1M), <i>always</i> spawn a new process
in response to a service request. If it is known that a
server will be used with such a monitor, the server should
exit immediately on completion. For such servers,
<b><i>rpcgen</i></b> should be used with
<b><i>-K&nbsp;-1</i></b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-l</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Compile into client-side stubs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-m</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Compile into server-side stubs, but do not generate a
&ldquo;main&rdquo; routine. This option is useful for doing
callback-routines and for users who need to write their own
&ldquo;main&rdquo; routine to do initialization.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-M</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Generate multithread-safe stubs for passing arguments
and results between rpcgen-generated code and user written
code. This option is useful for users who want to use
threads in their code.</p></td></tr>
</table>

<p style="margin-left:11%;"><b><i>-n</i></b>
<i>netid</i></p>

<p style="margin-left:22%;">Compile into server-side stubs
for the transport specified by <i>netid</i>. There should be
an entry for <i>netid</i> in the netconfig database. This
option may be specified more than once, so as to compile a
server that serves multiple transports.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><i>-N</i></b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Use the newstyle of rpcgen. This allows procedures to
have multiple arguments. It also uses the style of parameter
passing that closely resembles C. So, when passing an
argument to a remote procedure you do not have to pass a
pointer to the argument but the argument itself. This
behaviour is different from the oldstyle of rpcgen generated
code. The newstyle is not the default case because of
backward compatibility.</p></td></tr>
</table>

<p style="margin-left:11%;"><b><i>-o</i></b>
<i>outfile</i></p>

<p style="margin-left:22%;">Specify the name of the output
file. If none is specified, standard output is used
(<b><i>-c</i></b>, <b><i>-h</i></b>, <b><i>-l</i></b>,
<b><i>-m</i></b>, <b><i>-n</i></b>, <b><i>-s</i></b>,
<b><i>-Sc</i></b>, <b><i>-Sm</i></b>, <b><i>-Ss</i></b>, and
<b><i>-t</i></b> modes only).</p>

<p style="margin-left:11%;"><b><i>-s</i></b>
<i>nettype</i></p>

<p style="margin-left:22%;">Compile into server-side stubs
for all the transports belonging to the class
<i>nettype</i>. The supported classes are
<b><i>netpath</i></b>, <b><i>visible</i></b>,
<b><i>circuit_n</i></b>, <b><i>circuit_v</i></b>,
<b><i>datagram_n</i></b>, <b><i>datagram_v</i></b>,
<b><i>tcp</i></b>, and <b><i>udp</i></b> [see
<b><i>rpc</i></b>(3N) for the meanings associated with these
classes]. This option may be specified more than once. Note:
the transports are chosen at run time and not at compile
time.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b><i>-Sc</i></b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Generate sample code to show the use of remote procedure
and how to bind to the server before calling the client side
stubs generated by rpcgen.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b><i>-Sm</i></b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Generate a sample Makefile which can be used for
compiling the application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b><i>-Ss</i></b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Generate skeleton code for the remote procedures on the
server side. You would need to fill in the actual code for
the remote procedures.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b><i>-t</i></b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Compile into RPC dispatch table.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b><i>-T</i></b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Generate the code to support RPC dispatch tables.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The options
<b><i>-c</i></b>, <b><i>-h</i></b>, <b><i>-l</i></b>,
<b><i>-m</i></b>, <b><i>-s</i></b> and <b><i>-t</i></b> are
used exclusively to generate a particular type of file,
while the options <b><i>-D</i></b> and <b><i>-T</i></b> are
global and can be used with the other options.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The RPC
Language does not support nesting of structures. As a
work-around, structures can be declared at the top-level,
and their name used inside other structures in order to
achieve the same effect.</p>

<p style="margin-left:11%; margin-top: 1em">Name clashes
can occur when using program definitions, since the apparent
scoping does not really apply. Most of these can be avoided
by giving unique names for programs, versions, procedures
and types.</p>

<p style="margin-left:11%; margin-top: 1em">The server code
generated with <b><i>-n</i></b> option refers to the
transport indicated by <i>netid</i> and hence is very site
specific.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b><i>$ rpcgen
-T prot.x</i></b></p>

<p style="margin-left:11%; margin-top: 1em">generates the
five files: <b><i>prot.h</i></b>, <b><i>prot_clnt.c</i></b>,
<b><i>prot_svc.c</i></b>, <b><i>prot_xdr.c</i></b> and
<b><i>prot_tbl.i</i></b>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
example sends the C data-definitions (header file) to the
standard output.</p>

<p style="margin-left:22%; margin-top: 1em"><b><i>$ rpcgen
-h prot.x</i></b></p>

<p style="margin-left:11%; margin-top: 1em">To send the
test version of the <b><i>-DTEST</i></b>, server side stubs
for all the transport belonging to the class
<b><i>datagram_n</i></b> to standard output, use:</p>

<p style="margin-left:22%; margin-top: 1em"><b><i>$ rpcgen
-s datagram_n -DTEST prot.x</i></b></p>

<p style="margin-left:11%; margin-top: 1em">To create the
server side stubs for the transport indicated by
<i>netid</i> <b><i>tcp</i></b>, use:</p>

<p style="margin-left:22%; margin-top: 1em"><b><i>$ rpcgen
-n tcp -o prot_svc.c prot.x</i></b></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>cc</i></b>(1).</p>
<hr>
</body>
</html>
