<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon Nov  7 04:40:13 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>rsync</title>

</head>
<body>

<h1 align="center">rsync</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERAL">GENERAL</a><br>
<a href="#SETUP">SETUP</a><br>
<a href="#USAGE">USAGE</a><br>
<a href="#ADVANCED USAGE">ADVANCED USAGE</a><br>
<a href="#CONNECTING TO AN RSYNC DAEMON">CONNECTING TO AN RSYNC DAEMON</a><br>
<a href="#USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION">USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION</a><br>
<a href="#STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS">STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS</a><br>
<a href="#SORTED TRANSFER ORDER">SORTED TRANSFER ORDER</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#OPTION SUMMARY">OPTION SUMMARY</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DAEMON OPTIONS">DAEMON OPTIONS</a><br>
<a href="#FILTER RULES">FILTER RULES</a><br>
<a href="#INCLUDE/EXCLUDE PATTERN RULES">INCLUDE/EXCLUDE PATTERN RULES</a><br>
<a href="#MERGE-FILE FILTER RULES">MERGE-FILE FILTER RULES</a><br>
<a href="#LIST-CLEARING FILTER RULE">LIST-CLEARING FILTER RULE</a><br>
<a href="#ANCHORING INCLUDE/EXCLUDE PATTERNS">ANCHORING INCLUDE/EXCLUDE PATTERNS</a><br>
<a href="#PER-DIRECTORY RULES AND DELETE">PER-DIRECTORY RULES AND DELETE</a><br>
<a href="#BATCH MODE">BATCH MODE</a><br>
<a href="#SYMBOLIC LINKS">SYMBOLIC LINKS</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#EXIT VALUES">EXIT VALUES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#INTERNAL OPTIONS">INTERNAL OPTIONS</a><br>
<a href="#CREDITS">CREDITS</a><br>
<a href="#THANKS">THANKS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync - a fast,
versatile, remote (and local) file-copying tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Local: <br>
rsync [OPTION...] SRC... [DEST]</p>

<p style="margin-left:11%; margin-top: 1em">Access via
remote shell: <br>
Pull: <br>
rsync [OPTION...] [USER@]HOST:SRC... [DEST] <br>
Push: <br>
rsync [OPTION...] SRC... [USER@]HOST:DEST</p>

<p style="margin-left:11%; margin-top: 1em">Access via
rsync daemon: <br>
Pull: <br>
rsync [OPTION...] [USER@]HOST::SRC... [DEST] <br>
rsync [OPTION...] rsync://[USER@]HOST[:PORT]/SRC... [DEST]
<br>
Push: <br>
rsync [OPTION...] SRC... [USER@]HOST::DEST <br>
rsync [OPTION...] SRC...
rsync://[USER@]HOST[:PORT]/DEST)</p>

<p style="margin-left:11%; margin-top: 1em">Usages with
just one SRC arg and no DEST arg will list the source files
instead of copying.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync is a fast
and extraordinarily versatile file copying tool. It can copy
locally, to/from another host over any remote shell, or
to/from a remote rsync daemon. It offers a large number of
options that control every aspect of its behavior and permit
very flexible specification of the set of files to be
copied. It is famous for its delta-transfer algorithm, which
reduces the amount of data sent over the network by sending
only the differences between the source files and the
existing files in the destination. Rsync is widely used for
backups and mirroring and as an improved copy command for
everyday use.</p>

<p style="margin-left:11%; margin-top: 1em">Rsync finds
files that need to be transferred using a &quot;quick
check&quot; algorithm (by default) that looks for files that
have changed in size or in last-modified time. Any changes
in the other preserved attributes (as requested by options)
are made on the destination file directly when the quick
check indicates that the file&rsquo;s data does not need to
be updated.</p>

<p style="margin-left:11%; margin-top: 1em">Some of the
additional features of rsync are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>support for copying links, devices, owners, groups, and
permissions</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>exclude and exclude-from options similar to GNU tar</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a CVS exclude mode for ignoring the same files that CVS
would ignore</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>can use any transparent remote shell, including ssh or
rsh</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>does not require super-user privileges</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>pipelining of file transfers to minimize latency
costs</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>support for anonymous or authenticated rsync daemons
(ideal for mirroring)</p></td></tr>
</table>

<h2>GENERAL
<a name="GENERAL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync copies
files either to or from a remote host, or locally on the
current host (it does not support copying files between two
remote hosts).</p>

<p style="margin-left:11%; margin-top: 1em">There are two
different ways for rsync to contact a remote system: using a
remote-shell program as the transport (such as ssh or rsh)
or contacting an rsync daemon directly via TCP. The
remote-shell transport is used whenever the source or
destination path contains a single colon (:) separator after
a host specification. Contacting an rsync daemon directly
happens when the source or destination path contains a
double colon (::) separator after a host specification, OR
when an rsync:// URL is specified (see also the &quot;USING
RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION&quot;
section for an exception to this latter rule).</p>

<p style="margin-left:11%; margin-top: 1em">As a special
case, if a single source arg is specified without a
destination, the files are listed in an output format
similar to &quot;<b>ls&nbsp;-l</b>&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">As expected, if
neither the source or destination path specify a remote
host, the copy occurs locally (see also the
<b>--list-only</b> option).</p>

<p style="margin-left:11%; margin-top: 1em">Rsync refers to
the local side as the client and the remote side as the
server. Don&rsquo;t confuse server with an rsync daemon. A
daemon is always a server, but a server can be either a
daemon or a remote-shell spawned process.</p>

<h2>SETUP
<a name="SETUP"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See the file
README.md for installation instructions.</p>

<p style="margin-left:11%; margin-top: 1em">Once installed,
you can use rsync to any machine that you can access via a
remote shell (as well as some that you can access using the
rsync daemon-mode protocol). For remote transfers, a modern
rsync uses ssh for its communications, but it may have been
configured to use a different remote shell by default, such
as rsh or remsh.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
specify any remote shell you like, either by using the
<b>-e</b> command line option, or by setting the RSYNC_RSH
environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">Note that rsync
must be installed on both the source and destination
machines.</p>

<h2>USAGE
<a name="USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You use rsync
in the same way you use rcp. You must specify a source and a
destination, one of which may be remote.</p>

<p style="margin-left:11%; margin-top: 1em">Perhaps the
best way to explain the syntax is with some examples:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -t *.c
foo:src/</p>

<p style="margin-left:11%; margin-top: 1em">This would
transfer all files matching the pattern <b>*.c</b> from the
current directory to the directory src on the machine foo.
If any of the files already exist on the remote system then
the rsync remote-update protocol is used to update the file
by sending only the differences in the data. Note that the
expansion of wildcards on the command-line (<b>*.c</b>) into
a list of files is handled by the shell before it runs rsync
and not by rsync itself (exactly the same as all other
Posix-style programs).</p>

<p style="margin-left:17%; margin-top: 1em">rsync -avz
foo:src/bar /data/tmp</p>

<p style="margin-left:11%; margin-top: 1em">This would
recursively transfer all files from the directory src/bar on
the machine foo into the /data/tmp/bar directory on the
local machine. The files are transferred in archive mode,
which ensures that symbolic links, devices, attributes,
permissions, ownerships, etc. are preserved in the transfer.
Additionally, compression will be used to reduce the size of
data portions of the transfer.</p>

<p style="margin-left:17%; margin-top: 1em">rsync -avz
foo:src/bar/ /data/tmp</p>

<p style="margin-left:11%; margin-top: 1em">A trailing
slash on the source changes this behavior to avoid creating
an additional directory level at the destination. You can
think of a trailing / on a source as meaning &quot;copy the
contents of this directory&quot; as opposed to &quot;copy
the directory by name&quot;, but in both cases the
attributes of the containing directory are transferred to
the containing directory on the destination. In other words,
each of the following commands copies the files in the same
way, including their setting of the attributes of
/dest/foo:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
/src/foo /dest <br>
rsync -av /src/foo/ /dest/foo</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
host and module references don&rsquo;t require a trailing
slash to copy the contents of the default directory. For
example, both of these copy the remote directory&rsquo;s
contents into &quot;/dest&quot;:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av host:
/dest <br>
rsync -av host::module /dest</p>

<p style="margin-left:11%; margin-top: 1em">You can also
use rsync in local-only mode, where both the source and
destination don&rsquo;t have a &rsquo;:&rsquo; in the name.
In this case it behaves like an improved copy command.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, you
can list all the (listable) modules available from a
particular rsync daemon by leaving off the module name:</p>

<p style="margin-left:17%; margin-top: 1em">rsync
somehost.mydomain.com::</p>

<p style="margin-left:11%; margin-top: 1em">See the
following section for more details.</p>

<h2>ADVANCED USAGE
<a name="ADVANCED USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The syntax for
requesting multiple files from a remote host is done by
specifying additional remote-host args in the same style as
the first, or with the hostname omitted. For instance, all
these work:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
host:file1 :file2 host:file{3,4} /dest/ <br>
rsync -av host::modname/file{1,2} host::modname/file3 /dest/
<br>
rsync -av host::modname/file1 ::modname/file{3,4}</p>

<p style="margin-left:11%; margin-top: 1em">Older versions
of rsync required using quoted spaces in the SRC, like these
examples:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
host:&rsquo;dir1/file1 dir2/file2&rsquo; /dest <br>
rsync host::&rsquo;modname/dir1/file1
modname/dir2/file2&rsquo; /dest</p>

<p style="margin-left:11%; margin-top: 1em">This
word-splitting still works (by default) in the latest rsync,
but is not as easy to use as the first method.</p>

<p style="margin-left:11%; margin-top: 1em">If you need to
transfer a filename that contains whitespace, you can either
specify the <b>--protect-args</b> (<b>-s</b>) option, or
you&rsquo;ll need to escape the whitespace in a way that the
remote shell will understand. For instance:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
host:&rsquo;file\ name\ with\ spaces&rsquo; /dest</p>

<h2>CONNECTING TO AN RSYNC DAEMON
<a name="CONNECTING TO AN RSYNC DAEMON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is also
possible to use rsync without a remote shell as the
transport. In this case you will directly connect to a
remote rsync daemon, typically using TCP port 873. (This
obviously requires the daemon to be running on the remote
system, so refer to the STARTING AN RSYNC DAEMON TO ACCEPT
CONNECTIONS section below for information on that.)</p>

<p style="margin-left:11%; margin-top: 1em">Using rsync in
this way is the same as using it with a remote shell except
that:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">you either use a double colon ::
instead of a single colon to separate the hostname from the
path, or you use an rsync:// URL.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>the first word of the &quot;path&quot; is actually a
module name.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>the remote daemon may print a message of the day when
you connect.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if you specify no path name on the remote daemon then
the list of accessible paths on the daemon will be
shown.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if you specify no local destination then a listing of
the specified files on the remote daemon is provided.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>you must not specify the <b>--rsh</b> (<b>-e</b>) option
(since that overrides the daemon connection to use
ssh&nbsp;-- see USING RSYNC-DAEMON FEATURES VIA A
REMOTE-SHELL CONNECTION below).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">An example that
copies all the files in a remote module named
&quot;src&quot;:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
host::src /dest</p>

<p style="margin-left:11%; margin-top: 1em">Some modules on
the remote daemon may require authentication. If so, you
will receive a password prompt when you connect. You can
avoid the password prompt by setting the environment
variable RSYNC_PASSWORD to the password you want to use or
using the <b>--password-file</b> option. This may be useful
when scripting rsync.</p>

<p style="margin-left:11%; margin-top: 1em">WARNING: On
some systems environment variables are visible to all users.
On those systems using <b>--password-file</b> is
recommended.</p>

<p style="margin-left:11%; margin-top: 1em">You may
establish the connection via a web proxy by setting the
environment variable RSYNC_PROXY to a hostname:port pair
pointing to your web proxy. Note that your web proxy&rsquo;s
configuration must support proxy connections to port
873.</p>

<p style="margin-left:11%; margin-top: 1em">You may also
establish a daemon connection using a program as a proxy by
setting the environment variable RSYNC_CONNECT_PROG to the
commands you wish to run in place of making a direct socket
connection. The string may contain the escape &quot;%H&quot;
to represent the hostname specified in the rsync command (so
use &quot;%%&quot; if you need a single &quot;%&quot; in
your string). For example:</p>

<p style="margin-left:17%; margin-top: 1em">export
RSYNC_CONNECT_PROG=&rsquo;ssh proxyhost nc %H 873&rsquo;
<br>
rsync -av targethost1::module/src/ /dest/ <br>
rsync -av rsync://targethost2/module/src/ /dest/</p>

<p style="margin-left:11%; margin-top: 1em">The command
specified above uses ssh to run nc (netcat) on a proxyhost,
which forwards all data to port 873 (the rsync daemon) on
the targethost (%H).</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
if the RSYNC_SHELL environment variable is set, that program
will be used to run the RSYNC_CONNECT_PROG command instead
of using the default shell of the <b>system()</b> call.</p>

<h2>USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION
<a name="USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is sometimes
useful to use various features of an rsync daemon (such as
named modules) without actually allowing any new socket
connections into a system (other than what is already
required to allow remote-shell access). Rsync supports
connecting to a host using a remote shell and then spawning
a single-use &quot;daemon&quot; server that expects to read
its config file in the home dir of the remote user. This can
be useful if you want to encrypt a daemon-style
transfer&rsquo;s data, but since the daemon is started up
fresh by the remote user, you may not be able to use
features such as chroot or change the uid used by the
daemon. (For another way to encrypt a daemon transfer,
consider using ssh to tunnel a local port to a remote
machine and configure a normal rsync daemon on that remote
host to only allow connections from
&quot;localhost&quot;.)</p>

<p style="margin-left:11%; margin-top: 1em">From the
user&rsquo;s perspective, a daemon transfer via a
remote-shell connection uses nearly the same command-line
syntax as a normal rsync-daemon transfer, with the only
exception being that you must explicitly set the remote
shell program on the command-line with the
<b>--rsh=COMMAND</b> option. (Setting the RSYNC_RSH in the
environment will not turn on this functionality.) For
example:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
--rsh=ssh host::module /dest</p>

<p style="margin-left:11%; margin-top: 1em">If you need to
specify a different remote-shell user, keep in mind that the
user@ prefix in front of the host is specifying the
rsync-user value (for a module that requires user-based
authentication). This means that you must give the &rsquo;-l
user&rsquo; option to ssh when specifying the remote-shell,
as in this example that uses the short version of the
<b>--rsh</b> option:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av -e
&quot;ssh -l ssh-user&quot; rsync-user@host::module
/dest</p>

<p style="margin-left:11%; margin-top: 1em">The
&quot;ssh-user&quot; will be used at the ssh level; the
&quot;rsync-user&quot; will be used to log-in to the
&quot;module&quot;.</p>

<h2>STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS
<a name="STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In order to
connect to an rsync daemon, the remote system needs to have
a daemon already running (or it needs to have configured
something like inetd to spawn an rsync daemon for incoming
connections on a particular port). For full information on
how to start a daemon that will handling incoming socket
connections, see the <b>rsyncd.conf</b>(5) man page&nbsp;--
that is the config file for the daemon, and it contains the
full details for how to run the daemon (including
stand-alone and inetd configurations).</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
using one of the remote-shell transports for the transfer,
there is no need to manually start an rsync daemon.</p>

<h2>SORTED TRANSFER ORDER
<a name="SORTED TRANSFER ORDER"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync always
sorts the specified filenames into its internal transfer
list. This handles the merging together of the contents of
identically named directories, makes it easy to remove
duplicate filenames, and may confuse someone when the files
are transferred in a different order than what was given on
the command-line.</p>

<p style="margin-left:11%; margin-top: 1em">If you need a
particular file to be transferred prior to another, either
separate the files into different rsync calls, or consider
using <b>--delay-updates</b> (which doesn&rsquo;t affect the
sorted transfer order, but does make the final file-updating
phase happen much more rapidly).</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here are some
examples of how I use rsync.</p>

<p style="margin-left:11%; margin-top: 1em">To backup my
wife&rsquo;s home directory, which consists of large MS Word
files and mail folders, I use a cron job that runs</p>

<p style="margin-left:17%; margin-top: 1em">rsync -Cavz .
arvidsjaur:backup</p>

<p style="margin-left:11%; margin-top: 1em">each night over
a PPP connection to a duplicate directory on my machine
&quot;arvidsjaur&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">To synchronize
my samba source trees I use the following Makefile
targets:</p>

<p style="margin-left:17%; margin-top: 1em">get: <br>
rsync -avuzb --exclude &rsquo;*~&rsquo; samba:samba/ . <br>
put: <br>
rsync -Cavuzb . samba:samba/ <br>
sync: get put</p>

<p style="margin-left:11%; margin-top: 1em">This allows me
to sync with a CVS directory at the other end of the
connection. I then do CVS operations on the remote machine,
which saves a lot of time as the remote CVS protocol
isn&rsquo;t very efficient.</p>

<p style="margin-left:11%; margin-top: 1em">I mirror a
directory between my &quot;old&quot; and &quot;new&quot; ftp
sites with the command:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -az -e
ssh --delete ~ftp/pub/samba
nimbus:&quot;~ftp/pub/tridge&quot;</p>

<p style="margin-left:11%; margin-top: 1em">This is
launched from cron every few hours.</p>

<h2>OPTION SUMMARY
<a name="OPTION SUMMARY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here is a short
summary of the options available in rsync. Please refer to
the detailed description below for a complete
description.</p>

<p style="margin-left:11%; margin-top: 1em">--verbose, -v
increase verbosity <br>
--info=FLAGS fine-grained informational verbosity <br>
--debug=FLAGS fine-grained debug verbosity <br>
--stderr=e|a|c change stderr output mode (default: errors)
<br>
--quiet, -q suppress non-error messages <br>
--no-motd suppress daemon-mode MOTD <br>
--checksum, -c skip based on checksum, not mod-time &amp;
size <br>
--archive, -a archive mode is -rlptgoD (no -A,-X,-U,-N,-H)
<br>
--no-OPTION turn off an implied OPTION (e.g. --no-D) <br>
--recursive, -r recurse into directories <br>
--relative, -R use relative path names <br>
--no-implied-dirs don&rsquo;t send implied dirs with
--relative <br>
--backup, -b make backups (see --suffix &amp; --backup-dir)
<br>
--backup-dir=DIR make backups into hierarchy based in DIR
<br>
--suffix=SUFFIX backup suffix (default ~ w/o --backup-dir)
<br>
--update, -u skip files that are newer on the receiver <br>
--inplace update destination files in-place <br>
--append append data onto shorter files <br>
--append-verify --append w/old data in file checksum <br>
--dirs, -d transfer directories without recursing <br>
--mkpath create the destination&rsquo;s path component <br>
--links, -l copy symlinks as symlinks <br>
--copy-links, -L transform symlink into referent file/dir
<br>
--copy-unsafe-links only &quot;unsafe&quot; symlinks are
transformed <br>
--safe-links ignore symlinks that point outside the tree
<br>
--munge-links munge symlinks to make them safe &amp;
unusable <br>
--copy-dirlinks, -k transform symlink to dir into referent
dir <br>
--keep-dirlinks, -K treat symlinked dir on receiver as dir
<br>
--hard-links, -H preserve hard links <br>
--perms, -p preserve permissions <br>
--executability, -E preserve executability <br>
--chmod=CHMOD affect file and/or directory permissions <br>
--acls, -A preserve ACLs (implies --perms) <br>
--xattrs, -X preserve extended attributes <br>
--owner, -o preserve owner (super-user only) <br>
--group, -g preserve group <br>
--devices preserve device files (super-user only) <br>
--copy-devices copy device contents as regular file <br>
--specials preserve special files <br>
-D same as --devices --specials <br>
--times, -t preserve modification times <br>
--atimes, -U preserve access (use) times <br>
--open-noatime avoid changing the atime on opened files <br>
--crtimes, -N preserve create times (newness) <br>
--omit-dir-times, -O omit directories from --times <br>
--omit-link-times, -J omit symlinks from --times <br>
--super receiver attempts super-user activities <br>
--fake-super store/recover privileged attrs using xattrs
<br>
--sparse, -S turn sequences of nulls into sparse blocks <br>
--preallocate allocate dest files before writing them <br>
--write-devices write to devices as files (implies
--inplace) <br>
--dry-run, -n perform a trial run with no changes made <br>
--whole-file, -W copy files whole (w/o delta-xfer algorithm)
<br>
--checksum-choice=STR choose the checksum algorithm (aka
--cc) <br>
--one-file-system, -x don&rsquo;t cross filesystem
boundaries <br>
--block-size=SIZE, -B force a fixed checksum block-size <br>
--rsh=COMMAND, -e specify the remote shell to use <br>
--rsync-path=PROGRAM specify the rsync to run on remote
machine <br>
--existing skip creating new files on receiver <br>
--ignore-existing skip updating files that exist on receiver
<br>
--remove-source-files sender removes synchronized files
(non-dir) <br>
--del an alias for --delete-during <br>
--delete delete extraneous files from dest dirs <br>
--delete-before receiver deletes before xfer, not during
<br>
--delete-during receiver deletes during the transfer <br>
--delete-delay find deletions during, delete after <br>
--delete-after receiver deletes after transfer, not during
<br>
--delete-excluded also delete excluded files from dest dirs
<br>
--ignore-missing-args ignore missing source args without
error <br>
--delete-missing-args delete missing source args from
destination <br>
--ignore-errors delete even if there are I/O errors <br>
--force force deletion of dirs even if not empty <br>
--max-delete=NUM don&rsquo;t delete more than NUM files <br>
--max-size=SIZE don&rsquo;t transfer any file larger than
SIZE <br>
--min-size=SIZE don&rsquo;t transfer any file smaller than
SIZE <br>
--max-alloc=SIZE change a limit relating to memory alloc
<br>
--partial keep partially transferred files <br>
--partial-dir=DIR put a partially transferred file into DIR
<br>
--delay-updates put all updated files into place at end <br>
--prune-empty-dirs, -m prune empty directory chains from
file-list <br>
--numeric-ids don&rsquo;t map uid/gid values by user/group
name <br>
--usermap=STRING custom username mapping <br>
--groupmap=STRING custom groupname mapping <br>
--chown=USER:GROUP simple username/groupname mapping <br>
--timeout=SECONDS set I/O timeout in seconds <br>
--contimeout=SECONDS set daemon connection timeout in
seconds <br>
--ignore-times, -I don&rsquo;t skip files that match size
and time <br>
--size-only skip files that match in size <br>
--modify-window=NUM, -@ set the accuracy for mod-time
comparisons <br>
--temp-dir=DIR, -T create temporary files in directory DIR
<br>
--fuzzy, -y find similar file for basis if no dest file <br>
--compare-dest=DIR also compare destination files relative
to DIR <br>
--copy-dest=DIR ... and include copies of unchanged files
<br>
--link-dest=DIR hardlink to files in DIR when unchanged <br>
--compress, -z compress file data during the transfer <br>
--compress-choice=STR choose the compression algorithm (aka
--zc) <br>
--compress-level=NUM explicitly set compression level (aka
--zl) <br>
--skip-compress=LIST skip compressing files with suffix in
LIST <br>
--cvs-exclude, -C auto-ignore files in the same way CVS does
<br>
--filter=RULE, -f add a file-filtering RULE <br>
-F same as --filter=&rsquo;dir-merge /.rsync-filter&rsquo;
<br>
repeated: --filter=&rsquo;- .rsync-filter&rsquo; <br>
--exclude=PATTERN exclude files matching PATTERN <br>
--exclude-from=FILE read exclude patterns from FILE <br>
--include=PATTERN don&rsquo;t exclude files matching PATTERN
<br>
--include-from=FILE read include patterns from FILE <br>
--files-from=FILE read list of source-file names from FILE
<br>
--from0, -0 all *-from/filter files are delimited by 0s <br>
--protect-args, -s no space-splitting; wildcard chars only
<br>
--copy-as=USER[:GROUP] specify user &amp; optional group for
the copy <br>
--address=ADDRESS bind address for outgoing socket to daemon
<br>
--port=PORT specify double-colon alternate port number <br>
--sockopts=OPTIONS specify custom TCP options <br>
--blocking-io use blocking I/O for the remote shell <br>
--outbuf=N|L|B set out buffering to None, Line, or Block
<br>
--stats give some file-transfer stats <br>
--8-bit-output, -8 leave high-bit chars unescaped in output
<br>
--human-readable, -h output numbers in a human-readable
format <br>
--progress show progress during transfer <br>
-P same as --partial --progress <br>
--itemize-changes, -i output a change-summary for all
updates <br>
--remote-option=OPT, -M send OPTION to the remote side only
<br>
--out-format=FORMAT output updates using the specified
FORMAT <br>
--log-file=FILE log what we&rsquo;re doing to the specified
FILE <br>
--log-file-format=FMT log updates using the specified FMT
<br>
--password-file=FILE read daemon-access password from FILE
<br>
--early-input=FILE use FILE for daemon&rsquo;s early exec
input <br>
--list-only list the files instead of copying them <br>
--bwlimit=RATE limit socket I/O bandwidth <br>
--stop-after=MINS Stop rsync after MINS minutes have elapsed
<br>
--stop-at=y-m-dTh:m Stop rsync at the specified point in
time <br>
--write-batch=FILE write a batched update to FILE <br>
--only-write-batch=FILE like --write-batch but w/o updating
dest <br>
--read-batch=FILE read a batched update from FILE <br>
--protocol=NUM force an older protocol version to be used
<br>
--iconv=CONVERT_SPEC request charset conversion of filenames
<br>
--checksum-seed=NUM set block/file checksum seed (advanced)
<br>
--ipv4, -4 prefer IPv4 <br>
--ipv6, -6 prefer IPv6 <br>
--version, -V print the version + other info and exit <br>
--help, -h (*) show this help (* -h is help only on its
own)</p>

<p style="margin-left:11%; margin-top: 1em">Rsync can also
be run as a daemon, in which case the following options are
accepted:</p>

<p style="margin-left:11%; margin-top: 1em">--daemon run as
an rsync daemon <br>
--address=ADDRESS bind to the specified address <br>
--bwlimit=RATE limit socket I/O bandwidth <br>
--config=FILE specify alternate rsyncd.conf file <br>
--dparam=OVERRIDE, -M override global daemon config
parameter <br>
--no-detach do not detach from the parent <br>
--port=PORT listen on alternate port number <br>
--log-file=FILE override the &quot;log file&quot; setting
<br>
--log-file-format=FMT override the &quot;log format&quot;
setting <br>
--sockopts=OPTIONS specify custom TCP options <br>
--verbose, -v increase verbosity <br>
--ipv4, -4 prefer IPv4 <br>
--ipv6, -6 prefer IPv6 <br>
--help, -h show this help (when used with --daemon)</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync accepts
both long (double-dash + word) and short (single-dash +
letter) options. The full list of the available options are
described below. If an option can be specified in more than
one way, the choices are comma-separated. Some options only
have a long variant, not a short. If the option takes a
parameter, the parameter is only listed after the long
variant, even though it must also be specified for the
short. When specifying a parameter, you can either use the
form <b>--option=param</b> or replace the &rsquo;=&rsquo;
with whitespace. The parameter may need to be quoted in some
manner for it to survive the shell&rsquo;s command-line
parsing. Keep in mind that a leading tilde (<b>~</b>) in a
filename is substituted by your shell, so
<b>--option=~/foo</b> will not change the tilde into your
home directory (remove the &rsquo;=&rsquo; for that).
<b><br>
--help</b>, <b>-h (*)</b></p>

<p style="margin-left:22%;">Print a short help page
describing the options available in rsync and exit. (*) The
<b>-h</b> short option will only invoke <b>--help</b> when
used without other options since it normally means
<b>--human-readable</b>.</p>

<p style="margin-left:11%;"><b>--version</b>, <b>-V</b></p>

<p style="margin-left:22%;">Print the rsync version plus
other info and exit.</p>

<p style="margin-left:22%; margin-top: 1em">The output
includes the default list of checksum algorithms, the
default list of compression algorithms, a list of
compiled-in capabilities, a link to the rsync web site, and
some license/copyright info.</p>

<p style="margin-left:11%;"><b>--verbose</b>, <b>-v</b></p>

<p style="margin-left:22%;">This option increases the
amount of information you are given during the transfer. By
default, rsync works silently. A single <b>-v</b> will give
you information about what files are being transferred and a
brief summary at the end. Two <b>-v</b> options will give
you information on what files are being skipped and slightly
more information at the end. More than two <b>-v</b> options
should only be used if you are debugging rsync.</p>

<p style="margin-left:22%; margin-top: 1em">In a modern
rsync, the <b>-v</b> option is equivalent to the setting of
groups of <b>--info</b> and <b>--debug</b> options. You can
choose to use these newer options in addition to, or in
place of using <b>--verbose</b>, as any fine-grained
settings override the implied settings of <b>-v</b>. Both
<b>--info</b> and <b>--debug</b> have a way to ask for help
that tells you exactly what flags are set for each increase
in verbosity.</p>

<p style="margin-left:22%; margin-top: 1em">However, do
keep in mind that a daemon&rsquo;s
&quot;<b>max&nbsp;verbosity</b>&quot; setting will limit how
high of a level the various individual flags can be set on
the daemon side. For instance, if the max is 2, then any
info and/or debug flag that is set to a higher value than
what would be set by <b>-vv</b> will be downgraded to the
<b>-vv</b> level in the daemon&rsquo;s logging.</p>

<p style="margin-left:11%;"><b>--info=FLAGS</b></p>

<p style="margin-left:22%;">This option lets you have
fine-grained control over the information output you want to
see. An individual flag name may be followed by a level
number, with 0 meaning to silence that output, 1 being the
default output level, and higher numbers increasing the
output of that flag (for those that support higher levels).
Use <b>--info=help</b> to see all the available flag names,
what they output, and what flag names are added for each
increase in the verbose level. Some examples:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -a
--info=progress2 src/ dest/ <br>
rsync -avv --info=stats2,misc1,flist0 src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<b>--info=name</b>&rsquo;s output is affected by the
<b>--out-format</b> and <b>--itemize-changes</b> (<b>-i</b>)
options. See those options for more information on what is
output and when.</p>

<p style="margin-left:22%; margin-top: 1em">This option was
added to 3.1.0, so an older rsync on the server side might
reject your attempts at fine-grained control (if one or more
flags needed to be send to the server and the server was too
old to understand them). See also the
&quot;<b>max&nbsp;verbosity</b>&quot; caveat above when
dealing with a daemon.</p>

<p style="margin-left:11%;"><b>--debug=FLAGS</b></p>

<p style="margin-left:22%;">This option lets you have
fine-grained control over the debug output you want to see.
An individual flag name may be followed by a level number,
with 0 meaning to silence that output, 1 being the default
output level, and higher numbers increasing the output of
that flag (for those that support higher levels). Use
<b>--debug=help</b> to see all the available flag names,
what they output, and what flag names are added for each
increase in the verbose level. Some examples:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avvv
--debug=none src/ dest/ <br>
rsync -avA --del --debug=del2,acl src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">Note that some
debug messages will only be output when <b>--stderr=all</b>
is specified, especially those pertaining to I/O and buffer
debugging.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
3.2.0, this option is no longer auto-forwarded to the server
side in order to allow you to specify different debug values
for each side of the transfer, as well as to specify a new
debug option that is only present in one of the rsync
versions. If you want to duplicate the same option on both
sides, using brace expansion is an easy way to save you some
typing. This works in zsh and bash:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -aiv
{-M,}--debug=del2 src/ dest/</p>


<p style="margin-left:11%;"><b>--stderr=errors|all|client</b></p>

<p style="margin-left:22%;">This option controls which
processes output to stderr and if info messages are also
changed to stderr. The mode strings can be abbreviated, so
feel free to use a single letter value. The 3 possible
choices are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>errors</b> - (the default) causes all the rsync
processes to send an error directly to stderr, even if the
process is on the remote side of the transfer. Info messages
are sent to the client side via the protocol stream. If
stderr is not available (i.e. when directly connecting with
a daemon via a socket) errors fall back to being sent via
the protocol stream.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>all</b> - causes all rsync messages (info and error)
to get written directly to stderr from all (possible)
processes. This causes stderr to become line-buffered
(instead of raw) and eliminates the ability to divide up the
info and error messages by file handle. For those doing
debugging or using several levels of verbosity, this option
can help to avoid clogging up the transfer stream (which
should prevent any chance of a deadlock bug hanging things
up). It also allows <b>--debug</b> to enable some extra I/O
related messages.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>client</b> - causes all rsync messages to be sent to
the client side via the protocol stream. One client process
outputs all messages, with errors on stderr and info
messages on stdout. This <b>was</b> the default in older
rsync versions, but can cause error delays when a lot of
transfer data is ahead of the messages. If you&rsquo;re
pushing files to an older rsync, you may want to use
<b>--stderr=all</b> since that idiom has been around for
several releases.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This option was
added in rsync 3.2.3. This version also began the forwarding
of a non-default setting to the remote side, though rsync
uses the backward-compatible options <b>--msgs2stderr</b>
and <b>--no-msgs2stderr</b> to represent the <b>all</b> and
<b>client</b> settings, respectively. A newer rsync will
continue to accept these older option names to maintain
compatibility.</p>

<p style="margin-left:11%;"><b>--quiet</b>, <b>-q</b></p>

<p style="margin-left:22%;">This option decreases the
amount of information you are given during the transfer,
notably suppressing information messages from the remote
server. This option is useful when invoking rsync from
cron.</p>

<p style="margin-left:11%;"><b>--no-motd</b></p>

<p style="margin-left:22%;">This option affects the
information that is output by the client at the start of a
daemon transfer. This suppresses the message-of-the-day
(MOTD) text, but it also affects the list of modules that
the daemon sends in response to the &quot;rsync host::&quot;
request (due to a limitation in the rsync protocol), so omit
this option if you want to request the list of modules from
the daemon.</p>

<p style="margin-left:11%;"><b>--ignore-times</b>,
<b>-I</b></p>

<p style="margin-left:22%;">Normally rsync will skip any
files that are already the same size and have the same
modification timestamp. This option turns off this
&quot;quick check&quot; behavior, causing all files to be
updated.</p>

<p style="margin-left:11%;"><b>--size-only</b></p>

<p style="margin-left:22%;">This modifies rsync&rsquo;s
&quot;quick check&quot; algorithm for finding files that
need to be transferred, changing it from the default of
transferring files with either a changed size or a changed
last-modified time to just looking for files that have
changed in size. This is useful when starting to use rsync
after using another mirroring system which may not preserve
timestamps exactly.</p>

<p style="margin-left:11%;"><b>--modify-window=NUM</b>,
<b>-@</b></p>

<p style="margin-left:22%;">When comparing two timestamps,
rsync treats the timestamps as being equal if they differ by
no more than the modify-window value. The default is 0,
which matches just integer seconds. If you specify a
negative value (and the receiver is at least version 3.1.3)
then nanoseconds will also be taken into account. Specifying
1 is useful for copies to/from MS Windows FAT filesystems,
because FAT represents times with a 2-second resolution
(allowing times to differ from the original by up to 1
second).</p>

<p style="margin-left:22%; margin-top: 1em">If you want all
your transfers to default to comparing nanoseconds, you can
create a <b>~/.popt</b> file and put these lines in it:</p>

<p style="margin-left:28%; margin-top: 1em">rsync alias -a
-a@-1 <br>
rsync alias -t -t@-1</p>

<p style="margin-left:22%; margin-top: 1em">With that as
the default, you&rsquo;d need to specify
<b>--modify-window=0</b> (aka <b>-@0</b>) to override it and
ignore nanoseconds, e.g. if you&rsquo;re copying between
ext3 and ext4, or if the receiving rsync is older than
3.1.3.</p>

<p style="margin-left:11%;"><b>--checksum</b>,
<b>-c</b></p>

<p style="margin-left:22%;">This changes the way rsync
checks if the files have been changed and are in need of a
transfer. Without this option, rsync uses a &quot;quick
check&quot; that (by default) checks if each file&rsquo;s
size and time of last modification match between the sender
and receiver. This option changes this to compare a 128-bit
checksum for each file that has a matching size. Generating
the checksums means that both sides will expend a lot of
disk I/O reading all the data in the files in the transfer,
so this can slow things down significantly (and this is
prior to any reading that will be done to transfer changed
files)</p>

<p style="margin-left:22%; margin-top: 1em">The sending
side generates its checksums while it is doing the
file-system scan that builds the list of the available
files. The receiver generates its checksums when it is
scanning for changed files, and will checksum any file that
has the same size as the corresponding sender&rsquo;s file:
files with either a changed size or a changed checksum are
selected for transfer.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
always verifies that each <i>transferred</i> file was
correctly reconstructed on the receiving side by checking a
whole-file checksum that is generated as the file is
transferred, but that automatic after-the-transfer
verification has nothing to do with this option&rsquo;s
before-the-transfer &quot;Does this file need to be
updated?&quot; check.</p>

<p style="margin-left:22%; margin-top: 1em">The checksum
used is auto-negotiated between the client and the server,
but can be overridden using either the
<b>--checksum-choice</b> (<b>--cc</b>) option or an
environment variable that is discussed in that
option&rsquo;s section.</p>

<p style="margin-left:11%;"><b>--archive</b>, <b>-a</b></p>

<p style="margin-left:22%;">This is equivalent to
<b>-rlptgoD</b>. It is a quick way of saying you want
recursion and want to preserve almost everything. Be aware
that it does <b>not</b> include preserving ACLs (<b>-A</b>),
xattrs (<b>-X</b>), atimes (<b>-U</b>), crtimes (<b>-N</b>),
nor the finding and preserving of hardlinks (<b>-H</b>).</p>

<p style="margin-left:22%; margin-top: 1em">The only
exception to the above equivalence is when
<b>--files-from</b> is specified, in which case <b>-r</b> is
not implied.</p>

<p style="margin-left:11%;"><b>--no-OPTION</b></p>

<p style="margin-left:22%;">You may turn off one or more
implied options by prefixing the option name with
&quot;no-&quot;. Not all options may be prefixed with a
&quot;no-&quot;: only options that are implied by other
options (e.g. <b>--no-D</b>, <b>--no-perms</b>) or have
different defaults in various circumstances (e.g.
<b>--no-whole-file</b>, <b>--no-blocking-io</b>,
<b>--no-dirs</b>). You may specify either the short or the
long option name after the &quot;no-&quot; prefix (e.g.
<b>--no-R</b> is the same as <b>--no-relative</b>).</p>

<p style="margin-left:22%; margin-top: 1em">For example: if
you want to use <b>-a</b> (<b>--archive</b>) but don&rsquo;t
want <b>-o</b> (<b>--owner</b>), instead of converting
<b>-a</b> into <b>-rlptgD</b>, you could specify
<b>-a&nbsp;--no-o</b> (or <b>-a&nbsp;--no-owner</b>).</p>

<p style="margin-left:22%; margin-top: 1em">The order of
the options is important: if you specify
<b>--no-r&nbsp;-a</b>, the <b>-r</b> option would end up
being turned on, the opposite of <b>-a&nbsp;--no-r</b>. Note
also that the side-effects of the <b>--files-from</b> option
are NOT positional, as it affects the default state of
several options and slightly changes the meaning of
<b>-a</b> (see the <b>--files-from</b> option for more
details).</p>

<p style="margin-left:11%;"><b>--recursive</b>,
<b>-r</b></p>

<p style="margin-left:22%;">This tells rsync to copy
directories recursively. See also <b>--dirs</b>
(<b>-d</b>).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
rsync 3.0.0, the recursive algorithm used is now an
incremental scan that uses much less memory than before and
begins the transfer after the scanning of the first few
directories have been completed. This incremental scan only
affects our recursion algorithm, and does not change a
non-recursive transfer. It is also only possible when both
ends of the transfer are at least version 3.0.0.</p>

<p style="margin-left:22%; margin-top: 1em">Some options
require rsync to know the full file list, so these options
disable the incremental recursion mode. These include:
<b>--delete-before</b>, <b>--delete-after</b>,
<b>--prune-empty-dirs</b>, and <b>--delay-updates</b>.
Because of this, the default delete mode when you specify
<b>--delete</b> is now <b>--delete-during</b> when both ends
of the connection are at least 3.0.0 (use <b>--del</b> or
<b>--delete-during</b> to request this improved deletion
mode explicitly). See also the <b>--delete-delay</b> option
that is a better choice than using
<b>--delete-after</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Incremental
recursion can be disabled using the
<b>--no-inc-recursive</b> option or its shorter
<b>--no-i-r</b> alias.</p>

<p style="margin-left:11%;"><b>--relative</b>,
<b>-R</b></p>

<p style="margin-left:22%;">Use relative paths. This means
that the full path names specified on the command line are
sent to the server rather than just the last parts of the
filenames. This is particularly useful when you want to send
several different directories at the same time. For example,
if you used this command:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av
/foo/bar/baz.c remote:/tmp/</p>

<p style="margin-left:22%; margin-top: 1em">would create a
file named baz.c in /tmp/ on the remote machine. If instead
you used</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avR
/foo/bar/baz.c remote:/tmp/</p>

<p style="margin-left:22%; margin-top: 1em">then a file
named /tmp/foo/bar/baz.c would be created on the remote
machine, preserving its full path. These extra path elements
are called &quot;implied directories&quot; (i.e. the
&quot;foo&quot; and the &quot;foo/bar&quot; directories in
the above example).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
rsync 3.0.0, rsync always sends these implied directories as
real directories in the file list, even if a path element is
really a symlink on the sending side. This prevents some
really unexpected behaviors when copying the full path of a
file that you didn&rsquo;t realize had a symlink in its
path. If you want to duplicate a server-side symlink,
include both the symlink via its path, and referent
directory via its real path. If you&rsquo;re dealing with an
older rsync on the sending side, you may need to use the
<b>--no-implied-dirs</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">It is also
possible to limit the amount of path information that is
sent as implied directories for each path you specify. With
a modern rsync on the sending side (beginning with 2.6.7),
you can insert a dot and a slash into the source path, like
this:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avR
/foo/./bar/baz.c remote:/tmp/</p>

<p style="margin-left:22%; margin-top: 1em">That would
create /tmp/bar/baz.c on the remote machine. (Note that the
dot must be followed by a slash, so &quot;/foo/.&quot; would
not be abbreviated.) For older rsync versions, you would
need to use a chdir to limit the source path. For example,
when pushing files:</p>

<p style="margin-left:28%; margin-top: 1em">(cd /foo; rsync
-avR bar/baz.c remote:/tmp/)</p>

<p style="margin-left:22%; margin-top: 1em">(Note that the
parens put the two commands into a sub-shell, so that the
&quot;cd&quot; command doesn&rsquo;t remain in effect for
future commands.) If you&rsquo;re pulling files from an
older rsync, use this idiom (but only for a non-daemon
transfer):</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avR
--rsync-path=&quot;cd /foo; rsync&quot; \ <br>
remote:bar/baz.c /tmp/</p>

<p style="margin-left:11%;"><b>--no-implied-dirs</b></p>

<p style="margin-left:22%;">This option affects the default
behavior of the <b>--relative</b> option. When it is
specified, the attributes of the implied directories from
the source names are not included in the transfer. This
means that the corresponding path elements on the
destination system are left unchanged if they exist, and any
missing implied directories are created with default
attributes. This even allows these implied path elements to
have big differences, such as being a symlink to a directory
on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">For instance,
if a command-line arg or a files-from entry told rsync to
transfer the file &quot;path/foo/file&quot;, the directories
&quot;path&quot; and &quot;path/foo&quot; are implied when
<b>--relative</b> is used. If &quot;path/foo&quot; is a
symlink to &quot;bar&quot; on the destination system, the
receiving rsync would ordinarily delete
&quot;path/foo&quot;, recreate it as a directory, and
receive the file into the new directory. With
<b>--no-implied-dirs</b>, the receiving rsync updates
&quot;path/foo/file&quot; using the existing path elements,
which means that the file ends up being created in
&quot;path/bar&quot;. Another way to accomplish this link
preservation is to use the <b>--keep-dirlinks</b> option
(which will also affect symlinks to directories in the rest
of the transfer).</p>

<p style="margin-left:22%; margin-top: 1em">When pulling
files from an rsync older than 3.0.0, you may need to use
this option if the sending side has a symlink in the path
you request and you wish the implied directories to be
transferred as normal directories.</p>

<p style="margin-left:11%;"><b>--backup</b>, <b>-b</b></p>

<p style="margin-left:22%;">With this option, preexisting
destination files are renamed as each file is transferred or
deleted. You can control where the backup file goes and what
(if any) suffix gets appended using the <b>--backup-dir</b>
and <b>--suffix</b> options.</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you don&rsquo;t specify <b>--backup-dir</b>, (1) the
<b>--omit-dir-times</b> option will be forced on, and (2) if
<b>--delete</b> is also in effect (without
<b>--delete-excluded</b>), rsync will add a
&quot;protect&quot; filter-rule for the backup suffix to the
end of all your existing excludes (e.g.
<b>-f&nbsp;&quot;P&nbsp;*~&quot;</b>). This will prevent
previously backed-up files from being deleted. Note that if
you are supplying your own filter rules, you may need to
manually insert your own exclude/protect rule somewhere
higher up in the list so that it has a high enough priority
to be effective (e.g., if your rules specify a trailing
inclusion/exclusion of <b>*</b>, the auto-added rule would
never be reached).</p>

<p style="margin-left:11%;"><b>--backup-dir=DIR</b></p>

<p style="margin-left:22%;">This implies the
<b>--backup</b> option, and tells rsync to store all backups
in the specified directory on the receiving side. This can
be used for incremental backups. You can additionally
specify a backup suffix using the <b>--suffix</b> option
(otherwise the files backed up in the specified directory
will keep their original filenames).</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you specify a relative path, the backup directory will be
relative to the destination directory, so you probably want
to specify either an absolute path or a path that starts
with &quot;../&quot;. If an rsync daemon is the receiver,
the backup dir cannot go outside the module&rsquo;s path
hierarchy, so take extra care not to delete it or copy into
it.</p>

<p style="margin-left:11%;"><b>--suffix=SUFFIX</b></p>

<p style="margin-left:22%;">This option allows you to
override the default backup suffix used with the
<b>--backup</b> (<b>-b</b>) option. The default suffix is a
<b>~</b> if no <b>--backup-dir</b> was specified, otherwise
it is an empty string.</p>

<p style="margin-left:11%;"><b>--update</b>, <b>-u</b></p>

<p style="margin-left:22%;">This forces rsync to skip any
files which exist on the destination and have a modified
time that is newer than the source file. (If an existing
destination file has a modification time equal to the source
file&rsquo;s, it will be updated if the sizes are
different.)</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
does not affect the copying of dirs, symlinks, or other
special files. Also, a difference of file format between the
sender and receiver is always considered to be important
enough for an update, no matter what date is on the objects.
In other words, if the source has a directory where the
destination has a file, the transfer would occur regardless
of the timestamps.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file-lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>

<p style="margin-left:11%;"><b>--inplace</b></p>

<p style="margin-left:22%;">This option changes how rsync
transfers a file when its data needs to be updated: instead
of the default method of creating a new copy of the file and
moving it into place when it is complete, rsync instead
writes the updated data directly to the destination
file.</p>

<p style="margin-left:22%; margin-top: 1em">This has
several effects:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>Hard links are not broken. This means the new data will
be visible through other hard links to the destination file.
Moreover, attempts to copy differing source files onto a
multiply-linked destination file will result in a &quot;tug
of war&quot; with the destination data changing back and
forth.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>In-use binaries cannot be updated (either the OS will
prevent this from happening, or binaries that attempt to
swap-in their data will misbehave or crash).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The file&rsquo;s data will be in an inconsistent state
during the transfer and will be left that way if the
transfer is interrupted or if an update fails.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A file that rsync cannot write to cannot be updated.
While a super user can update any file, a normal user needs
to be granted write permission for the open of the file for
writing to be successful.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The efficiency of rsync&rsquo;s delta-transfer algorithm
may be reduced if some data in the destination file is
overwritten before it can be copied to a position later in
the file. This does not apply if you use <b>--backup</b>,
since rsync is smart enough to use the backup file as the
basis file for the transfer.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">WARNING: you
should not use this option to update files that are being
accessed by others, so be careful when choosing to use this
for a copy.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
useful for transferring large files with block-based changes
or appended data, and also on systems that are disk bound,
not network bound. It can also help keep a copy-on-write
filesystem snapshot from diverging the entire contents of a
file that only has minor changes.</p>

<p style="margin-left:22%; margin-top: 1em">The option
implies <b>--partial</b> (since an interrupted transfer does
not delete the file), but conflicts with
<b>--partial-dir</b> and <b>--delay-updates</b>. Prior to
rsync 2.6.4 <b>--inplace</b> was also incompatible with
<b>--compare-dest</b> and <b>--link-dest</b>.</p>

<p style="margin-left:11%;"><b>--append</b></p>

<p style="margin-left:22%;">This special copy mode only
works to efficiently update files that are known to be
growing larger where any existing content on the receiving
side is also known to be the same as the content on the
sender. The use of <b>--append can be dangerous</b> if you
aren&rsquo;t 100% sure that all the files in the transfer
are shared, growing files. You should thus use filter rules
to ensure that you weed out any files that do not fit this
criteria.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync updates
these growing file in-place without verifying any of the
existing content in the file (it only verifies the content
that it is appending). Rsync skips any files that exist on
the receiving side that are not shorter than the associated
file on the sending side (which means that new files are
transferred).</p>

<p style="margin-left:22%; margin-top: 1em">This does not
interfere with the updating of a file&rsquo;s non-content
attributes (e.g. permissions, ownership, etc.) when the file
does not need to be transferred, nor does it affect the
updating of any directories or non-regular files.</p>

<p style="margin-left:11%;"><b>--append-verify</b></p>

<p style="margin-left:22%;">This special copy mode works
like <b>--append</b> except that all the data in the file is
included in the checksum verification (making it much less
efficient but also potentially safer). This option <b>can be
dangerous</b> if you aren&rsquo;t 100% sure that all the
files in the transfer are shared, growing files. See the
<b>--append</b> option for more details.</p>

<p style="margin-left:22%; margin-top: 1em">Note: prior to
rsync 3.0.0, the <b>--append</b> option worked like
<b>--append-verify</b>, so if you are interacting with an
older rsync (or the transfer is using a protocol prior to
30), specifying either append option will initiate an
<b>--append-verify</b> transfer.</p>

<p style="margin-left:11%;"><b>--dirs</b>, <b>-d</b></p>

<p style="margin-left:22%;">Tell the sending side to
include any directories that are encountered. Unlike
<b>--recursive</b>, a directory&rsquo;s contents are not
copied unless the directory name specified is &quot;.&quot;
or ends with a trailing slash (e.g. &quot;.&quot;,
&quot;dir/.&quot;, &quot;dir/&quot;, etc.). Without this
option or the <b>--recursive</b> option, rsync will skip all
directories it encounters (and output a message to that
effect for each one). If you specify both <b>--dirs</b> and
<b>--recursive</b>, <b>--recursive</b> takes precedence.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>--dirs</b> option is implied by the <b>--files-from</b>
option or the <b>--list-only</b> option (including an
implied <b>--list-only</b> usage) if <b>--recursive</b>
wasn&rsquo;t specified (so that directories are seen in the
listing). Specify <b>--no-dirs</b> (or <b>--no-d</b>) if you
want to turn this off.</p>

<p style="margin-left:22%; margin-top: 1em">There is also a
backward-compatibility helper option, <b>--old-dirs</b> (or
<b>--old-d</b>) that tells rsync to use a hack of
<b>-r&nbsp;--exclude=&rsquo;/*/*&rsquo;</b> to get an older
rsync to list a single directory without recursing.</p>

<p style="margin-left:11%;"><b>--mkpath</b></p>

<p style="margin-left:22%;">Create a missing path component
of the destination arg. This allows rsync to create multiple
levels of missing destination dirs and to create a path in
which to put a single renamed file. Keep in mind that
you&rsquo;ll need to supply a trailing slash if you want the
entire destination path to be treated as a directory when
copying a single arg (making rsync behave the same way that
it would if the path component of the destination had
already existed).</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the following creates a copy of file foo as bar in the
sub/dir directory, creating dirs &quot;sub&quot; and
&quot;sub/dir&quot; if either do not yet exist:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -ai
--mkpath foo sub/dir/bar</p>

<p style="margin-left:22%; margin-top: 1em">If you instead
ran the following, it would have created file foo in the
sub/dir/bar directory:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -ai
--mkpath foo sub/dir/bar/</p>

<p style="margin-left:11%;"><b>--links</b>, <b>-l</b></p>

<p style="margin-left:22%;">When symlinks are encountered,
recreate the symlink on the destination.</p>

<p style="margin-left:11%;"><b>--copy-links</b>,
<b>-L</b></p>

<p style="margin-left:22%;">When symlinks are encountered,
the item that they point to (the referent) is copied, rather
than the symlink. In older versions of rsync, this option
also had the side-effect of telling the receiving side to
follow symlinks, such as symlinks to directories. In a
modern rsync such as this one, you&rsquo;ll need to specify
<b>--keep-dirlinks</b> (<b>-K</b>) to get this extra
behavior. The only exception is when sending files to an
rsync that is too old to understand <b>-K&nbsp;</b>-- in
that case, the <b>-L</b> option will still have the
side-effect of <b>-K</b> on that older receiving rsync.</p>

<p style="margin-left:11%;"><b>--copy-unsafe-links</b></p>

<p style="margin-left:22%;">This tells rsync to copy the
referent of symbolic links that point outside the copied
tree. Absolute symlinks are also treated like ordinary
files, and so are any symlinks in the source path itself
when <b>--relative</b> is used. This option has no
additional effect if <b>--copy-links</b> was also
specified.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
cut-off point is the top of the transfer, which is the part
of the path that rsync isn&rsquo;t mentioning in the verbose
output. If you copy &quot;/src/subdir&quot; to
&quot;/dest/&quot; then the &quot;subdir&quot; directory is
a name inside the transfer tree, not the top of the transfer
(which is /src) so it is legal for created relative symlinks
to refer to other names inside the /src and /dest
directories. If you instead copy &quot;/src/subdir/&quot;
(with a trailing slash) to &quot;/dest/subdir&quot; that
would not allow symlinks to any files outside of
&quot;subdir&quot;.</p>

<p style="margin-left:11%;"><b>--safe-links</b></p>

<p style="margin-left:22%;">This tells rsync to ignore any
symbolic links which point outside the copied tree. All
absolute symlinks are also ignored. Using this option in
conjunction with <b>--relative</b> may give unexpected
results.</p>

<p style="margin-left:11%;"><b>--munge-links</b></p>

<p style="margin-left:22%;">This option tells rsync to (1)
modify all symlinks on the receiving side in a way that
makes them unusable but recoverable (see below), or (2) to
unmunge symlinks on the sending side that had been stored in
a munged state. This is useful if you don&rsquo;t quite
trust the source of the data to not try to slip in a symlink
to a unexpected place.</p>

<p style="margin-left:22%; margin-top: 1em">The way rsync
disables the use of symlinks is to prefix each one with the
string &quot;/rsyncd-munged/&quot;. This prevents the links
from being used as long as that directory does not exist.
When this option is enabled, rsync will refuse to run if
that path is a directory or a symlink to a directory.</p>

<p style="margin-left:22%; margin-top: 1em">The option only
affects the client side of the transfer, so if you need it
to affect the server, specify it via <b>--remote-option</b>.
(Note that in a local transfer, the client side is the
sender.)</p>

<p style="margin-left:22%; margin-top: 1em">This option has
no affect on a daemon, since the daemon configures whether
it wants munged symlinks via its
&quot;<b>munge&nbsp;symlinks</b>&quot; parameter. See also
the &quot;munge-symlinks&quot; perl script in the support
directory of the source code.</p>

<p style="margin-left:11%;"><b>--copy-dirlinks</b>,
<b>-k</b></p>

<p style="margin-left:22%;">This option causes the sending
side to treat a symlink to a directory as though it were a
real directory. This is useful if you don&rsquo;t want
symlinks to non-directories to be affected, as they would be
using <b>--copy-links</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Without this
option, if the sending side has replaced a directory with a
symlink to a directory, the receiving side will delete
anything that is in the way of the new symlink, including a
directory hierarchy (as long as <b>--force</b> or
<b>--delete</b> is in effect).</p>

<p style="margin-left:22%; margin-top: 1em">See also
<b>--keep-dirlinks</b> for an analogous option for the
receiving side.</p>


<p style="margin-left:22%; margin-top: 1em"><b>--copy-dirlinks</b>
applies to all symlinks to directories in the source. If you
want to follow only a few specified symlinks, a trick you
can use is to pass them as additional source args with a
trailing slash, using <b>--relative</b> to make the paths
match up right. For example:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -r
--relative src/./ src/./follow-me/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">This works
because rsync calls <a href="https://man.page/2/lstat">lstat(2)</a> on the source arg as
given, and the trailing slash makes <a href="https://man.page/2/lstat">lstat(2)</a> follow
the symlink, giving rise to a directory in the file-list
which overrides the symlink found during the scan of
&quot;src/./&quot;.</p>

<p style="margin-left:11%;"><b>--keep-dirlinks</b>,
<b>-K</b></p>

<p style="margin-left:22%;">This option causes the
receiving side to treat a symlink to a directory as though
it were a real directory, but only if it matches a real
directory from the sender. Without this option, the
receiver&rsquo;s symlink would be deleted and replaced with
a real directory.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose you transfer a directory &quot;foo&quot; that
contains a file &quot;file&quot;, but &quot;foo&quot; is a
symlink to directory &quot;bar&quot; on the receiver.
Without <b>--keep-dirlinks</b>, the receiver deletes symlink
&quot;foo&quot;, recreates it as a directory, and receives
the file into the new directory. With
<b>--keep-dirlinks</b>, the receiver keeps the symlink and
&quot;file&quot; ends up in &quot;bar&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">One note of
caution: if you use <b>--keep-dirlinks</b>, you must trust
all the symlinks in the copy! If it is possible for an
untrusted user to create their own symlink to any directory,
the user could then (on a subsequent copy) replace the
symlink with a real directory and affect the content of
whatever directory the symlink references. For backup
copies, you are better off using something like a bind mount
instead of a symlink to modify your receiving hierarchy.</p>

<p style="margin-left:22%; margin-top: 1em">See also
<b>--copy-dirlinks</b> for an analogous option for the
sending side.</p>

<p style="margin-left:11%;"><b>--hard-links</b>,
<b>-H</b></p>

<p style="margin-left:22%;">This tells rsync to look for
hard-linked files in the source and link together the
corresponding files on the destination. Without this option,
hard-linked files in the source are treated as though they
were separate files.</p>

<p style="margin-left:22%; margin-top: 1em">This option
does NOT necessarily ensure that the pattern of hard links
on the destination exactly matches that on the source. Cases
in which the destination may end up with extra hard links
include the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the destination contains extraneous hard-links (more
linking than what is present in the source file list), the
copying algorithm will not break them explicitly. However,
if one or more of the paths have content differences, the
normal file-update process will break those extra links
(unless you are using the <b>--inplace</b> option).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>If you specify a <b>--link-dest</b> directory that
contains hard links, the linking of the destination files
against the <b>--link-dest</b> files can cause some paths in
the destination to become linked together due to the
<b>--link-dest</b> associations.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
can only detect hard links between files that are inside the
transfer set. If rsync updates a file that has extra
hard-link connections to files outside the transfer, that
linkage will be broken. If you are tempted to use the
<b>--inplace</b> option to avoid this breakage, be very
careful that you know how your files are being updated so
that you are certain that no unintended changes happen due
to lingering hard links (and see the <b>--inplace</b> option
for more caveats).</p>

<p style="margin-left:22%; margin-top: 1em">If incremental
recursion is active (see <b>--recursive</b>), rsync may
transfer a missing hard-linked file before it finds that
another link for that contents exists elsewhere in the
hierarchy. This does not affect the accuracy of the transfer
(i.e. which files are hard-linked together), just its
efficiency (i.e. copying the data for a new, early copy of a
hard-linked file that could have been found later in the
transfer in another member of the hard-linked set of files).
One way to avoid this inefficiency is to disable incremental
recursion using the <b>--no-inc-recursive</b> option.</p>

<p style="margin-left:11%;"><b>--perms</b>, <b>-p</b></p>

<p style="margin-left:22%;">This option causes the
receiving rsync to set the destination permissions to be the
same as the source permissions. (See also the <b>--chmod</b>
option for a way to modify what rsync considers to be the
source permissions.)</p>

<p style="margin-left:22%; margin-top: 1em">When this
option is <i>off</i>, permissions are set as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>Existing files (including updated files) retain their
existing permissions, though the <b>--executability</b>
option might change just the execute permission for the
file.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>New files get their &quot;normal&quot; permission bits
set to the source file&rsquo;s permissions masked with the
receiving directory&rsquo;s default permissions (either the
receiving process&rsquo;s umask, or the permissions
specified via the destination directory&rsquo;s default
ACL), and their special permission bits disabled except in
the case where a new directory inherits a setgid bit from
its parent directory.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Thus, when
<b>--perms</b> and <b>--executability</b> are both disabled,
rsync&rsquo;s behavior is the same as that of other
file-copy utilities, such as <a href="https://man.page/1/cp">cp(1)</a> and
<a href="https://man.page/1/tar">tar(1)</a>.</p>

<p style="margin-left:22%; margin-top: 1em">In summary: to
give destination files (both old and new) the source
permissions, use <b>--perms</b>. To give new files the
destination-default permissions (while leaving existing
files unchanged), make sure that the <b>--perms</b> option
is off and use <b>--chmod=ugo=rwX</b> (which ensures that
all non-masked bits get enabled). If you&rsquo;d care to
make this latter behavior easier to type, you could define a
popt alias for it, such as putting this line in the file
<b>~/.popt</b> (the following defines the <b>-Z</b> option,
and includes <b>--no-g</b> to use the default group of the
destination dir):</p>

<p style="margin-left:28%; margin-top: 1em">rsync alias -Z
--no-p --no-g --chmod=ugo=rwX</p>

<p style="margin-left:22%; margin-top: 1em">You could then
use this new option in a command such as this one:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avZ src/
dest/</p>

<p style="margin-left:22%; margin-top: 1em">(Caveat: make
sure that <b>-a</b> does not follow <b>-Z</b>, or it will
re-enable the two <b>--no-*</b> options mentioned
above.)</p>

<p style="margin-left:22%; margin-top: 1em">The
preservation of the destination&rsquo;s setgid bit on
newly-created directories when <b>--perms</b> is off was
added in rsync 2.6.7. Older rsync versions erroneously
preserved the three special permission bits for
newly-created files when <b>--perms</b> was off, while
overriding the destination&rsquo;s setgid bit setting on a
newly-created directory. Default ACL observance was added to
the ACL patch for rsync 2.6.7, so older (or non-ACL-enabled)
rsyncs use the umask even if default ACLs are present. (Keep
in mind that it is the version of the receiving rsync that
affects these behaviors.)</p>

<p style="margin-left:11%;"><b>--executability</b>,
<b>-E</b></p>

<p style="margin-left:22%;">This option causes rsync to
preserve the executability (or non-executability) of regular
files when <b>--perms</b> is not enabled. A regular file is
considered to be executable if at least one &rsquo;x&rsquo;
is turned on in its permissions. When an existing
destination file&rsquo;s executability differs from that of
the corresponding source file, rsync modifies the
destination file&rsquo;s permissions as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>To make a file non-executable, rsync turns off all its
&rsquo;x&rsquo; permissions.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>To make a file executable, rsync turns on each
&rsquo;x&rsquo; permission that has a corresponding
&rsquo;r&rsquo; permission enabled.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If
<b>--perms</b> is enabled, this option is ignored.</p>

<p style="margin-left:11%;"><b>--acls</b>, <b>-A</b></p>

<p style="margin-left:22%;">This option causes rsync to
update the destination ACLs to be the same as the source
ACLs. The option also implies <b>--perms</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The source and
destination systems must have compatible ACL entries for
this option to work properly. See the <b>--fake-super</b>
option for a way to backup and restore ACLs that are not
compatible.</p>

<p style="margin-left:11%;"><b>--xattrs</b>, <b>-X</b></p>

<p style="margin-left:22%;">This option causes rsync to
update the destination extended attributes to be the same as
the source ones.</p>

<p style="margin-left:22%; margin-top: 1em">For systems
that support extended-attribute namespaces, a copy being
done by a super-user copies all namespaces except system.*.
A normal user only copies the user.* namespace. To be able
to backup and restore non-user namespaces as a normal user,
see the <b>--fake-super</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">The above name
filtering can be overridden by using one or more filter
options with the <b>x</b> modifier. When you specify an
xattr-affecting filter rule, rsync requires that you do your
own system/user filtering, as well as any additional
filtering for what xattr names are copied and what names are
allowed to be deleted. For example, to skip the system
namespace, you could specify:</p>


<p style="margin-left:28%; margin-top: 1em">--filter=&rsquo;-x
system.*&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">To skip all
namespaces except the user namespace, you could specify a
negated-user match:</p>


<p style="margin-left:28%; margin-top: 1em">--filter=&rsquo;-x!
user.*&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">To prevent any
attributes from being deleted, you could specify a
receiver-only rule that excludes all names:</p>


<p style="margin-left:28%; margin-top: 1em">--filter=&rsquo;-xr
*&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
<b>-X</b> option does not copy rsync&rsquo;s special xattr
values (e.g. those used by <b>--fake-super</b>) unless you
repeat the option (e.g. <b>-XX</b>). This &quot;copy all
xattrs&quot; mode cannot be used with
<b>--fake-super</b>.</p>

<p style="margin-left:11%;"><b>--chmod=CHMOD</b></p>

<p style="margin-left:22%;">This option tells rsync to
apply one or more comma-separated &quot;chmod&quot; modes to
the permission of the files in the transfer. The resulting
value is treated as though it were the permissions that the
sending side supplied for the file, which means that this
option can seem to have no effect on existing files if
<b>--perms</b> is not enabled.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
the normal parsing rules specified in the <a href="https://man.page/1/chmod">chmod(1)</a>
manpage, you can specify an item that should only apply to a
directory by prefixing it with a &rsquo;D&rsquo;, or specify
an item that should only apply to a file by prefixing it
with a &rsquo;F&rsquo;. For example, the following will
ensure that all directories get marked set-gid, that no
files are other-writable, that both are user-writable and
group-writable, and that both have consistent executability
across all bits:</p>


<p style="margin-left:28%; margin-top: 1em">--chmod=Dg+s,ug+w,Fo-w,+X</p>

<p style="margin-left:22%; margin-top: 1em">Using octal
mode numbers is also allowed:</p>


<p style="margin-left:28%; margin-top: 1em">--chmod=D2775,F664</p>

<p style="margin-left:22%; margin-top: 1em">It is also
legal to specify multiple <b>--chmod</b> options, as each
additional option is just appended to the list of changes to
make.</p>

<p style="margin-left:22%; margin-top: 1em">See the
<b>--perms</b> and <b>--executability</b> options for how
the resulting permission value can be applied to the files
in the transfer.</p>

<p style="margin-left:11%;"><b>--owner</b>, <b>-o</b></p>

<p style="margin-left:22%;">This option causes rsync to set
the owner of the destination file to be the same as the
source file, but only if the receiving rsync is being run as
the super-user (see also the <b>--super</b> and
<b>--fake-super</b> options). Without this option, the owner
of new and/or transferred files are set to the invoking user
on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">The
preservation of ownership will associate matching names by
default, but may fall back to using the ID number in some
circumstances (see also the <b>--numeric-ids</b> option for
a full discussion).</p>

<p style="margin-left:11%;"><b>--group</b>, <b>-g</b></p>

<p style="margin-left:22%;">This option causes rsync to set
the group of the destination file to be the same as the
source file. If the receiving program is not running as the
super-user (or if <b>--no-super</b> was specified), only
groups that the invoking user on the receiving side is a
member of will be preserved. Without this option, the group
is set to the default group of the invoking user on the
receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">The
preservation of group information will associate matching
names by default, but may fall back to using the ID number
in some circumstances (see also the <b>--numeric-ids</b>
option for a full discussion).</p>

<p style="margin-left:11%;"><b>--devices</b></p>

<p style="margin-left:22%;">This option causes rsync to
transfer character and block device files to the remote
system to recreate these devices. This option has no effect
if the receiving rsync is not run as the super-user (see
also the <b>--super</b> and <b>--fake-super</b>
options).</p>

<p style="margin-left:11%;"><b>--specials</b></p>

<p style="margin-left:22%;">This option causes rsync to
transfer special files such as named sockets and fifos.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>-D</b> option is equivalent to
<b>--devices&nbsp;--specials</b>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>--write-devices</b></p>

<p style="margin-left:22%;">This tells rsync to treat a
device on the receiving side as a regular file, allowing the
writing of file data into a device.</p>

<p style="margin-left:22%; margin-top: 1em">This option
implies the <b>--inplace</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Be careful
using this, as you should know what devices are present on
the receiving side of the transfer, especially if running
rsync as root.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
refused by an rsync daemon.</p>

<p style="margin-left:11%;"><b>--times</b>, <b>-t</b></p>

<p style="margin-left:22%;">This tells rsync to transfer
modification times along with the files and update them on
the remote system. Note that if this option is not used, the
optimization that excludes files that have not been modified
cannot be effective; in other words, a missing <b>-t</b> or
<b>-a</b> will cause the next transfer to behave as if it
used <b>-I</b>, causing all files to be updated (though
rsync&rsquo;s delta-transfer algorithm will make the update
fairly efficient if the files haven&rsquo;t actually
changed, you&rsquo;re much better off using <b>-t</b>).</p>

<p style="margin-left:11%;"><b>--atimes</b>, <b>-U</b></p>

<p style="margin-left:22%;">This tells rsync to set the
access (use) times of the destination files to the same
value as the source files.</p>

<p style="margin-left:22%; margin-top: 1em">If repeated, it
also sets the <b>--open-noatime</b> option, which can help
you to make the sending and receiving systems have the same
access times on the transferred files without needing to run
rsync an extra time after a file is transferred.</p>

<p style="margin-left:22%; margin-top: 1em">Note that some
older rsync versions (prior to 3.2.0) may have been built
with a pre-release <b>--atimes</b> patch that does not imply
<b>--open-noatime</b> when this option is repeated.</p>

<p style="margin-left:11%;"><b>--open-noatime</b></p>

<p style="margin-left:22%;">This tells rsync to open files
with the O_NOATIME flag (on systems that support it) to
avoid changing the access time of the files that are being
transferred. If your OS does not support the O_NOATIME flag
then rsync will silently ignore this option. Note also that
some filesystems are mounted to avoid updating the atime on
read access even without the O_NOATIME flag being set.</p>

<p style="margin-left:11%;"><b>--crtimes</b>,
<b>-N,</b></p>

<p style="margin-left:22%;">This tells rsync to set the
create times (newness) of the destination files to the same
value as the source files.</p>

<p style="margin-left:11%;"><b>--omit-dir-times</b>,
<b>-O</b></p>

<p style="margin-left:22%;">This tells rsync to omit
directories when it is preserving modification times (see
<b>--times</b>). If NFS is sharing the directories on the
receiving side, it is a good idea to use <b>-O</b>. This
option is inferred if you use <b>--backup</b> without
<b>--backup-dir</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option
also has the side-effect of avoiding early creation of
directories in incremental recursion copies. The default
<b>--inc-recursive</b> copying normally does an early-create
pass of all the sub-directories in a parent directory in
order for it to be able to then set the modify time of the
parent directory right away (without having to delay that
until a bunch of recursive copying has finished). This
early-create idiom is not necessary if directory modify
times are not being preserved, so it is skipped. Since
early-create directories don&rsquo;t have accurate mode,
mtime, or ownership, the use of this option can help when
someone wants to avoid these partially-finished
directories.</p>

<p style="margin-left:11%;"><b>--omit-link-times</b>,
<b>-J</b></p>

<p style="margin-left:22%;">This tells rsync to omit
symlinks when it is preserving modification times (see
<b>--times</b>).</p>

<p style="margin-left:11%;"><b>--super</b></p>

<p style="margin-left:22%;">This tells the receiving side
to attempt super-user activities even if the receiving rsync
wasn&rsquo;t run by the super-user. These activities
include: preserving users via the <b>--owner</b> option,
preserving all groups (not just the current user&rsquo;s
groups) via the <b>--group</b> option, and copying devices
via the <b>--devices</b> option. This is useful for systems
that allow such activities without being the super-user, and
also for ensuring that you will get errors if the receiving
side isn&rsquo;t being run as the super-user. To turn off
super-user activities, the super-user can use
<b>--no-super</b>.</p>

<p style="margin-left:11%;"><b>--fake-super</b></p>

<p style="margin-left:22%;">When this option is enabled,
rsync simulates super-user activities by saving/restoring
the privileged attributes via special extended attributes
that are attached to each file (as needed). This includes
the file&rsquo;s owner and group (if it is not the default),
the file&rsquo;s device info (device &amp; special files are
created as empty text files), and any permission bits that
we won&rsquo;t allow to be set on the real file (e.g. the
real file gets u-s,g-s,o-t for safety) or that would limit
the owner&rsquo;s access (since the real super-user can
always access/change a file, the files we create can always
be accessed/changed by the creating user). This option also
handles ACLs (if <b>--acls</b> was specified) and non-user
extended attributes (if <b>--xattrs</b> was specified).</p>

<p style="margin-left:22%; margin-top: 1em">This is a good
way to backup data without using a super-user, and to store
ACLs from incompatible systems.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>--fake-super</b> option only affects the side where the
option is used. To affect the remote side of a remote-shell
connection, use the <b>--remote-option</b> (<b>-M</b>)
option:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av
-M--fake-super /src/ host:/dest/</p>

<p style="margin-left:22%; margin-top: 1em">For a local
copy, this option affects both the source and the
destination. If you wish a local copy to enable this option
just for the destination files, specify
<b>-M--fake-super</b>. If you wish a local copy to enable
this option just for the source files, combine
<b>--fake-super</b> with <b>-M--super</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
overridden by both <b>--super</b> and <b>--no-super</b>.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
&quot;<b>fake&nbsp;super</b>&quot; setting in the
daemon&rsquo;s rsyncd.conf file.</p>

<p style="margin-left:11%;"><b>--sparse</b>, <b>-S</b></p>

<p style="margin-left:22%;">Try to handle sparse files
efficiently so they take up less space on the destination.
If combined with <b>--inplace</b> the file created might not
end up with sparse blocks with some combinations of kernel
version and/or filesystem type. If <b>--whole-file</b> is in
effect (e.g. for a local copy) then it will always work
because rsync truncates the file prior to writing out the
updated version.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
versions of rsync older than 3.1.3 will reject the
combination of <b>--sparse</b> and <b>--inplace</b>.</p>

<p style="margin-left:11%;"><b>--preallocate</b></p>

<p style="margin-left:22%;">This tells the receiver to
allocate each destination file to its eventual size before
writing data to the file. Rsync will only use the real
filesystem-level preallocation support provided by
Linux&rsquo;s <a href="https://man.page/2/fallocate">fallocate(2)</a> system call or
Cygwin&rsquo;s <a href="https://man.page/3/posix_fallocate">posix_fallocate(3)</a>, not the slow glibc
implementation that writes a null byte into each block.</p>

<p style="margin-left:22%; margin-top: 1em">Without this
option, larger files may not be entirely contiguous on the
filesystem, but with this option rsync will probably copy
more slowly. If the destination is not an extent-supporting
filesystem (such as ext4, xfs, NTFS, etc.), this option may
have no positive effect at all.</p>

<p style="margin-left:22%; margin-top: 1em">If combined
with <b>--sparse</b>, the file will only have sparse blocks
(as opposed to allocated sequences of null bytes) if the
kernel version and filesystem type support creating holes in
the allocated data.</p>

<p style="margin-left:11%;"><b>--dry-run</b>, <b>-n</b></p>

<p style="margin-left:22%;">This makes rsync perform a
trial run that doesn&rsquo;t make any changes (and produces
mostly the same output as a real run). It is most commonly
used in combination with the <b>--verbose</b>, <b>-v</b>
and/or <b>--itemize-changes</b>, <b>-i</b> options to see
what an rsync command is going to do before one actually
runs it.</p>

<p style="margin-left:22%; margin-top: 1em">The output of
<b>--itemize-changes</b> is supposed to be exactly the same
on a dry run and a subsequent real run (barring intentional
trickery and system call failures); if it isn&rsquo;t,
that&rsquo;s a bug. Other output should be mostly unchanged,
but may differ in some areas. Notably, a dry run does not
send the actual data for file transfers, so
<b>--progress</b> has no effect, the &quot;bytes sent&quot;,
&quot;bytes received&quot;, &quot;literal data&quot;, and
&quot;matched data&quot; statistics are too small, and the
&quot;speedup&quot; value is equivalent to a run where no
file transfers were needed.</p>

<p style="margin-left:11%;"><b>--whole-file</b>,
<b>-W</b></p>

<p style="margin-left:22%;">This option disables
rsync&rsquo;s delta-transfer algorithm, which causes all
transferred files to be sent whole. The transfer may be
faster if this option is used when the bandwidth between the
source and destination machines is higher than the bandwidth
to disk (especially when the &quot;disk&quot; is actually a
networked filesystem). This is the default when both the
source and destination are specified as local paths, but
only if no batch-writing option is in effect.</p>

<p style="margin-left:11%;"><b>--checksum-choice=STR</b>,
<b>--cc=STR</b></p>

<p style="margin-left:22%;">This option overrides the
checksum algorithms. If one algorithm name is specified, it
is used for both the transfer checksums and (assuming
<b>--checksum</b> is specified) the pre-transfer checksums.
If two comma-separated names are supplied, the first name
affects the transfer checksums, and the second name affects
the pre-transfer checksums (<b>-c</b>).</p>

<p style="margin-left:22%; margin-top: 1em">The checksum
options that you may be able to use are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>auto</b> (the default automatic choice)</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>xxh128</b></p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>xxh3</b></p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>xxh64</b> (aka <b>xxhash</b>)</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>md5</b></p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>md4</b></p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="54%">


<p><b>none</b></p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Run
<b>rsync&nbsp;--version</b> to see the default checksum list
compiled into your version (which may differ from the list
above).</p>

<p style="margin-left:22%; margin-top: 1em">If
&quot;none&quot; is specified for the first (or only) name,
the <b>--whole-file</b> option is forced on and no checksum
verification is performed on the transferred data. If
&quot;none&quot; is specified for the second (or only) name,
the <b>--checksum</b> option cannot be used.</p>

<p style="margin-left:22%; margin-top: 1em">The
&quot;auto&quot; option is the default, where rsync bases
its algorithm choice on a negotiation between the client and
the server as follows:</p>

<p style="margin-left:22%; margin-top: 1em">When both sides
of the transfer are at least 3.2.0, rsync chooses the first
algorithm in the client&rsquo;s list of choices that is also
in the server&rsquo;s list of choices. If no common checksum
choice is found, rsync exits with an error. If the remote
rsync is too old to support checksum negotiation, a value is
chosen based on the protocol version (which chooses between
MD5 and various flavors of MD4 based on protocol age).</p>

<p style="margin-left:22%; margin-top: 1em">The default
order can be customized by setting the environment variable
RSYNC_CHECKSUM_LIST to a space-separated list of acceptable
checksum names. If the string contains a
&quot;<b>&amp;</b>&quot; character, it is separated into the
&quot;client string &amp; server string&quot;, otherwise the
same string applies to both. If the string (or string
portion) contains no non-whitespace characters, the default
checksum list is used. This method does not allow you to
specify the transfer checksum separately from the
pre-transfer checksum, and it discards &quot;auto&quot; and
all unknown checksum names. A list with only invalid names
results in a failed negotiation.</p>

<p style="margin-left:22%; margin-top: 1em">The use of the
<b>--checksum-choice</b> option overrides this environment
list.</p>

<p style="margin-left:11%;"><b>--one-file-system</b>,
<b>-x</b></p>

<p style="margin-left:22%;">This tells rsync to avoid
crossing a filesystem boundary when recursing. This does not
limit the user&rsquo;s ability to specify items to copy from
multiple filesystems, just rsync&rsquo;s recursion through
the hierarchy of each directory that the user specified, and
also the analogous recursion on the receiving side during
deletion. Also keep in mind that rsync treats a
&quot;bind&quot; mount to the same device as being on the
same filesystem.</p>

<p style="margin-left:22%; margin-top: 1em">If this option
is repeated, rsync omits all mount-point directories from
the copy. Otherwise, it includes an empty directory at each
mount-point it encounters (using the attributes of the
mounted directory because those of the underlying
mount-point directory are inaccessible).</p>

<p style="margin-left:22%; margin-top: 1em">If rsync has
been told to collapse symlinks (via <b>--copy-links</b> or
<b>--copy-unsafe-links</b>), a symlink to a directory on
another device is treated like a mount-point. Symlinks to
non-directories are unaffected by this option.</p>

<p style="margin-left:11%;"><b>--existing</b>,
<b>--ignore-non-existing</b></p>

<p style="margin-left:22%;">This tells rsync to skip
creating files (including directories) that do not exist yet
on the destination. If this option is combined with the
<b>--ignore-existing</b> option, no files will be updated
(which can be useful if all you want to do is delete
extraneous files).</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file-lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>

<p style="margin-left:11%;"><b>--ignore-existing</b></p>

<p style="margin-left:22%;">This tells rsync to skip
updating files that already exist on the destination (this
does <i>not</i> ignore existing directories, or nothing
would get done). See also <b>--existing</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file-lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be useful for those doing backups using the
<b>--link-dest</b> option when they need to continue a
backup run that got interrupted. Since a <b>--link-dest</b>
run is copied into a new directory hierarchy (when it is
used properly), using <b>--ignore-existing</b> will ensure
that the already-handled files don&rsquo;t get tweaked
(which avoids a change in permissions on the hard-linked
files). This does mean that this option is only looking at
the existing files in the destination hierarchy itself.</p>


<p style="margin-left:11%;"><b>--remove-source-files</b></p>

<p style="margin-left:22%;">This tells rsync to remove from
the sending side the files (meaning non-directories) that
are a part of the transfer and have been successfully
duplicated on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
should only use this option on source files that are
quiescent. If you are using this to move files that show up
in a particular directory over to another host, make sure
that the finished files get renamed into the source
directory, not directly written into it, so that rsync
can&rsquo;t possibly transfer a file that is not yet fully
written. If you can&rsquo;t first write the files into a
different directory, you should use a naming idiom that lets
rsync avoid transferring files that are not yet finished
(e.g. name the file &quot;foo.new&quot; when it is written,
rename it to &quot;foo&quot; when it is done, and then use
the option <b>--exclude=&rsquo;*.new&rsquo;</b> for the
rsync transfer).</p>

<p style="margin-left:22%; margin-top: 1em">Starting with
3.1.0, rsync will skip the sender-side removal (and output
an error) if the file&rsquo;s size or modify time has not
stayed unchanged.</p>

<p style="margin-left:11%;"><b>--delete</b></p>

<p style="margin-left:22%;">This tells rsync to delete
extraneous files from the receiving side (ones that
aren&rsquo;t on the sending side), but only for the
directories that are being synchronized. You must have asked
rsync to send the whole directory (e.g.
&quot;<b>dir</b>&quot; or &quot;<b>dir/</b>&quot;) without
using a wildcard for the directory&rsquo;s contents (e.g.
&quot;<b>dir/*</b>&quot;) since the wildcard is expanded by
the shell and rsync thus gets a request to transfer
individual files, not the files&rsquo; parent directory.
Files that are excluded from the transfer are also excluded
from being deleted unless you use the
<b>--delete-excluded</b> option or mark the rules as only
matching on the sending side (see the include/exclude
modifiers in the FILTER RULES section).</p>

<p style="margin-left:22%; margin-top: 1em">Prior to rsync
2.6.7, this option would have no effect unless
<b>--recursive</b> was enabled. Beginning with 2.6.7,
deletions will also occur when <b>--dirs</b> (<b>-d</b>) is
enabled, but only for directories whose contents are being
copied.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be dangerous if used incorrectly! It is a very good idea to
first try a run using the <b>--dry-run</b> option
(<b>-n</b>) to see what files are going to be deleted.</p>

<p style="margin-left:22%; margin-top: 1em">If the sending
side detects any I/O errors, then the deletion of any files
at the destination will be automatically disabled. This is
to prevent temporary filesystem failures (such as NFS
errors) on the sending side from causing a massive deletion
of files on the destination. You can override this with the
<b>--ignore-errors</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>--delete</b> option may be combined with one of the
--delete-WHEN options without conflict, as well as
<b>--delete-excluded</b>. However, if none of the
<b>--delete-WHEN</b> options are specified, rsync will
choose the <b>--delete-during</b> algorithm when talking to
rsync 3.0.0 or newer, and the <b>--delete-before</b>
algorithm when talking to an older rsync. See also
<b>--delete-delay</b> and <b>--delete-after</b>.</p>

<p style="margin-left:11%;"><b>--delete-before</b></p>

<p style="margin-left:22%;">Request that the file-deletions
on the receiving side be done before the transfer starts.
See <b>--delete</b> (which is implied) for more details on
file-deletion.</p>

<p style="margin-left:22%; margin-top: 1em">Deleting before
the transfer is helpful if the filesystem is tight for space
and removing extraneous files would help to make the
transfer possible. However, it does introduce a delay before
the start of the transfer, and this delay might cause the
transfer to timeout (if <b>--timeout</b> was specified). It
also forces rsync to use the old, non-incremental recursion
algorithm that requires rsync to scan all the files in the
transfer into memory at once (see <b>--recursive</b>).</p>

<p style="margin-left:11%;"><b>--delete-during</b>,
<b>--del</b></p>

<p style="margin-left:22%;">Request that the file-deletions
on the receiving side be done incrementally as the transfer
happens. The per-directory delete scan is done right before
each directory is checked for updates, so it behaves like a
more efficient <b>--delete-before</b>, including doing the
deletions prior to any per-directory filter files being
updated. This option was first added in rsync version 2.6.4.
See <b>--delete</b> (which is implied) for more details on
file-deletion.</p>

<p style="margin-left:11%;"><b>--delete-delay</b></p>

<p style="margin-left:22%;">Request that the file-deletions
on the receiving side be computed during the transfer (like
<b>--delete-during</b>), and then removed after the transfer
completes. This is useful when combined with
<b>--delay-updates</b> and/or <b>--fuzzy</b>, and is more
efficient than using <b>--delete-after</b> (but can behave
differently, since <b>--delete-after</b> computes the
deletions in a separate pass after all updates are done). If
the number of removed files overflows an internal buffer, a
temporary file will be created on the receiving side to hold
the names (it is removed while open, so you shouldn&rsquo;t
see it during the transfer). If the creation of the
temporary file fails, rsync will try to fall back to using
<b>--delete-after</b> (which it cannot do if
<b>--recursive</b> is doing an incremental scan). See
<b>--delete</b> (which is implied) for more details on
file-deletion.</p>

<p style="margin-left:11%;"><b>--delete-after</b></p>

<p style="margin-left:22%;">Request that the file-deletions
on the receiving side be done after the transfer has
completed. This is useful if you are sending new
per-directory merge files as a part of the transfer and you
want their exclusions to take effect for the delete phase of
the current transfer. It also forces rsync to use the old,
non-incremental recursion algorithm that requires rsync to
scan all the files in the transfer into memory at once (see
<b>--recursive</b>). See <b>--delete</b> (which is implied)
for more details on file-deletion.</p>

<p style="margin-left:11%;"><b>--delete-excluded</b></p>

<p style="margin-left:22%;">In addition to deleting the
files on the receiving side that are not on the sending
side, this tells rsync to also delete any files on the
receiving side that are excluded (see <b>--exclude</b>). See
the FILTER RULES section for a way to make individual
exclusions behave this way on the receiver, and for a way to
protect files from <b>--delete-excluded</b>. See
<b>--delete</b> (which is implied) for more details on
file-deletion.</p>


<p style="margin-left:11%;"><b>--ignore-missing-args</b></p>

<p style="margin-left:22%;">When rsync is first processing
the explicitly requested source files (e.g. command-line
arguments or <b>--files-from</b> entries), it is normally an
error if the file cannot be found. This option suppresses
that error, and does not try to transfer the file. This does
not affect subsequent vanished-file errors if a file was
initially found to be present and later is no longer
there.</p>


<p style="margin-left:11%;"><b>--delete-missing-args</b></p>

<p style="margin-left:22%;">This option takes the behavior
of (the implied) <b>--ignore-missing-args</b> option a step
farther: each missing arg will become a deletion request of
the corresponding destination file on the receiving side
(should it exist). If the destination file is a non-empty
directory, it will only be successfully deleted if
<b>--force</b> or <b>--delete</b> are in effect. Other than
that, this option is independent of any other type of delete
processing.</p>

<p style="margin-left:22%; margin-top: 1em">The missing
source files are represented by special file-list entries
which display as a &quot;<b>*missing</b>&quot; entry in the
<b>--list-only</b> output.</p>

<p style="margin-left:11%;"><b>--ignore-errors</b></p>

<p style="margin-left:22%;">Tells <b>--delete</b> to go
ahead and delete files even when there are I/O errors.</p>

<p style="margin-left:11%;"><b>--force</b></p>

<p style="margin-left:22%;">This option tells rsync to
delete a non-empty directory when it is to be replaced by a
non-directory. This is only relevant if deletions are not
active (see <b>--delete</b> for details).</p>

<p style="margin-left:22%; margin-top: 1em">Note for older
rsync versions: <b>--force</b> used to still be required
when using <b>--delete-after</b>, and it used to be
non-functional unless the <b>--recursive</b> option was also
enabled.</p>

<p style="margin-left:11%;"><b>--max-delete=NUM</b></p>

<p style="margin-left:22%;">This tells rsync not to delete
more than NUM files or directories. If that limit is
exceeded, all further deletions are skipped through the end
of the transfer. At the end, rsync outputs a warning
(including a count of the skipped deletions) and exits with
an error code of 25 (unless some more important error
condition also occurred).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
version 3.0.0, you may specify <b>--max-delete=0</b> to be
warned about any extraneous files in the destination without
removing any of them. Older clients interpreted this as
&quot;unlimited&quot;, so if you don&rsquo;t know what
version the client is, you can use the less obvious
<b>--max-delete=-1</b> as a backward-compatible way to
specify that no deletions be allowed (though really old
versions didn&rsquo;t warn when the limit was exceeded).</p>

<p style="margin-left:11%;"><b>--max-size=SIZE</b></p>

<p style="margin-left:22%;">This tells rsync to avoid
transferring any file that is larger than the specified
SIZE. A numeric value can be suffixed with a string to
indicate the numeric units or left unqualified to specify
bytes. Feel free to use a fractional value along with the
units, such as <b>--max-size=1.5m</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file-lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>

<p style="margin-left:22%; margin-top: 1em">The first
letter of a units string can be <b>B</b> (bytes), <b>K</b>
(kilo), <b>M</b> (mega), <b>G</b> (giga), <b>T</b> (tera),
or <b>P</b> (peta). If the string is a single char or has
&quot;ib&quot; added to it (e.g. &quot;G&quot; or
&quot;GiB&quot;) then the units are multiples of 1024. If
you use a two-letter suffix that ends with a &quot;B&quot;
(e.g. &quot;kb&quot;) then you get units that are multiples
of 1000. The string&rsquo;s letters can be any mix of upper
and lower-case that you want to use.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, if the
string ends with either &quot;+1&quot; or &quot;-1&quot;, it
is offset by one byte in the indicated direction. The
largest possible value is usually <b>8192P-1</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:
<b>--max-size=1.5mb-1</b> is 1499999 bytes, and
<b>--max-size=2g+1</b> is 2147483649 bytes.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
versions prior to 3.1.0 did not allow
<b>--max-size=0</b>.</p>

<p style="margin-left:11%;"><b>--min-size=SIZE</b></p>

<p style="margin-left:22%;">This tells rsync to avoid
transferring any file that is smaller than the specified
SIZE, which can help in not transferring small, junk files.
See the <b>--max-size</b> option for a description of SIZE
and other information.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
versions prior to 3.1.0 did not allow
<b>--min-size=0</b>.</p>

<p style="margin-left:11%;"><b>--max-alloc=SIZE</b></p>

<p style="margin-left:22%;">By default rsync limits an
individual malloc/realloc to about 1GB in size. For most
people this limit works just fine and prevents a protocol
error causing rsync to request massive amounts of memory.
However, if you have many millions of files in a transfer, a
large amount of server memory, and you don&rsquo;t want to
split up your transfer into multiple parts, you can increase
the per-allocation limit to something larger and rsync will
consume more memory.</p>

<p style="margin-left:22%; margin-top: 1em">Keep in mind
that this is not a limit on the total size of allocated
memory. It is a sanity-check value for each individual
allocation.</p>

<p style="margin-left:22%; margin-top: 1em">See the
<b>--max-size</b> option for a description of how SIZE can
be specified. The default suffix if none is given is
bytes.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
3.2.3, a value of 0 specifies no limit.</p>

<p style="margin-left:22%; margin-top: 1em">You can set a
default value using the environment variable RSYNC_MAX_ALLOC
using the same SIZE values as supported by this option. If
the remote rsync doesn&rsquo;t understand the
<b>--max-alloc</b> option, you can override an environmental
value by specifying <b>--max-alloc=1g</b>, which will make
rsync avoid sending the option to the remote side (because
&quot;1G&quot; is the default).</p>

<p style="margin-left:11%;"><b>--block-size=SIZE</b>,
<b>-B</b></p>

<p style="margin-left:22%;">This forces the block size used
in rsync&rsquo;s delta-transfer algorithm to a fixed value.
It is normally selected based on the size of each file being
updated. See the technical report for details.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
3.2.3 the SIZE can be specified with a suffix as detailed in
the <b>--max-size</b> option. Older versions only accepted a
byte count.</p>

<p style="margin-left:11%;"><b>--rsh=COMMAND</b>,
<b>-e</b></p>

<p style="margin-left:22%;">This option allows you to
choose an alternative remote shell program to use for
communication between the local and remote copies of rsync.
Typically, rsync is configured to use ssh by default, but
you may prefer to use rsh on a local network.</p>

<p style="margin-left:22%; margin-top: 1em">If this option
is used with <b>[user@]host::module/path</b>, then the
remote shell <i>COMMAND</i> will be used to run an rsync
daemon on the remote host, and all data will be transmitted
through that remote shell connection, rather than through a
direct socket connection to a running rsync daemon on the
remote host. See the section &quot;USING RSYNC-DAEMON
FEATURES VIA A REMOTE-SHELL CONNECTION&quot; above.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
rsync 3.2.0, the RSYNC_PORT environment variable will be set
when a daemon connection is being made via a remote-shell
connection. It is set to 0 if the default daemon port is
being assumed, or it is set to the value of the rsync port
that was specified via either the <b>--port</b> option or a
non-empty port value in an rsync:// URL. This allows the
script to discern if a non-default port is being requested,
allowing for things such as an SSL or stunnel helper script
to connect to a default or alternate port.</p>

<p style="margin-left:22%; margin-top: 1em">Command-line
arguments are permitted in COMMAND provided that COMMAND is
presented to rsync as a single argument. You must use spaces
(not tabs or other whitespace) to separate the command and
args from each other, and you can use single- and/or
double-quotes to preserve spaces in an argument (but not
backslashes). Note that doubling a single-quote inside a
single-quoted string gives you a single-quote; likewise for
double-quotes (though you need to pay attention to which
quotes your shell is parsing and which quotes rsync is
parsing). Some examples:</p>

<p style="margin-left:28%; margin-top: 1em">-e &rsquo;ssh
-p 2234&rsquo; <br>
-e &rsquo;ssh -o &quot;ProxyCommand nohup ssh firewall nc
-w1 %h %p&quot;&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">(Note that ssh
users can alternately customize site-specific connect
options in their .ssh/config file.)</p>

<p style="margin-left:22%; margin-top: 1em">You can also
choose the remote shell program using the RSYNC_RSH
environment variable, which accepts the same range of values
as <b>-e</b>.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
<b>--blocking-io</b> option which is affected by this
option.</p>


<p style="margin-left:11%;"><b>--rsync-path=PROGRAM</b></p>

<p style="margin-left:22%;">Use this to specify what
program is to be run on the remote machine to start-up
rsync. Often used when rsync is not in the default
remote-shell&rsquo;s path (e.g.
<b>--rsync-path=/usr/local/bin/rsync</b>). Note that PROGRAM
is run with the help of a shell, so it can be any program,
script, or command sequence you&rsquo;d care to run, so long
as it does not corrupt the standard-in &amp; standard-out
that rsync is using to communicate.</p>

<p style="margin-left:22%; margin-top: 1em">One tricky
example is to set a different default directory on the
remote machine for use with the <b>--relative</b> option.
For instance:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avR
--rsync-path=&quot;cd /a/b &amp;&amp; rsync&quot; host:c/d
/e/</p>

<p style="margin-left:11%;"><b>--remote-option=OPTION</b>,
<b>-M</b></p>

<p style="margin-left:22%;">This option is used for more
advanced situations where you want certain effects to be
limited to one side of the transfer only. For instance, if
you want to pass <b>--log-file=FILE</b> and
<b>--fake-super</b> to the remote system, specify it like
this:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av -M
--log-file=foo -M--fake-super src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">If you want to
have an option affect only the local side of a transfer when
it normally affects both sides, send its negation to the
remote side. Like this:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av -x
-M--no-x src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">Be cautious
using this, as it is possible to toggle an option that will
cause rsync to have a different idea about what data to
expect next over the socket, and that will make it fail in a
cryptic fashion.</p>

<p style="margin-left:22%; margin-top: 1em">Note that it is
best to use a separate <b>--remote-option</b> for each
option you want to pass. This makes your usage compatible
with the <b>--protect-args</b> option. If that option is
off, any spaces in your remote options will be split by the
remote shell unless you take steps to protect them.</p>

<p style="margin-left:22%; margin-top: 1em">When performing
a local transfer, the &quot;local&quot; side is the sender
and the &quot;remote&quot; side is the receiver.</p>

<p style="margin-left:22%; margin-top: 1em">Note some
versions of the popt option-parsing library have a bug in
them that prevents you from using an adjacent arg with an
equal in it next to a short option letter (e.g.
<b>-M--log-file=/tmp/foo</b>). If this bug affects your
version of popt, you can use the version of popt that is
included with rsync.</p>

<p style="margin-left:11%;"><b>--cvs-exclude</b>,
<b>-C</b></p>

<p style="margin-left:22%;">This is a useful shorthand for
excluding a broad range of files that you often don&rsquo;t
want to transfer between systems. It uses a similar
algorithm to CVS to determine if a file should be
ignored.</p>

<p style="margin-left:22%; margin-top: 1em">The exclude
list is initialized to exclude the following items (these
initial items are marked as perishable&nbsp;-- see the
FILTER RULES section):</p>

<p style="margin-left:28%; margin-top: 1em"><b>RCS SCCS CVS
CVS.adm RCSLOG cvslog.* tags TAGS .make.state .nse_depinfo
*~ #* .#* ,* _$* *$ *.old *.bak *.BAK *.orig *.rej .del-*
*.a *.olb *.o *.obj *.so *.exe *.Z *.elc *.ln core .svn/
.git/ .hg/ .bzr/</b></p>

<p style="margin-left:22%; margin-top: 1em">then, files
listed in a $HOME/.cvsignore are added to the list and any
files listed in the CVSIGNORE environment variable (all
cvsignore names are delimited by whitespace).</p>

<p style="margin-left:22%; margin-top: 1em">Finally, any
file is ignored if it is in the same directory as a
.cvsignore file and matches one of the patterns listed
therein. Unlike rsync&rsquo;s filter/exclude files, these
patterns are split on whitespace. See the <a href="https://man.page/1/cvs">cvs(1)</a>
manual for more information.</p>

<p style="margin-left:22%; margin-top: 1em">If you&rsquo;re
combining <b>-C</b> with your own <b>--filter</b> rules, you
should note that these CVS excludes are appended at the end
of your own rules, regardless of where the <b>-C</b> was
placed on the command-line. This makes them a lower priority
than any rules you specified explicitly. If you want to
control where these CVS excludes get inserted into your
filter rules, you should omit the <b>-C</b> as a
command-line option and use a combination of
<b>--filter=:C</b> and <b>--filter=-C</b> (either on your
command-line or by putting the &quot;:C&quot; and
&quot;-C&quot; rules into a filter file with your other
rules). The first option turns on the per-directory scanning
for the .cvsignore file. The second option does a one-time
import of the CVS excludes mentioned above.</p>

<p style="margin-left:11%;"><b>--filter=RULE</b>,
<b>-f</b></p>

<p style="margin-left:22%;">This option allows you to add
rules to selectively exclude certain files from the list of
files to be transferred. This is most useful in combination
with a recursive transfer.</p>

<p style="margin-left:22%; margin-top: 1em">You may use as
many <b>--filter</b> options on the command line as you like
to build up the list of files to exclude. If the filter
contains whitespace, be sure to quote it so that the shell
gives the rule to rsync as a single argument. The text below
also mentions that you can use an underscore to replace the
space that separates a rule from its arg.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-F</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>-F</b> option is a shorthand for adding two
<b>--filter</b> rules to your command. The first time it is
used is a shorthand for this rule:</p></td></tr>
</table>


<p style="margin-left:28%; margin-top: 1em">--filter=&rsquo;dir-merge
/.rsync-filter&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">This tells
rsync to look for per-directory .rsync-filter files that
have been sprinkled through the hierarchy and use their
rules to filter the files in the transfer. If <b>-F</b> is
repeated, it is a shorthand for this rule:</p>


<p style="margin-left:28%; margin-top: 1em">--filter=&rsquo;exclude
.rsync-filter&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">This filters
out the .rsync-filter files themselves from the
transfer.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on how these options
work.</p>

<p style="margin-left:11%;"><b>--exclude=PATTERN</b></p>

<p style="margin-left:22%;">This option is a simplified
form of the <b>--filter</b> option that defaults to an
exclude rule and does not allow the full rule-parsing syntax
of normal filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>

<p style="margin-left:11%;"><b>--exclude-from=FILE</b></p>

<p style="margin-left:22%;">This option is related to the
<b>--exclude</b> option, but it specifies a FILE that
contains exclude patterns (one per line). Blank lines in the
file are ignored, as are whole-line comments that start with
&rsquo;<b>;</b>&rsquo; or &rsquo;<b>#</b>&rsquo; (filename
rules that contain those characters are unaffected).</p>

<p style="margin-left:22%; margin-top: 1em">If <i>FILE</i>
is &rsquo;<b>-</b>&rsquo;, the list will be read from
standard input.</p>

<p style="margin-left:11%;"><b>--include=PATTERN</b></p>

<p style="margin-left:22%;">This option is a simplified
form of the <b>--filter</b> option that defaults to an
include rule and does not allow the full rule-parsing syntax
of normal filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>

<p style="margin-left:11%;"><b>--include-from=FILE</b></p>

<p style="margin-left:22%;">This option is related to the
<b>--include</b> option, but it specifies a FILE that
contains include patterns (one per line). Blank lines in the
file are ignored, as are whole-line comments that start with
&rsquo;<b>;</b>&rsquo; or &rsquo;<b>#</b>&rsquo; (filename
rules that contain those characters are unaffected).</p>

<p style="margin-left:22%; margin-top: 1em">If <i>FILE</i>
is &rsquo;<b>-</b>&rsquo;, the list will be read from
standard input.</p>

<p style="margin-left:11%;"><b>--files-from=FILE</b></p>

<p style="margin-left:22%;">Using this option allows you to
specify the exact list of files to transfer (as read from
the specified FILE or &rsquo;<b>-</b>&rsquo; for standard
input). It also tweaks the default behavior of rsync to make
transferring just the specified files and directories
easier:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>--relative</b> (<b>-R</b>) option is implied,
which preserves the path information that is specified for
each item in the file (use <b>--no-relative</b> or
<b>--no-R</b> if you want to turn that off).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>--dirs</b> (<b>-d</b>) option is implied, which
will create directories specified in the list on the
destination rather than noisily skipping them (use
<b>--no-dirs</b> or <b>--no-d</b> if you want to turn that
off).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>--archive</b> (<b>-a</b>) option&rsquo;s behavior
does not imply <b>--recursive</b> (<b>-r</b>), so specify it
explicitly, if you want it.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>These side-effects change the default state of rsync, so
the position of the <b>--files-from</b> option on the
command-line has no bearing on how other options are parsed
(e.g. <b>-a</b> works the same before or after
<b>--files-from</b>, as does <b>--no-R</b> and all other
options).</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The filenames
that are read from the FILE are all relative to the source
dir&nbsp;-- any leading slashes are removed and no
&quot;..&quot; references are allowed to go higher than the
source dir. For example, take this command:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -a
--files-from=/tmp/foo /usr remote:/backup</p>

<p style="margin-left:22%; margin-top: 1em">If /tmp/foo
contains the string &quot;bin&quot; (or even
&quot;/bin&quot;), the /usr/bin directory will be created as
/backup/bin on the remote host. If it contains
&quot;bin/&quot; (note the trailing slash), the immediate
contents of the directory would also be sent (without
needing to be explicitly mentioned in the file&nbsp;-- this
began in version 2.6.4). In both cases, if the <b>-r</b>
option was enabled, that dir&rsquo;s entire hierarchy would
also be transferred (keep in mind that <b>-r</b> needs to be
specified explicitly with <b>--files-from</b>, since it is
not implied by <b>-a</b>). Also note that the effect of the
(enabled by default) <b>--relative</b> option is to
duplicate only the path info that is read from the
file&nbsp;-- it does not force the duplication of the
source-spec path (/usr in this case).</p>

<p style="margin-left:22%; margin-top: 1em">In addition,
the <b>--files-from</b> file can be read from the remote
host instead of the local host if you specify a
&quot;host:&quot; in front of the file (the host must match
one end of the transfer). As a short-cut, you can specify
just a prefix of &quot;:&quot; to mean &quot;use the remote
end of the transfer&quot;. For example:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -a
--files-from=:/path/file-list src:/ /tmp/copy</p>

<p style="margin-left:22%; margin-top: 1em">This would copy
all the files specified in the /path/file-list file that was
located on the remote &quot;src&quot; host.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>--iconv</b> and <b>--protect-args</b> options are
specified and the <b>--files-from</b> filenames are being
sent from one host to another, the filenames will be
translated from the sending host&rsquo;s charset to the
receiving host&rsquo;s charset.</p>

<p style="margin-left:22%; margin-top: 1em">NOTE: sorting
the list of files in the <b>--files-from</b> input helps
rsync to be more efficient, as it will avoid re-visiting the
path elements that are shared between adjacent entries. If
the input is not sorted, some path elements (implied
directories) may end up being scanned multiple times, and
rsync will eventually unduplicate them after they get turned
into file-list elements.</p>

<p style="margin-left:11%;"><b>--from0</b>, <b>-0</b></p>

<p style="margin-left:22%;">This tells rsync that the
rules/filenames it reads from a file are terminated by a
null (&rsquo;\0&rsquo;) character, not a NL, CR, or CR+LF.
This affects <b>--exclude-from</b>, <b>--include-from</b>,
<b>--files-from</b>, and any merged files specified in a
<b>--filter</b> rule. It does not affect
<b>--cvs-exclude</b> (since all names read from a .cvsignore
file are split on whitespace).</p>

<p style="margin-left:11%;"><b>--protect-args</b>,
<b>-s</b></p>

<p style="margin-left:22%;">This option sends all filenames
and most options to the remote rsync without allowing the
remote shell to interpret them. This means that spaces are
not split in names, and any non-wildcard special characters
are not translated (such as <b>~</b>, <b>$</b>, <b>;</b>,
<b>&amp;</b>, etc.). Wildcards are expanded on the remote
host by rsync (instead of the shell doing it).</p>

<p style="margin-left:22%; margin-top: 1em">If you use this
option with <b>--iconv</b>, the args related to the remote
side will also be translated from the local to the remote
character-set. The translation happens before wild-cards are
expanded. See also the <b>--files-from</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">You may also
control this option via the RSYNC_PROTECT_ARGS environment
variable. If this variable has a non-zero value, this option
will be enabled by default, otherwise it will be disabled by
default. Either state is overridden by a manually specified
positive or negative version of this option (note that
<b>--no-s</b> and <b>--no-protect-args</b> are the negative
versions). Since this option was first introduced in 3.0.0,
you&rsquo;ll need to make sure it&rsquo;s disabled if you
ever need to interact with a remote rsync that is older than
that.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync can also
be configured (at build time) to have this option enabled by
default (with is overridden by both the environment and the
command-line). Run <b>rsync&nbsp;--version</b> to check if
this is the case, as it will display &quot;default
protect-args&quot; or &quot;optional protect-args&quot;
depending on how it was compiled.</p>

<p style="margin-left:22%; margin-top: 1em">This option
will eventually become a new default setting at some
as-yet-undetermined point in the future.</p>


<p style="margin-left:11%;"><b>--copy-as=USER[:GROUP]</b></p>

<p style="margin-left:22%;">This option instructs rsync to
use the USER and (if specified after a colon) the GROUP for
the copy operations. This only works if the user that is
running rsync has the ability to change users. If the group
is not specified then the user&rsquo;s default groups are
used.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
help to reduce the risk of an rsync being run as root into
or out of a directory that might have live changes happening
to it and you want to make sure that root-level read or
write actions of system files are not possible. While you
could alternatively run all of rsync as the specified user,
sometimes you need the root-level host-access credentials to
be used, so this allows rsync to drop root for the copying
part of the operation after the remote-shell or daemon
connection is established.</p>

<p style="margin-left:22%; margin-top: 1em">The option only
affects one side of the transfer unless the transfer is
local, in which case it affects both sides. Use the
<b>--remote-option</b> to affect the remote side, such as
<b>-M--copy-as=joe</b>. For a local transfer, the lsh (or
lsh.sh) support file provides a local-shell helper script
that can be used to allow a &quot;localhost:&quot; or
&quot;lh:&quot; host-spec to be specified without needing to
setup any remote shells, allowing you to specify remote
options that affect the side of the transfer that is using
the host-spec (and using hostname &quot;lh&quot; avoids the
overriding of the remote directory to the user&rsquo;s home
dir).</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the following rsync writes the local files as user
&quot;joe&quot;:</p>

<p style="margin-left:28%; margin-top: 1em">sudo rsync -aiv
--copy-as=joe host1:backups/joe/ /home/joe/</p>

<p style="margin-left:22%; margin-top: 1em">This makes all
files owned by user &quot;joe&quot;, limits the groups to
those that are available to that user, and makes it
impossible for the joe user to do a timed exploit of the
path to induce a change to a file that the joe user has no
permissions to change.</p>

<p style="margin-left:22%; margin-top: 1em">The following
command does a local copy into the &quot;dest/&quot; dir as
user &quot;joe&quot; (assuming you&rsquo;ve installed
support/lsh into a dir on your $PATH):</p>

<p style="margin-left:28%; margin-top: 1em">sudo rsync
-aive lsh -M--copy-as=joe src/ lh:dest/</p>

<p style="margin-left:11%;"><b>--temp-dir=DIR</b>,
<b>-T</b></p>

<p style="margin-left:22%;">This option instructs rsync to
use DIR as a scratch directory when creating temporary
copies of the files transferred on the receiving side. The
default behavior is to create each temporary file in the
same directory as the associated destination file. Beginning
with rsync 3.1.1, the temp-file names inside the specified
DIR will not be prefixed with an extra dot (though they will
still have a random suffix added).</p>

<p style="margin-left:22%; margin-top: 1em">This option is
most often used when the receiving disk partition does not
have enough free space to hold a copy of the largest file in
the transfer. In this case (i.e. when the scratch directory
is on a different disk partition), rsync will not be able to
rename each received temporary file over the top of the
associated destination file, but instead must copy it into
place. Rsync does this by copying the file over the top of
the destination file, which means that the destination file
will contain truncated data during this copy. If this were
not done this way (even if the destination file were first
removed, the data locally copied to a temporary file in the
destination directory, and then renamed into place) it would
be possible for the old file to continue taking up disk
space (if someone had it open), and thus there might not be
enough room to fit the new version on the disk at the same
time.</p>

<p style="margin-left:22%; margin-top: 1em">If you are
using this option for reasons other than a shortage of disk
space, you may wish to combine it with the
<b>--delay-updates</b> option, which will ensure that all
copied files get put into subdirectories in the destination
hierarchy, awaiting the end of the transfer. If you
don&rsquo;t have enough room to duplicate all the arriving
files on the destination partition, another way to tell
rsync that you aren&rsquo;t overly concerned about disk
space is to use the <b>--partial-dir</b> option with a
relative path; because this tells rsync that it is OK to
stash off a copy of a single file in a subdir in the
destination hierarchy, rsync will use the partial-dir as a
staging area to bring over the copied file, and then rename
it into place from there. (Specifying a <b>--partial-dir</b>
with an absolute path does not have this side-effect.)</p>

<p style="margin-left:11%;"><b>--fuzzy</b>, <b>-y</b></p>

<p style="margin-left:22%;">This option tells rsync that it
should look for a basis file for any destination file that
is missing. The current algorithm looks in the same
directory as the destination file for either a file that has
an identical size and modified-time, or a similarly-named
file. If found, rsync uses the fuzzy basis file to try to
speed up the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
is repeated, the fuzzy scan will also be done in any
matching alternate destination directories that are
specified via <b>--compare-dest</b>, <b>--copy-dest</b>, or
<b>--link-dest</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
use of the <b>--delete</b> option might get rid of any
potential fuzzy-match files, so either use
<b>--delete-after</b> or specify some filename exclusions if
you need to prevent this.</p>

<p style="margin-left:11%;"><b>--compare-dest=DIR</b></p>

<p style="margin-left:22%;">This option instructs rsync to
use <i>DIR</i> on the destination machine as an additional
hierarchy to compare destination files against doing
transfers (if the files are missing in the destination
directory). If a file is found in <i>DIR</i> that is
identical to the sender&rsquo;s file, the file will NOT be
transferred to the destination directory. This is useful for
creating a sparse backup of just files that have changed
from an earlier backup. This option is typically used to
copy into an empty (or newly created) directory.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
version 2.6.4, multiple <b>--compare-dest</b> directories
may be provided, which will cause rsync to search the list
in the order specified for an exact match. If a match is
found that differs only in attributes, a local copy is made
and the attributes updated. If a match is not found, a basis
file from one of the <i>DIRs</i> will be selected to try to
speed up the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>--copy-dest</b> and
<b>--link-dest</b>.</p>

<p style="margin-left:22%; margin-top: 1em">NOTE: beginning
with version 3.1.0, rsync will remove a file from a
non-empty destination hierarchy if an exact match is found
in one of the compare-dest hierarchies (making the end
result more closely match a fresh copy).</p>

<p style="margin-left:11%;"><b>--copy-dest=DIR</b></p>

<p style="margin-left:22%;">This option behaves like
<b>--compare-dest</b>, but rsync will also copy unchanged
files found in <i>DIR</i> to the destination directory using
a local copy. This is useful for doing transfers to a new
destination while leaving existing files intact, and then
doing a flash-cutover when all files have been successfully
transferred.</p>

<p style="margin-left:22%; margin-top: 1em">Multiple
<b>--copy-dest</b> directories may be provided, which will
cause rsync to search the list in the order specified for an
unchanged file. If a match is not found, a basis file from
one of the <i>DIRs</i> will be selected to try to speed up
the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>--compare-dest</b> and
<b>--link-dest</b>.</p>

<p style="margin-left:11%;"><b>--link-dest=DIR</b></p>

<p style="margin-left:22%;">This option behaves like
<b>--copy-dest</b>, but unchanged files are hard linked from
<i>DIR</i> to the destination directory. The files must be
identical in all preserved attributes (e.g. permissions,
possibly ownership) in order for the files to be linked
together. An example:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av
--link-dest=$PWD/prior_dir host:src_dir/ new_dir/</p>

<p style="margin-left:22%; margin-top: 1em">If file&rsquo;s
aren&rsquo;t linking, double-check their attributes. Also
check if some attributes are getting forced outside of
rsync&rsquo;s control, such a mount option that squishes
root to a single user, or mounts a removable drive with
generic ownership (such as OS X&rsquo;s &quot;Ignore
ownership on this volume&quot; option).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
version 2.6.4, multiple <b>--link-dest</b> directories may
be provided, which will cause rsync to search the list in
the order specified for an exact match (there is a limit of
20 such directories). If a match is found that differs only
in attributes, a local copy is made and the attributes
updated. If a match is not found, a basis file from one of
the <i>DIRs</i> will be selected to try to speed up the
transfer.</p>

<p style="margin-left:22%; margin-top: 1em">This option
works best when copying into an empty destination hierarchy,
as existing files may get their attributes tweaked, and that
can affect alternate destination files via hard-links. Also,
itemizing of changes can get a bit muddled. Note that prior
to version 3.1.0, an alternate-directory exact match would
never be found (nor linked into the destination) when a
destination file already exists.</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you combine this option with <b>--ignore-times</b>, rsync
will not link any files together because it only links
identical files together as a substitute for transferring
the file, never as an additional check after the file is
updated.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>--compare-dest</b> and
<b>--copy-dest</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
versions prior to 2.6.1 had a bug that could prevent
<b>--link-dest</b> from working properly for a
non-super-user when <b>-o</b> was specified (or implied by
<b>-a</b>). You can work-around this bug by avoiding the
<b>-o</b> option when sending to an old rsync.</p>

<p style="margin-left:11%;"><b>--compress</b>,
<b>-z</b></p>

<p style="margin-left:22%;">With this option, rsync
compresses the file data as it is sent to the destination
machine, which reduces the amount of data being
transmitted&nbsp;-- something that is useful over a slow
connection.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync supports
multiple compression methods and will choose one for you
unless you force the choice using the
<b>--compress-choice</b> (<b>--zc</b>) option.</p>

<p style="margin-left:22%; margin-top: 1em">Run
<b>rsync&nbsp;--version</b> to see the default compress list
compiled into your version.</p>

<p style="margin-left:22%; margin-top: 1em">When both sides
of the transfer are at least 3.2.0, rsync chooses the first
algorithm in the client&rsquo;s list of choices that is also
in the server&rsquo;s list of choices. If no common compress
choice is found, rsync exits with an error. If the remote
rsync is too old to support checksum negotiation, its list
is assumed to be &quot;zlib&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">The default
order can be customized by setting the environment variable
RSYNC_COMPRESS_LIST to a space-separated list of acceptable
compression names. If the string contains a
&quot;<b>&amp;</b>&quot; character, it is separated into the
&quot;client string &amp; server string&quot;, otherwise the
same string applies to both. If the string (or string
portion) contains no non-whitespace characters, the default
compress list is used. Any unknown compression names are
discarded from the list, but a list with only invalid names
results in a failed negotiation.</p>

<p style="margin-left:22%; margin-top: 1em">There are some
older rsync versions that were configured to reject a
<b>-z</b> option and require the use of <b>-zz</b> because
their compression library was not compatible with the
default zlib compression method. You can usually ignore this
weirdness unless the rsync server complains and tells you to
specify <b>-zz</b>.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
<b>--skip-compress</b> option for the default list of file
suffixes that will be transferred with no (or minimal)
compression.</p>

<p style="margin-left:11%;"><b>--compress-choice=STR</b>,
<b>--zc=STR</b></p>

<p style="margin-left:22%;">This option can be used to
override the automatic negotiation of the compression
algorithm that occurs when <b>--compress</b> is used. The
option implies <b>--compress</b> unless &quot;none&quot; was
specified, which instead implies <b>--no-compress</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The compression
options that you may be able to use are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="8%">


<p><b>zstd</b></p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="8%">


<p><b>lz4</b></p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="8%">


<p><b>zlibx</b></p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="8%">


<p><b>zlib</b></p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="8%">


<p><b>none</b></p></td>
<td width="60%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Run
<b>rsync&nbsp;--version</b> to see the default compress list
compiled into your version (which may differ from the list
above).</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you see an error about an option named <b>--old-compress</b>
or <b>--new-compress</b>, this is rsync trying to send the
<b>--compress-choice=zlib</b> or
<b>--compress-choice=zlibx</b> option in a
backward-compatible manner that more rsync versions
understand. This error indicates that the older rsync
version on the server will not allow you to force the
compression type.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
&quot;zlibx&quot; compression algorithm is just the
&quot;zlib&quot; algorithm with matched data excluded from
the compression stream (to try to make it more compatible
with an external zlib implementation).</p>

<p style="margin-left:11%;"><b>--compress-level=NUM</b>,
<b>--zl=NUM</b></p>

<p style="margin-left:22%;">Explicitly set the compression
level to use (see <b>--compress</b>, <b>-z</b>) instead of
letting it default. The <b>--compress</b> option is implied
as long as the level chosen is not a &quot;don&rsquo;t
compress&quot; level for the compression algorithm that is
in effect (e.g. zlib compression treats level 0 as
&quot;off&quot;).</p>

<p style="margin-left:22%; margin-top: 1em">The level
values vary depending on the checksum in effect. Because
rsync will negotiate a checksum choice by default (when the
remote rsync is new enough), it can be good to combine this
option with a <b>--compress-choice</b> (<b>--zc</b>) option
unless you&rsquo;re sure of the choice in effect. For
example:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -aiv
--zc=zstd --zl=22 host:src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">For zlib &amp;
zlibx compression the valid values are from 1 to 9 with 6
being the default. Specifying 0 turns compression off, and
specifying -1 chooses the default of 6.</p>

<p style="margin-left:22%; margin-top: 1em">For zstd
compression the valid values are from -131072 to 22 with 3
being the default. Specifying 0 chooses the default of
3.</p>

<p style="margin-left:22%; margin-top: 1em">For lz4
compression there are no levels, so the value is always
0.</p>

<p style="margin-left:22%; margin-top: 1em">If you specify
a too-large or too-small value, the number is silently
limited to a valid value. This allows you to specify
something like <b>--zl=999999999</b> and be assured that
you&rsquo;ll end up with the maximum compression level no
matter what algorithm was chosen.</p>

<p style="margin-left:22%; margin-top: 1em">If you want to
know the compression level that is in effect, specify
<b>--debug=nstr</b> to see the &quot;negotiated string&quot;
results. This will report something like
&quot;<b>Client&nbsp;compress:&nbsp;zstd&nbsp;(level&nbsp;3)</b>&quot;
(along with the checksum choice in effect).</p>


<p style="margin-left:11%;"><b>--skip-compress=LIST</b></p>

<p style="margin-left:22%;">Override the list of file
suffixes that will be compressed as little as possible.
Rsync sets the compression level on a per-file basis based
on the file&rsquo;s suffix. If the compression algorithm has
an &quot;off&quot; level (such as zlib/zlibx) then no
compression occurs for those files. Other algorithms that
support changing the streaming level on-the-fly will have
the level minimized to reduces the CPU usage as much as
possible for a matching file. At this time, only zlib &amp;
zlibx compression support this changing of levels on a
per-file basis.</p>

<p style="margin-left:22%; margin-top: 1em">The <b>LIST</b>
should be one or more file suffixes (without the dot)
separated by slashes (<b>/</b>). You may specify an empty
string to indicate that no files should be skipped.</p>

<p style="margin-left:22%; margin-top: 1em">Simple
character-class matching is supported: each must consist of
a list of letters inside the square brackets (e.g. no
special classes, such as &quot;[:alpha:]&quot;, are
supported, and &rsquo;-&rsquo; has no special meaning).</p>

<p style="margin-left:22%; margin-top: 1em">The characters
asterisk (<b>*</b>) and question-mark (<b>?</b>) have no
special meaning.</p>

<p style="margin-left:22%; margin-top: 1em">Here&rsquo;s an
example that specifies 6 suffixes to skip (since 1 of the 5
rules matches 2 suffixes):</p>


<p style="margin-left:28%; margin-top: 1em">--skip-compress=gz/jpg/mp[34]/7z/bz2</p>

<p style="margin-left:22%; margin-top: 1em">The default
file suffixes in the skip-compress list in this version of
rsync are:</p>

<p style="margin-left:28%; margin-top: 1em">3g2 3gp 7z aac
ace apk avi bz2 deb dmg ear f4v flac flv gpg gz iso jar jpeg
jpg lrz lz lz4 lzma lzo m1a m1v m2a m2ts m2v m4a m4b m4p m4r
m4v mka mkv mov mp1 mp2 mp3 mp4 mpa mpeg mpg mpv mts odb odf
odg odi odm odp ods odt oga ogg ogm ogv ogx opus otg oth otp
ots ott oxt png qt rar rpm rz rzip spx squashfs sxc sxd sxg
sxm sxw sz tbz tbz2 tgz tlz ts txz tzo vob war webm webp xz
z zip zst</p>

<p style="margin-left:22%; margin-top: 1em">This list will
be replaced by your <b>--skip-compress</b> list in all but
one situation: a copy from a daemon rsync will add your
skipped suffixes to its list of non-compressing files (and
its list may be configured to a different default).</p>

<p style="margin-left:11%;"><b>--numeric-ids</b></p>

<p style="margin-left:22%;">With this option rsync will
transfer numeric group and user IDs rather than using user
and group names and mapping them at both ends.</p>

<p style="margin-left:22%; margin-top: 1em">By default
rsync will use the username and groupname to determine what
ownership to give files. The special uid 0 and the special
group 0 are never mapped via user/group names even if the
<b>--numeric-ids</b> option is not specified.</p>

<p style="margin-left:22%; margin-top: 1em">If a user or
group has no name on the source system or it has no match on
the destination system, then the numeric ID from the source
system is used instead. See also the comments on the
&quot;<b>use&nbsp;chroot</b>&quot; setting in the
rsyncd.conf manpage for information on how the chroot
setting affects rsync&rsquo;s ability to look up the names
of the users and groups and what you can do about it.</p>

<p style="margin-left:11%;"><b>--usermap=STRING</b>,
<b>--groupmap=STRING</b></p>

<p style="margin-left:22%;">These options allow you to
specify users and groups that should be mapped to other
values by the receiving side. The <b>STRING</b> is one or
more <b>FROM</b>:<b>TO</b> pairs of values separated by
commas. Any matching <b>FROM</b> value from the sender is
replaced with a <b>TO</b> value from the receiver. You may
specify usernames or user IDs for the <b>FROM</b> and
<b>TO</b> values, and the <b>FROM</b> value may also be a
wild-card string, which will be matched against the
sender&rsquo;s names (wild-cards do NOT match against ID
numbers, though see below for why a &rsquo;<b>*</b>&rsquo;
matches everything). You may instead specify a range of ID
numbers via an inclusive range: LOW-HIGH. For example:</p>


<p style="margin-left:28%; margin-top: 1em">--usermap=0-99:nobody,wayne:admin,*:normal
--groupmap=usr:1,1:usr</p>

<p style="margin-left:22%; margin-top: 1em">The first match
in the list is the one that is used. You should specify all
your user mappings using a single <b>--usermap</b> option,
and/or all your group mappings using a single
<b>--groupmap</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
sender&rsquo;s name for the 0 user and group are not
transmitted to the receiver, so you should either match
these values using a 0, or use the names in effect on the
receiving side (typically &quot;root&quot;). All other
<b>FROM</b> names match those in use on the sending side.
All <b>TO</b> names match those in use on the receiving
side.</p>

<p style="margin-left:22%; margin-top: 1em">Any IDs that do
not have a name on the sending side are treated as having an
empty name for the purpose of matching. This allows them to
be matched via a &quot;<b>*</b>&quot; or using an empty
name. For instance:</p>


<p style="margin-left:28%; margin-top: 1em">--usermap=:nobody
--groupmap=*:nobody</p>

<p style="margin-left:22%; margin-top: 1em">When the
<b>--numeric-ids</b> option is used, the sender does not
send any names, so all the IDs are treated as having an
empty name. This means that you will need to specify numeric
<b>FROM</b> values if you want to map these nameless IDs to
different values.</p>

<p style="margin-left:22%; margin-top: 1em">For the
<b>--usermap</b> option to have any effect, the <b>-o</b>
(<b>--owner</b>) option must be used (or implied), and the
receiver will need to be running as a super-user (see also
the <b>--fake-super</b> option). For the <b>--groupmap</b>
option to have any effect, the <b>-g</b> (<b>--group</b>)
option must be used (or implied), and the receiver will need
to have permissions to set that group.</p>

<p style="margin-left:22%; margin-top: 1em">If your shell
complains about the wildcards, use <b>--protect-args</b>
(<b>-s</b>).</p>

<p style="margin-left:11%;"><b>--chown=USER:GROUP</b></p>

<p style="margin-left:22%;">This option forces all files to
be owned by USER with group GROUP. This is a simpler
interface than using <b>--usermap</b> and <b>--groupmap</b>
directly, but it is implemented using those options
internally, so you cannot mix them. If either the USER or
GROUP is empty, no mapping for the omitted user/group will
occur. If GROUP is empty, the trailing colon may be omitted,
but if USER is empty, a leading colon must be supplied.</p>

<p style="margin-left:22%; margin-top: 1em">If you specify
&quot;<b>--chown=foo:bar</b>&quot;, this is exactly the same
as specifying
&quot;<b>--usermap=*:foo&nbsp;--groupmap=*:bar</b>&quot;,
only easier. If your shell complains about the wildcards,
use <b>--protect-args</b> (<b>-s</b>).</p>

<p style="margin-left:11%;"><b>--timeout=SECONDS</b></p>

<p style="margin-left:22%;">This option allows you to set a
maximum I/O timeout in seconds. If no data is transferred
for the specified time then rsync will exit. The default is
0, which means no timeout.</p>


<p style="margin-left:11%;"><b>--contimeout=SECONDS</b></p>

<p style="margin-left:22%;">This option allows you to set
the amount of time that rsync will wait for its connection
to an rsync daemon to succeed. If the timeout is reached,
rsync exits with an error.</p>

<p style="margin-left:11%;"><b>--address=ADDRESS</b></p>

<p style="margin-left:22%;">By default rsync will bind to
the wildcard address when connecting to an rsync daemon. The
<b>--address</b> option allows you to specify a specific IP
address (or hostname) to bind to. See also this option in
the <b>--daemon</b> mode section.</p>

<p style="margin-left:11%;"><b>--port=PORT</b></p>

<p style="margin-left:22%;">This specifies an alternate TCP
port number to use rather than the default of 873. This is
only needed if you are using the double-colon (::) syntax to
connect with an rsync daemon (since the URL syntax has a way
to specify the port as a part of the URL). See also this
option in the <b>--daemon</b> mode section.</p>

<p style="margin-left:11%;"><b>--sockopts=OPTIONS</b></p>

<p style="margin-left:22%;">This option can provide endless
fun for people who like to tune their systems to the utmost
degree. You can set all sorts of socket options which may
make transfers faster (or slower!). Read the man page for
the <b>setsockopt()</b> system call for details on some of
the options you may be able to set. By default no special
socket options are set. This only affects direct socket
connections to a remote rsync daemon.</p>

<p style="margin-left:22%; margin-top: 1em">This option
also exists in the <b>--daemon</b> mode section.</p>

<p style="margin-left:11%;"><b>--blocking-io</b></p>

<p style="margin-left:22%;">This tells rsync to use
blocking I/O when launching a remote shell transport. If the
remote shell is either rsh or remsh, rsync defaults to using
blocking I/O, otherwise it defaults to using non-blocking
I/O. (Note that ssh prefers non-blocking I/O.)</p>

<p style="margin-left:11%;"><b>--outbuf=MODE</b></p>

<p style="margin-left:22%;">This sets the output buffering
mode. The mode can be None (aka Unbuffered), Line, or Block
(aka Full). You may specify as little as a single letter for
the mode, and use upper or lower case.</p>

<p style="margin-left:22%; margin-top: 1em">The main use of
this option is to change Full buffering to Line buffering
when rsync&rsquo;s output is going to a file or pipe.</p>

<p style="margin-left:11%;"><b>--itemize-changes</b>,
<b>-i</b></p>

<p style="margin-left:22%;">Requests a simple itemized list
of the changes that are being made to each file, including
attribute changes. This is exactly the same as specifying
<b>--out-format=&rsquo;%i&nbsp;%n%L&rsquo;</b>. If you
repeat the option, unchanged files will also be output, but
only if the receiving rsync is at least version 2.6.7 (you
can use <b>-vv</b> with older versions of rsync, but that
also turns on the output of other verbose messages).</p>

<p style="margin-left:22%; margin-top: 1em">The
&quot;%i&quot; escape has a cryptic output that is 11
letters long. The general format is like the string
<b>YXcstpoguax</b>, where <b>Y</b> is replaced by the type
of update being done, <b>X</b> is replaced by the file-type,
and the other letters represent attributes that may be
output if they are being modified.</p>

<p style="margin-left:22%; margin-top: 1em">The update
types that replace the <b>Y</b> are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>&lt;</b> means that a file is being transferred to
the remote host (sent).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>&gt;</b> means that a file is being transferred to
the local host (received).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>c</b> means that a local change/creation is
occurring for the item (such as the creation of a directory
or the changing of a symlink, etc.).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>h</b> means that the item is a hard link to another
item (requires <b>--hard-links</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>.</b> means that the item is not being updated
(though it might have attributes that are being
modified).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>*</b> means that the rest of the itemized-output
area contains a message (e.g. &quot;deleting&quot;).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The file-types
that replace the <b>X</b> are: <b>f</b> for a file, a
<b>d</b> for a directory, an <b>L</b> for a symlink, a
<b>D</b> for a device, and a <b>S</b> for a special file
(e.g. named sockets and fifos).</p>

<p style="margin-left:22%; margin-top: 1em">The other
letters in the string indicate if some attributes of the
file have changed, as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="9%"></td>
<td width="68%">


<p style="margin-top: 1em">&quot;<b>.</b>&quot; - the
attribute is unchanged.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>&quot;<b>+</b>&quot; - the file is newly created.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>&quot;&nbsp;&quot; - all the attributes are unchanged
(all dots turn to spaces).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>&quot;<b>?</b>&quot; - the change is unknown (when the
remote rsync is old).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A letter indicates an attribute is being updated.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The attribute
that is associated with each letter is as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="9%"></td>
<td width="68%">


<p style="margin-top: 1em">A <b>c</b> means either that a
regular file has a different checksum (requires
<b>--checksum</b>) or that a symlink, device, or special
file has a changed value. Note that if you are sending files
to an rsync prior to 3.0.1, this change flag will be present
only for checksum-differing regular files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>s</b> means the size of a regular file is different
and will be updated by the file transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>t</b> means the modification time is different and
is being updated to the sender&rsquo;s value (requires
<b>--times</b>). An alternate value of <b>T</b> means that
the modification time will be set to the transfer time,
which happens when a file/symlink/device is updated without
<b>--times</b> and when a symlink is changed and the
receiver can&rsquo;t set its time. (Note: when using an
rsync 3.0.0 client, you might see the <b>s</b> flag combined
with <b>t</b> instead of the proper <b>T</b> flag for this
time-setting failure.)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>p</b> means the permissions are different and are
being updated to the sender&rsquo;s value (requires
<b>--perms</b>).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>An <b>o</b> means the owner is different and is being
updated to the sender&rsquo;s value (requires <b>--owner</b>
and super-user privileges).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>g</b> means the group is different and is being
updated to the sender&rsquo;s value (requires <b>--group</b>
and the authority to set the group).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>u</b>|<b>n</b>|<b>b</b> indicates the following
information: <b>u</b> means the access (use) time is
different and is being updated to the sender&rsquo;s value
(requires <b>--atimes</b>); <b>n</b> means the create time
(newness) is different and is being updated to the
sender&rsquo;s value (requires <b>--crtimes</b>); <b>b</b>
means that both the access and create times are being
updated.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>a</b> means that the ACL information is being
changed.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>x</b> means that the extended attribute
information is being changed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">One other
output is possible: when deleting files, the &quot;%i&quot;
will output the string &quot;<b>*deleting</b>&quot; for each
item that is being removed (assuming that you are talking to
a recent enough rsync that it logs deletions instead of
outputting them as a verbose message).</p>

<p style="margin-left:11%;"><b>--out-format=FORMAT</b></p>

<p style="margin-left:22%;">This allows you to specify
exactly what the rsync client outputs to the user on a
per-update basis. The format is a text string containing
embedded single-character escape sequences prefixed with a
percent (%) character. A default format of &quot;%n%L&quot;
is assumed if either <b>--info=name</b> or <b>-v</b> is
specified (this tells you just the name of the file and, if
the item is a link, where it points). For a full list of the
possible escape characters, see the
&quot;<b>log&nbsp;format</b>&quot; setting in the
rsyncd.conf manpage.</p>

<p style="margin-left:22%; margin-top: 1em">Specifying the
<b>--out-format</b> option implies the <b>--info=name</b>
option, which will mention each file, dir, etc. that gets
updated in a significant way (a transferred file, a
recreated symlink/device, or a touched directory). In
addition, if the itemize-changes escape (%i) is included in
the string (e.g. if the <b>--itemize-changes</b> option was
used), the logging of names increases to mention any item
that is changed in any way (as long as the receiving side is
at least 2.6.4). See the <b>--itemize-changes</b> option for
a description of the output of &quot;%i&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync will
output the out-format string prior to a file&rsquo;s
transfer unless one of the transfer-statistic escapes is
requested, in which case the logging is done at the end of
the file&rsquo;s transfer. When this late logging is in
effect and <b>--progress</b> is also specified, rsync will
also output the name of the file being transferred prior to
its progress information (followed, of course, by the
out-format output).</p>

<p style="margin-left:11%;"><b>--log-file=FILE</b></p>

<p style="margin-left:22%;">This option causes rsync to log
what it is doing to a file. This is similar to the logging
that a daemon does, but can be requested for the client side
and/or the server side of a non-daemon transfer. If
specified as a client option, transfer logging will be
enabled with a default format of &quot;%i %n%L&quot;. See
the <b>--log-file-format</b> option if you wish to override
this.</p>

<p style="margin-left:22%; margin-top: 1em">Here&rsquo;s a
example command that requests the remote side to log what is
happening:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av
--remote-option=--log-file=/tmp/rlog src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">This is very
useful if you need to debug why a connection is closing
unexpectedly.</p>


<p style="margin-left:11%;"><b>--log-file-format=FORMAT</b></p>

<p style="margin-left:22%;">This allows you to specify
exactly what per-update logging is put into the file
specified by the <b>--log-file</b> option (which must also
be specified for this option to have any effect). If you
specify an empty string, updated files will not be mentioned
in the log file. For a list of the possible escape
characters, see the &quot;<b>log&nbsp;format</b>&quot;
setting in the rsyncd.conf manpage.</p>

<p style="margin-left:22%; margin-top: 1em">The default
FORMAT used if <b>--log-file</b> is specified and this
option is not is &rsquo;%i %n%L&rsquo;.</p>

<p style="margin-left:11%;"><b>--stats</b></p>

<p style="margin-left:22%;">This tells rsync to print a
verbose set of statistics on the file transfer, allowing you
to tell how effective rsync&rsquo;s delta-transfer algorithm
is for your data. This option is equivalent to
<b>--info=stats2</b> if combined with 0 or 1 <b>-v</b>
options, or <b>--info=stats3</b> if combined with 2 or more
<b>-v</b> options.</p>

<p style="margin-left:22%; margin-top: 1em">The current
statistics are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Number&nbsp;of&nbsp;files</b> is the count of all
&quot;files&quot; (in the generic sense), which includes
directories, symlinks, etc. The total count will be followed
by a list of counts by filetype (if the total is non-zero).
For example: &quot;(reg: 5, dir: 3, link: 2, dev: 1,
special: 1)&quot; lists the totals for regular files,
directories, symlinks, devices, and special files. If any of
value is 0, it is completely omitted from the list.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Number&nbsp;of&nbsp;created&nbsp;files</b> is the
count of how many &quot;files&quot; (generic sense) were
created (as opposed to updated). The total count will be
followed by a list of counts by filetype (if the total is
non-zero).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Number&nbsp;of&nbsp;deleted&nbsp;files</b> is the
count of how many &quot;files&quot; (generic sense) were
deleted. The total count will be followed by a list of
counts by filetype (if the total is non-zero). Note that
this line is only output if deletions are in effect, and
only if protocol 31 is being used (the default for rsync
3.1.x).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">



<p><b>Number&nbsp;of&nbsp;regular&nbsp;files&nbsp;transferred</b>
is the count of normal files that were updated via
rsync&rsquo;s delta-transfer algorithm, which does not
include dirs, symlinks, etc. Note that rsync 3.1.0 added the
word &quot;regular&quot; into this heading.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total&nbsp;file&nbsp;size</b> is the total sum of all
file sizes in the transfer. This does not count any size for
directories or special files, but does include the size of
symlinks.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total&nbsp;transferred&nbsp;file&nbsp;size</b> is the
total sum of all files sizes for just the transferred
files.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Literal&nbsp;data</b> is how much unmatched
file-update data we had to send to the receiver for it to
recreate the updated files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Matched&nbsp;data</b> is how much data the receiver
got locally when recreating the updated files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>File&nbsp;list&nbsp;size</b> is how big the file-list
data was when the sender sent it to the receiver. This is
smaller than the in-memory size for the file list due to
some compressing of duplicated data when rsync sends the
list.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>File&nbsp;list&nbsp;generation&nbsp;time</b> is the
number of seconds that the sender spent creating the file
list. This requires a modern rsync on the sending side for
this to be present.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>File&nbsp;list&nbsp;transfer&nbsp;time</b> is the
number of seconds that the sender spent sending the file
list to the receiver.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total&nbsp;bytes&nbsp;sent</b> is the count of all
the bytes that rsync sent from the client side to the server
side.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total&nbsp;bytes&nbsp;received</b> is the count of
all non-message bytes that rsync received by the client side
from the server side. &quot;Non-message&quot; bytes means
that we don&rsquo;t count the bytes for a verbose message
that the server sent to us, which makes the stats more
consistent.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>--8-bit-output</b>,
<b>-8</b></p>

<p style="margin-left:22%;">This tells rsync to leave all
high-bit characters unescaped in the output instead of
trying to test them to see if they&rsquo;re valid in the
current locale and escaping the invalid ones. All control
characters (but never tabs) are always escaped, regardless
of this option&rsquo;s setting.</p>

<p style="margin-left:22%; margin-top: 1em">The escape
idiom that started in 2.6.7 is to output a literal backslash
(<b>\</b>) and a hash (<b>#</b>), followed by exactly 3
octal digits. For example, a newline would output as
&quot;<b>\#012</b>&quot;. A literal backslash that is in a
filename is not escaped unless it is followed by a hash and
3 digits (0-9).</p>

<p style="margin-left:11%;"><b>--human-readable</b>,
<b>-h</b></p>

<p style="margin-left:22%;">Output numbers in a more
human-readable format. There are 3 possible levels: (1)
output numbers with a separator between each set of 3 digits
(either a comma or a period, depending on if the decimal
point is represented by a period or a comma); (2) output
numbers in units of 1000 (with a character suffix for larger
units&nbsp;-- see below); (3) output numbers in units of
1024.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
human-readable level 1. Each <b>-h</b> option increases the
level by one. You can take the level down to 0 (to output
numbers as pure digits) by specifying the
<b>--no-human-readable</b> (<b>--no-h</b>) option.</p>

<p style="margin-left:22%; margin-top: 1em">The unit
letters that are appended in levels 2 and 3 are: <b>K</b>
(kilo), <b>M</b> (mega), <b>G</b> (giga), <b>T</b> (tera),
or <b>P</b> (peta). For example, a 1234567-byte file would
output as 1.23M in level-2 (assuming that a period is your
local decimal point).</p>

<p style="margin-left:22%; margin-top: 1em">Backward
compatibility note: versions of rsync prior to 3.1.0 do not
support human-readable level 1, and they default to level 0.
Thus, specifying one or two <b>-h</b> options will behave in
a comparable manner in old and new versions as long as you
didn&rsquo;t specify a <b>--no-h</b> option prior to one or
more <b>-h</b> options. See the <b>--list-only</b> option
for one difference.</p>

<p style="margin-left:11%;"><b>--partial</b></p>

<p style="margin-left:22%;">By default, rsync will delete
any partially transferred file if the transfer is
interrupted. In some circumstances it is more desirable to
keep partially transferred files. Using the <b>--partial</b>
option tells rsync to keep the partial file which should
make a subsequent transfer of the rest of the file much
faster.</p>

<p style="margin-left:11%;"><b>--partial-dir=DIR</b></p>

<p style="margin-left:22%;">A better way to keep partial
files than the <b>--partial</b> option is to specify a
<i>DIR</i> that will be used to hold the partial data
(instead of writing it out to the destination file). On the
next transfer, rsync will use a file found in this dir as
data to speed up the resumption of the transfer and then
delete it after it has served its purpose.</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
<b>--whole-file</b> is specified (or implied), any
partial-dir file that is found for a file that is being
updated will simply be removed (since rsync is sending files
without using rsync&rsquo;s delta-transfer algorithm).</p>

<p style="margin-left:22%; margin-top: 1em">Rsync will
create the <i>DIR</i> if it is missing (just the last
dir&nbsp;-- not the whole path). This makes it easy to use a
relative path (such as
&quot;<b>--partial-dir=.rsync-partial</b>&quot;) to have
rsync create the partial-directory in the destination
file&rsquo;s directory when needed, and then remove it again
when the partial file is deleted. Note that the directory is
only removed if it is a relative pathname, as it is expected
that an absolute path is to a directory that is reserved for
partial-dir work.</p>

<p style="margin-left:22%; margin-top: 1em">If the
partial-dir value is not an absolute path, rsync will add an
exclude rule at the end of all your existing excludes. This
will prevent the sending of any partial-dir files that may
exist on the sending side, and will also prevent the
untimely deletion of partial-dir items on the receiving
side. An example: the above <b>--partial-dir</b> option
would add the equivalent of
&quot;<b>-f&nbsp;&rsquo;-p&nbsp;.rsync-partial/&rsquo;</b>&quot;
at the end of any other filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">If you are
supplying your own exclude rules, you may need to add your
own exclude/hide/protect rule for the partial-dir because
(1) the auto-added rule may be ineffective at the end of
your other rules, or (2) you may wish to override
rsync&rsquo;s exclude choice. For instance, if you want to
make rsync clean-up any left-over partial-dirs that may be
lying around, you should specify <b>--delete-after</b> and
add a &quot;risk&quot; filter rule, e.g.
<b>-f&nbsp;&rsquo;R&nbsp;.rsync-partial/&rsquo;</b>. (Avoid
using <b>--delete-before</b> or <b>--delete-during</b>
unless you don&rsquo;t need rsync to use any of the
left-over partial-dir data during the current run.)</p>

<p style="margin-left:22%; margin-top: 1em">IMPORTANT: the
<b>--partial-dir</b> should not be writable by other users
or it is a security risk. E.g. AVOID &quot;/tmp&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">You can also
set the partial-dir value the RSYNC_PARTIAL_DIR environment
variable. Setting this in the environment does not force
<b>--partial</b> to be enabled, but rather it affects where
partial files go when <b>--partial</b> is specified. For
instance, instead of using <b>--partial-dir=.rsync-tmp</b>
along with <b>--progress</b>, you could set
RSYNC_PARTIAL_DIR=.rsync-tmp in your environment and then
just use the <b>-P</b> option to turn on the use of the
.rsync-tmp dir for partial transfers. The only times that
the <b>--partial</b> option does not look for this
environment value are (1) when <b>--inplace</b> was
specified (since <b>--inplace</b> conflicts with
<b>--partial-dir</b>), and (2) when <b>--delay-updates</b>
was specified (see below).</p>

<p style="margin-left:22%; margin-top: 1em">When a modern
rsync resumes the transfer of a file in the partial-dir,
that partial file is now updated in-place instead of
creating yet another tmp-file copy (so it maxes out at dest
+ tmp instead of dest + partial + tmp). This requires both
ends of the transfer to be at least version 3.2.0.</p>

<p style="margin-left:22%; margin-top: 1em">For the
purposes of the daemon-config&rsquo;s
&quot;<b>refuse&nbsp;options</b>&quot; setting,
<b>--partial-dir</b> does <i>not</i> imply <b>--partial</b>.
This is so that a refusal of the <b>--partial</b> option can
be used to disallow the overwriting of destination files
with a partial transfer, while still allowing the safer
idiom provided by <b>--partial-dir</b>.</p>

<p style="margin-left:11%;"><b>--delay-updates</b></p>

<p style="margin-left:22%;">This option puts the temporary
file from each updated file into a holding directory until
the end of the transfer, at which time all the files are
renamed into place in rapid succession. This attempts to
make the updating of the files a little more atomic. By
default the files are placed into a directory named
<b>.~tmp~</b> in each file&rsquo;s destination directory,
but if you&rsquo;ve specified the <b>--partial-dir</b>
option, that directory will be used instead. See the
comments in the <b>--partial-dir</b> section for a
discussion of how this <b>.~tmp~</b> dir will be excluded
from the transfer, and what you can do if you want rsync to
cleanup old <b>.~tmp~</b> dirs that might be lying around.
Conflicts with <b>--inplace</b> and <b>--append</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option
implies <b>--no-inc-recursive</b> since it needs the full
file list in memory in order to be able to iterate over it
at the end.</p>

<p style="margin-left:22%; margin-top: 1em">This option
uses more memory on the receiving side (one bit per file
transferred) and also requires enough free disk space on the
receiving side to hold an additional copy of all the updated
files. Note also that you should not use an absolute path to
<b>--partial-dir</b> unless (1) there is no chance of any of
the files in the transfer having the same name (since all
the updated files will be put into a single directory if the
path is absolute) and (2) there are no mount points in the
hierarchy (since the delayed updates will fail if they
can&rsquo;t be renamed into place).</p>

<p style="margin-left:22%; margin-top: 1em">See also the
&quot;atomic-rsync&quot; perl script in the
&quot;support&quot; subdir for an update algorithm that is
even more atomic (it uses <b>--link-dest</b> and a parallel
hierarchy of files).</p>

<p style="margin-left:11%;"><b>--prune-empty-dirs</b>,
<b>-m</b></p>

<p style="margin-left:22%;">This option tells the receiving
rsync to get rid of empty directories from the file-list,
including nested directories that have no non-directory
children. This is useful for avoiding the creation of a
bunch of useless directories when the sending rsync is
recursively scanning a hierarchy of files using
include/exclude/filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
use of transfer rules, such as the <b>--min-size</b> option,
does not affect what goes into the file list, and thus does
not leave directories empty, even if none of the files in a
directory match the transfer rule.</p>

<p style="margin-left:22%; margin-top: 1em">Because the
file-list is actually being pruned, this option also affects
what directories get deleted when a delete is active.
However, keep in mind that excluded files and directories
can prevent existing items from being deleted due to an
exclude both hiding source files and protecting destination
files. See the perishable filter-rule option for how to
avoid this.</p>

<p style="margin-left:22%; margin-top: 1em">You can prevent
the pruning of certain empty directories from the file-list
by using a global &quot;protect&quot; filter. For instance,
this option would ensure that the directory
&quot;emptydir&quot; was kept in the file-list:</p>

<p style="margin-left:28%; margin-top: 1em">--filter
&rsquo;protect emptydir/&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">Here&rsquo;s an
example that copies all .pdf files in a hierarchy, only
creating the necessary destination directories to hold the
.pdf files, and ensures that any superfluous files and
directories in the destination are removed (note the hide
filter of non-directories being used instead of an
exclude):</p>

<p style="margin-left:28%; margin-top: 1em">rsync -avm
--del --include=&rsquo;*.pdf&rsquo; -f &rsquo;hide,!
*/&rsquo; src/ dest</p>

<p style="margin-left:22%; margin-top: 1em">If you
didn&rsquo;t want to remove superfluous destination files,
the more time-honored options of
<b>--include=&rsquo;*/&rsquo;&nbsp;--exclude=&rsquo;*&rsquo;</b>
would work fine in place of the hide-filter (if that is more
natural to you).</p>

<p style="margin-left:11%;"><b>--progress</b></p>

<p style="margin-left:22%;">This option tells rsync to
print information showing the progress of the transfer. This
gives a bored user something to watch. With a modern rsync
this is the same as specifying
<b>--info=flist2,name,progress</b>, but any user-supplied
settings for those info flags takes precedence (e.g.
&quot;<b>--info=flist0&nbsp;--progress</b>&quot;).</p>

<p style="margin-left:22%; margin-top: 1em">While rsync is
transferring a regular file, it updates a progress line that
looks like this:</p>

<p style="margin-left:28%; margin-top: 1em">782448 63%
110.64kB/s 0:00:04</p>

<p style="margin-left:22%; margin-top: 1em">In this
example, the receiver has reconstructed 782448 bytes or 63%
of the sender&rsquo;s file, which is being reconstructed at
a rate of 110.64 kilobytes per second, and the transfer will
finish in 4 seconds if the current rate is maintained until
the end.</p>

<p style="margin-left:22%; margin-top: 1em">These
statistics can be misleading if rsync&rsquo;s delta-transfer
algorithm is in use. For example, if the sender&rsquo;s file
consists of the basis file followed by additional data, the
reported rate will probably drop dramatically when the
receiver gets to the literal data, and the transfer will
probably take much longer to finish than the receiver
estimated as it was finishing the matched part of the
file.</p>

<p style="margin-left:22%; margin-top: 1em">When the file
transfer finishes, rsync replaces the progress line with a
summary line that looks like this:</p>

<p style="margin-left:28%; margin-top: 1em">1,238,099 100%
146.38kB/s 0:00:08 (xfr#5, to-chk=169/396)</p>

<p style="margin-left:22%; margin-top: 1em">In this
example, the file was 1,238,099 bytes long in total, the
average rate of transfer for the whole file was 146.38
kilobytes per second over the 8 seconds that it took to
complete, it was the 5th transfer of a regular file during
the current rsync session, and there are 169 more files for
the receiver to check (to see if they are up-to-date or not)
remaining out of the 396 total files in the file-list.</p>

<p style="margin-left:22%; margin-top: 1em">In an
incremental recursion scan, rsync won&rsquo;t know the total
number of files in the file-list until it reaches the ends
of the scan, but since it starts to transfer files during
the scan, it will display a line with the text
&quot;ir-chk&quot; (for incremental recursion check) instead
of &quot;to-chk&quot; until the point that it knows the full
size of the list, at which point it will switch to using
&quot;to-chk&quot;. Thus, seeing &quot;ir-chk&quot; lets you
know that the total count of files in the file list is still
going to increase (and each time it does, the count of files
left to check will increase by the number of the files added
to the list).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-P</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>-P</b> option is equivalent to
<b>--partial&nbsp;--progress</b>. Its purpose is to make it
much easier to specify these two options for a long transfer
that may be interrupted.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">There is also a
<b>--info=progress2</b> option that outputs statistics based
on the whole transfer, rather than individual files. Use
this flag without outputting a filename (e.g. avoid
<b>-v</b> or specify <b>--info=name0</b>) if you want to see
how the transfer is doing without scrolling the screen with
a lot of names. (You don&rsquo;t need to specify the
<b>--progress</b> option in order to use
<b>--info=progress2</b>.)</p>

<p style="margin-left:22%; margin-top: 1em">Finally, you
can get an instant progress report by sending rsync a signal
of either SIGINFO or SIGVTALRM. On BSD systems, a SIGINFO is
generated by typing a Ctrl+T (Linux doesn&rsquo;t currently
support a SIGINFO signal). When the client-side process
receives one of those signals, it sets a flag to output a
single progress report which is output when the current file
transfer finishes (so it may take a little time if a big
file is being handled when the signal arrives). A filename
is output (if needed) followed by the
<b>--info=progress2</b> format of progress info. If you
don&rsquo;t know which of the 3 rsync processes is the
client process, it&rsquo;s OK to signal all of them (since
the non-client processes ignore the signal).</p>

<p style="margin-left:22%; margin-top: 1em">CAUTION:
sending SIGVTALRM to an older rsync (pre-3.2.0) will kill
it.</p>


<p style="margin-left:11%;"><b>--password-file=FILE</b></p>

<p style="margin-left:22%;">This option allows you to
provide a password for accessing an rsync daemon via a file
or via standard input if <b>FILE</b> is <b>-</b>. The file
should contain just the password on the first line (all
other lines are ignored). Rsync will exit with an error if
<b>FILE</b> is world readable or if a root-run rsync command
finds a non-root-owned file.</p>

<p style="margin-left:22%; margin-top: 1em">This option
does not supply a password to a remote shell transport such
as ssh; to learn how to do that, consult the remote
shell&rsquo;s documentation. When accessing an rsync daemon
using a remote shell as the transport, this option only
comes into effect after the remote shell finishes its
authentication (i.e. if you have also specified a password
in the daemon&rsquo;s config file).</p>

<p style="margin-left:11%;"><b>--early-input=FILE</b></p>

<p style="margin-left:22%;">This option allows rsync to
send up to 5K of data to the &quot;early exec&quot; script
on its stdin. One possible use of this data is to give the
script a secret that can be used to mount an encrypted
filesystem (which you should unmount in the the
&quot;post-xfer exec&quot; script).</p>

<p style="margin-left:22%; margin-top: 1em">The daemon must
be at least version 3.2.1.</p>

<p style="margin-left:11%;"><b>--list-only</b></p>

<p style="margin-left:22%;">This option will cause the
source files to be listed instead of transferred. This
option is inferred if there is a single source arg and no
destination specified, so its main uses are: (1) to turn a
copy command that includes a destination arg into a
file-listing command, or (2) to be able to specify more than
one source arg (note: be sure to include the destination).
Caution: keep in mind that a source arg with a wild-card is
expanded by the shell into multiple args, so it is never
safe to try to list such an arg without using this option.
For example:</p>

<p style="margin-left:28%; margin-top: 1em">rsync -av
--list-only foo* dest/</p>

<p style="margin-left:22%; margin-top: 1em">Starting with
rsync 3.1.0, the sizes output by <b>--list-only</b> are
affected by the <b>--human-readable</b> option. By default
they will contain digit separators, but higher levels of
readability will output the sizes with unit suffixes. Note
also that the column width for the size output has increased
from 11 to 14 characters for all human-readable levels. Use
<b>--no-h</b> if you want just digits in the sizes, and the
old column width of 11 characters.</p>

<p style="margin-left:22%; margin-top: 1em">Compatibility
note: when requesting a remote listing of files from an
rsync that is version 2.6.3 or older, you may encounter an
error if you ask for a non-recursive listing. This is
because a file listing implies the <b>--dirs</b> option w/o
<b>--recursive</b>, and older rsyncs don&rsquo;t have that
option. To avoid this problem, either specify the
<b>--no-dirs</b> option (if you don&rsquo;t need to expand a
directory&rsquo;s content), or turn on recursion and exclude
the content of subdirectories:
<b>-r&nbsp;--exclude=&rsquo;/*/*&rsquo;</b>.</p>

<p style="margin-left:11%;"><b>--bwlimit=RATE</b></p>

<p style="margin-left:22%;">This option allows you to
specify the maximum transfer rate for the data sent over the
socket, specified in units per second. The RATE value can be
suffixed with a string to indicate a size multiplier, and
may be a fractional value (e.g.
&quot;<b>--bwlimit=1.5m</b>&quot;). If no suffix is
specified, the value will be assumed to be in units of 1024
bytes (as if &quot;K&quot; or &quot;KiB&quot; had been
appended). See the <b>--max-size</b> option for a
description of all the available suffixes. A value of 0
specifies no limit.</p>

<p style="margin-left:22%; margin-top: 1em">For
backward-compatibility reasons, the rate limit will be
rounded to the nearest KiB unit, so no rate smaller than
1024 bytes per second is possible.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync writes
data over the socket in blocks, and this option both limits
the size of the blocks that rsync writes, and tries to keep
the average transfer rate at the requested limit. Some
burstiness may be seen where rsync writes out a block of
data and then sleeps to bring the average rate into
compliance.</p>

<p style="margin-left:22%; margin-top: 1em">Due to the
internal buffering of data, the <b>--progress</b> option may
not be an accurate reflection on how fast the data is being
sent. This is because some files can show up as being
rapidly sent when the data is quickly buffered, while other
can show up as very slow when the flushing of the output
buffer occurs. This may be fixed in a future version.</p>

<p style="margin-left:11%;">&rsquo;--stop-after=MINS</p>

<p style="margin-left:22%;">This option tells rsync to stop
copying when the specified number of minutes has
elapsed.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync also
accepts an earlier version of this option:
<b>--time-limit=MINS</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For maximal
flexibility, rsync does not communicate this option to the
remote rsync since it is usually enough that one side of the
connection quits as specified. This allows the
option&rsquo;s use even when only one side of the connection
supports it. You can tell the remote side about the time
limit using <b>--remote-option</b> (<b>-M</b>), should the
need arise.</p>

<p style="margin-left:11%;">&rsquo;--stop-at=y-m-dTh:m</p>

<p style="margin-left:22%;">This option tells rsync to stop
copying when the specified point in time has been reached.
The date &amp; time can be fully specified in a numeric
format of year-month-dayThour:minute (e.g. 2000-12-31T23:59)
in the local timezone. You may choose to separate the date
numbers using slashes instead of dashes.</p>

<p style="margin-left:22%; margin-top: 1em">The value can
also be abbreviated in a variety of ways, such as specifying
a 2-digit year and/or leaving off various values. In all
cases, the value will be taken to be the next possible point
in time where the supplied information matches. If the value
specifies the current time or a past time, rsync exits with
an error.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
&quot;1-30&quot; specifies the next January 30th (at
midnight local time), &quot;14:00&quot; specifies the next 2
P.M., &quot;1&quot; specifies the next 1st of the month at
midnight, &quot;31&quot; specifies the next month where we
can stop on its 31st day, and &quot;:59&quot; specifies the
next 59th minute after the hour.</p>

<p style="margin-left:22%; margin-top: 1em">For maximal
flexibility, rsync does not communicate this option to the
remote rsync since it is usually enough that one side of the
connection quits as specified. This allows the
option&rsquo;s use even when only one side of the connection
supports it. You can tell the remote side about the time
limit using <b>--remote-option</b> (<b>-M</b>), should the
need arise. Do keep in mind that the remote host may have a
different default timezone than your local host.</p>

<p style="margin-left:11%;"><b>--write-batch=FILE</b></p>

<p style="margin-left:22%;">Record a file that can later be
applied to another identical destination with
<b>--read-batch</b>. See the &quot;BATCH MODE&quot; section
for details, and also the <b>--only-write-batch</b>
option.</p>

<p style="margin-left:22%; margin-top: 1em">This option
overrides the negotiated checksum &amp; compress lists and
always negotiates a choice based on old-school md5/md4/zlib
choices. If you want a more modern choice, use the
<b>--checksum-choice</b> (<b>--cc</b>) and/or
<b>--compress-choice</b> (<b>--zc</b>) options.</p>


<p style="margin-left:11%;"><b>--only-write-batch=FILE</b></p>

<p style="margin-left:22%;">Works like
<b>--write-batch</b>, except that no updates are made on the
destination system when creating the batch. This lets you
transport the changes to the destination system via some
other means and then apply the changes via
<b>--read-batch</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
can feel free to write the batch directly to some portable
media: if this media fills to capacity before the end of the
transfer, you can just apply that partial transfer to the
destination and repeat the whole process to get the rest of
the changes (as long as you don&rsquo;t mind a partially
updated destination system while the multi-update cycle is
happening).</p>

<p style="margin-left:22%; margin-top: 1em">Also note that
you only save bandwidth when pushing changes to a remote
system because this allows the batched data to be diverted
from the sender into the batch file without having to flow
over the wire to the receiver (when pulling, the sender is
remote, and thus can&rsquo;t write the batch).</p>

<p style="margin-left:11%;"><b>--read-batch=FILE</b></p>

<p style="margin-left:22%;">Apply all of the changes stored
in FILE, a file previously generated by
<b>--write-batch</b>. If <i>FILE</i> is <b>-</b>, the batch
data will be read from standard input. See the &quot;BATCH
MODE&quot; section for details.</p>

<p style="margin-left:11%;"><b>--protocol=NUM</b></p>

<p style="margin-left:22%;">Force an older protocol version
to be used. This is useful for creating a batch file that is
compatible with an older version of rsync. For instance, if
rsync 2.6.4 is being used with the <b>--write-batch</b>
option, but rsync 2.6.3 is what will be used to run the
<b>--read-batch</b> option, you should use
&quot;--protocol=28&quot; when creating the batch file to
force the older protocol version to be used in the batch
file (assuming you can&rsquo;t upgrade the rsync on the
reading system).</p>


<p style="margin-left:11%;"><b>--iconv=CONVERT_SPEC</b></p>

<p style="margin-left:22%;">Rsync can convert filenames
between character sets using this option. Using a
CONVERT_SPEC of &quot;.&quot; tells rsync to look up the
default character-set via the locale setting. Alternately,
you can fully specify what conversion to do by giving a
local and a remote charset separated by a comma in the order
<b>--iconv=LOCAL,REMOTE</b>, e.g.
<b>--iconv=utf8,iso88591</b>. This order ensures that the
option will stay the same whether you&rsquo;re pushing or
pulling files. Finally, you can specify either
<b>--no-iconv</b> or a CONVERT_SPEC of &quot;-&quot; to turn
off any conversion. The default setting of this option is
site-specific, and can also be affected via the RSYNC_ICONV
environment variable.</p>

<p style="margin-left:22%; margin-top: 1em">For a list of
what charset names your local iconv library supports, you
can run &quot;<b>iconv&nbsp;--list</b>&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">If you specify
the <b>--protect-args</b> option (<b>-s</b>), rsync will
translate the filenames you specify on the command-line that
are being sent to the remote host. See also the
<b>--files-from</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
does not do any conversion of names in filter files
(including include/exclude files). It is up to you to ensure
that you&rsquo;re specifying matching rules that can match
on both sides of the transfer. For instance, you can specify
extra include/exclude rules if there are filename
differences on the two sides that need to be accounted
for.</p>

<p style="margin-left:22%; margin-top: 1em">When you pass
an <b>--iconv</b> option to an rsync daemon that allows it,
the daemon uses the charset specified in its
&quot;charset&quot; configuration parameter regardless of
the remote charset you actually pass. Thus, you may feel
free to specify just the local charset for a daemon transfer
(e.g. <b>--iconv=utf8</b>).</p>

<p style="margin-left:11%;"><b>--ipv4</b>, <b>-4</b> or
<b>--ipv6</b>, <b>-6</b></p>

<p style="margin-left:22%;">Tells rsync to prefer IPv4/IPv6
when creating sockets or running ssh. This affects sockets
that rsync has direct control over, such as the outgoing
socket when directly contacting an rsync daemon, as well as
the forwarding of the <b>-4</b> or <b>-6</b> option to ssh
when rsync can deduce that ssh is being used as the remote
shell. For other remote shells you&rsquo;ll need to specify
the &quot;<b>--rsh&nbsp;SHELL&nbsp;-4</b>&quot; option
directly (or whatever ipv4/ipv6 hint options it uses).</p>

<p style="margin-left:22%; margin-top: 1em">These options
also exist in the <b>--daemon</b> mode section.</p>

<p style="margin-left:22%; margin-top: 1em">If rsync was
complied without support for IPv6, the <b>--ipv6</b> option
will have no effect. The <b>rsync&nbsp;--version</b> output
will contain &quot;<b>no&nbsp;IPv6</b>&quot; if is the
case.</p>

<p style="margin-left:11%;"><b>--checksum-seed=NUM</b></p>

<p style="margin-left:22%;">Set the checksum seed to the
integer NUM. This 4 byte checksum seed is included in each
block and MD4 file checksum calculation (the more modern MD5
file checksums don&rsquo;t use a seed). By default the
checksum seed is generated by the server and defaults to the
current <b>time</b>(). This option is used to set a specific
checksum seed, which is useful for applications that want
repeatable block checksums, or in the case where the user
wants a more random checksum seed. Setting NUM to 0 causes
rsync to use the default of <b>time</b>() for checksum
seed.</p>

<h2>DAEMON OPTIONS
<a name="DAEMON OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options
allowed when starting an rsync daemon are as follows:
<b><br>
--daemon</b></p>

<p style="margin-left:22%;">This tells rsync that it is to
run as a daemon. The daemon you start running may be
accessed using an rsync client using the <b>host::module</b>
or <b>rsync://host/module/</b> syntax.</p>

<p style="margin-left:22%; margin-top: 1em">If standard
input is a socket then rsync will assume that it is being
run via inetd, otherwise it will detach from the current
terminal and become a background daemon. The daemon will
read the config file (rsyncd.conf) on each connect made by a
client and respond to requests accordingly. See the
<b>rsyncd.conf</b>(5) man page for more details.</p>

<p style="margin-left:11%;"><b>--address=ADDRESS</b></p>

<p style="margin-left:22%;">By default rsync will bind to
the wildcard address when run as a daemon with the
<b>--daemon</b> option. The <b>--address</b> option allows
you to specify a specific IP address (or hostname) to bind
to. This makes virtual hosting possible in conjunction with
the <b>--config</b> option. See also the &quot;address&quot;
global option in the rsyncd.conf manpage.</p>

<p style="margin-left:11%;"><b>--bwlimit=RATE</b></p>

<p style="margin-left:22%;">This option allows you to
specify the maximum transfer rate for the data the daemon
sends over the socket. The client can still specify a
smaller <b>--bwlimit</b> value, but no larger value will be
allowed. See the client version of this option (above) for
some extra details.</p>

<p style="margin-left:11%;"><b>--config=FILE</b></p>

<p style="margin-left:22%;">This specifies an alternate
config file than the default. This is only relevant when
<b>--daemon</b> is specified. The default is
/etc/rsyncd.conf unless the daemon is running over a remote
shell program and the remote user is not the super-user; in
that case the default is rsyncd.conf in the current
directory (typically $HOME).</p>

<p style="margin-left:11%;"><b>--dparam=OVERRIDE</b>,
<b>-M</b></p>

<p style="margin-left:22%;">This option can be used to set
a daemon-config parameter when starting up rsync in daemon
mode. It is equivalent to adding the parameter at the end of
the global settings prior to the first module&rsquo;s
definition. The parameter names can be specified without
spaces, if you so desire. For instance:</p>

<p style="margin-left:28%; margin-top: 1em">rsync --daemon
-M pidfile=/path/rsync.pid</p>

<p style="margin-left:11%;"><b>--no-detach</b></p>

<p style="margin-left:22%;">When running as a daemon, this
option instructs rsync to not detach itself and become a
background process. This option is required when running as
a service on Cygwin, and may also be useful when rsync is
supervised by a program such as <b>daemontools</b> or
AIX&rsquo;s <b>System&nbsp;Resource&nbsp;Controller</b>.
<b>--no-detach</b> is also recommended when rsync is run
under a debugger. This option has no effect if rsync is run
from inetd or sshd.</p>

<p style="margin-left:11%;"><b>--port=PORT</b></p>

<p style="margin-left:22%;">This specifies an alternate TCP
port number for the daemon to listen on rather than the
default of 873. See also the &quot;port&quot; global option
in the rsyncd.conf manpage.</p>

<p style="margin-left:11%;"><b>--log-file=FILE</b></p>

<p style="margin-left:22%;">This option tells the rsync
daemon to use the given log-file name instead of using the
&quot;<b>log&nbsp;file</b>&quot; setting in the config
file.</p>


<p style="margin-left:11%;"><b>--log-file-format=FORMAT</b></p>

<p style="margin-left:22%;">This option tells the rsync
daemon to use the given FORMAT string instead of using the
&quot;<b>log&nbsp;format</b>&quot; setting in the config
file. It also enables
&quot;<b>transfer&nbsp;logging</b>&quot; unless the string
is empty, in which case transfer logging is turned off.</p>

<p style="margin-left:11%;"><b>--sockopts</b></p>

<p style="margin-left:22%;">This overrides the
<b>socket&nbsp;options</b> setting in the rsyncd.conf file
and has the same syntax.</p>

<p style="margin-left:11%;"><b>--verbose</b>, <b>-v</b></p>

<p style="margin-left:22%;">This option increases the
amount of information the daemon logs during its startup
phase. After the client connects, the daemon&rsquo;s
verbosity level will be controlled by the options that the
client used and the &quot;<b>max&nbsp;verbosity</b>&quot;
setting in the module&rsquo;s config section.</p>

<p style="margin-left:11%;"><b>--ipv4</b>, <b>-4</b> or
<b>--ipv6</b>, <b>-6</b></p>

<p style="margin-left:22%;">Tells rsync to prefer IPv4/IPv6
when creating the incoming sockets that the rsync daemon
will use to listen for connections. One of these options may
be required in older versions of Linux to work around an
IPv6 bug in the kernel (if you see an &quot;address already
in use&quot; error when nothing else is using the port, try
specifying <b>--ipv6</b> or <b>--ipv4</b> when starting the
daemon).</p>

<p style="margin-left:22%; margin-top: 1em">These options
also exist in the regular rsync options section.</p>

<p style="margin-left:22%; margin-top: 1em">If rsync was
complied without support for IPv6, the <b>--ipv6</b> option
will have no effect. The <b>rsync&nbsp;--version</b> output
will contain &quot;<b>no&nbsp;IPv6</b>&quot; if is the
case.</p>

<p style="margin-left:11%;"><b>--help</b>, <b>-h</b></p>

<p style="margin-left:22%;">When specified after
<b>--daemon</b>, print a short help page describing the
options available for starting an rsync daemon.</p>

<h2>FILTER RULES
<a name="FILTER RULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The filter
rules allow for flexible selection of which files to
transfer (include) and which files to skip (exclude). The
rules either directly specify include/exclude patterns or
they specify a way to acquire more include/exclude patterns
(e.g. to read them from a file).</p>

<p style="margin-left:11%; margin-top: 1em">As the list of
files/directories to transfer is built, rsync checks each
name to be transferred against the list of include/exclude
patterns in turn, and the first matching pattern is acted
on: if it is an exclude pattern, then that file is skipped;
if it is an include pattern then that filename is not
skipped; if no matching pattern is found, then the filename
is not skipped.</p>

<p style="margin-left:11%; margin-top: 1em">Rsync builds an
ordered list of filter rules as specified on the
command-line. Filter rules have the following syntax:</p>

<p style="margin-left:17%; margin-top: 1em">RULE
[PATTERN_OR_FILENAME] <br>
RULE,MODIFIERS [PATTERN_OR_FILENAME]</p>

<p style="margin-left:11%; margin-top: 1em">You have your
choice of using either short or long RULE names, as
described below. If you use a short-named rule, the
&rsquo;,&rsquo; separating the RULE from the MODIFIERS is
optional. The PATTERN or FILENAME that follows (when
present) must come after either a single space or an
underscore (_). Here are the available rule prefixes:
<b><br>
exclude,&nbsp;&rsquo;-&rsquo;</b></p>

<p style="margin-left:22%;">specifies an exclude
pattern.</p>


<p style="margin-left:11%;"><b>include,&nbsp;&rsquo;+&rsquo;</b></p>

<p style="margin-left:22%;">specifies an include
pattern.</p>


<p style="margin-left:11%;"><b>merge,&nbsp;&rsquo;.&rsquo;</b></p>

<p style="margin-left:22%;">specifies a merge-file to read
for more rules.</p>


<p style="margin-left:11%;"><b>dir-merge,&nbsp;&rsquo;:&rsquo;</b></p>

<p style="margin-left:22%;">specifies a per-directory
merge-file.</p>


<p style="margin-left:11%;"><b>hide,&nbsp;&rsquo;H&rsquo;</b></p>

<p style="margin-left:22%;">specifies a pattern for hiding
files from the transfer.</p>


<p style="margin-left:11%;"><b>show,&nbsp;&rsquo;S&rsquo;</b></p>

<p style="margin-left:22%;">files that match the pattern
are not hidden.</p>


<p style="margin-left:11%;"><b>protect,&nbsp;&rsquo;P&rsquo;</b></p>

<p style="margin-left:22%;">specifies a pattern for
protecting files from deletion.</p>


<p style="margin-left:11%;"><b>risk,&nbsp;&rsquo;R&rsquo;</b></p>

<p style="margin-left:22%;">files that match the pattern
are not protected.</p>


<p style="margin-left:11%;"><b>clear,&nbsp;&rsquo;!&rsquo;</b></p>

<p style="margin-left:22%;">clears the current
include/exclude list (takes no arg)</p>

<p style="margin-left:11%; margin-top: 1em">When rules are
being read from a file, empty lines are ignored, as are
whole-line comments that start with a &rsquo;<b>#</b>&rsquo;
(filename rules that contain a hash are unaffected).</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
<b>--include</b> &amp; <b>--exclude</b> command-line options
do not allow the full range of rule parsing as described
above&nbsp;-- they only allow the specification of include /
exclude patterns plus a &quot;<b>!</b>&quot; token to clear
the list (and the normal comment parsing when rules are read
from a file). If a pattern does not begin with
&quot;<b>-&nbsp;</b>&quot; (dash, space) or
&quot;<b>+&nbsp;</b>&quot; (plus, space), then the rule will
be interpreted as if &quot;<b>+&nbsp;</b>&quot; (for an
include option) or &quot;<b>-&nbsp;</b>&quot; (for an
exclude option) were prefixed to the string. A
<b>--filter</b> option, on the other hand, must always
contain either a short or long rule name at the start of the
rule.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
the <b>--filter</b>, <b>--include</b>, and <b>--exclude</b>
options take one rule/pattern each. To add multiple ones,
you can repeat the options on the command-line, use the
merge-file syntax of the <b>--filter</b> option, or the
<b>--include-from</b> / <b>--exclude-from</b> options.</p>

<h2>INCLUDE/EXCLUDE PATTERN RULES
<a name="INCLUDE/EXCLUDE PATTERN RULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can include
and exclude files by specifying patterns using the
&quot;+&quot;, &quot;-&quot;, etc. filter rules (as
introduced in the FILTER RULES section above). The
include/exclude rules each specify a pattern that is matched
against the names of the files that are going to be
transferred. These patterns can take several forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if the pattern starts with a <b>/</b> then it is
anchored to a particular spot in the hierarchy of files,
otherwise it is matched against the end of the pathname.
This is similar to a leading <b>^</b> in regular
expressions. Thus <b>/foo</b> would match a name of
&quot;foo&quot; at either the &quot;root of the
transfer&quot; (for a global rule) or in the
merge-file&rsquo;s directory (for a per-directory rule). An
unqualified <b>foo</b> would match a name of &quot;foo&quot;
anywhere in the tree because the algorithm is applied
recursively from the top down; it behaves as if each path
component gets a turn at being the end of the filename. Even
the unanchored &quot;sub/foo&quot; would match at any point
in the hierarchy where a &quot;foo&quot; was found within a
directory named &quot;sub&quot;. See the section on
ANCHORING INCLUDE/EXCLUDE PATTERNS for a full discussion of
how to specify a pattern that matches at the root of the
transfer.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if the pattern ends with a <b>/</b> then it will only
match a directory, not a regular file, symlink, or
device.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>rsync chooses between doing a simple string match and
wildcard matching by checking if the pattern contains one of
these three wildcard characters: &rsquo;<b>*</b>&rsquo;,
&rsquo;<b>?</b>&rsquo;, and &rsquo;<b>[</b>&rsquo; .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a &rsquo;<b>*</b>&rsquo; matches any path component, but
it stops at slashes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>use &rsquo;<b>**</b>&rsquo; to match anything, including
slashes.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a &rsquo;<b>?</b>&rsquo; matches any character except a
slash (<b>/</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a &rsquo;<b>[</b>&rsquo; introduces a character class,
such as <b>[a-z]</b> or <b>[[:alpha:]]</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>in a wildcard pattern, a backslash can be used to escape
a wildcard character, but it is matched literally when no
wildcards are present. This means that there is an extra
level of backslash removal when a pattern contains wildcard
characters compared to a pattern that has none. e.g. if you
add a wildcard to &quot;<b>foo\bar</b>&quot; (which matches
the backslash) you would need to use
&quot;<b>foo\\bar*</b>&quot; to avoid the
&quot;<b>\b</b>&quot; becoming just &quot;b&quot;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if the pattern contains a <b>/</b> (not counting a
trailing /) or a &quot;<b>**</b>&quot;, then it is matched
against the full pathname, including any leading
directories. If the pattern doesn&rsquo;t contain a <b>/</b>
or a &quot;<b>**</b>&quot;, then it is matched only against
the final component of the filename. (Remember that the
algorithm is applied recursively so &quot;full
filename&quot; can actually be any portion of a path from
the starting directory on down.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a trailing &quot;<b>dir_name/***</b>&quot; will match
both the directory (as if &quot;dir_name/&quot; had been
specified) and everything in the directory (as if
&quot;<b>dir_name/**</b>&quot; had been specified). This
behavior was added in version 2.6.7.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note that, when
using the <b>--recursive</b> (<b>-r</b>) option (which is
implied by <b>-a</b>), every subdir component of every path
is visited left to right, with each directory having a
chance for exclusion before its content. In this way
include/exclude patterns are applied recursively to the
pathname of each node in the filesystem&rsquo;s tree (those
inside the transfer). The exclude patterns short-circuit the
directory traversal stage as rsync finds the files to
send.</p>

<p style="margin-left:11%; margin-top: 1em">For instance,
to include &quot;<b>/foo/bar/baz</b>&quot;, the directories
&quot;<b>/foo</b>&quot; and &quot;<b>/foo/bar</b>&quot; must
not be excluded. Excluding one of those parent directories
prevents the examination of its content, cutting off
rsync&rsquo;s recursion into those paths and rendering the
include for &quot;<b>/foo/bar/baz</b>&quot; ineffectual
(since rsync can&rsquo;t match something it never sees in
the cut-off section of the directory hierarchy).</p>

<p style="margin-left:11%; margin-top: 1em">The concept
path exclusion is particularly important when using a
trailing &rsquo;<b>*</b>&rsquo; rule. For instance, this
won&rsquo;t work:</p>

<p style="margin-left:17%; margin-top: 1em">+
/some/path/this-file-will-not-be-found <br>
+ /file-is-included <br>
- *</p>

<p style="margin-left:11%; margin-top: 1em">This fails
because the parent directory &quot;some&quot; is excluded by
the &rsquo;<b>*</b>&rsquo; rule, so rsync never visits any
of the files in the &quot;some&quot; or
&quot;some/path&quot; directories. One solution is to ask
for all directories in the hierarchy to be included by using
a single rule: &quot;<b>+&nbsp;*/</b>&quot; (put it
somewhere before the &quot;<b>-&nbsp;*</b>&quot; rule), and
perhaps use the <b>--prune-empty-dirs</b> option. Another
solution is to add specific include rules for all the parent
dirs that need to be visited. For instance, this set of
rules works fine:</p>

<p style="margin-left:17%; margin-top: 1em">+ /some/ <br>
+ /some/path/ <br>
+ /some/path/this-file-is-found <br>
+ /file-also-included <br>
- *</p>

<p style="margin-left:11%; margin-top: 1em">Here are some
examples of exclude/include matching:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">&quot;<b>-&nbsp;*.o</b>&quot;
would exclude all names matching <b>*.o</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;<b>-&nbsp;/foo</b>&quot; would exclude a file (or
directory) named foo in the transfer-root directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;<b>-&nbsp;foo/</b>&quot; would exclude any
directory named foo</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;<b>-&nbsp;/foo/*/bar</b>&quot; would exclude any
file named bar which is at two levels below a directory
named foo in the transfer-root directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;<b>-&nbsp;/foo/**/bar</b>&quot; would exclude any
file named bar two or more levels below a directory named
foo in the transfer-root directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The combination of &quot;<b>+&nbsp;*/</b>&quot;,
&quot;<b>+&nbsp;*.c</b>&quot;, and
&quot;<b>-&nbsp;*</b>&quot; would include all directories
and C source files but nothing else (see also the
<b>--prune-empty-dirs</b> option)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The combination of &quot;<b>+&nbsp;foo/</b>&quot;,
&quot;<b>+&nbsp;foo/bar.c</b>&quot;, and
&quot;<b>-&nbsp;*</b>&quot; would include only the foo
directory and foo/bar.c (the foo directory must be
explicitly included or it would be excluded by the
&quot;<b>*</b>&quot;)</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The following
modifiers are accepted after a &quot;<b>+</b>&quot; or
&quot;<b>-</b>&quot;:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">A <b>/</b> specifies that the
include/exclude rule should be matched against the absolute
pathname of the current item. For example,
&quot;<b>-/&nbsp;/etc/passwd</b>&quot; would exclude the
passwd file any time the transfer was sending files from the
&quot;/etc&quot; directory, and &quot;-/ subdir/foo&quot;
would always exclude &quot;foo&quot; when it is in a dir
named &quot;subdir&quot;, even if &quot;foo&quot; is at the
root of the current transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>!</b> specifies that the include/exclude should
take effect if the pattern fails to match. For instance,
&quot;<b>-!&nbsp;*/</b>&quot; would exclude all
non-directories.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>C</b> is used to indicate that all the global
CVS-exclude rules should be inserted as excludes in place of
the &quot;-C&quot;. No arg should follow.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>s</b> is used to indicate that the rule applies to
the sending side. When a rule affects the sending side, it
prevents files from being transferred. The default is for a
rule to affect both sides unless <b>--delete-excluded</b>
was specified, in which case default rules become
sender-side only. See also the hide (H) and show (S) rules,
which are an alternate way to specify sending-side
includes/excludes.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>r</b> is used to indicate that the rule applies to
the receiving side. When a rule affects the receiving side,
it prevents files from being deleted. See the <b>s</b>
modifier for more info. See also the protect (P) and risk
(R) rules, which are an alternate way to specify
receiver-side includes/excludes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>p</b> indicates that a rule is perishable, meaning
that it is ignored in directories that are being deleted.
For instance, the <b>-C</b> option&rsquo;s default rules
that exclude things like &quot;CVS&quot; and
&quot;<b>*.o</b>&quot; are marked as perishable, and will
not prevent a directory that was removed on the source from
being deleted on the destination.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>x</b> indicates that a rule affects xattr names in
xattr copy/delete operations (and is thus ignored when
matching file/dir names). If no xattr-matching rules are
specified, a default xattr filtering rule is used (see the
<b>--xattrs</b> option).</p></td></tr>
</table>

<h2>MERGE-FILE FILTER RULES
<a name="MERGE-FILE FILTER RULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can merge
whole files into your filter rules by specifying either a
merge (.) or a dir-merge (:) filter rule (as introduced in
the FILTER RULES section above).</p>

<p style="margin-left:11%; margin-top: 1em">There are two
kinds of merged files&nbsp;-- single-instance
(&rsquo;.&rsquo;) and per-directory (&rsquo;:&rsquo;). A
single-instance merge file is read one time, and its rules
are incorporated into the filter list in the place of the
&quot;.&quot; rule. For per-directory merge files, rsync
will scan every directory that it traverses for the named
file, merging its contents when the file exists into the
current list of inherited rules. These per-directory rule
files must be created on the sending side because it is the
sending side that is being scanned for the available files
to transfer. These rule files may also need to be
transferred to the receiving side if you want them to affect
what files don&rsquo;t get deleted (see PER-DIRECTORY RULES
AND DELETE below).</p>

<p style="margin-left:11%; margin-top: 1em">Some
examples:</p>

<p style="margin-left:17%; margin-top: 1em">merge
/etc/rsync/default.rules <br>
. /etc/rsync/default.rules <br>
dir-merge .per-dir-filter <br>
dir-merge,n- .non-inherited-per-dir-excludes <br>
:n- .non-inherited-per-dir-excludes</p>

<p style="margin-left:11%; margin-top: 1em">The following
modifiers are accepted after a merge or dir-merge rule:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">A <b>-</b> specifies that the
file should consist of only exclude patterns, with no other
rule-parsing except for in-file comments.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>+</b> specifies that the file should consist of
only include patterns, with no other rule-parsing except for
in-file comments.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>C</b> is a way to specify that the file should be
read in a CVS-compatible manner. This turns on
&rsquo;n&rsquo;, &rsquo;w&rsquo;, and &rsquo;-&rsquo;, but
also allows the list-clearing token (!) to be specified. If
no filename is provided, &quot;.cvsignore&quot; is
assumed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>e</b> will exclude the merge-file name from the
transfer; e.g. &quot;dir-merge,e .rules&quot; is like
&quot;dir-merge .rules&quot; and &quot;- .rules&quot;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>n</b> specifies that the rules are not inherited
by subdirectories.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>w</b> specifies that the rules are word-split on
whitespace instead of the normal line-splitting. This also
turns off comments. Note: the space that separates the
prefix from the rule is treated specially, so &quot;- foo +
bar&quot; is parsed as two rules (assuming that
prefix-parsing wasn&rsquo;t also disabled).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>You may also specify any of the modifiers for the
&quot;+&quot; or &quot;-&quot; rules (above) in order to
have the rules that are read in from the file default to
having that modifier set (except for the <b>!</b> modifier,
which would not be useful). For instance, &quot;merge,-/
.excl&quot; would treat the contents of .excl as
absolute-path excludes, while &quot;dir-merge,s .filt&quot;
and &quot;:sC&quot; would each make all their per-directory
rules apply only on the sending side. If the merge rule
specifies sides to affect (via the <b>s</b> or <b>r</b>
modifier or both), then the rules in the file must not
specify sides (via a modifier or a rule prefix such as
<b>hide</b>).</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Per-directory
rules are inherited in all subdirectories of the directory
where the merge-file was found unless the &rsquo;n&rsquo;
modifier was used. Each subdirectory&rsquo;s rules are
prefixed to the inherited per-directory rules from its
parents, which gives the newest rules a higher priority than
the inherited rules. The entire set of dir-merge rules are
grouped together in the spot where the merge-file was
specified, so it is possible to override dir-merge rules via
a rule that got specified earlier in the list of global
rules. When the list-clearing rule (&quot;!&quot;) is read
from a per-directory file, it only clears the inherited
rules for the current merge file.</p>

<p style="margin-left:11%; margin-top: 1em">Another way to
prevent a single rule from a dir-merge file from being
inherited is to anchor it with a leading slash. Anchored
rules in a per-directory merge-file are relative to the
merge-file&rsquo;s directory, so a pattern &quot;/foo&quot;
would only match the file &quot;foo&quot; in the directory
where the dir-merge filter file was found.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s an
example filter file which you&rsquo;d specify via
<b>--filter=&quot;.&nbsp;file&quot;:</b></p>

<p style="margin-left:17%; margin-top: 1em">merge
/home/user/.global-filter <br>
- *.gz <br>
dir-merge .rules <br>
+ *.[ch] <br>
- *.o <br>
- foo*</p>

<p style="margin-left:11%; margin-top: 1em">This will merge
the contents of the /home/user/.global-filter file at the
start of the list and also turns the &quot;.rules&quot;
filename into a per-directory filter file. All rules read in
prior to the start of the directory scan follow the global
anchoring rules (i.e. a leading slash matches at the root of
the transfer).</p>

<p style="margin-left:11%; margin-top: 1em">If a
per-directory merge-file is specified with a path that is a
parent directory of the first transfer directory, rsync will
scan all the parent dirs from that starting point to the
transfer directory for the indicated per-directory file. For
instance, here is a common filter (see <b>-F</b>):</p>


<p style="margin-left:17%; margin-top: 1em">--filter=&rsquo;:
/.rsync-filter&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">That rule tells
rsync to scan for the file .rsync-filter in all directories
from the root down through the parent directory of the
transfer prior to the start of the normal directory scan of
the file in the directories that are sent as a part of the
transfer. (Note: for an rsync daemon, the root is always the
same as the module&rsquo;s &quot;path&quot;.)</p>

<p style="margin-left:11%; margin-top: 1em">Some examples
of this pre-scanning for per-directory files:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -avF
/src/path/ /dest/dir <br>
rsync -av --filter=&rsquo;: ../../.rsync-filter&rsquo;
/src/path/ /dest/dir <br>
rsync -av --filter=&rsquo;: .rsync-filter&rsquo; /src/path/
/dest/dir</p>

<p style="margin-left:11%; margin-top: 1em">The first two
commands above will look for &quot;.rsync-filter&quot; in
&quot;/&quot; and &quot;/src&quot; before the normal scan
begins looking for the file in &quot;/src/path&quot; and its
subdirectories. The last command avoids the parent-dir scan
and only looks for the &quot;.rsync-filter&quot; files in
each directory that is a part of the transfer.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
include the contents of a &quot;.cvsignore&quot; in your
patterns, you should use the rule &quot;:C&quot;, which
creates a dir-merge of the .cvsignore file, but parsed in a
CVS-compatible manner. You can use this to affect where the
<b>--cvs-exclude</b> (<b>-C</b>) option&rsquo;s inclusion of
the per-directory .cvsignore file gets placed into your
rules by putting the &quot;:C&quot; wherever you like in
your filter rules. Without this, rsync would add the
dir-merge rule for the .cvsignore file at the end of all
your other rules (giving it a lower priority than your
command-line rules). For example:</p>

<p style="margin-left:17%; margin-top: 1em">cat &lt;&lt;EOT
| rsync -avC --filter=&rsquo;. -&rsquo; a/ b <br>
+ foo.o <br>
:C <br>
- *.old <br>
EOT <br>
rsync -avC --include=foo.o -f :C
--exclude=&rsquo;*.old&rsquo; a/ b</p>

<p style="margin-left:11%; margin-top: 1em">Both of the
above rsync commands are identical. Each one will merge all
the per-directory .cvsignore rules in the middle of the list
rather than at the end. This allows their dir-specific rules
to supersede the rules that follow the :C instead of being
subservient to all your rules. To affect the other CVS
exclude rules (i.e. the default list of exclusions, the
contents of $HOME/.cvsignore, and the value of $CVSIGNORE)
you should omit the <b>-C</b> command-line option and
instead insert a &quot;-C&quot; rule into your filter rules;
e.g. &quot;<b>--filter=-C</b>&quot;.</p>

<h2>LIST-CLEARING FILTER RULE
<a name="LIST-CLEARING FILTER RULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can clear
the current include/exclude list by using the &quot;!&quot;
filter rule (as introduced in the FILTER RULES section
above). The &quot;current&quot; list is either the global
list of rules (if the rule is encountered while parsing the
filter options) or a set of per-directory rules (which are
inherited in their own sub-list, so a subdirectory can use
this to clear out the parent&rsquo;s rules).</p>

<h2>ANCHORING INCLUDE/EXCLUDE PATTERNS
<a name="ANCHORING INCLUDE/EXCLUDE PATTERNS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As mentioned
earlier, global include/exclude patterns are anchored at the
&quot;root of the transfer&quot; (as opposed to
per-directory patterns, which are anchored at the
merge-file&rsquo;s directory). If you think of the transfer
as a subtree of names that are being sent from sender to
receiver, the transfer-root is where the tree starts to be
duplicated in the destination directory. This root governs
where patterns that start with a / match.</p>

<p style="margin-left:11%; margin-top: 1em">Because the
matching is relative to the transfer-root, changing the
trailing slash on a source path or changing your use of the
<b>--relative</b> option affects the path you need to use in
your matching (in addition to changing how much of the file
tree is duplicated on the destination host). The following
examples demonstrate this.</p>

<p style="margin-left:11%; margin-top: 1em">Let&rsquo;s say
that we want to match two source files, one with an absolute
path of &quot;/home/me/foo/bar&quot;, and one with a path of
&quot;/home/you/bar/baz&quot;. Here is how the various
command choices differ for a 2-source transfer:</p>

<p style="margin-left:17%; margin-top: 1em">Example cmd:
rsync -a /home/me /home/you /dest <br>
+/- pattern: /me/foo/bar <br>
+/- pattern: /you/bar/baz <br>
Target file: /dest/me/foo/bar <br>
Target file: /dest/you/bar/baz</p>

<p style="margin-left:17%; margin-top: 1em">Example cmd:
rsync -a /home/me/ /home/you/ /dest <br>
+/- pattern: /foo/bar (note missing &quot;me&quot;) <br>
+/- pattern: /bar/baz (note missing &quot;you&quot;) <br>
Target file: /dest/foo/bar <br>
Target file: /dest/bar/baz</p>

<p style="margin-left:17%; margin-top: 1em">Example cmd:
rsync -a --relative /home/me/ /home/you /dest <br>
+/- pattern: /home/me/foo/bar (note full path) <br>
+/- pattern: /home/you/bar/baz (ditto) <br>
Target file: /dest/home/me/foo/bar <br>
Target file: /dest/home/you/bar/baz</p>

<p style="margin-left:17%; margin-top: 1em">Example cmd: cd
/home; rsync -a --relative me/foo you/ /dest <br>
+/- pattern: /me/foo/bar (starts at specified path) <br>
+/- pattern: /you/bar/baz (ditto) <br>
Target file: /dest/me/foo/bar <br>
Target file: /dest/you/bar/baz</p>

<p style="margin-left:11%; margin-top: 1em">The easiest way
to see what name you should filter is to just look at the
output when using <b>--verbose</b> and put a / in front of
the name (use the <b>--dry-run</b> option if you&rsquo;re
not yet ready to copy any files).</p>

<h2>PER-DIRECTORY RULES AND DELETE
<a name="PER-DIRECTORY RULES AND DELETE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Without a
delete option, per-directory rules are only relevant on the
sending side, so you can feel free to exclude the merge
files themselves without affecting the transfer. To make
this easy, the &rsquo;e&rsquo; modifier adds this exclude
for you, as seen in these two equivalent commands:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
--filter=&rsquo;: .excl&rsquo; --exclude=.excl host:src/dir
/dest <br>
rsync -av --filter=&rsquo;:e .excl&rsquo; host:src/dir
/dest</p>

<p style="margin-left:11%; margin-top: 1em">However, if you
want to do a delete on the receiving side AND you want some
files to be excluded from being deleted, you&rsquo;ll need
to be sure that the receiving side knows what files to
exclude. The easiest way is to include the per-directory
merge files in the transfer and use <b>--delete-after</b>,
because this ensures that the receiving side gets all the
same exclude rules as the sending side before it tries to
delete anything:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -avF
--delete-after host:src/dir /dest</p>

<p style="margin-left:11%; margin-top: 1em">However, if the
merge files are not a part of the transfer, you&rsquo;ll
need to either specify some global exclude rules (i.e.
specified on the command line), or you&rsquo;ll need to
maintain your own per-directory merge files on the receiving
side. An example of the first is this (assume that the
remote .rules files exclude themselves):</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
--filter=&rsquo;: .rules&rsquo; --filter=&rsquo;.
/my/extra.rules&rsquo; <br>
--delete host:src/dir /dest</p>

<p style="margin-left:11%; margin-top: 1em">In the above
example the extra.rules file can affect both sides of the
transfer, but (on the sending side) the rules are
subservient to the rules merged from the .rules files
because they were specified after the per-directory merge
rule.</p>

<p style="margin-left:11%; margin-top: 1em">In one final
example, the remote side is excluding the .rsync-filter
files from the transfer, but we want to use our own
.rsync-filter files to control what gets deleted on the
receiving side. To do this we must specifically exclude the
per-directory merge files (so that they don&rsquo;t get
deleted) and then put rules into the local files to control
what else should not get deleted. Like one of these
commands:</p>

<p style="margin-left:17%; margin-top: 1em">rsync -av
--filter=&rsquo;:e /.rsync-filter&rsquo; --delete \ <br>
host:src/dir /dest <br>
rsync -avFF --delete host:src/dir /dest</p>

<h2>BATCH MODE
<a name="BATCH MODE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Batch mode can
be used to apply the same set of updates to many identical
systems. Suppose one has a tree which is replicated on a
number of hosts. Now suppose some changes have been made to
this source tree and those changes need to be propagated to
the other hosts. In order to do this using batch mode, rsync
is run with the write-batch option to apply the changes made
to the source tree to one of the destination trees. The
write-batch option causes the rsync client to store in a
&quot;batch file&quot; all the information needed to repeat
this operation against other, identical destination
trees.</p>

<p style="margin-left:11%; margin-top: 1em">Generating the
batch file once saves having to perform the file status,
checksum, and data block generation more than once when
updating multiple destination trees. Multicast transport
protocols can be used to transfer the batch update files in
parallel to many hosts at once, instead of sending the same
data to every host individually.</p>

<p style="margin-left:11%; margin-top: 1em">To apply the
recorded changes to another destination tree, run rsync with
the read-batch option, specifying the name of the same batch
file, and the destination tree. Rsync updates the
destination tree using the information stored in the batch
file.</p>

<p style="margin-left:11%; margin-top: 1em">For your
convenience, a script file is also created when the
write-batch option is used: it will be named the same as the
batch file with &quot;.sh&quot; appended. This script file
contains a command-line suitable for updating a destination
tree using the associated batch file. It can be executed
using a Bourne (or Bourne-like) shell, optionally passing in
an alternate destination tree pathname which is then used
instead of the original destination path. This is useful
when the destination tree path on the current host differs
from the one used to create the batch file.</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>

<p style="margin-left:17%; margin-top: 1em">$ rsync
--write-batch=foo -a host:/source/dir/ /adest/dir/ <br>
$ scp foo* remote: <br>
$ ssh remote ./foo.sh /bdest/dir/</p>

<p style="margin-left:17%; margin-top: 1em">$ rsync
--write-batch=foo -a /source/dir/ /adest/dir/ <br>
$ ssh remote rsync --read-batch=- -a /bdest/dir/ &lt;foo</p>

<p style="margin-left:11%; margin-top: 1em">In these
examples, rsync is used to update /adest/dir/ from
/source/dir/ and the information to repeat this operation is
stored in &quot;foo&quot; and &quot;foo.sh&quot;. The host
&quot;remote&quot; is then updated with the batched data
going into the directory /bdest/dir. The differences between
the two examples reveals some of the flexibility you have in
how you deal with batches:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">The first example shows that the
initial copy doesn&rsquo;t have to be local&nbsp;-- you can
push or pull data to/from a remote host using either the
remote-shell syntax or rsync daemon syntax, as desired.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The first example uses the created &quot;foo.sh&quot;
file to get the right rsync options when running the
read-batch command on the remote host.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The second example reads the batch data via standard
input so that the batch file doesn&rsquo;t need to be copied
to the remote machine first. This example avoids the foo.sh
script because it needed to use a modified
<b>--read-batch</b> option, but you could edit the script
file if you wished to make use of it (just be sure that no
other option is trying to use standard input, such as the
&quot;<b>--exclude-from=-</b>&quot; option).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Caveats:</p>

<p style="margin-left:11%; margin-top: 1em">The read-batch
option expects the destination tree that it is updating to
be identical to the destination tree that was used to create
the batch update fileset. When a difference between the
destination trees is encountered the update might be
discarded with a warning (if the file appears to be
up-to-date already) or the file-update may be attempted and
then, if the file fails to verify, the update discarded with
an error. This means that it should be safe to re-run a
read-batch operation if the command got interrupted. If you
wish to force the batched-update to always be attempted
regardless of the file&rsquo;s size and date, use the
<b>-I</b> option (when reading the batch). If an error
occurs, the destination tree will probably be in a partially
updated state. In that case, rsync can be used in its
regular (non-batch) mode of operation to fix up the
destination tree.</p>

<p style="margin-left:11%; margin-top: 1em">The rsync
version used on all destinations must be at least as new as
the one used to generate the batch file. Rsync will die with
an error if the protocol version in the batch file is too
new for the batch-reading rsync to handle. See also the
<b>--protocol</b> option for a way to have the creating
rsync generate a batch file that an older rsync can
understand. (Note that batch files changed format in version
2.6.3, so mixing versions older than that with newer
versions will not work.)</p>

<p style="margin-left:11%; margin-top: 1em">When reading a
batch file, rsync will force the value of certain options to
match the data in the batch file if you didn&rsquo;t set
them to the same as the batch-writing command. Other options
can (and should) be changed. For instance
<b>--write-batch</b> changes to <b>--read-batch</b>,
<b>--files-from</b> is dropped, and the <b>--filter</b> /
<b>--include</b> / <b>--exclude</b> options are not needed
unless one of the <b>--delete</b> options is specified.</p>

<p style="margin-left:11%; margin-top: 1em">The code that
creates the BATCH.sh file transforms any
filter/include/exclude options into a single list that is
appended as a &quot;here&quot; document to the shell script
file. An advanced user can use this to modify the exclude
list if a change in what gets deleted by <b>--delete</b> is
desired. A normal user can ignore this detail and just use
the shell script as an easy way to run the appropriate
<b>--read-batch</b> command for the batched data.</p>

<p style="margin-left:11%; margin-top: 1em">The original
batch mode in rsync was based on &quot;rsync+&quot;, but the
latest version uses a new implementation.</p>

<h2>SYMBOLIC LINKS
<a name="SYMBOLIC LINKS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Three basic
behaviors are possible when rsync encounters a symbolic link
in the source directory.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
symbolic links are not transferred at all. A message
&quot;skipping non-regular&quot; file is emitted for any
symlinks that exist.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>--links</b> is specified, then symlinks are recreated
with the same target on the destination. Note that
<b>--archive</b> implies <b>--links</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>--copy-links</b> is specified, then symlinks are
&quot;collapsed&quot; by copying their referent, rather than
the symlink.</p>

<p style="margin-left:11%; margin-top: 1em">Rsync can also
distinguish &quot;safe&quot; and &quot;unsafe&quot; symbolic
links. An example where this might be used is a web site
mirror that wishes to ensure that the rsync module that is
copied does not include symbolic links to <b>/etc/passwd</b>
in the public section of the site. Using
<b>--copy-unsafe-links</b> will cause any links to be copied
as the file they point to on the destination. Using
<b>--safe-links</b> will cause unsafe links to be omitted
altogether. (Note that you must specify <b>--links</b> for
<b>--safe-links</b> to have any effect.)</p>

<p style="margin-left:11%; margin-top: 1em">Symbolic links
are considered unsafe if they are absolute symlinks (start
with <b>/</b>), empty, or if they contain enough
&quot;..&quot; components to ascend from the directory being
copied.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s a
summary of how the symlink options are interpreted. The list
is in order of precedence, so if your combination of options
isn&rsquo;t mentioned, use the first line that is a complete
subset of your options: <b><br>
--copy-links</b></p>

<p style="margin-left:22%;">Turn all symlinks into normal
files (leaving no symlinks for any other options to
affect).</p>


<p style="margin-left:11%;"><b>--links&nbsp;--copy-unsafe-links</b></p>

<p style="margin-left:22%;">Turn all unsafe symlinks into
files and duplicate all safe symlinks.</p>

<p style="margin-left:11%;"><b>--copy-unsafe-links</b></p>

<p style="margin-left:22%;">Turn all unsafe symlinks into
files, noisily skip all safe symlinks.</p>


<p style="margin-left:11%;"><b>--links&nbsp;--safe-links</b></p>

<p style="margin-left:22%;">Duplicate safe symlinks and
skip unsafe ones.</p>

<p style="margin-left:11%;"><b>--links</b></p>

<p style="margin-left:22%;">Duplicate all symlinks.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync
occasionally produces error messages that may seem a little
cryptic. The one that seems to cause the most confusion is
&quot;protocol version mismatch&nbsp;-- is your shell
clean?&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This message is
usually caused by your startup scripts or remote shell
facility producing unwanted garbage on the stream that rsync
is using for its transport. The way to diagnose this problem
is to run your remote shell like this:</p>

<p style="margin-left:17%; margin-top: 1em">ssh remotehost
/bin/true &gt; out.dat</p>

<p style="margin-left:11%; margin-top: 1em">then look at
out.dat. If everything is working correctly then out.dat
should be a zero length file. If you are getting the above
error from rsync then you will probably find that out.dat
contains some text or data. Look at the contents and try to
work out what is producing it. The most common cause is
incorrectly configured shell startup scripts (such as .cshrc
or .profile) that contain output statements for
non-interactive logins.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
having trouble debugging filter patterns, then try
specifying the <b>-vv</b> option. At this level of verbosity
rsync will show why each individual file is included or
excluded.</p>

<h2>EXIT VALUES
<a name="EXIT VALUES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>0</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Success</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>1</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Syntax or usage error</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>2</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Protocol incompatibility</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>3</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Errors selecting input/output files, dirs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>4</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Requested action not supported: an attempt was made to
manipulate 64-bit files on a platform that cannot support
them; or an option was specified that is supported by the
client and not by the server.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>5</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error starting client-server protocol</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>6</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Daemon unable to append to log-file</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>10</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in socket I/O</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>11</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in file I/O</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>12</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in rsync protocol data stream</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>13</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Errors with program diagnostics</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>14</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in IPC code</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>20</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Received SIGUSR1 or SIGINT</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>21</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Some error returned by <b>waitpid()</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>22</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error allocating core memory buffers</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>23</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Partial transfer due to error</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>24</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Partial transfer due to vanished source files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>25</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The --max-delete limit stopped deletions</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>30</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Timeout in data send/receive</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>35</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Timeout waiting for daemon connection</p></td></tr>
</table>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>CVSIGNORE</b></p>

<p style="margin-left:22%;">The CVSIGNORE environment
variable supplements any ignore patterns in .cvsignore
files. See the <b>--cvs-exclude</b> option for more
details.</p>

<p style="margin-left:11%;"><b>RSYNC_ICONV</b></p>

<p style="margin-left:22%;">Specify a default
<b>--iconv</b> setting using this environment variable.
(First supported in 3.0.0.)</p>

<p style="margin-left:11%;"><b>RSYNC_PROTECT_ARGS</b></p>

<p style="margin-left:22%;">Specify a non-zero numeric
value if you want the <b>--protect-args</b> option to be
enabled by default, or a zero value to make sure that it is
disabled by default. (First supported in 3.1.0.)</p>

<p style="margin-left:11%;"><b>RSYNC_RSH</b></p>

<p style="margin-left:22%;">The RSYNC_RSH environment
variable allows you to override the default shell used as
the transport for rsync. Command line options are permitted
after the command name, just as in the <b>-e</b> option.</p>

<p style="margin-left:11%;"><b>RSYNC_PROXY</b></p>

<p style="margin-left:22%;">The RSYNC_PROXY environment
variable allows you to redirect your rsync client to use a
web proxy when connecting to a rsync daemon. You should set
RSYNC_PROXY to a hostname:port pair.</p>

<p style="margin-left:11%;"><b>RSYNC_PASSWORD</b></p>

<p style="margin-left:22%;">Setting RSYNC_PASSWORD to the
required password allows you to run authenticated rsync
connections to an rsync daemon without user intervention.
Note that this does not supply a password to a remote shell
transport such as ssh; to learn how to do that, consult the
remote shell&rsquo;s documentation.</p>

<p style="margin-left:11%;"><b>USER</b> or
<b>LOGNAME</b></p>

<p style="margin-left:22%;">The USER or LOGNAME environment
variables are used to determine the default username sent to
an rsync daemon. If neither is set, the username defaults to
&quot;nobody&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>HOME</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The HOME environment variable is used to find the
user&rsquo;s default .cvsignore file.</p></td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/rsyncd.conf
or rsyncd.conf</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><a href="https://man.page/1/rsync-ssl">rsync-ssl(1)</a>,
<b>rsyncd.conf</b>(5)</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">times are
transferred as *nix time_t values</p>

<p style="margin-left:11%; margin-top: 1em">When
transferring to FAT filesystems rsync may re-sync unmodified
files. See the comments on the <b>--modify-window</b>
option.</p>

<p style="margin-left:11%; margin-top: 1em">file
permissions, devices, etc. are transferred as native
numerical values</p>

<p style="margin-left:11%; margin-top: 1em">see also the
comments on the <b>--delete</b> option</p>

<p style="margin-left:11%; margin-top: 1em">Please report
bugs! See the web site at https://rsync.samba.org/.</p>

<h2>VERSION
<a name="VERSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This man page
is current for version 3.2.3 of rsync.</p>

<h2>INTERNAL OPTIONS
<a name="INTERNAL OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options
<b>--server</b> and <b>--sender</b> are used internally by
rsync, and should never be typed by a user under normal
circumstances. Some awareness of these options may be needed
in certain scenarios, such as when setting up a login that
can only run an rsync command. For instance, the support
directory of the rsync distribution has an example script
named rrsync (for restricted rsync) that can be used with a
restricted ssh login.</p>

<h2>CREDITS
<a name="CREDITS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync is
distributed under the GNU General Public License. See the
file COPYING for details.</p>

<p style="margin-left:11%; margin-top: 1em">A web site is
available at https://rsync.samba.org/. The site includes an
FAQ-O-Matic which may cover questions unanswered by this
manual page.</p>

<p style="margin-left:11%; margin-top: 1em">We would be
delighted to hear from you if you like this program. Please
contact the mailing-list at rsync@lists.samba.org.</p>

<p style="margin-left:11%; margin-top: 1em">This program
uses the excellent zlib compression library written by
Jean-loup Gailly and Mark Adler.</p>

<h2>THANKS
<a name="THANKS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Special thanks
go out to: John Van Essen, Matt McCutchen, Wesley W.
Terpstra, David Dykstra, Jos Backus, Sebastian Krahmer,
Martin Pool, and our gone-but-not-forgotten compadre, J.W.
Schultz.</p>

<p style="margin-left:11%; margin-top: 1em">Thanks also to
Richard Brent, Brendan Mackay, Bill Waite, Stephen Rothwell
and David Bell. I&rsquo;ve probably missed some people, my
apologies if I have.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync was
originally written by Andrew Tridgell and Paul Mackerras.
Many people have later contributed to it. It is currently
maintained by Wayne Davison.</p>

<p style="margin-left:11%; margin-top: 1em">Mailing lists
for support and development are available at
https://lists.samba.org/.</p>
<hr>
</body>
</html>
