<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon Nov  7 04:40:41 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DUPLICITY</title>

</head>
<body>

<h1 align="center">DUPLICITY</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#ACTIONS">ACTIONS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#URL FORMAT">URL FORMAT</a><br>
<a href="#TIME FORMATS">TIME FORMATS</a><br>
<a href="#FILE SELECTION">FILE SELECTION</a><br>
<a href="#A NOTE ON AMAZON DRIVE">A NOTE ON AMAZON DRIVE</a><br>
<a href="#A NOTE ON AMAZON S3">A NOTE ON AMAZON S3</a><br>
<a href="#A NOTE ON AZURE ACCESS">A NOTE ON AZURE ACCESS</a><br>
<a href="#A NOTE ON BOX ACCESS">A NOTE ON BOX ACCESS</a><br>
<a href="#A NOTE ON CLOUD FILES ACCESS">A NOTE ON CLOUD FILES ACCESS</a><br>
<a href="#A NOTE ON DROPBOX ACCESS">A NOTE ON DROPBOX ACCESS</a><br>
<a href="#A NOTE ON EUROPEAN S3 BUCKETS">A NOTE ON EUROPEAN S3 BUCKETS</a><br>
<a href="#A NOTE ON FILENAME PREFIXES">A NOTE ON FILENAME PREFIXES</a><br>
<a href="#A NOTE ON GOOGLE CLOUD STORAGE">A NOTE ON GOOGLE CLOUD STORAGE</a><br>
<a href="#A NOTE ON HUBIC">A NOTE ON HUBIC</a><br>
<a href="#A NOTE ON IMAP">A NOTE ON IMAP</a><br>
<a href="#A NOTE ON MULTI BACKEND">A NOTE ON MULTI BACKEND</a><br>
<a href="#A NOTE ON PAR2 WRAPPER BACKEND">A NOTE ON PAR2 WRAPPER BACKEND</a><br>
<a href="#A NOTE ON PYDRIVE BACKEND">A NOTE ON PYDRIVE BACKEND</a><br>
<a href="#A NOTE ON GDRIVE BACKEND">A NOTE ON GDRIVE BACKEND</a><br>
<a href="#A NOTE ON RCLONE BACKEND">A NOTE ON RCLONE BACKEND</a><br>
<a href="#A NOTE ON SSH BACKENDS">A NOTE ON SSH BACKENDS</a><br>
<a href="#A NOTE ON SSL CERTIFICATE VERIFICATION">A NOTE ON SSL CERTIFICATE VERIFICATION</a><br>
<a href="#A NOTE ON SWIFT (OPENSTACK OBJECT STORAGE) ACCESS">A NOTE ON SWIFT (OPENSTACK OBJECT STORAGE) ACCESS</a><br>
<a href="#A NOTE ON PCA ACCESS">A NOTE ON PCA ACCESS</a><br>
<a href="#A NOTE ON MEDIAFIRE BACKEND">A NOTE ON MEDIAFIRE BACKEND</a><br>
<a href="#A NOTE ON SYMMETRIC ENCRYPTION AND SIGNING">A NOTE ON SYMMETRIC ENCRYPTION AND SIGNING</a><br>
<a href="#KNOWN ISSUES / BUGS">KNOWN ISSUES / BUGS</a><br>
<a href="#OPERATION AND DATA FORMATS">OPERATION AND DATA FORMATS</a><br>
<a href="#REQUIREMENTS">REQUIREMENTS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">duplicity -
Encrypted incremental backup to local or remote storage.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For detailed
descriptions for each command see chapter
<b>ACTIONS</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
[full|incremental]</b> <i>[options]</i> source_directory
target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
verify</b> <i>[options] [--compare-data] [--file-to-restore
&lt;relpath&gt;] [--time time]</i> source_url
target_directory</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
collection-status</b> <i>[options] [--file-changed
&lt;relpath&gt;]</i> target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
list-current-files</b> <i>[options] [--time time]</i>
target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
[restore]</b> <i>[options] [--file-to-restore
&lt;relpath&gt;] [--time time]</i> source_url
target_directory</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
remove-older-than &lt;time&gt;</b> <i>[options]
[--force]</i> target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
remove-all-but-n-full &lt;count&gt;</b> <i>[options]
[--force]</i> target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
remove-all-inc-of-but-n-full &lt;count&gt;</b> <i>[options]
[--force]</i> target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
cleanup</b> <i>[options] [--force]</i> target_url</p>

<p style="margin-left:11%; margin-top: 1em"><b>duplicity
replicate</b> <i>[options] [--time time]</i> source_url
target_url</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Duplicity
incrementally backs up files and folders into tar-format
volumes encrypted with GnuPG and places them to a remote (or
local) storage backend. See chapter <b>URL FORMAT</b> for a
list of all supported backends and how to address them.
Because duplicity uses librsync, incremental backups are
space efficient and only record the parts of files that have
changed since the last backup. Currently duplicity supports
deleted files, full Unix permissions, uid/gid, directories,
symbolic links, fifos, etc., but not hard links.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
backing up the root directory /, remember to --exclude
/proc, or else duplicity will probably crash on the weird
stuff in there.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here is an
example of a backup, using sftp to back up /home/me to
some_dir on the other.host machine:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
/home/me sftp://uid@other.host/some_dir</p>

<p style="margin-left:11%; margin-top: 1em">If the above is
run repeatedly, the first will be a full backup, and
subsequent ones will be incremental. To force a full backup,
use the <i>full</i> action:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity full
/home/me sftp://uid@other.host/some_dir</p>

<p style="margin-left:11%; margin-top: 1em">or enforcing a
full every other time via <i>--full-if-older-than
&lt;time&gt;</i> , e.g. a full every month:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--full-if-older-than 1M /home/me
sftp://uid@other.host/some_dir</p>

<p style="margin-left:11%; margin-top: 1em">Now suppose we
accidentally delete /home/me and want to restore it the way
it was at the time of last backup:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
sftp://uid@other.host/some_dir /home/me</p>

<p style="margin-left:11%; margin-top: 1em">Duplicity
enters restore mode because the URL comes before the local
directory. If we wanted to restore just the file
&quot;Mail/article&quot; in /home/me as it was three days
ago into /home/me/restored_file:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity -t 3D
--file-to-restore Mail/article
sftp://uid@other.host/some_dir /home/me/restored_file</p>

<p style="margin-left:11%; margin-top: 1em">The following
command compares the latest backup with the current
files:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
verify sftp://uid@other.host/some_dir /home/me</p>

<p style="margin-left:11%; margin-top: 1em">Finally,
duplicity recognizes several include/exclude options. For
instance, the following will backup the root directory, but
exclude /mnt, /tmp, and /proc:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--exclude /mnt --exclude /tmp --exclude /proc /
file:///usr/local/backup</p>

<p style="margin-left:11%; margin-top: 1em">Note that in
this case the destination is the local directory
/usr/local/backup. The following will backup only the /home
and /etc directories under root:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--include /home --include /etc --exclude &rsquo;**&rsquo; /
file:///usr/local/backup</p>

<p style="margin-left:11%; margin-top: 1em">Duplicity can
also access a repository via ftp. If a user name is given,
the environment variable FTP_PASSWORD is read to determine
the password:</p>


<p style="margin-left:22%; margin-top: 1em">FTP_PASSWORD=mypassword
duplicity /local/dir ftp://user@other.host/some_dir</p>

<h2>ACTIONS
<a name="ACTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Duplicity knows
action commands, which can be finetuned with options. <br>
The actions for backup (full,incr) and restoration (restore)
can as well be left out as duplicity detects in what mode it
should switch to by the order of target URL and local
folder. If the target URL comes before the local folder a
restore is in order, is the local folder before target URL
then this folder is about to be backed up to the target URL.
<br>
If a backup is in order and old signatures can be found
duplicity automatically performs an incremental backup.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note:</b>
The following explanations explain some but <b>not</b> all
options that can be used in connection with that action
command. Consult the OPTIONS section for more detailed
informations. <b><br>
full</b> <i>&lt;folder&gt; &lt;url&gt;</i></p>

<p style="margin-left:22%;">Perform a full backup. A new
backup chain is started even if signatures are available for
an incremental backup.</p>

<p style="margin-left:11%;"><b>incr</b> <i>&lt;folder&gt;
&lt;url&gt;</i></p>

<p style="margin-left:22%;">If this is requested an
incremental backup will be performed. Duplicity will abort
if no old signatures can be found.</p>

<p style="margin-left:11%;"><b>verify</b>
<i>[--compare-data] [--time &lt;time&gt;] [--file-to-restore
&lt;rel_path&gt;] <br>
&lt;url&gt; &lt;local_path&gt;</i></p>

<p style="margin-left:22%;">Verify tests the integrity of
the backup archives at the remote location by downloading
each file and checking both that it can restore the archive
and that the restored file matches the signature of that
file stored in the backup, i.e. compares the archived file
with its hash value from archival time. Verify does not
actually restore and will not overwrite any local files.
Duplicity will exit with a non-zero error level if any files
do not match the signature stored in the archive for that
file. On verbosity level 4 or higher, it will log a message
for each file that differs from the stored signature. Files
must be downloaded to the local machine in order to compare
them. Verify does not compare the backed-up version of the
file to the current local copy of the files unless the
--compare-data option is used (see below). <br>
The <i>--file-to-restore</i> option restricts verify to that
file or folder. The <i>--time</i> option allows to select a
backup to verify. The <i>--compare-data</i> option enables
data comparison (see below).</p>

<p style="margin-left:11%;"><b>collection-status</b>
<i>[--file-changed
&lt;relpath&gt;]</i><b>&lt;url&gt;</b></p>

<p style="margin-left:22%;">Summarize the status of the
backup repository by printing the chains and sets found, and
the number of volumes in each.</p>

<p style="margin-left:11%;"><b>list-current-files</b>
<i>[--time &lt;time&gt;] &lt;url&gt;</i></p>

<p style="margin-left:22%;">Lists the files contained in
the most current backup or backup at time. The information
will be extracted from the signature files, not the archive
data itself. Thus the whole archive does not have to be
downloaded, but on the other hand if the archive has been
deleted or corrupted, this command will not detect it.</p>

<p style="margin-left:11%;"><b>restore</b>
<i>[--file-to-restore &lt;relpath&gt;] [--time &lt;time&gt;]
&lt;url&gt; <br>
&lt;target_folder&gt;</i></p>

<p style="margin-left:22%;">You can restore the full monty
or selected folders/files from a specific time. Use the
relative path as it is printed by <b>list-current-files</b>.
Usually not needed as duplicity enters restore mode when it
detects that the URL comes before the local folder.</p>

<p style="margin-left:11%;"><b>remove-older-than</b>
<i>&lt;time&gt; [--force] &lt;url&gt;</i></p>

<p style="margin-left:22%;">Delete all backup sets older
than the given time. Old backup sets will not be deleted if
backup sets newer than <i>time</i> depend on them. See the
<b>TIME FORMATS</b> section for more information. Note, this
action cannot be combined with backup or other actions, such
as cleanup. Note also that <i>--force</i> will be needed to
delete the files instead of just listing them.</p>

<p style="margin-left:11%;"><b>remove-all-but-n-full</b>
<i>&lt;count&gt; [--force] &lt;url&gt;</i></p>

<p style="margin-left:22%;">Delete all backups sets that
are older than the count:th last full backup (in other
words, keep the last <i>count</i> full backups and
associated incremental sets). <i>count</i> must be larger
than zero. A value of 1 means that only the single most
recent backup chain will be kept. Note that <i>--force</i>
will be needed to delete the files instead of just listing
them.</p>


<p style="margin-left:11%;"><b>remove-all-inc-of-but-n-full</b>
<i>&lt;count&gt; [--force] &lt;url&gt;</i></p>

<p style="margin-left:22%;">Delete incremental sets of all
backups sets that are older than the count:th last full
backup (in other words, keep only old full backups and not
their increments). <i>count</i> must be larger than zero. A
value of 1 means that only the single most recent backup
chain will be kept intact. Note that <i>--force</i> will be
needed to delete the files instead of just listing them.</p>

<p style="margin-left:11%;"><b>cleanup</b> <i>[--force]
&lt;url&gt;</i></p>

<p style="margin-left:22%;">Delete the extraneous duplicity
files on the given backend. Non-duplicity files, or files in
complete data sets will not be deleted. This should only be
necessary after a duplicity session fails or is aborted
prematurely. Note that <i>--force</i> will be needed to
delete the files instead of just listing them.</p>

<p style="margin-left:11%;"><b>replicate</b> <i>[--time
time] &lt;source_url&gt; &lt;target_url&gt;</i></p>

<p style="margin-left:22%;">Replicate backup sets from
source to target backend. Files will be (re)-encrypted and
(re)-compressed depending on normal backend options.
Signatures and volumes will not get recomputed, thus options
like <b>--volsize</b> or <b>--max-blocksize</b> have no
effect. When <i>--time time</i> is given, only backup sets
older than time will be replicated.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>--allow-source-mismatch</b></p>

<p style="margin-left:22%;">Do not abort on attempts to use
the same archive dir or remote backend to back up different
directories. duplicity will tell you if you need this
switch.</p>

<p style="margin-left:11%;"><b>--archive-dir</b>
<i>path</i></p>

<p style="margin-left:22%;">The archive directory.
<b>NOTE:</b> This option changed in 0.6.0. The archive
directory is now necessary in order to manage persistence
for current and future enhancements. As such, this option is
now used only to change the location of the archive
directory. The archive directory should <b>not</b> be
deleted, or duplicity will have to recreate it from the
remote repository (which may require decrypting the backup
contents).</p>

<p style="margin-left:22%; margin-top: 1em">When backing up
or restoring, this option specifies that the local archive
directory is to be created in <i>path</i>. If the archive
directory is not specified, the default will be to create
the archive directory in <i>~/.cache/duplicity/</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The archive
directory can be shared between backups to multiple targets,
because a subdirectory of the archive dir is used for
individual backups (see <b>--name</b> ).</p>

<p style="margin-left:22%; margin-top: 1em">The combination
of archive directory and backup name must be unique in order
to separate the data of different backups.</p>

<p style="margin-left:22%; margin-top: 1em">The interaction
between the <b>--archive-dir</b> and the <b>--name</b>
options allows for four possible combinations for the
location of the archive dir:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>1.</p></td>
<td width="7%"></td>
<td width="42%">


<p>neither specified (default)</p></td>
<td width="26%">
</td></tr>
</table>


<p style="margin-left:32%;">~/.cache/duplicity/<i>hash-of-url</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="7%"></td>
<td width="46%">


<p style="margin-top: 1em">--archive-dir=/arch, no
--name</p> </td>
<td width="22%">
</td></tr>
</table>

<p style="margin-left:32%;">/arch/<i>hash-of-url</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">3.</p></td>
<td width="7%"></td>
<td width="43%">


<p style="margin-top: 1em">no --archive-dir, --name=foo</p></td>
<td width="25%">
</td></tr>
</table>

<p style="margin-left:32%;">~/.cache/duplicity/foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">4.</p></td>
<td width="7%"></td>
<td width="48%">


<p style="margin-top: 1em">--archive-dir=/arch,
--name=foo</p> </td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:32%;">/arch/foo</p>


<p style="margin-left:11%;"><b>--asynchronous-upload</b></p>

<p style="margin-left:22%;">(EXPERIMENTAL) Perform file
uploads asynchronously in the background, with respect to
volume creation. This means that duplicity can upload a
volume while, at the same time, preparing the next volume
for upload. The intended end-result is a faster backup,
because the local CPU and your bandwidth can be more
consistently utilized. Use of this option implies additional
need for disk space in the temporary storage location;
rather than needing to store only one volume at a time,
enough storage space is required to store two volumes.</p>

<p style="margin-left:11%;"><b>--backend-retry-delay</b>
<i>number</i></p>

<p style="margin-left:22%;">Specifies the number of seconds
that duplicity waits after an error has occured before
attempting to repeat the operation.</p>

<p style="margin-left:11%;"><b>--cf-backend</b>
<i>backend</i></p>

<p style="margin-left:22%;">Allows the explicit selection
of a cloudfiles backend. Defaults to <b>pyrax</b>.
Alternatively you might choose <b>cloudfiles</b>.</p>

<p style="margin-left:11%;"><b>--b2-hide-files</b></p>

<p style="margin-left:22%;">Causes Duplicity to hide files
in B2 instead of deleting them. Useful in combination with
B2&rsquo;s lifecycle rules.</p>

<p style="margin-left:11%;"><b>--compare-data</b></p>

<p style="margin-left:22%;">Enable data comparison of
regular files on action verify. This conducts a verify as
described above to verify the integrity of the backup
archives, but additionally compares restored files to those
in target_directory. Duplicity will not replace any files in
target_directory. Duplicity will exit with a non-zero error
level if the files do not correctly verify or if any files
from the archive differ from those in target_directory. On
verbosity level 4 or higher, it will log a message for each
file that differs from its equivalent in
target_directory.</p>

<p style="margin-left:11%;"><b>--copy-links</b></p>

<p style="margin-left:22%;">Resolve symlinks during backup.
Enabling this will resolve &amp; back up the symlink&rsquo;s
file/folder data instead of the symlink itself, potentially
increasing the size of the backup.</p>

<p style="margin-left:11%;"><b>--dry-run</b></p>

<p style="margin-left:22%;">Calculate what would be done,
but do not perform any backend actions</p>

<p style="margin-left:11%;"><b>--encrypt-key</b>
<i>key-id</i></p>

<p style="margin-left:22%;">When backing up, encrypt to the
given public key, instead of using symmetric (traditional)
encryption. Can be specified multiple times. The key-id can
be given in any of the formats supported by GnuPG; see
<b>gpg</b>(1), section &quot;HOW TO SPECIFY A USER ID&quot;
for details.</p>


<p style="margin-left:11%;"><b>--encrypt-secret-keyring</b>
<i>filename</i></p>

<p style="margin-left:22%;">This option can only be used
with <b>--encrypt-key</b>, and changes the path to the
secret keyring for the encrypt key to <i>filename</i> This
keyring is not used when creating a backup. If not
specified, the default secret keyring is used which is
usually located at .gnupg/secring.gpg</p>

<p style="margin-left:11%;"><b>--encrypt-sign-key</b>
<i>key-id</i></p>

<p style="margin-left:22%;">Convenience parameter. Same as
<b>--encrypt-key</b> <i>key-id</i> <b>--sign-key</b>
<i>key-id</i>.</p>

<p style="margin-left:11%;"><b>--exclude</b>
<i>shell_pattern</i></p>

<p style="margin-left:22%;">Exclude the file or files
matched by <i>shell_pattern</i>. If a directory is matched,
then files under that directory will also be matched. See
the <b>FILE SELECTION</b> section for more information.</p>


<p style="margin-left:11%;"><b>--exclude-device-files</b></p>

<p style="margin-left:22%;">Exclude all device files. This
can be useful for security/permissions reasons or if
duplicity is not handling device files correctly.</p>

<p style="margin-left:11%;"><b>--exclude-filelist</b>
<i>filename</i></p>

<p style="margin-left:22%;">Excludes the files listed in
<i>filename,</i> with each line of the filelist interpreted
according to the same rules as <b>--include</b> and
<b>--exclude.</b> See the <b>FILE SELECTION</b> section for
more information.</p>

<p style="margin-left:11%;"><b>--exclude-if-present</b>
filename</p>

<p style="margin-left:22%;">Exclude directories if filename
is present. Allows the user to specify folders that they do
not wish to backup by adding a specified file (e.g.
&quot;.nobackup&quot;) instead of maintaining a
comprehensive exclude/include list.</p>

<p style="margin-left:11%;"><b>--exclude-older-than</b>
time</p>

<p style="margin-left:22%;">Exclude any files whose
modification date is earlier than the specified <i>time</i>.
This can be used to produce a partial backup that contains
only recently changed files. See the <b>TIME FORMATS</b>
section for more information.</p>


<p style="margin-left:11%;"><b>--exclude-other-filesystems</b></p>

<p style="margin-left:22%;">Exclude files on file systems
(identified by device number) other than the file system the
root of the source directory is on.</p>

<p style="margin-left:11%;"><b>--exclude-regexp</b>
<i>regexp</i></p>

<p style="margin-left:22%;">Exclude files matching the
given regexp. Unlike the <b>--exclude</b> option, this
option does not match files in a directory it matches. See
the <b>FILE SELECTION</b> section for more information.</p>

<p style="margin-left:11%;"><b>--file-prefix,
--file-prefix-manifest, --file-prefix-archive, <br>
--file-prefix-signature</b></p>

<p style="margin-left:22%;">Adds a prefix to all files,
manifest files, archive files, and/or signature files.</p>

<p style="margin-left:22%; margin-top: 1em">The same set of
prefixes must be passed in on backup and restore.</p>

<p style="margin-left:22%; margin-top: 1em">If both global
and type-specific prefixes are set, global prefix will go
before type-specific prefixes.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON FILENAME PREFIXES</b></p>

<p style="margin-left:11%;"><b>--file-to-restore</b>
<i>path</i></p>

<p style="margin-left:22%;">This option may be given in
restore mode, causing only <i>path</i> to be restored
instead of the entire contents of the backup archive.
<i>path</i> should be given relative to the root of the
directory backed up.</p>

<p style="margin-left:11%;"><b>--full-if-older-than</b>
<i>time</i></p>

<p style="margin-left:22%;">Perform a full backup if an
incremental backup is requested, but the latest full backup
in the collection is older than the given <i>time</i>. See
the <b>TIME FORMATS</b> section for more information.</p>

<p style="margin-left:11%;"><b>--force</b></p>

<p style="margin-left:22%;">Proceed even if data loss might
result. Duplicity will let the user know when this option is
required.</p>

<p style="margin-left:11%;"><b>--ftp-passive</b></p>

<p style="margin-left:22%;">Use passive (PASV) data
connections. The default is to use passive, but to fallback
to regular if the passive connection fails or times out.</p>

<p style="margin-left:11%;"><b>--ftp-regular</b></p>

<p style="margin-left:22%;">Use regular (PORT) data
connections.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>--gio</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Use the GIO backend and interpret any URLs as GIO
would.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>--hidden-encrypt-key</b>
<i>key-id</i></p>

<p style="margin-left:22%;">Same as <b>--encrypt-key</b>,
but it hides user&rsquo;s key id from encrypted file. It
uses the gpg&rsquo;s <b>--hidden-recipient</b> command to
obfuscate the owner of the backup. On restore, gpg will
automatically try all available secret keys in order to
decrypt the backup. See gpg(1) for more details.</p>

<p style="margin-left:11%;"><b>--ignore-errors</b></p>

<p style="margin-left:22%;">Try to ignore certain errors if
they happen. This option is only intended to allow the
restoration of a backup in the face of certain problems that
would otherwise cause the backup to fail. It is not ever
recommended to use this option unless you have a situation
where you are trying to restore from backup and it is
failing because of an issue which you want duplicity to
ignore. Even then, depending on the issue, this option may
not have an effect.</p>

<p style="margin-left:22%; margin-top: 1em">Please note
that while ignored errors will be logged, there will be no
summary at the end of the operation to tell you what was
ignored, if anything. If this is used for emergency
restoration of data, it is recommended that you run the
backup in such a way that you can revisit the backup log
(look for lines containing the string IGNORED_ERROR).</p>

<p style="margin-left:22%; margin-top: 1em">If you ever
have to use this option for reasons that are not understood
or understood but not your own responsibility, please
contact duplicity maintainers. The need to use this option
under production circumstances would normally be considered
a bug.</p>

<p style="margin-left:11%;"><b>--imap-full-address</b>
<i>email_address</i></p>

<p style="margin-left:22%;">The full email address of the
user name when logging into an imap server. If not supplied
just the user name part of the email address is used.</p>

<p style="margin-left:11%;"><b>--imap-mailbox</b>
<i>option</i></p>

<p style="margin-left:22%;">Allows you to specify a
different mailbox. The default is &quot;INBOX&quot;. Other
languages may require a different mailbox than the
default.</p>

<p style="margin-left:11%;"><b>--gpg-binary</b>
<i>file_path</i></p>

<p style="margin-left:22%;">Allows you to force duplicity
to use <i>file_path</i> as gpg command line binary. Can be
an absolute or relative file path or a file name. Default
value is &rsquo;gpg&rsquo;. The binary will be localized via
the PATH environment variable.</p>

<p style="margin-left:11%;"><b>--gpg-options</b>
<i>options</i></p>

<p style="margin-left:22%;">Allows you to pass options to
gpg encryption. The <i>options</i> list should be of the
form &quot;--opt1 --opt2=parm&quot; where the string is
quoted and the only spaces allowed are between options.</p>

<p style="margin-left:11%;"><b>--include</b>
<i>shell_pattern</i></p>

<p style="margin-left:22%;">Similar to <b>--exclude</b> but
include matched files instead. Unlike <b>--exclude</b>, this
option will also match parent directories of matched files
(although not necessarily their contents). See the <b>FILE
SELECTION</b> section for more information.</p>

<p style="margin-left:11%;"><b>--include-filelist</b>
<i>filename</i></p>

<p style="margin-left:22%;">Like <b>--exclude-filelist</b>,
but include the listed files instead. See the <b>FILE
SELECTION</b> section for more information.</p>

<p style="margin-left:11%;"><b>--include-regexp</b>
<i>regexp</i></p>

<p style="margin-left:22%;">Include files matching the
regular expression <i>regexp</i>. Only files explicitly
matched by <i>regexp</i> will be included by this option.
See the <b>FILE SELECTION</b> section for more
information.</p>

<p style="margin-left:11%;"><b>--log-fd</b>
<i>number</i></p>

<p style="margin-left:22%;">Write specially-formatted
versions of output messages to the specified file
descriptor. The format used is designed to be easily
consumable by other programs.</p>

<p style="margin-left:11%;"><b>--log-file</b>
<i>filename</i></p>

<p style="margin-left:22%;">Write specially-formatted
versions of output messages to the specified file. The
format used is designed to be easily consumable by other
programs.</p>

<p style="margin-left:11%;"><b>--max-blocksize</b>
<i>number</i></p>

<p style="margin-left:22%;">determines the number of the
blocks examined for changes during the diff process. For
files &lt; 1MB the blocksize is a constant of 512. For files
over 1MB the size is given by:</p>

<p style="margin-left:22%; margin-top: 1em">file_blocksize
= int((file_len / (2000 * 512)) * 512) <br>
return min(file_blocksize, config.max_blocksize)</p>

<p style="margin-left:22%; margin-top: 1em">where
config.max_blocksize defaults to 2048. If you specify a
larger max_blocksize, your difftar files will be larger, but
your sigtar files will be smaller. If you specify a smaller
max_blocksize, the reverse occurs. The --max-blocksize
option should be in multiples of 512.</p>

<p style="margin-left:11%;"><b>--name</b>
<i>symbolicname</i></p>

<p style="margin-left:22%;">Set the symbolic name of the
backup being operated on. The intent is to use a separate
name for each logically distinct backup. For example,
someone may use &quot;home_daily_s3&quot; for the daily
backup of a home directory to Amazon S3. The structure of
the name is up to the user, it is only important that the
names be distinct. The symbolic name is currently only used
to affect the expansion of <b>--archive-dir</b> , but may be
used for additional features in the future. Users running
more than one distinct backup are encouraged to use this
option.</p>

<p style="margin-left:22%; margin-top: 1em">If not
specified, the default value is a hash of the backend
URL.</p>

<p style="margin-left:11%;"><b>--no-compression</b></p>

<p style="margin-left:22%;">Do not use GZip to compress
files on remote system.</p>

<p style="margin-left:11%;"><b>--no-encryption</b></p>

<p style="margin-left:22%;">Do not use GnuPG to encrypt
files on remote system.</p>


<p style="margin-left:11%;"><b>--no-print-statistics</b></p>

<p style="margin-left:22%;">By default duplicity will print
statistics about the current session after a successful
backup. This switch disables that behavior.</p>

<p style="margin-left:11%;"><b>--null-separator</b></p>

<p style="margin-left:22%;">Use nulls (\0) instead of
newlines (\n) as line separators, which may help when
dealing with filenames containing newlines. This affects the
expected format of the files specified by the
--{include|exclude}-filelist switches as well as the format
of the directory statistics file.</p>

<p style="margin-left:11%;"><b>--numeric-owner</b></p>

<p style="margin-left:22%;">On restore always use the
numeric uid/gid from the archive and not the archived
user/group names, which is the default behaviour.
Recommended for restoring from live cds which might have the
users with identical names but different uids/gids.</p>


<p style="margin-left:11%;"><b>--do-not-restore-ownership</b></p>

<p style="margin-left:22%;">Ignores the uid/gid from the
archive and keeps the current user&rsquo;s one. Recommended
for restoring data to mounted filesystem which do not
support Unix ownership or when root privileges are not
available.</p>

<p style="margin-left:11%;"><b>--num-retries</b>
<i>number</i></p>

<p style="margin-left:22%;">Number of retries to make on
errors before giving up.</p>

<p style="margin-left:11%;"><b>--old-filenames</b></p>

<p style="margin-left:22%;">Use the old filename format
(incompatible with Windows/Samba) rather than the new
filename format.</p>

<p style="margin-left:11%;"><b>--par2-options</b>
<i>options</i></p>

<p style="margin-left:22%;">Verbatim options to pass to
par2.</p>

<p style="margin-left:11%;"><b>--par2-redundancy</b>
<i>percent</i></p>

<p style="margin-left:22%;">Adjust the level of redundancy
in <i>percent</i> for Par2 recovery files (default 10%).</p>

<p style="margin-left:11%;"><b>--progress</b></p>

<p style="margin-left:22%;">When selected, duplicity will
output the current upload progress and estimated upload
time. To annotate changes, it will perform a first dry-run
before a full or incremental, and then runs the real
operation estimating the real upload progress.</p>

<p style="margin-left:11%;"><b>--progress-rate</b>
<i>number</i></p>

<p style="margin-left:22%;">Sets the update rate at which
duplicity will output the upload progress messages (requires
<b>--progress</b> option). Default is to print the status
each 3 seconds.</p>

<p style="margin-left:11%;"><b>--rename</b> <i>&lt;original
path&gt; &lt;new path&gt;</i></p>

<p style="margin-left:22%;">Treats the path <i>orig</i> in
the backup as if it were the path <i>new.</i> Can be passed
multiple times. An example:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
restore --rename Documents/metal Music/metal
sftp://uid@other.host/some_dir /home/me</p>

<p style="margin-left:11%;"><b>--rsync-options</b>
<i>options</i></p>

<p style="margin-left:22%;">Allows you to pass options to
the rsync backend. The <i>options</i> list should be of the
form &quot;opt1=parm1 opt2=parm2&quot; where the option
string is quoted and the only spaces allowed are between
options. The option string will be passed verbatim to rsync,
after any internally generated option designating the remote
port to use. Here is a possibly useful example:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--rsync-options=&quot;--partial-dir=.rsync-partial&quot;
/home/me rsync://uid@other.host/some_dir</p>


<p style="margin-left:11%;"><b>--s3-european-buckets</b></p>

<p style="margin-left:22%;">When using the Amazon S3
backend, create buckets in Europe instead of the default
(requires <b>--s3-use-new-style</b> ). Also see the
<b>EUROPEAN S3 BUCKETS</b> section.</p>

<p style="margin-left:22%; margin-top: 1em">This option
does not apply when using the newer boto3 backend, which
does not create buckets.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>


<p style="margin-left:11%;"><b>--s3-unencrypted-connection</b></p>

<p style="margin-left:22%;">Don&rsquo;t use SSL for
connections to S3.</p>

<p style="margin-left:22%; margin-top: 1em">This may be
much faster, at some cost to confidentiality.</p>

<p style="margin-left:22%; margin-top: 1em">With this
option, anyone who can observe traffic between your computer
and S3 will be able to tell: that you are using Duplicity,
the name of the bucket, your AWS Access Key ID, the
increment dates and the amount of data in each
increment.</p>

<p style="margin-left:22%; margin-top: 1em">This option
affects only the connection, not the GPG encryption of the
backup increment files. Unless that is disabled, an observer
will not be able to see the file names or contents.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
not available when using the newer boto3 backend.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>

<p style="margin-left:11%;"><b>--s3-use-new-style</b></p>

<p style="margin-left:22%;">When operating on Amazon S3
buckets, use new-style subdomain bucket addressing. This is
now the preferred method to access Amazon S3, but is not
backwards compatible if your bucket name contains upper-case
characters or other characters that are not valid in a
hostname.</p>

<p style="margin-left:22%; margin-top: 1em">This option has
no effect when using the newer boto3 backend, which will
always use new style subdomain bucket naming.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>

<p style="margin-left:11%;"><b>--s3-use-rrs</b></p>

<p style="margin-left:22%;">Store volumes using Reduced
Redundancy Storage when uploading to Amazon S3. This will
lower the cost of storage but also lower the durability of
stored volumes to 99.99% instead the 99.999999999%
durability offered by Standard Storage on S3.</p>

<p style="margin-left:11%;"><b>--s3-use-ia</b></p>

<p style="margin-left:22%;">Store volumes using Standard -
Infrequent Access when uploading to Amazon S3. This storage
class has a lower storage cost but a higher per-request
cost, and the storage cost is calculated against a 30-day
storage minimum. According to Amazon, this storage is ideal
for long-term file storage, backups, and disaster
recovery.</p>

<p style="margin-left:11%;"><b>--s3-use-onezone-ia</b></p>

<p style="margin-left:22%;">Store volumes using One Zone -
Infrequent Access when uploading to Amazon S3. This storage
is similar to Standard - Infrequent Access, but only stores
object data in one Availability Zone.</p>

<p style="margin-left:11%;"><b>--s3-use-glacier</b></p>

<p style="margin-left:22%;">Store volumes using Glacier S3
when uploading to Amazon S3. This storage class has a lower
cost of storage but a higher per-request cost along with
delays of up to 12 hours from the time of retrieval request.
This storage cost is calculated against a 90-day storage
minimum. According to Amazon this storage is ideal for data
archiving and long-term backup offering 99.999999999%
durability. To restore a backup you will have to manually
migrate all data stored on AWS Glacier back to Standard S3
and wait for AWS to complete the migration. <b>Notice:</b>
Duplicity will store the manifest.gpg files from full and
incremental backups on AWS S3 standard storage to allow
quick retrieval for later incremental backups, all other
data is stored in S3 Glacier.</p>


<p style="margin-left:11%;"><b>--s3-use-deep-archive</b></p>

<p style="margin-left:22%;">Store volumes using Glacier
Deep Archive S3 when uploading to Amazon S3. This storage
class has a lower cost of storage but a higher per-request
cost along with delays of up to 48 hours from the time of
retrieval request. This storage cost is calculated against a
180-day storage minimum. According to Amazon this storage is
ideal for data archiving and long-term backup offering
99.999999999% durability. To restore a backup you will have
to manually migrate all data stored on AWS Glacier Deep
Archive back to Standard S3 and wait for AWS to complete the
migration. <b>Notice:</b> Duplicity will store the
manifest.gpg files from full and incremental backups on AWS
S3 standard storage to allow quick retrieval for later
incremental backups, all other data is stored in S3 Glacier
Deep Archive.</p>

<p style="margin-left:22%; margin-top: 1em">Glacier Deep
Archive is only available when using the newer boto3
backend.</p>


<p style="margin-left:11%;"><b>--s3-use-multiprocessing</b></p>

<p style="margin-left:22%;">Allow multipart volumne uploads
to S3 through multiprocessing. This option requires Python
2.6 and can be used to make uploads to S3 more efficient. If
enabled, files duplicity uploads to S3 will be split into
chunks and uploaded in parallel. Useful if you want to
saturate your bandwidth or if large files are failing during
upload.</p>

<p style="margin-left:22%; margin-top: 1em">This has no
effect when using the newer boto3 backend. Boto3 always
attempts to multiprocessing when it is believed it will be
more efficient.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>


<p style="margin-left:11%;"><b>--s3-use-server-side-encryption</b></p>

<p style="margin-left:22%;">Allow use of server side
encryption in S3</p>


<p style="margin-left:11%;"><b>--s3-multipart-chunk-size</b></p>

<p style="margin-left:22%;">Chunk size (in MB) used for S3
multipart uploads. Make this smaller than <b>--volsize</b>
to maximize the use of your bandwidth. For example, a chunk
size of 10MB with a volsize of 30MB will result in 3 chunks
per volume upload.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>


<p style="margin-left:11%;"><b>--s3-multipart-max-procs</b></p>

<p style="margin-left:22%;">Specify the maximum number of
processes to spawn when performing a multipart upload to S3.
By default, this will choose the number of processors
detected on your system (e.g. 4 for a 4-core system). You
can adjust this number as required to ensure you don&rsquo;t
overload your system while maximizing the use of your
bandwidth.</p>

<p style="margin-left:22%; margin-top: 1em">This has no
effect when using the newer boto3 backend.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>


<p style="margin-left:11%;"><b>--s3-multipart-max-timeout</b></p>

<p style="margin-left:22%;">You can control the maximum
time (in seconds) a multipart upload can spend on uploading
a single chunk to S3. This may be useful if you find your
system hanging on multipart uploads or if you&rsquo;d like
to control the time variance when uploading to S3 to ensure
you kill connections to slow S3 endpoints.</p>

<p style="margin-left:22%; margin-top: 1em">This has no
effect when using the newer boto3 backend.</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON S3</b> below.</p>

<p style="margin-left:11%;"><b>--s3-region-name</b></p>

<p style="margin-left:22%;">Specifies the region of the S3
storage.</p>

<p style="margin-left:22%; margin-top: 1em">This is
currently only used in the newer boto3 backend.</p>

<p style="margin-left:11%;"><b>--s3-endpoint-url</b></p>

<p style="margin-left:22%;">Specifies the endpoint URL of
the S3 storage.</p>

<p style="margin-left:22%; margin-top: 1em">This is
currently only used in the newer boto3 backend.</p>

<p style="margin-left:11%;"><b>--azure-blob-tier</b></p>

<p style="margin-left:22%;">Standard storage tier used for
backup files (Hot|Cool|Archive).</p>


<p style="margin-left:11%;"><b>--azure-max-single-put-size</b></p>

<p style="margin-left:22%;">Specify the number of the
largest supported upload size where the Azure library makes
only one put call. If the content size is known and below
this value the Azure library will only perform one put
request to upload one block. The number is expected to be in
bytes.</p>


<p style="margin-left:11%;"><b>--azure-max-block-size</b></p>

<p style="margin-left:22%;">Specify the number for the
block size used by the Azure library to upload blobs if it
is split into multiple blocks. The maximum block size the
service supports is 104857600 (100MiB) and the default is
4194304 (4MiB)</p>


<p style="margin-left:11%;"><b>--azure-max-connections</b></p>

<p style="margin-left:22%;">Specify the number of maximum
connections to transfer one blob to Azure blob size exceeds
64MB. The default values is 2.</p>

<p style="margin-left:11%;"><b>--scp-command</b>
<i>command</i></p>

<p style="margin-left:22%;"><b>(only ssh pexpect backend
with --use-scp enabled)</b> The <i>command</i> will be used
instead of &quot;scp&quot; to send or receive files. To list
and delete existing files, the sftp command is used. <br>
See also <b>A NOTE ON SSH BACKENDS</b> section <b>SSH
pexpect backend</b>.</p>

<p style="margin-left:11%;"><b>--sftp-command</b>
<i>command</i></p>

<p style="margin-left:22%;"><b>(only ssh pexpect
backend)</b> The <i>command</i> will be used instead of
&quot;sftp&quot;. <br>
See also <b>A NOTE ON SSH BACKENDS</b> section <b>SSH
pexpect backend</b>.</p>

<p style="margin-left:11%;"><b>--short-filenames</b></p>

<p style="margin-left:22%;">If this option is specified,
the names of the files duplicity writes will be shorter
(about 30 chars) but less understandable. This may be useful
when backing up to MacOS or another OS or FS that
doesn&rsquo;t support long filenames.</p>

<p style="margin-left:11%;"><b>--sign-key</b>
<i>key-id</i></p>

<p style="margin-left:22%;">This option can be used when
backing up, restoring or verifying. When backing up, all
backup files will be signed with keyid <i>key</i>. When
restoring, duplicity will signal an error if any remote file
is not signed with the given key-id. The key-id can be given
in any of the formats supported by GnuPG; see <b>gpg</b>(1),
section &quot;HOW TO SPECIFY A USER ID&quot; for details.
Should be specified only once because currently only
<b>one</b> signing key is supported. Last entry overrides
all other entries. <br>
See also <b>A NOTE ON SYMMETRIC ENCRYPTION AND
SIGNING</b></p>

<p style="margin-left:11%;"><b>--ssh-askpass</b></p>

<p style="margin-left:22%;">Tells the ssh backend to prompt
the user for the remote system password, if it was not
defined in target url and no FTP_PASSWORD env var is set.
This password is also used for passphrase-protected ssh
keys.</p>

<p style="margin-left:11%;"><b>--ssh-options</b>
<i>options</i></p>

<p style="margin-left:22%;">Allows you to pass options to
the ssh backend. Can be specified multiple times or as a
space separated options list. The <i>options</i> list should
be of the form &quot;-oOpt1=&rsquo;parm1&rsquo;
-oOpt2=&rsquo;parm2&rsquo;&quot; where the option string is
quoted and the only spaces allowed are between options. The
option string will be passed verbatim to both scp and sftp,
whose command line syntax differs slightly hence the options
should therefore be given in the long option format
described in <b>ssh_config(5).</b></p>

<p style="margin-left:22%; margin-top: 1em">example of a
list:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--ssh-options=&quot;-oProtocol=2
-oIdentityFile=&rsquo;/my/backup/id&rsquo;&quot; /home/me
scp://user@host/some_dir</p>

<p style="margin-left:22%; margin-top: 1em">example with
multiple parameters:</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--ssh-options=&quot;-oProtocol=2&quot;
--ssh-options=&quot;-oIdentityFile=&rsquo;/my/backup/id&rsquo;&quot;
/home/me scp://user@host/some_dir</p>

<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b>
The <i>ssh paramiko backend</i> currently supports only the
<b>-i</b> or <b>-oIdentityFile</b> or
<b>-oUserKnownHostsFile</b> or <b>-oGlobalKnownHostsFile</b>
settings. If needed provide more host specific options via
ssh_config file.</p>

<p style="margin-left:11%;"><b>--ssl-cacert-file</b>
<i>file</i></p>

<p style="margin-left:22%;"><b>(only webdav &amp; lftp
backend)</b> Provide a cacert file for ssl certificate
verification. <br>
See also <b>A NOTE ON SSL CERTIFICATE VERIFICATION</b>.</p>

<p style="margin-left:11%;"><b>--ssl-cacert-path</b>
<i>path/to/certs/</i></p>

<p style="margin-left:22%;"><b>(only webdav backend and
python 2.7.9+ OR lftp+webdavs and a recent lftp)</b> Provide
a path to a folder containing cacert files for ssl
certificate verification. <br>
See also <b>A NOTE ON SSL CERTIFICATE VERIFICATION</b>.</p>


<p style="margin-left:11%;"><b>--ssl-no-check-certificate</b></p>

<p style="margin-left:22%;"><b>(only webdav &amp; lftp
backend)</b> Disable ssl certificate verification. <br>
See also <b>A NOTE ON SSL CERTIFICATE VERIFICATION</b>.</p>


<p style="margin-left:11%;"><b>--swift-storage-policy</b></p>

<p style="margin-left:22%;">Use this storage policy when
operating on Swift containers. <br>
See also <b>A NOTE ON SWIFT (OPENSTACK OBJECT STORAGE)
ACCESS</b>.</p>

<p style="margin-left:11%;"><b>--metadata-sync-mode</b>
<i>mode</i></p>

<p style="margin-left:22%;">This option defaults to
&rsquo;partial&rsquo;, but you can set it to
&rsquo;full&rsquo; <br>
Use &rsquo;partial&rsquo; to avoid syncing metadata for
backup chains that you are not going to use. This saves time
when restoring for the first time, and lets you restore an
old backup that was encrypted with a different passphrase by
supplying only the target passphrase. <br>
Use &rsquo;full&rsquo; to sync metadata for all backup
chains on the remote.</p>

<p style="margin-left:11%;"><b>--tempdir</b>
<i>directory</i></p>

<p style="margin-left:22%;">Use this existing directory for
duplicity temporary files instead of the system default,
which is usually the /tmp directory. This option supersedes
any environment variable. <br>
See also <b>ENVIRONMENT VARIABLES</b>.</p>

<p style="margin-left:11%;"><b>-t</b><i>time</i><b>,
--time</b> <i>time</i><b>, --restore-time</b>
<i>time</i></p>

<p style="margin-left:22%;">Specify the time from which to
restore or list files.</p>

<p style="margin-left:11%;"><b>--time-separator</b>
<i>char</i></p>

<p style="margin-left:22%;">Use <i>char</i> as the time
separator in filenames instead of colon (&quot;:&quot;).</p>

<p style="margin-left:11%;"><b>--timeout</b>
<i>seconds</i></p>

<p style="margin-left:22%;">Use <i>seconds</i> as the
socket timeout value if duplicity begins to timeout during
network operations. The default is 30 seconds.</p>

<p style="margin-left:11%;"><b>--use-agent</b></p>

<p style="margin-left:22%;">If this option is specified,
then <i>--use-agent</i> is passed to the GnuPG encryption
process and it will try to connect to <b>gpg-agent</b>
before it asks for a passphrase for <i>--encrypt-key</i> or
<i>--sign-key</i> if needed. <b><br>
Note:</b> Contrary to previous versions of duplicity, this
option will also be honored by GnuPG 2 and newer versions.
If GnuPG 2 is in use, duplicity passes the option
<i>--pinentry-mode=loopback</i> to the the gpg process
unless <i>--use-agent</i> is specified on the duplicity
command line. This has the effect that GnuPG 2 uses the
agent only if <i>--use-agent</i> is given, just like GnuPG
1.</p>

<p style="margin-left:11%;"><b>--verbosity</b>
<i>level</i><b>, -v</b><i>level</i></p>

<p style="margin-left:22%;">Specify output verbosity level
(log level). Named levels and corresponding values are 0
Error, 2 Warning, 4 Notice (default), 8 Info, 9 Debug
(noisiest). <i><br>
level</i> may also be <b><br>
a character:</b> e, w, n, i, d <b><br>
a word:</b> error, warning, notice, info, debug</p>

<p style="margin-left:22%; margin-top: 1em">The options
-v4, -vn and -vnotice are functionally equivalent, as are
the mixed/upper-case versions -vN, -vNotice and
-vNOTICE.</p>

<p style="margin-left:11%;"><b>--version</b></p>

<p style="margin-left:22%;">Print duplicity&rsquo;s version
and quit.</p>

<p style="margin-left:11%;"><b>--volsize</b>
<i>number</i></p>

<p style="margin-left:22%;">Change the volume size to
<i>number</i> MB. Default is 200MB.</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>TMPDIR,
TEMP, TMP</b></p>

<p style="margin-left:22%;">In decreasing order of
importance, specifies the directory to use for temporary
files (inherited from Python&rsquo;s tempfile module).
Eventually the option <b>--tempdir</b> supercedes any of
these.</p>

<p style="margin-left:11%;"><b>FTP_PASSWORD</b></p>

<p style="margin-left:22%;">Supported by most backends
which are password capable. More secure than setting it in
the backend url (which might be readable in the operating
systems process listing to other users on the same
machine).</p>

<p style="margin-left:11%;"><b>PASSPHRASE</b></p>

<p style="margin-left:22%;">This passphrase is passed to
GnuPG. If this is not set, the user will be prompted for the
passphrase.</p>

<p style="margin-left:11%;"><b>SIGN_PASSPHRASE</b></p>

<p style="margin-left:22%;">The passphrase to be used for
<b>--sign-key</b>. If ommitted <b>and</b> sign key is also
one of the keys to encrypt against <b>PASSPHRASE</b> will be
reused instead. Otherwise, if passphrase is needed but not
set the user will be prompted for it.</p>

<p style="margin-left:22%; margin-top: 1em">Other
environment variables may be used to configure specific
backends. See the notes for the particular backend.</p>

<h2>URL FORMAT
<a name="URL FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Duplicity uses
the URL format (as standard as possible) to define data
locations. The generic format for a URL is:</p>


<p style="margin-left:22%; margin-top: 1em">scheme://[user[:password]@]host[:port]/[/]path</p>

<p style="margin-left:11%; margin-top: 1em">It is not
recommended to expose the password on the command line since
it could be revealed to anyone with permissions to do
process listings, it is permitted however. Consider setting
the environment variable <b>FTP_PASSWORD</b> instead, which
is used by most, if not all backends, regardless of
it&rsquo;s name.</p>

<p style="margin-left:11%; margin-top: 1em">In protocols
that support it, the path may be preceded by a single slash,
&rsquo;/path&rsquo;, to represent a relative path to the
target home directory, or preceded by a double slash,
&rsquo;//path&rsquo;, to represent an absolute filesystem
path.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Note:</b></p>

<p style="margin-left:22%;">Scheme (protocol) access may be
provided by more than one backend. In case the default
backend is buggy or simply not working in a specific case it
might be worth trying an alternative implementation.
Alternative backends can be selected by prefixing the scheme
with the name of the alternative backend e.g.
<b>ncftp+ftp://</b> and are mentioned below the
scheme&rsquo;s syntax summary.</p>

<p style="margin-left:11%; margin-top: 1em">Formats of each
of the URL schemes follow:</p>

<p style="margin-left:11%; margin-top: 1em"><b>Amazon Drive
Backend</b></p>


<p style="margin-left:22%; margin-top: 1em">ad://some_dir</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AMAZON DRIVE</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Azure</b></p>


<p style="margin-left:22%; margin-top: 1em">azure://container-name</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON AZURE ACCESS</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>B2</b></p>


<p style="margin-left:22%; margin-top: 1em">b2://account_id[:application_key]@bucket_name/[folder/]</p>

<p style="margin-left:11%; margin-top: 1em"><b>Box</b></p>


<p style="margin-left:22%; margin-top: 1em">box:///some_dir[?config=path_to_config]</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON BOX ACCESS</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Cloud
Files</b> (Rackspace)</p>


<p style="margin-left:22%; margin-top: 1em">cf+http://container_name</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON CLOUD FILES ACCESS</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Dropbox</b></p>


<p style="margin-left:22%; margin-top: 1em">dpbx:///some_dir</p>

<p style="margin-left:22%; margin-top: 1em">Make sure to
read <b>A NOTE ON DROPBOX ACCESS</b> first!</p>

<p style="margin-left:11%; margin-top: 1em"><b>Local file
path</b></p>


<p style="margin-left:22%; margin-top: 1em">file://[relative|/absolute]/local/path</p>

<p style="margin-left:11%; margin-top: 1em"><b>FISH</b>
(Files transferred over Shell protocol) over ssh</p>


<p style="margin-left:22%; margin-top: 1em">fish://user[:pwd]@other.host[:port]/[relative|/absolute]_path</p>

<p style="margin-left:11%; margin-top: 1em"><b>FTP</b></p>


<p style="margin-left:22%; margin-top: 1em">ftp[s]://user[:password]@other.host[:port]/some_dir</p>

<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b>
use lftp+, ncftp+ prefixes to enforce a specific backend,
default is lftp+ftp://...</p>

<p style="margin-left:11%; margin-top: 1em"><b>Google
Docs</b></p>


<p style="margin-left:22%; margin-top: 1em">gdocs://user[:password]@other.host/some_dir</p>

<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b>
use pydrive+, gdata+ prefixes to enforce a specific backend,
default is pydrive+gdocs://...</p>

<p style="margin-left:11%; margin-top: 1em"><b>Google Cloud
Storage</b></p>


<p style="margin-left:22%; margin-top: 1em">gs://bucket[/prefix]</p>

<p style="margin-left:11%; margin-top: 1em"><b>HSI</b></p>


<p style="margin-left:22%; margin-top: 1em">hsi://user[:password]@other.host/some_dir</p>


<p style="margin-left:11%; margin-top: 1em"><b>hubiC</b></p>


<p style="margin-left:22%; margin-top: 1em">cf+hubic://container_name</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON HUBIC</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>IMAP email
storage</b></p>


<p style="margin-left:22%; margin-top: 1em">imap[s]://user[:password]@host.com[/from_address_prefix]</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON IMAP</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>MEGA.nz
cloud storage (only works for accounts created prior to
November 2018, uses &quot;megatools&quot;)</b></p>


<p style="margin-left:22%; margin-top: 1em">mega://user[:password]@mega.nz/some_dir</p>

<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b> if
not given in the URL, relies on password being stored within
$HOME/.megarc (as used by the &quot;megatools&quot;
utilities)</p>

<p style="margin-left:11%; margin-top: 1em"><b>MEGA.nz
cloud storage (works for all MEGA accounts, uses
&quot;MEGAcmd&quot; tools)</b></p>


<p style="margin-left:22%; margin-top: 1em">megav2://user[:password]@mega.nz/some_dir
megav3://user[:password]@mega.nz/some_dir[?no_logout=1] (For
latest MEGAcmd)</p>

<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b>
despite &quot;MEGAcmd&quot; no longer uses a configuration
file, for convenience storing the user password this backend
searches it in the $HOME/.megav2rc file (same syntax as the
old $HOME/.megarc) <br>
[Login] <br>
Username = MEGA_USERNAME <br>
Password = MEGA_PASSWORD</p>

<p style="margin-left:11%; margin-top: 1em"><b>OneDrive
Backend</b></p>


<p style="margin-left:22%; margin-top: 1em">onedrive://some_dir</p>

<p style="margin-left:11%; margin-top: 1em"><b>Par2 Wrapper
Backend</b></p>


<p style="margin-left:22%; margin-top: 1em">par2+scheme://[user[:password]@]host[:port]/[/]path</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON PAR2 WRAPPER BACKEND</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Rclone
Backend</b></p>


<p style="margin-left:22%; margin-top: 1em">rclone://remote:/some_dir</p>

<p style="margin-left:11%; margin-top: 1em">See also <b>A
NOTE ON RCLONE BACKEND</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Rsync via
daemon</b></p>


<p style="margin-left:22%; margin-top: 1em">rsync://user[:password]@host.com[:port]::[/]module/some_dir</p>

<p style="margin-left:11%; margin-top: 1em"><b>Rsync over
ssh (only key auth)</b></p>


<p style="margin-left:22%; margin-top: 1em">rsync://user@host.com[:port]/[relative|/absolute]_path</p>

<p style="margin-left:11%; margin-top: 1em"><b>S3
storage</b> (Amazon)</p>


<p style="margin-left:22%; margin-top: 1em">s3://host[:port]/bucket_name[/prefix]
<br>
s3+http://bucket_name[/prefix] <b><br>
defaults</b> to the legacy boto backend based on boto v2
(last update 2018/07) <b><br>
alternatively</b> try the newer
boto3+s3://bucket_name[/prefix]</p>

<p style="margin-left:22%; margin-top: 1em">For details see
<b>A NOTE ON AMAZON S3</b> and see also <b>A NOTE ON
EUROPEAN S3 BUCKETS</b> below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SCP/SFTP
access</b></p>

<p style="margin-left:22%; margin-top: 1em">scp://.. or
<br>

sftp://user[:pwd]@other.host[:port]/[relative|/absolute]_path</p>


<p style="margin-left:22%; margin-top: 1em"><b>defaults</b>
are paramiko+scp:// and paramiko+sftp:// <b><br>
alternatively</b> try pexpect+scp://, pexpect+sftp://,
lftp+sftp:// <br>
See also <b>--ssh-askpass</b>, <b>--ssh-options</b> and <b>A
NOTE ON SSH BACKENDS</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Swift</b>
(Openstack)</p>


<p style="margin-left:22%; margin-top: 1em">swift://container_name[/prefix]</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON SWIFT (OPENSTACK OBJECT STORAGE) ACCESS</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Public Cloud
Archive</b> (OVH)</p>


<p style="margin-left:22%; margin-top: 1em">pca://container_name[/prefix]</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON PCA ACCESS</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Tahoe-LAFS</b></p>


<p style="margin-left:22%; margin-top: 1em">tahoe://alias/directory</p>


<p style="margin-left:11%; margin-top: 1em"><b>WebDAV</b></p>


<p style="margin-left:22%; margin-top: 1em">webdav[s]://user[:password]@other.host[:port]/some_dir</p>


<p style="margin-left:22%; margin-top: 1em"><b>alternatively</b>
try lftp+webdav[s]://</p>


<p style="margin-left:11%; margin-top: 1em"><b>pydrive</b></p>


<p style="margin-left:22%; margin-top: 1em">pydrive://&lt;service
account&rsquo; email
address&gt;@developer.gserviceaccount.com/some_dir</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON PYDRIVE BACKEND</b> below.</p>


<p style="margin-left:11%; margin-top: 1em"><b>gdrive</b></p>


<p style="margin-left:22%; margin-top: 1em">gdrive://&lt;service
account&rsquo; email
address&gt;@developer.gserviceaccount.com/some_dir</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON GDRIVE BACKEND</b> below.</p>


<p style="margin-left:11%; margin-top: 1em"><b>multi</b></p>


<p style="margin-left:22%; margin-top: 1em">multi:///path/to/config.json</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON MULTI BACKEND</b> below.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MediaFire</b></p>


<p style="margin-left:22%; margin-top: 1em">mf://user[:password]@mediafire.com/some_dir</p>

<p style="margin-left:22%; margin-top: 1em">See also <b>A
NOTE ON MEDIAFIRE BACKEND</b> below.</p>

<h2>TIME FORMATS
<a name="TIME FORMATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">duplicity uses
time strings in two places. Firstly, many of the files
duplicity creates will have the time in their filenames in
the w3 datetime format as described in a w3 note at
http://www.w3.org/TR/NOTE-datetime. Basically they look like
&quot;2001-07-15T04:09:38-07:00&quot;, which means what it
looks like. The &quot;-07:00&quot; section means the time
zone is 7 hours behind UTC.</p>

<p style="margin-left:11%; margin-top: 1em">Secondly, the
<b>-t</b>, <b>--time</b>, and <b>--restore-time</b> options
take a time string, which can be given in any of several
formats:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>1.</p></td>
<td width="8%"></td>
<td width="78%">


<p>the string &quot;now&quot; (refers to the current
time)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="8%"></td>
<td width="78%">


<p>a sequences of digits, like &quot;123456890&quot;
(indicating the time in seconds after the epoch)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="8%"></td>
<td width="78%">


<p>A string like &quot;2002-01-25T07:00:00+02:00&quot; in
datetime format</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>4.</p></td>
<td width="8%"></td>
<td width="78%">


<p>An interval, which is a number followed by one of the
characters s, m, h, D, W, M, or Y (indicating seconds,
minutes, hours, days, weeks, months, or years respectively),
or a series of such pairs. In this case the string refers to
the time that preceded the current time by the length of the
interval. For instance, &quot;1h78m&quot; indicates the time
that was one hour and 78 minutes ago. The calendar here is
unsophisticated: a month is always 30 days, a year is always
365 days, and a day is always 86400 seconds.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>5.</p></td>
<td width="8%"></td>
<td width="78%">


<p>A date format of the form YYYY/MM/DD, YYYY-MM-DD,
MM/DD/YYYY, or MM-DD-YYYY, which indicates midnight on the
day in question, relative to the current time zone settings.
For instance, &quot;2002/3/5&quot;, &quot;03-05-2002&quot;,
and &quot;2002-3-05&quot; all mean March 5th, 2002.</p></td></tr>
</table>

<h2>FILE SELECTION
<a name="FILE SELECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When duplicity
is run, it searches through the given source directory and
backs up all the files specified by the file selection
system. The file selection system comprises a number of file
selection conditions, which are set using one of the
following command line options:</p>

<p style="margin-left:22%;">--exclude <br>
--exclude-device-files <br>
--exclude-if-present <br>
--exclude-filelist <br>
--exclude-regexp <br>
--include <br>
--include-filelist <br>
--include-regexp</p>

<p style="margin-left:11%;">Each file selection condition
either matches or doesn&rsquo;t match a given file. A given
file is excluded by the file selection system exactly when
the first matching file selection condition specifies that
the file be excluded; otherwise the file is included.</p>

<p style="margin-left:11%; margin-top: 1em">For
instance,</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--include /usr --exclude /usr /usr
scp://user@host/backup</p>

<p style="margin-left:11%; margin-top: 1em">is exactly the
same as</p>

<p style="margin-left:22%; margin-top: 1em">duplicity /usr
scp://user@host/backup</p>

<p style="margin-left:11%; margin-top: 1em">because the
include and exclude directives match exactly the same files,
and the <b>--include</b> comes first, giving it precedence.
Similarly,</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
--include /usr/local/bin --exclude /usr/local /usr
scp://user@host/backup</p>

<p style="margin-left:11%; margin-top: 1em">would backup
the /usr/local/bin directory (and its contents), but not
/usr/local/doc.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>include</b>, <b>exclude</b>, <b>include-filelist</b>, and
<b>exclude-filelist</b> options accept some <i>extended
shell globbing patterns</i>. These patterns can contain
<b>*</b>, <b>**</b>, <b>?</b>, and <b>[...]</b> (character
ranges). As in a normal shell, <b>*</b> can be expanded to
any string of characters not containing &quot;/&quot;,
<b>?</b> expands to any character except &quot;/&quot;, and
<b>[...]</b> expands to a single character of those
characters specified (ranges are acceptable). The new
special pattern, <b>**</b>, expands to any string of
characters whether or not it contains &quot;/&quot;.
Furthermore, if the pattern starts with
&quot;ignorecase:&quot; (case insensitive), then this prefix
will be removed and any character in the string can be
replaced with an upper- or lowercase version of itself.</p>

<p style="margin-left:11%; margin-top: 1em">Remember that
you may need to quote these characters when typing them into
a shell, so the shell does not interpret the globbing
patterns before duplicity sees them.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>--exclude</b> pattern option matches a file if:</p>

<p style="margin-left:11%; margin-top: 1em"><b>1.</b>
<i>pattern</i> can be expanded into the file&rsquo;s
filename, or <b><br>
2.</b> the file is inside a directory matched by the
option.</p>

<p style="margin-left:11%; margin-top: 1em">Conversely, the
<b>--include</b> pattern matches a file if:</p>

<p style="margin-left:11%; margin-top: 1em"><b>1.</b>
<i>pattern</i> can be expanded into the file&rsquo;s
filename, or <b><br>
2.</b> the file is inside a directory matched by the option,
or <b><br>
3.</b> the file is a directory which contains a file matched
by the option.</p>

<p style="margin-left:11%; margin-top: 1em">For
example,</p>


<p style="margin-left:22%; margin-top: 1em"><b>--exclude</b>
/usr/local</p>

<p style="margin-left:11%; margin-top: 1em">matches e.g.
/usr/local, /usr/local/lib, and /usr/local/lib/netscape. It
is the same as --exclude /usr/local --exclude
&rsquo;/usr/local/**&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">On the other
hand</p>


<p style="margin-left:22%; margin-top: 1em"><b>--include</b>
/usr/local</p>

<p style="margin-left:11%; margin-top: 1em">specifies that
/usr, /usr/local, /usr/local/lib, and
/usr/local/lib/netscape (but not /usr/doc) all be backed up.
Thus you don&rsquo;t have to worry about including parent
directories to make sure that included subdirectories have
somewhere to go.</p>

<p style="margin-left:11%; margin-top: 1em">Finally,</p>


<p style="margin-left:22%; margin-top: 1em"><b>--include</b>
ignorecase:&rsquo;/usr/[a-z0-9]foo/*/**.py&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">would match a
file like /usR/5fOO/hello/there/world.py. If it did match
anything, it would also match /usr. If there is no existing
file that the given pattern can be expanded into, the option
will not match /usr alone.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>--include-filelist</b>, and
<b>--exclude-filelist</b><i>,</i> options also introduce
file selection conditions. They direct duplicity to read in
a text file (either ASCII or UTF-8), each line of which is a
file specification, and to include or exclude the matching
files. Lines are separated by newlines or nulls, depending
on whether the --null-separator switch was given. Each line
in the filelist will be interpreted as a globbing pattern
the way <b>--include</b> and <b>--exclude</b> options are
interpreted, except that lines starting with &quot;+ &quot;
are interpreted as include directives, even if found in a
filelist referenced by <b>--exclude-filelist</b>. Similarly,
lines starting with &quot;- &quot; exclude files even if
they are found within an include filelist.</p>

<p style="margin-left:11%; margin-top: 1em">For example, if
file &quot;list.txt&quot; contains the lines:</p>

<p style="margin-left:22%; margin-top: 1em">/usr/local <br>
- /usr/local/doc <br>
/usr/local/bin <br>
+ /var <br>
- /var</p>

<p style="margin-left:11%; margin-top: 1em">then
<b>--include-filelist list.txt</b> would include /usr,
/usr/local, and /usr/local/bin. It would exclude
/usr/local/doc, /usr/local/doc/python, etc. It would also
include /usr/local/man, as this is included within
/user/local. Finally, it is undefined what happens with
/var. A single file list should not contain conflicting file
specifications.</p>

<p style="margin-left:11%; margin-top: 1em">Each line in
the filelist will also be interpreted as a globbing pattern
the way <b>--include</b> and <b>--exclude</b> options are
interpreted. For instance, if the file &quot;list.txt&quot;
contains the lines:</p>

<p style="margin-left:22%; margin-top: 1em">dir/foo <br>
+ dir/bar <br>
- **</p>

<p style="margin-left:11%; margin-top: 1em">Then
<b>--include-filelist list.txt</b> would be exactly the same
as specifying <b>--include dir/foo --include dir/bar
--exclude **</b> on the command line.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, the
<b>--include-regexp</b> and <b>--exclude-regexp</b> options
allow files to be included and excluded if their filenames
match a python regular expression. Regular expression syntax
is too complicated to explain here, but is covered in
Python&rsquo;s library reference. Unlike the
<b>--include</b> and <b>--exclude</b> options, the regular
expression options don&rsquo;t match files containing or
contained in matched files. So for instance</p>

<p style="margin-left:22%; margin-top: 1em">--include
&rsquo;[0-9]{7}(?!foo)&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">matches any
files whose full pathnames contain 7 consecutive digits
which aren&rsquo;t followed by &rsquo;foo&rsquo;. However,
it wouldn&rsquo;t match /home even if /home/ben/1234567
existed.</p>

<h2>A NOTE ON AMAZON DRIVE
<a name="A NOTE ON AMAZON DRIVE"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The API Keys used for Amazon
Drive have not been granted production limits. Amazon do not
say what the development limits are and are not replying to
to requests to whitelist duplicity. A related tool, acd_cli,
was demoted to development limits, but continues to work
fine except for cases of excessive usage. If you experience
throttling and similar issues with Amazon Drive using this
backend, please report them to the mailing list.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="8%"></td>
<td width="78%">


<p>If you previously used the <b>acd+acdcli</b> backend, it
is strongly recommended to update to the <b>ad</b> backend
instead, since it interfaces directly with Amazon Drive. You
will need to setup the OAuth once again, but can otherwise
keep your backups and config.</p></td></tr>
</table>

<h2>A NOTE ON AMAZON S3
<a name="A NOTE ON AMAZON S3"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When backing up
to Amazon S3, two backend implementations are available. The
schemes &quot;s3&quot; and &quot;s3+http&quot; are
implemented using the older boto library, which has been
deprecated and is no longer supported. The
&quot;boto3+s3&quot; scheme is based on the newer boto3
library. This new backend fixes several known limitations in
the older backend, which have crept in as Amazon S3 has
evolved while the deprecated boto library has not kept
up.</p>

<p style="margin-left:11%; margin-top: 1em">The boto3
backend should behave largely the same as the older S3
backend, but there are some differences in the handling of
some of the &quot;S3&quot; options. Additionally, there are
some compatibility differences with the new backed. Because
of these reasons, both backends have been retained for the
time being. See the documentation for specific options
regarding differences related to each backend.</p>

<p style="margin-left:11%; margin-top: 1em">The boto3
backend does not support bucket creation. This is a
deliberate choice which simplifies the code, and side steps
problems related to region selection. Additionally, it is
probably not a good practice to give your backup role bucket
creation rights. In most cases the role used for backups
should probably be limited to specific buckets.</p>

<p style="margin-left:11%; margin-top: 1em">The boto3
backend only supports newer domain style buckets. Amazon is
moving to deprecate the older bucket style, so migration is
recommended. Use the older s3 backend for compatibility with
backups stored in buckets using older naming
conventions.</p>

<p style="margin-left:11%; margin-top: 1em">The boto3
backend does not currently support initiating restores from
the glacier storage class. When restoring a backup from
glacier or glacier deep archive, the backup files must first
be restored out of band. There are multiple options when
restoring backups from cold storage, which vary in both cost
and speed. See Amazon&rsquo;s documentation for details.</p>

<h2>A NOTE ON AZURE ACCESS
<a name="A NOTE ON AZURE ACCESS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Azure
backend requires the Microsoft Azure Storage Blobs client
library for Python to be installed on the system. See
<b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">It uses the
environment variable <b>AZURE_CONNECTION_STRING</b>
(required). This string contains all necessary information
such as Storage Account name and the key for authentication.
You can find it under Access Keys for the storage
account.</p>

<p style="margin-left:11%; margin-top: 1em">Duplicity will
take care to create the container when performing the
backup. Do not create it manually before.</p>

<p style="margin-left:11%; margin-top: 1em">A container
name (as given as the backup url) must be a valid DNS name,
conforming to the following naming rules:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Container names must start with
a letter or number, and can contain only letters, numbers,
and the dash (-) character.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>2.</p></td>
<td width="7%"></td>
<td width="68%">


<p>Every dash (-) character must be immediately preceded
and followed by a letter or number; consecutive dashes are
not permitted in container names.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>3.</p></td>
<td width="7%"></td>
<td width="68%">


<p>All letters in a container name must be lowercase.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>4.</p></td>
<td width="7%"></td>
<td width="68%">


<p>Container names must be from 3 through 63 characters
long.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">These rules
come from Azure; see
https://docs.microsoft.com/en-us/rest/api/storageservices/naming-and-referencing-containers--blobs--and-metadata</p>

<h2>A NOTE ON BOX ACCESS
<a name="A NOTE ON BOX ACCESS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The box backend
requires boxsdk with jwt support to be installed on the
system. See <b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">It uses the
environment variable <b>BOX_CONFIG_PATH</b> (optional). This
string contains the path to box custom app&rsquo;s
config.json. Either this environment variable or the
<b>config</b> query parameter in the url need to be
specified, if both are specified, query paramter takes
precedence.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Create a Box
custom app</b> <br>
In order to use box backend, user need to create a box
custom app in the box developer console
(https://app.box.com/developers/console).</p>

<p style="margin-left:11%; margin-top: 1em">After create a
new custom app, please make sure it is configured as
follow:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Choose &quot;App Access
Only&quot; for &quot;App Access Level&quot;</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>2.</p></td>
<td width="7%"></td>
<td width="68%">


<p>Check &quot;Write all files and folders stored in
Box&quot;</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>3.</p></td>
<td width="7%"></td>
<td width="68%">


<p>Generate a Public/Private Keypair</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The user also
need to grant the created custom app permission in the admin
console (https://app.box.com/master/custom-apps) by clicking
the &quot;+&quot; button and enter the client_id which can
be found on the custom app&rsquo;s configuration page.</p>

<h2>A NOTE ON CLOUD FILES ACCESS
<a name="A NOTE ON CLOUD FILES ACCESS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Pyrax is
Rackspace&rsquo;s next-generation Cloud management API,
including Cloud Files access. The cfpyrax backend requires
the pyrax library to be installed on the system. See
<b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Cloudfiles is
Rackspace&rsquo;s now deprecated implementation of OpenStack
Object Storage protocol. Users wishing to use Duplicity with
Rackspace Cloud Files should migrate to the new Pyrax plugin
to ensure support.</p>

<p style="margin-left:11%; margin-top: 1em">The backend
requires python-cloudfiles to be installed on the system.
See <b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">It uses three
environment variables for authentification:
<b>CLOUDFILES_USERNAME</b> (required),
<b>CLOUDFILES_APIKEY</b> (required),
<b>CLOUDFILES_AUTHURL</b> (optional)</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>CLOUDFILES_AUTHURL</b> is unspecified it will default to
the value provided by python-cloudfiles, which points to
rackspace, hence this value <i>must</i> be set in order to
use other cloud files providers.</p>

<h2>A NOTE ON DROPBOX ACCESS
<a name="A NOTE ON DROPBOX ACCESS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">First of all Dropbox backend
requires valid authentication token. It should be passed via
<b>DPBX_ACCESS_TOKEN</b> environment variable.</p></td></tr>
</table>

<p style="margin-left:22%;">To obtain it please create
&rsquo;Dropbox API&rsquo; application at:
https://www.dropbox.com/developers/apps/create <br>
Then visit app settings and just use &rsquo;Generated access
token&rsquo; under OAuth2 section. <br>
Alternatively you can let duplicity generate access token
itself. In such case temporary export <b>DPBX_APP_KEY ,
DPBX_APP_SECRET</b> using values from app settings page and
run duplicity interactively. <br>
It will print the URL that you need to open in the browser
to obtain OAuth2 token for the application. Just follow
on-screen instructions and then put generated token to
<b>DPBX_ACCESS_TOKEN</b> variable. Once done, feel free to
unset <b>DPBX_APP_KEY and DPBX_APP_SECRET</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">&quot;some_dir&quot; must
already exist in the Dropbox folder. Depending on access
token kind it may be:</p></td></tr>
</table>

<p style="margin-left:32%;"><b>Full Dropbox:</b> path is
absolute and starts from &rsquo;Dropbox&rsquo; root folder.
<b><br>
App Folder:</b> path is related to application folder.
Dropbox client will show it in
<b>~/Dropbox/Apps/&lt;app-name&gt;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">3.</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">When using Dropbox for storage,
be aware that all files, including the ones in the Apps
folder, will be synced to all connected computers. You may
prefer to use a separate Dropbox account specially for the
backups, and not connect any computers to that account.
Alternatively you can configure selective sync on all
computers to avoid syncing of backup files</p></td></tr>
</table>

<h2>A NOTE ON EUROPEAN S3 BUCKETS
<a name="A NOTE ON EUROPEAN S3 BUCKETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Amazon S3
provides the ability to choose the location of a bucket upon
its creation. The purpose is to enable the user to choose a
location which is better located network topologically
relative to the user, because it may allow for faster data
transfers.</p>

<p style="margin-left:11%; margin-top: 1em">duplicity will
create a new bucket the first time a bucket access is
attempted. At this point, the bucket will be created in
Europe if <b>--s3-european-buckets</b> was given. For
reasons having to do with how the Amazon S3 service works,
this also requires the use of the <b>--s3-use-new-style</b>
option. This option turns on subdomain based bucket
addressing in S3. The details are beyond the scope of this
man page, but it is important to know that your bucket must
not contain upper case letters or any other characters that
are not valid parts of a hostname. Consequently, for reasons
of backwards compatibility, use of subdomain based bucket
addressing is not enabled by default.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
will need to use <b>--s3-use-new-style</b> for all
operations on European buckets; not just upon initial
creation.</p>

<p style="margin-left:11%; margin-top: 1em">You only need
to use <b>--s3-european-buckets</b> upon initial creation,
but you may may use it at all times for consistency.</p>

<p style="margin-left:11%; margin-top: 1em">Further note
that when creating a new European bucket, it can take a
while before the bucket is fully accessible. At the time of
this writing it is unclear to what extent this is an
expected feature of Amazon S3, but in practice you may
experience timeouts, socket errors or HTTP errors when
trying to upload files to your newly created bucket. Give it
a few minutes and the bucket should function normally.</p>

<h2>A NOTE ON FILENAME PREFIXES
<a name="A NOTE ON FILENAME PREFIXES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Filename
prefixes can be used in <b>multi backend</b> with
<b>mirror</b> mode to define affinity rules. They can also
be used in conjunction with S3 lifecycle rules to transition
archive files to Glacier, while keeping metadata (signature
and manifest files) on S3.</p>

<p style="margin-left:11%; margin-top: 1em">Duplicity does
not require access to archive files except when restoring
from backup.</p>

<h2>A NOTE ON GOOGLE CLOUD STORAGE
<a name="A NOTE ON GOOGLE CLOUD STORAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Support for
Google Cloud Storage relies on its Interoperable Access,
which must be enabled for your account. Once enabled, you
can generate Interoperable Storage Access Keys and pass them
to duplicity via the <b>GS_ACCESS_KEY_ID</b> and
<b>GS_SECRET_ACCESS_KEY</b> environment variables.
Alternatively, you can run <b>gsutil config -a</b> to have
the Google Cloud Storage utility populate the <b>~/.boto</b>
configuration file.</p>

<p style="margin-left:11%; margin-top: 1em">Enable
Interoperable Access:
https://code.google.com/apis/console#:storage <br>
Create Access Keys:
https://code.google.com/apis/console#:storage:legacy</p>

<h2>A NOTE ON HUBIC
<a name="A NOTE ON HUBIC"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The hubic
backend requires the pyrax library to be installed on the
system. See <b>REQUIREMENTS</b>. You will need to set your
credentials for hubiC in a file called ~/.hubic_credentials,
following this pattern:</p>

<p style="margin-left:22%; margin-top: 1em">[hubic] <br>
email = your_email <br>
password = your_password <br>
client_id = api_client_id <br>
client_secret = api_secret_key <br>
redirect_uri = http://localhost/</p>

<h2>A NOTE ON IMAP
<a name="A NOTE ON IMAP"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An IMAP account
can be used as a target for the upload. The userid may be
specified and the password will be requested.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>from_address_prefix</b> may be specified (and probably
should be). The text will be used as the &quot;From&quot;
address in the IMAP server. Then on a restore (or list)
command the <b>from_address_prefix</b> will distinguish
between different backups.</p>

<h2>A NOTE ON MULTI BACKEND
<a name="A NOTE ON MULTI BACKEND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The multi
backend allows duplicity to combine the storage available in
more than one backend store (e.g., you can store across a
google drive account and a onedrive account to get
effectively the combined storage available in both). The URL
path specifies a JSON formated config file containing a list
of the backends it will use. The URL may also specify
&quot;query&quot; parameters to configure overall behavior.
Each element of the list must have a &quot;url&quot;
element, and may also contain an optional
&quot;description&quot; and an optional &quot;env&quot; list
of environment variables used to configure that backend.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Query
Parameters</b> <br>
Query parameters come after the file URL in standard HTTP
format for example:</p>


<p style="margin-left:22%;">multi:///path/to/config.json?mode=mirror&amp;onfail=abort
<br>

multi:///path/to/config.json?mode=stripe&amp;onfail=continue
<br>
multi:///path/to/config.json?onfail=abort&amp;mode=stripe
<br>
multi:///path/to/config.json?onfail=abort</p>

<p style="margin-left:11%;">Order does not matter, however
unrecognized parameters are considered an error. <b><br>
mode=</b><i>stripe</i></p>

<p style="margin-left:22%;">This mode (the default)
performs round-robin access to the list of backends. In this
mode, all backends must be reliable as a loss of one means a
loss of one of the archive files.</p>

<p style="margin-left:11%;"><b>mode=</b><i>mirror</i></p>

<p style="margin-left:22%;">This mode accesses backends as
a RAID1-store, storing every file in every backend and
reading files from the first-successful backend. A loss of
any backend should result in no failure. Note that backends
added later will only get new files and may require a manual
sync with one of the other operating ones.</p>


<p style="margin-left:11%;"><b>onfail=</b><i>continue</i></p>

<p style="margin-left:22%;">This setting (the default)
continues all write operations in as best-effort. Any
failure results in the next backend tried. Failure is
reported only when all backends fail a given operation with
the error result from the last failure.</p>

<p style="margin-left:11%;"><b>onfail=</b><i>abort</i></p>

<p style="margin-left:22%;">This setting considers any
backend write failure as a terminating condition and reports
the error. Data reading and listing operations are
independent of this and will try with the next backend on
failure.</p>

<p style="margin-left:11%; margin-top: 1em"><b>JSON File
Example</b></p>

<p style="margin-left:22%;">[ <br>
{ <br>
&quot;description&quot;: &quot;a comment about the
backend&quot; <br>
&quot;url&quot;:
&quot;abackend://myuser@domain.com/backup&quot;, <br>
&quot;env&quot;: [ <br>
{ <br>
&quot;name&quot; : &quot;MYENV&quot;, <br>
&quot;value&quot; : &quot;xyz&quot; <br>
}, <br>
{ <br>
&quot;name&quot; : &quot;FOO&quot;, <br>
&quot;value&quot; : &quot;bar&quot; <br>
} <br>
], <br>
&quot;prefixes&quot;: [&quot;prefix1_&quot;,
&quot;prefix2_&quot;] <br>
}, <br>
{ <br>
&quot;url&quot;: &quot;file:///path/to/dir&quot; <br>
} <br>
]</p>

<h2>A NOTE ON PAR2 WRAPPER BACKEND
<a name="A NOTE ON PAR2 WRAPPER BACKEND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Par2 Wrapper
Backend can be used in combination with all other backends
to create recovery files. Just add <b>par2+</b> before a
regular scheme (e.g. <i>par2+ftp://user@host/dir</i> or
<i>par2+s3+http://bucket_name</i> ). This will create par2
recovery files for each archive and upload them all to the
wrapped backend.</p>

<p style="margin-left:11%; margin-top: 1em">Before
restoring, archives will be verified. Corrupt archives will
be repaired on the fly if there are enough recovery blocks
available.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<b>--par2-redundancy</b> <i>percent</i> to adjust the size
(and redundancy) of recovery files in <i>percent.</i></p>

<h2>A NOTE ON PYDRIVE BACKEND
<a name="A NOTE ON PYDRIVE BACKEND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The pydrive
backend requires Python PyDrive package to be installed on
the system. See <b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">There are two
ways to use PyDrive: with a regular account or with a
&quot;service account&quot;. With a service account, a
separate account is created, that is only accessible with
Google APIs and not a web login. With a regular account, you
can store backups in your normal Google Drive.</p>

<p style="margin-left:11%; margin-top: 1em">To use a
service account, go to the Google developers console at
https://console.developers.google.com. Create a project, and
make sure Drive API is enabled for the project. Under
&quot;APIs and auth&quot;, click Create New Client ID, then
select Service Account with P12 key.</p>

<p style="margin-left:11%; margin-top: 1em">Download the
.p12 key file of the account and convert it to the .pem
format: <br>
openssl pkcs12 -in XXX.p12 -nodes -nocerts &gt;
pydriveprivatekey.pem</p>

<p style="margin-left:11%; margin-top: 1em">The content of
.pem file should be passed to
<b>GOOGLE_DRIVE_ACCOUNT_KEY</b> environment variable for
authentification.</p>

<p style="margin-left:11%; margin-top: 1em">The email
address of the account will be used as part of URL. See
<b>URL FORMAT</b> above.</p>

<p style="margin-left:11%; margin-top: 1em">The alternative
is to use a regular account. To do this, start as above, but
when creating a new Client ID, select &quot;Installed
application&quot; of type &quot;Other&quot;. Create a file
with the following content, and pass its filename in the
<b>GOOGLE_DRIVE_SETTINGS</b> environment variable:</p>


<p style="margin-left:22%; margin-top: 1em">client_config_backend:
settings <br>
client_config: <br>
client_id: &lt;Client ID from developers&rsquo; console&gt;
<br>
client_secret: &lt;Client secret from developers&rsquo;
console&gt; <br>
save_credentials: True <br>
save_credentials_backend: file <br>
save_credentials_file: &lt;filename to cache credentials&gt;
<br>
get_refresh_token: True</p>

<p style="margin-left:11%; margin-top: 1em">In this
scenario, the username and host parts of the URL play no
role; only the path matters. During the first run, you will
be prompted to visit an URL in your browser to grant access
to your drive. Once granted, you will receive a verification
code to paste back into Duplicity. The credentials are then
cached in the file references above for future use.</p>

<h2>A NOTE ON GDRIVE BACKEND
<a name="A NOTE ON GDRIVE BACKEND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">GDrive: is a
rewritten PyDrive: backend with less dependencies, and a
simpler setup - it uses the JSON keys downloaded directly
from Google Cloud Console.</p>

<p style="margin-left:11%; margin-top: 1em">Note Google has
2 drive methods, &rsquo;Shared(previously Team)
Drives&rsquo; and &rsquo;My Drive&rsquo;, both can be shared
but require different addressing</p>

<p style="margin-left:11%; margin-top: 1em"><b>For a Google
Shared Drives folder</b></p>

<p style="margin-left:11%; margin-top: 1em">Share Drive ID
specified as a query parameter, driveID, in the backend URL.
Example: <br>

gdrive://developer.gserviceaccount.com/target-folder/?driveID=&lt;SHARED
DRIVE ID&gt;</p>

<p style="margin-left:11%; margin-top: 1em"><b>For a Google
My Drive based shared folder</b></p>

<p style="margin-left:11%; margin-top: 1em">MyDrive folder
ID specified as a query parameter, myDriveFolderID, in the
backend URL Example <br>
export
GOOGLE_SERVICE_ACCOUNT_URL=&lt;serviceaccount-name&gt;@&lt;serviceaccount-name&gt;.iam.gserviceaccount.com
<br>

gdrive://${GOOGLE_SERVICE_ACCOUNT_URL}/&lt;target-folder-name-in-myDriveFolder&gt;?myDriveFolderID=&lt;google-myDrive-folder-id&gt;</p>

<p style="margin-left:11%; margin-top: 1em">There are also
two ways to authenticate to use GDrive: with a regular
account or with a &quot;service account&quot;. With a
service account, a separate account is created, that is only
accessible with Google APIs and not a web login. With a
regular account, you can store backups in your normal Google
Drive.</p>

<p style="margin-left:11%; margin-top: 1em">To use a
service account, go to the Google developers console at
https://console.developers.google.com. Create a project, and
make sure Drive API is enabled for the project. In the
&quot;Credentials&quot; section, click &quot;Create
credentials&quot;, then select Service Account with JSON
key.</p>

<p style="margin-left:11%; margin-top: 1em">The
GOOGLE_SERVICE_JSON_FILE environment variable needs to
contain the path to the JSON file on duplicity
invocation.</p>

<p style="margin-left:11%; margin-top: 1em">export
GOOGLE_SERVICE_JSON_FILE=&lt;path-to-serviceaccount-credentials.json&gt;</p>

<p style="margin-left:11%; margin-top: 1em">The alternative
is to use a regular account. To do this, start as above, but
when creating a new Client ID, select &quot;Create OAuth
client ID&quot;, with application type of &quot;Desktop
app&quot;. Download the client_secret.json file for the new
client, and set the GOOGLE_CLIENT_SECRET_JSON_FILE
environment variable to the path to this file, and
GOOGLE_CREDENTIALS_FILE to a path to a file where duplicity
will keep the authentication token - this location must be
writable.</p>

<p style="margin-left:11%; margin-top: 1em">During the
first run, you will be prompted to visit an URL in your
browser to grant access to your drive. Once granted, you
will receive a verification code to paste back into
Duplicity. The credentials are then cached in the file
references above for future use.</p>

<p style="margin-left:11%; margin-top: 1em">As a sanity
check, GDrive checks the host and username from the URL
against the JSON key, and refuses to proceed if the
addresses do not match. Either the email (for the service
accounts) or Client ID (for regular OAuth accounts) must be
present in the URL. See <b>URL FORMAT</b> above.</p>

<h2>A NOTE ON RCLONE BACKEND
<a name="A NOTE ON RCLONE BACKEND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rclone is a
powerful command line program to sync files and directories
to and from various cloud storage providers.</p>

<p style="margin-left:11%; margin-top: 1em">Once you have
configured an rclone remote via</p>

<p style="margin-left:22%; margin-top: 1em">rclone
config</p>

<p style="margin-left:11%; margin-top: 1em">and
successfully set up a remote (e.g. gdrive for Google Drive),
assuming you can list your remote files with</p>

<p style="margin-left:22%; margin-top: 1em">rclone ls
gdrive:mydocuments</p>

<p style="margin-left:11%; margin-top: 1em">you can start
your backup with</p>

<p style="margin-left:22%; margin-top: 1em">duplicity
/mydocuments rclone://gdrive:/mydocuments</p>

<p style="margin-left:11%; margin-top: 1em">Please note the
slash after the second colon. Some storage provider will
work with or without slash after colon, but some other will
not. Since duplicity will complain about malformed URL if a
slash is not present, always put it after the colon, and the
backend will handle it for you.</p>

<h2>A NOTE ON SSH BACKENDS
<a name="A NOTE ON SSH BACKENDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <i>ssh
backends</i> support <i>sftp</i> and <i>scp/ssh</i>
transport protocols. This is a known user-confusing issue as
these are fundamentally different. If you plan to access
your backend via one of those please inform yourself about
the requirements for a server to support <i>sftp</i> or
<i>scp/ssh</i> access. To make it even more confusing the
user can choose between several ssh backends via a scheme
prefix: paramiko+ (default), pexpect+, lftp+... . <br>
paramiko &amp; pexpect support <b>--use-scp</b>,
<b>--ssh-askpass</b> and <b>--ssh-options</b>. Only the
<b>pexpect</b> backend allows to define <b>--scp-command</b>
and <b>--sftp-command</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SSH paramiko
backend</b> (default) is a complete reimplementation of ssh
protocols natively in python. Advantages are speed and
maintainability. Minor disadvantage is that extra packages
are needed as listed in <b>REQUIREMENTS</b>. In <i>sftp</i>
(default) mode all operations are done via the according
sftp commands. In <i>scp</i> mode ( <i>--use-scp</i> )
though scp access is used for put/get operations but listing
is done via ssh remote shell.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SSH pexpect
backend</b> is the legacy ssh backend using the command line
ssh binaries via pexpect. Older versions used <i>scp</i> for
get and put operations and <i>sftp</i> for list and delete
operations. The current version uses <i>sftp</i> for all
four supported operations, unless the <i>--use-scp</i>
option is used to revert to old behavior.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SSH lftp
backend</b> is simply there because lftp can interact with
the ssh cmd line binaries. It is meant as a last resort in
case the above options fail for some reason.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why use sftp
instead of scp?</b> The change to sftp was made in order to
allow the remote system to chroot the backup, thus providing
better security and because it does not suffer from shell
quoting issues like scp. Scp also does not support any kind
of file listing, so sftp or ssh access will always be needed
in addition for this backend mode to work properly. Sftp
does not have these limitations but needs an sftp service
running on the backend server, which is sometimes not an
option.</p>

<h2>A NOTE ON SSL CERTIFICATE VERIFICATION
<a name="A NOTE ON SSL CERTIFICATE VERIFICATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Certificate
verification as implemented right now [02.2016] only in the
webdav and lftp backends. older pythons 2.7.8- and older
lftp binaries need a file based database of certification
authority certificates (cacert file). <br>
Newer python 2.7.9+ and recent lftp versions however support
the system default certificates (usually in /etc/ssl/certs)
and also giving an alternative ca cert folder via
<b>--ssl-cacert-path</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The cacert file
has to be a <b>PEM</b> formatted text file as currently
provided by the <b>CURL</b> project. See</p>


<p style="margin-left:22%; margin-top: 1em">http://curl.haxx.se/docs/caextract.html</p>

<p style="margin-left:11%; margin-top: 1em">After
creating/retrieving a valid cacert file you should copy it
to either</p>


<p style="margin-left:22%; margin-top: 1em">~/.duplicity/cacert.pem
<br>
~/duplicity_cacert.pem <br>
/etc/duplicity/cacert.pem</p>

<p style="margin-left:11%; margin-top: 1em">Duplicity
searches it there in the same order and will fail if it
can&rsquo;t find it. You can however specify the option
<b>--ssl-cacert-file</b> <i>&lt;file&gt;</i> to point
duplicity to a copy in a different location.</p>

<p style="margin-left:11%; margin-top: 1em">Finally there
is the <b>--ssl-no-check-certificate</b> option to disable
certificate verification alltogether, in case some ssl
library is missing or verification is not wanted. Use it
with care, as even with self signed servers manually
providing the private ca certificate is definitely the safer
option.</p>

<h2>A NOTE ON SWIFT (OPENSTACK OBJECT STORAGE) ACCESS
<a name="A NOTE ON SWIFT (OPENSTACK OBJECT STORAGE) ACCESS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Swift is the
OpenStack Object Storage service. <br>
The backend requires python-switclient to be installed on
the system. python-keystoneclient is also needed to use
OpenStack&rsquo;s Keystone Identity service. See
<b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">It uses
following environment variables for authentification:
<b>SWIFT_USERNAME</b> (required), <b>SWIFT_PASSWORD</b>
(required), <b>SWIFT_AUTHURL</b> (required),
<b>SWIFT_USERID</b> (required, only for IBM Bluemix
ObjectStorage), <b>SWIFT_TENANTID</b> (required, only for
IBM Bluemix ObjectStorage), <b>SWIFT_REGIONNAME</b>
(required, only for IBM Bluemix ObjectStorage),
<b>SWIFT_TENANTNAME</b> (optional, the tenant can be
included in the username)</p>

<p style="margin-left:11%; margin-top: 1em">If the user was
previously authenticated, the following environment
variables can be used instead: <b>SWIFT_PREAUTHURL</b>
(required), <b>SWIFT_PREAUTHTOKEN</b> (required)</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>SWIFT_AUTHVERSION</b> is unspecified, it will default to
version 1.</p>

<h2>A NOTE ON PCA ACCESS
<a name="A NOTE ON PCA ACCESS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">PCA is a
long-term data archival solution by OVH. It runs a slightly
modified version of Openstack Swift introducing latency in
the data retrieval process. It is a good pick for a <b>multi
backend</b> configuration where receiving volumes while an
other backend is used to store manifests and signatures.</p>

<p style="margin-left:11%; margin-top: 1em">The backend
requires python-switclient to be installed on the system.
python-keystoneclient is also needed to interact with
OpenStack&rsquo;s Keystone Identity service. See
<b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">It uses
following environment variables for authentification:
<b>PCA_USERNAME</b> (required), <b>PCA_PASSWORD</b>
(required), <b>PCA_AUTHURL</b> (required), <b>PCA_USERID</b>
(optional), <b>PCA_TENANTID</b> (optional, but either the
tenant name or tenant id must be supplied)
<b>PCA_REGIONNAME</b> (optional), <b>PCA_TENANTNAME</b>
(optional, but either the tenant name or tenant id must be
supplied)</p>

<p style="margin-left:11%; margin-top: 1em">If the user was
previously authenticated, the following environment
variables can be used instead: <b>PCA_PREAUTHURL</b>
(required), <b>PCA_PREAUTHTOKEN</b> (required)</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>PCA_AUTHVERSION</b> is unspecified, it will default to
version 2.</p>

<h2>A NOTE ON MEDIAFIRE BACKEND
<a name="A NOTE ON MEDIAFIRE BACKEND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This backend
requires <b>mediafire</b> python library to be installed on
the system. See <b>REQUIREMENTS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Use URL
escaping for username (and password, if provided via command
line):</p>


<p style="margin-left:22%; margin-top: 1em">mf://duplicity%40example.com@mediafire.com/some_folder</p>

<p style="margin-left:11%; margin-top: 1em">The destination
folder will be created for you if it does not exist.</p>

<h2>A NOTE ON SYMMETRIC ENCRYPTION AND SIGNING
<a name="A NOTE ON SYMMETRIC ENCRYPTION AND SIGNING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Signing and
symmetrically encrypt at the same time with the gpg binary
on the command line, as used within duplicity, is a
specifically challenging issue. Tests showed that the
following combinations proved working.</p>

<p style="margin-left:11%; margin-top: 1em">1. Setup
gpg-agent properly. Use the option <b>--use-agent</b> and
enter both passphrases (symmetric and sign key) in the
gpg-agent&rsquo;s dialog.</p>

<p style="margin-left:11%; margin-top: 1em">2. Use a
<b>PASSPHRASE</b> for symmetric encryption of your choice
but the signing key has an <b>empty</b> passphrase.</p>

<p style="margin-left:11%; margin-top: 1em">3. The used
<b>PASSPHRASE</b> for symmetric encryption and the
passphrase of the signing key are identical.</p>

<h2>KNOWN ISSUES / BUGS
<a name="KNOWN ISSUES / BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Hard links
currently unsupported (they will be treated as non-linked
regular files).</p>

<p style="margin-left:11%; margin-top: 1em">Bad signatures
will be treated as empty instead of logging appropriate
error message.</p>

<h2>OPERATION AND DATA FORMATS
<a name="OPERATION AND DATA FORMATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
describes duplicity&rsquo;s basic operation and the format
of its data files. It should not be necessary to read this
section to use duplicity.</p>

<p style="margin-left:11%; margin-top: 1em">The files used
by duplicity to store backup data are tarfiles in GNU tar
format. They can be produced independently by
<b>rdiffdir</b>(1). For incremental backups, new files are
saved normally in the tarfile. But when a file changes,
instead of storing a complete copy of the file, only a diff
is stored, as generated by <b>rdiff</b>(1). If a file is
deleted, a 0 length file is stored in the tar. It is
possible to restore a duplicity archive &quot;manually&quot;
by using <b>tar</b> and then <b>cp</b>, <b>rdiff</b>, and
<b>rm</b> as necessary. These duplicity archives have the
extension <b>difftar</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Both full and
incremental backup sets have the same format. In effect, a
full backup set is an incremental one generated from an
empty signature (see below). The files in full backup sets
will start with <b>duplicity-full</b> while the incremental
sets start with <b>duplicity-inc</b>. When restoring,
duplicity applies patches in order, so deleting, for
instance, a full backup set may make related incremental
backup sets unusable.</p>

<p style="margin-left:11%; margin-top: 1em">In order to
determine which files have been deleted, and to calculate
diffs for changed files, duplicity needs to process
information about previous sessions. It stores this
information in the form of tarfiles where each entry&rsquo;s
data contains the signature (as produced by <b>rdiff</b>) of
the file instead of the file&rsquo;s contents. These
signature sets have the extension <b>sigtar</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Signature files
are not required to restore a backup set, but without an
up-to-date signature, duplicity cannot append an incremental
backup to an existing archive.</p>

<p style="margin-left:11%; margin-top: 1em">To save
bandwidth, duplicity generates full signature sets and
incremental signature sets. A full signature set is
generated for each full backup, and an incremental one for
each incremental backup. These start with
<b>duplicity-full-signatures</b> and
<b>duplicity-new-signatures</b> respectively. These
signatures will be stored both locally and remotely. The
remote signatures will be encrypted if encryption is
enabled. The local signatures will not be encrypted and
stored in the archive dir (see <b>--archive-dir</b> ).</p>

<h2>REQUIREMENTS
<a name="REQUIREMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Duplicity
requires a POSIX-like operating system with a <b>python</b>
interpreter version 2.6+ installed. It is best used under
GNU/Linux.</p>

<p style="margin-left:11%; margin-top: 1em">Some backends
also require additional components (probably available as
packages for your specific platform): <b><br>
Amazon Drive backend</b></p>

<p style="margin-left:22%;"><b>python-requests</b> -
http://python-requests.org <b><br>
python-requests-oauthlib</b> -
https://github.com/requests/requests-oauthlib</p>

<p style="margin-left:11%;"><b>azure backend</b> (Azure
Storage Blob Service)</p>

<p style="margin-left:22%;"><b>Microsoft Azure Storage
Blobs client library for Python</b> -
https://pypi.org/project/azure-storage-blob/</p>

<p style="margin-left:11%;"><b>boto backend</b> (S3 Amazon
Web Services, Google Cloud Storage)</p>

<p style="margin-left:22%;"><b>boto version 2.0+</b> -
http://github.com/boto/boto</p>

<p style="margin-left:11%;"><b>box backend</b>
(box.com)</p>

<p style="margin-left:22%;"><b>boxsdk</b> -
https://github.com/box/box-python-sdk</p>

<p style="margin-left:11%;"><b>cfpyrax backend</b>
(Rackspace Cloud) and <b>hubic backend</b> (hubic.com)</p>

<p style="margin-left:22%;"><b>Rackspace CloudFiles Pyrax
API</b> -
http://docs.rackspace.com/sdks/guide/content/python.html</p>

<p style="margin-left:11%;"><b>dpbx backend</b>
(Dropbox)</p>

<p style="margin-left:22%;"><b>Dropbox Python SDK</b> -
https://www.dropbox.com/developers/reference/sdk</p>

<p style="margin-left:11%;"><b>gdocs gdata backend</b>
(legacy Google Docs backend)</p>

<p style="margin-left:22%;"><b>Google Data APIs Python
Client Library</b> -
http://code.google.com/p/gdata-python-client/</p>

<p style="margin-left:11%;"><b>gdocs pydrive
backend</b>(default)</p>

<p style="margin-left:22%;">see pydrive backend</p>

<p style="margin-left:11%;"><b>gio backend</b> (Gnome VFS
API)</p>

<p style="margin-left:22%;"><b>PyGObject</b> -
http://live.gnome.org/PyGObject <b><br>
D-Bus</b> (dbus)-
http://www.freedesktop.org/wiki/Software/dbus</p>

<p style="margin-left:11%;"><b>lftp backend</b> (needed for
ftp, ftps, fish [over ssh] - also supports <br>
sftp, webdav[s])</p>

<p style="margin-left:22%;"><b>LFTP Client</b> -
http://lftp.yar.ru/</p>

<p style="margin-left:11%;"><b>MEGA backend (only works for
accounts created prior to November 2018)</b> <br>
(mega.nz)</p>

<p style="margin-left:22%;"><b>megatools client</b> -
https://github.com/megous/megatools</p>

<p style="margin-left:11%;"><b>MEGA v2 and v3 backend
(works for all MEGA accounts)</b> (mega.nz)</p>

<p style="margin-left:22%;"><b>MEGAcmd client</b> -
https://mega.nz/cmd</p>

<p style="margin-left:11%;"><b>multi backend</b></p>

<p style="margin-left:22%;"><b>Multi -- store to more than
one backend</b> <br>
(also see <b>A NOTE ON MULTI BACKEND</b> ) below.</p>

<p style="margin-left:11%;"><b>ncftp backend</b> (ftp,
select via ncftp+ftp://)</p>

<p style="margin-left:22%;"><b>NcFTP</b> -
http://www.ncftp.com/</p>

<p style="margin-left:11%;"><b>OneDrive backend</b>
(Microsoft OneDrive)</p>


<p style="margin-left:22%;"><b>python-requests-oauthlib</b>
- https://github.com/requests/requests-oauthlib</p>

<p style="margin-left:11%;"><b>Par2 Wrapper Backend</b></p>

<p style="margin-left:22%;"><b>par2cmdline</b> -
http://parchive.sourceforge.net/</p>

<p style="margin-left:11%;"><b>pydrive backend</b></p>

<p style="margin-left:22%;"><b>PyDrive -- a wrapper library
of google-api-python-client</b> -
https://pypi.python.org/pypi/PyDrive <br>
(also see <b>A NOTE ON PYDRIVE BACKEND</b> ) below.</p>

<p style="margin-left:11%;"><b>rclone backend</b></p>

<p style="margin-left:22%;"><b>rclone</b> -
https://rclone.org/</p>

<p style="margin-left:11%;"><b>rsync backend</b></p>

<p style="margin-left:22%;"><b>rsync client binary</b> -
http://rsync.samba.org/</p>

<p style="margin-left:11%;"><b>ssh paramiko backend</b>
(default)</p>

<p style="margin-left:22%;"><b>paramiko</b> (SSH2 for
python) - http://pypi.python.org/pypi/paramiko (downloads);
http://github.com/paramiko/paramiko (project page) <b><br>
pycrypto</b> (Python Cryptography Toolkit) -
http://www.dlitz.net/software/pycrypto/</p>

<p style="margin-left:11%;"><b>ssh pexpect backend</b></p>

<p style="margin-left:22%;"><b>sftp/scp client binaries</b>
OpenSSH - http://www.openssh.com/ <b><br>
Python pexpect module</b> -
http://pexpect.sourceforge.net/pexpect.html</p>

<p style="margin-left:11%;"><b>swift backend (OpenStack
Object Storage)</b></p>

<p style="margin-left:22%;"><b>Python swiftclient
module</b> -
https://github.com/openstack/python-swiftclient/ <b><br>
Python keystoneclient module</b> -
https://github.com/openstack/python-keystoneclient/</p>

<p style="margin-left:11%;"><b>webdav backend</b></p>

<p style="margin-left:22%;"><b>certificate authority
database file</b> for ssl certificate verification of HTTPS
connections - http://curl.haxx.se/docs/caextract.html <br>
(also see <b>A NOTE ON SSL CERTIFICATE VERIFICATION</b>).
<b><br>
Python kerberos module</b> for kerberos authentication -
https://github.com/02strich/pykerberos</p>

<p style="margin-left:11%;"><b>MediaFire backend</b></p>

<p style="margin-left:22%;"><b>MediaFire Python Open
SDK</b> - https://pypi.python.org/pypi/mediafire/</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Original
Author</b> - Ben Escoto &lt;bescoto@stanford.edu&gt; <b><br>
Current Maintainer</b> - Kenneth Loafman
&lt;kenneth@loafman.com&gt; <b><br>
Continuous Contributors</b></p>

<p style="margin-left:22%;">Edgar Soldin, Mike Terry</p>

<p style="margin-left:11%; margin-top: 1em">Most backends
were contributed individually. Information about their
authorship may be found in the according file&rsquo;s
header.</p>

<p style="margin-left:11%; margin-top: 1em">Also we&rsquo;d
like to thank everybody posting issues to the mailing list
or on launchpad, sending in patches or contributing
otherwise. Duplicity wouldn&rsquo;t be as stable and useful
if it weren&rsquo;t for you.</p>

<p style="margin-left:11%; margin-top: 1em">A special
thanks goes to rsync.net, a Cloud Storage provider with
explicit support for duplicity, for several monetary
donations and for providing a special &quot;duplicity
friends&quot; rate for their offsite backup service. Email
info@rsync.net for details.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>rdiffdir</b>(1),
<b>python</b>(1), <b>rdiff</b>(1),
<b>rdiff-backup</b>(1).</p>
<hr>
</body>
</html>
