<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon Nov  7 04:40:10 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GIT-STASH</title>

</head>
<body>

<h1 align="center">GIT-STASH</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DISCUSSION">DISCUSSION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#GIT">GIT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">git-stash -
Stash the changes in a dirty working directory away</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>git
stash</i> list [&lt;log-options&gt;] <i><br>
git stash</i> show [-u|--include-untracked|--only-untracked]
[&lt;diff-options&gt;] [&lt;stash&gt;] <i><br>
git stash</i> drop [-q|--quiet] [&lt;stash&gt;] <i><br>
git stash</i> ( pop | apply ) [--index] [-q|--quiet]
[&lt;stash&gt;] <i><br>
git stash</i> branch &lt;branchname&gt; [&lt;stash&gt;]
<i><br>
git stash</i> [push [-p|--patch] [-k|--[no-]keep-index]
[-q|--quiet] <br>
[-u|--include-untracked] [-a|--all] [-m|--message
&lt;message&gt;] <br>
[--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]]
<br>
[--] [&lt;pathspec&gt;...]] <i><br>
git stash</i> clear <i><br>
git stash</i> create [&lt;message&gt;] <i><br>
git stash</i> store [-m|--message &lt;message&gt;]
[-q|--quiet] &lt;commit&gt;</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use <b>git
stash</b> when you want to record the current state of the
working directory and the index, but want to go back to a
clean working directory. The command saves your local
modifications away and reverts the working directory to
match the <b>HEAD</b> commit.</p>

<p style="margin-left:11%; margin-top: 1em">The
modifications stashed away by this command can be listed
with <b>git stash list</b>, inspected with <b>git stash
show</b>, and restored (potentially on top of a different
commit) with <b>git stash apply</b>. Calling <b>git
stash</b> without any arguments is equivalent to <b>git
stash push</b>. A stash is by default listed as &quot;WIP on
<i>branchname</i> ...&quot;, but you can give a more
descriptive message on the command line when you create
one.</p>

<p style="margin-left:11%; margin-top: 1em">The latest
stash you created is stored in <b>refs/stash</b>; older
stashes are found in the reflog of this reference and can be
named using the usual reflog syntax (e.g. <b>stash@{0}</b>
is the most recently created stash, <b>stash@{1}</b> is the
one before it, <b>stash@{2.hours.ago}</b> is also possible).
Stashes may also be referenced by specifying just the stash
index (e.g. the integer <b>n</b> is equivalent to
<b>stash@{n}</b>).</p>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">push
[-p|--patch] [-k|--[no-]keep-index] [-u|--include-untracked]
[-a|--all] [-q|--quiet] [-m|--message &lt;message&gt;]
[--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]]
[--] [&lt;pathspec&gt;...]</p>

<p style="margin-left:17%;">Save your local modifications
to a new <i>stash entry</i> and roll them back to HEAD (in
the working tree and in the index). The &lt;message&gt; part
is optional and gives the description along with the stashed
state.</p>

<p style="margin-left:17%; margin-top: 1em">For quickly
making a snapshot, you can omit &quot;push&quot;. In this
mode, non-option arguments are not allowed to prevent a
misspelled subcommand from making an unwanted stash entry.
The two exceptions to this are <b>stash -p</b> which acts as
alias for <b>stash push -p</b> and pathspec elements, which
are allowed after a double hyphen <b>--</b> for
disambiguation.</p>

<p style="margin-left:11%; margin-top: 1em">save
[-p|--patch] [-k|--[no-]keep-index] [-u|--include-untracked]
[-a|--all] [-q|--quiet] [&lt;message&gt;]</p>

<p style="margin-left:17%;">This option is deprecated in
favour of <i>git stash push</i>. It differs from &quot;stash
push&quot; in that it cannot take pathspec. Instead, all
non-option arguments are concatenated to form the stash
message.</p>

<p style="margin-left:11%; margin-top: 1em">list
[&lt;log-options&gt;]</p>

<p style="margin-left:17%;">List the stash entries that you
currently have. Each <i>stash entry</i> is listed with its
name (e.g. <b>stash@{0}</b> is the latest entry,
<b>stash@{1}</b> is the one before, etc.), the name of the
branch that was current when the entry was made, and a short
description of the commit the entry was based on.</p>

<p style="margin-left:23%; margin-top: 1em">stash@{0}: WIP
on submit: 6ebd0e2... Update git-stash documentation <br>
stash@{1}: On master: 9cc0589... Add git-stash</p>

<p style="margin-left:17%; margin-top: 1em">The command
takes options applicable to the <i>git log</i> command to
control what is shown and how. See <a href="https://man.page/1/git-log">git-log(1)</a>.</p>

<p style="margin-left:11%; margin-top: 1em">show
[-u|--include-untracked|--only-untracked]
[&lt;diff-options&gt;] [&lt;stash&gt;]</p>

<p style="margin-left:17%;">Show the changes recorded in
the stash entry as a diff between the stashed contents and
the commit back when the stash entry was first created. By
default, the command shows the diffstat, but it will accept
any format known to <i>git diff</i> (e.g., <b>git stash show
-p stash@{1}</b> to view the second most recent entry in
patch form). If no <b>&lt;diff-option&gt;</b> is provided,
the default behavior will be given by the
<b>stash.showStat</b>, and <b>stash.showPatch</b> config
variables. You can also use
<b>stash.showIncludeUntracked</b> to set whether
<b>--include-untracked</b> is enabled by default.</p>

<p style="margin-left:11%; margin-top: 1em">pop [--index]
[-q|--quiet] [&lt;stash&gt;]</p>

<p style="margin-left:17%;">Remove a single stashed state
from the stash list and apply it on top of the current
working tree state, i.e., do the inverse operation of <b>git
stash push</b>. The working directory must match the
index.</p>

<p style="margin-left:17%; margin-top: 1em">Applying the
state can fail with conflicts; in this case, it is not
removed from the stash list. You need to resolve the
conflicts by hand and call <b>git stash drop</b> manually
afterwards.</p>

<p style="margin-left:11%; margin-top: 1em">apply [--index]
[-q|--quiet] [&lt;stash&gt;]</p>

<p style="margin-left:17%;">Like <b>pop</b>, but do not
remove the state from the stash list. Unlike <b>pop</b>,
<b>&lt;stash&gt;</b> may be any commit that looks like a
commit created by <b>stash push</b> or <b>stash
create</b>.</p>

<p style="margin-left:11%; margin-top: 1em">branch
&lt;branchname&gt; [&lt;stash&gt;]</p>

<p style="margin-left:17%;">Creates and checks out a new
branch named <b>&lt;branchname&gt;</b> starting from the
commit at which the <b>&lt;stash&gt;</b> was originally
created, applies the changes recorded in
<b>&lt;stash&gt;</b> to the new working tree and index. If
that succeeds, and <b>&lt;stash&gt;</b> is a reference of
the form <b>stash@{&lt;revision&gt;}</b>, it then drops the
<b>&lt;stash&gt;</b>.</p>

<p style="margin-left:17%; margin-top: 1em">This is useful
if the branch on which you ran <b>git stash push</b> has
changed enough that <b>git stash apply</b> fails due to
conflicts. Since the stash entry is applied on top of the
commit that was HEAD at the time <b>git stash</b> was run,
it restores the originally stashed state with no
conflicts.</p>

<p style="margin-left:11%; margin-top: 1em">clear</p>

<p style="margin-left:17%;">Remove all the stash entries.
Note that those entries will then be subject to pruning, and
may be impossible to recover (see <i>Examples</i> below for
a possible strategy).</p>

<p style="margin-left:11%; margin-top: 1em">drop
[-q|--quiet] [&lt;stash&gt;]</p>

<p style="margin-left:17%;">Remove a single stash entry
from the list of stash entries.</p>

<p style="margin-left:11%; margin-top: 1em">create</p>

<p style="margin-left:17%;">Create a stash entry (which is
a regular commit object) and return its object name, without
storing it anywhere in the ref namespace. This is intended
to be useful for scripts. It is probably not the command you
want to use; see &quot;push&quot; above.</p>

<p style="margin-left:11%; margin-top: 1em">store</p>

<p style="margin-left:17%;">Store a given stash created via
<i>git stash create</i> (which is a dangling merge commit)
in the stash ref, updating the stash reflog. This is
intended to be useful for scripts. It is probably not the
command you want to use; see &quot;push&quot; above.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">-a, --all</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> and <b>save</b> commands.</p>

<p style="margin-left:17%; margin-top: 1em">All ignored and
untracked files are also stashed and then cleaned up with
<b>git clean</b>.</p>

<p style="margin-left:11%; margin-top: 1em">-u,
--include-untracked, --no-include-untracked</p>

<p style="margin-left:17%;">When used with the <b>push</b>
and <b>save</b> commands, all untracked files are also
stashed and then cleaned up with <b>git clean</b>.</p>

<p style="margin-left:17%; margin-top: 1em">When used with
the <b>show</b> command, show the untracked files in the
stash entry as part of the diff.</p>


<p style="margin-left:11%; margin-top: 1em">--only-untracked</p>

<p style="margin-left:17%;">This option is only valid for
the <b>show</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">Show only the
untracked files in the stash entry as part of the diff.</p>

<p style="margin-left:11%; margin-top: 1em">--index</p>

<p style="margin-left:17%;">This option is only valid for
<b>pop</b> and <b>apply</b> commands.</p>

<p style="margin-left:17%; margin-top: 1em">Tries to
reinstate not only the working tree&rsquo;s changes, but
also the index&rsquo;s ones. However, this can fail, when
you have conflicts (which are stored in the index, where you
therefore can no longer apply the changes as they were
originally).</p>

<p style="margin-left:11%; margin-top: 1em">-k,
--keep-index, --no-keep-index</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> and <b>save</b> commands.</p>

<p style="margin-left:17%; margin-top: 1em">All changes
already added to the index are left intact.</p>

<p style="margin-left:11%; margin-top: 1em">-p, --patch</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> and <b>save</b> commands.</p>

<p style="margin-left:17%; margin-top: 1em">Interactively
select hunks from the diff between HEAD and the working tree
to be stashed. The stash entry is constructed such that its
index state is the same as the index state of your
repository, and its worktree contains only the changes you
selected interactively. The selected changes are then rolled
back from your worktree. See the &ldquo;Interactive
Mode&rdquo; section of <a href="https://man.page/1/git-add">git-add(1)</a> to learn how to
operate the <b>--patch</b> mode.</p>

<p style="margin-left:17%; margin-top: 1em">The
<b>--patch</b> option implies <b>--keep-index</b>. You can
use <b>--no-keep-index</b> to override this.</p>


<p style="margin-left:11%; margin-top: 1em">--pathspec-from-file=&lt;file&gt;</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">Pathspec is
passed in <b>&lt;file&gt;</b> instead of commandline args.
If <b>&lt;file&gt;</b> is exactly <b>-</b> then standard
input is used. Pathspec elements are separated by LF or
CR/LF. Pathspec elements can be quoted as explained for the
configuration variable <b>core.quotePath</b> (see
<a href="https://man.page/1/git-config">git-config(1)</a>). See also <b>--pathspec-file-nul</b>
and global <b>--literal-pathspecs</b>.</p>


<p style="margin-left:11%; margin-top: 1em">--pathspec-file-nul</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">Only meaningful
with <b>--pathspec-from-file</b>. Pathspec elements are
separated with NUL character and all other characters are
taken literally (including newlines and quotes).</p>

<p style="margin-left:11%; margin-top: 1em">-q, --quiet</p>

<p style="margin-left:17%;">This option is only valid for
<b>apply</b>, <b>drop</b>, <b>pop</b>, <b>push</b>,
<b>save</b>, <b>store</b> commands.</p>

<p style="margin-left:17%; margin-top: 1em">Quiet, suppress
feedback messages.</p>

<p style="margin-left:11%; margin-top: 1em">--</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">Separates
pathspec from options for disambiguation purposes.</p>


<p style="margin-left:11%; margin-top: 1em">&lt;pathspec&gt;...</p>

<p style="margin-left:17%;">This option is only valid for
<b>push</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">The new stash
entry records the modified states only for the files that
match the pathspec. The index entries and working tree files
are then rolled back to the state in HEAD only for these
files, too, leaving files that do not match the pathspec
intact.</p>

<p style="margin-left:17%; margin-top: 1em">For more
details, see the <i>pathspec</i> entry in
<a href="https://man.page/7/gitglossary">gitglossary(7)</a>.</p>


<p style="margin-left:11%; margin-top: 1em">&lt;stash&gt;</p>

<p style="margin-left:17%;">This option is only valid for
<b>apply</b>, <b>branch</b>, <b>drop</b>, <b>pop</b>,
<b>show</b> commands.</p>

<p style="margin-left:17%; margin-top: 1em">A reference of
the form <b>stash@{&lt;revision&gt;}</b>. When no
<b>&lt;stash&gt;</b> is given, the latest stash is assumed
(that is, <b>stash@{0}</b>).</p>

<h2>DISCUSSION
<a name="DISCUSSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A stash entry
is represented as a commit whose tree records the state of
the working directory, and its first parent is the commit at
<b>HEAD</b> when the entry was created. The tree of the
second parent records the state of the index when the entry
is made, and it is made a child of the <b>HEAD</b> commit.
The ancestry graph looks like this:</p>

<p style="margin-left:17%; margin-top: 1em">.----W <br>
/ / <br>
-----H----I</p>

<p style="margin-left:11%; margin-top: 1em">where <b>H</b>
is the <b>HEAD</b> commit, <b>I</b> is a commit that records
the state of the index, and <b>W</b> is a commit that
records the state of the working tree.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Pulling into a
dirty tree</p>

<p style="margin-left:17%;">When you are in the middle of
something, you learn that there are upstream changes that
are possibly relevant to what you are doing. When your local
changes do not conflict with the changes in the upstream, a
simple <b>git pull</b> will let you move forward.</p>

<p style="margin-left:17%; margin-top: 1em">However, there
are cases in which your local changes do conflict with the
upstream changes, and <b>git pull</b> refuses to overwrite
your changes. In such a case, you can stash your changes
away, perform a pull, and then unstash, like this:</p>

<p style="margin-left:23%; margin-top: 1em">$ git pull <br>
... <br>
file foobar not up to date, cannot merge. <br>
$ git stash <br>
$ git pull <br>
$ git stash pop</p>

<p style="margin-left:11%; margin-top: 1em">Interrupted
workflow</p>

<p style="margin-left:17%;">When you are in the middle of
something, your boss comes in and demands that you fix
something immediately. Traditionally, you would make a
commit to a temporary branch to store your changes away, and
return to your original branch to make the emergency fix,
like this:</p>

<p style="margin-left:23%; margin-top: 1em"># ... hack hack
hack ... <br>
$ git switch -c my_wip <br>
$ git commit -a -m &quot;WIP&quot; <br>
$ git switch master <br>
$ edit emergency fix <br>
$ git commit -a -m &quot;Fix in a hurry&quot; <br>
$ git switch my_wip <br>
$ git reset --soft HEAD^ <br>
# ... continue hacking ...</p>

<p style="margin-left:17%; margin-top: 1em">You can use
<i>git stash</i> to simplify the above, like this:</p>

<p style="margin-left:23%; margin-top: 1em"># ... hack hack
hack ... <br>
$ git stash <br>
$ edit emergency fix <br>
$ git commit -a -m &quot;Fix in a hurry&quot; <br>
$ git stash pop <br>
# ... continue hacking ...</p>

<p style="margin-left:11%; margin-top: 1em">Testing partial
commits</p>

<p style="margin-left:17%;">You can use <b>git stash push
--keep-index</b> when you want to make two or more commits
out of the changes in the work tree, and you want to test
each change before committing:</p>

<p style="margin-left:23%; margin-top: 1em"># ... hack hack
hack ... <br>
$ git add --patch foo # add just first part to the index
<br>
$ git stash push --keep-index # save all other changes to
the stash <br>
$ edit/build/test first part <br>
$ git commit -m 'First part' # commit fully tested change
<br>
$ git stash pop # prepare to work on all other changes <br>
# ... repeat above five steps until one commit remains ...
<br>
$ edit/build/test remaining parts <br>
$ git commit foo -m 'Remaining parts'</p>

<p style="margin-left:11%; margin-top: 1em">Recovering
stash entries that were cleared/dropped erroneously</p>

<p style="margin-left:17%;">If you mistakenly drop or clear
stash entries, they cannot be recovered through the normal
safety mechanisms. However, you can try the following
incantation to get a list of stash entries that are still in
your repository, but not reachable any more:</p>

<p style="margin-left:23%; margin-top: 1em">git fsck
--unreachable | <br>
grep commit | cut -d\ -f3 | <br>
xargs git log --merges --no-walk --grep=WIP</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><a href="https://man.page/1/git-checkout">git-checkout(1)</a>,
<a href="https://man.page/1/git-commit">git-commit(1)</a>, <a href="https://man.page/1/git-reflog">git-reflog(1)</a>,
<a href="https://man.page/1/git-reset">git-reset(1)</a>, <a href="https://man.page/1/git-switch">git-switch(1)</a></p>

<h2>GIT
<a name="GIT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Part of the
<a href="https://man.page/1/git">git(1)</a> suite</p>
<hr>
</body>
</html>
