<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sat Nov 26 20:38:58 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NETWORKMANAGER.CONF</title>

</head>
<body>

<h1 align="center">NETWORKMANAGER.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#FILE FORMAT">FILE FORMAT</a><br>
<a href="#MAIN SECTION">MAIN SECTION</a><br>
<a href="#KEYFILE SECTION">KEYFILE SECTION</a><br>
<a href="#IFUPDOWN SECTION">IFUPDOWN SECTION</a><br>
<a href="#LOGGING SECTION">LOGGING SECTION</a><br>
<a href="#CONNECTION SECTION">CONNECTION SECTION</a><br>
<a href="#DEVICE SECTION">DEVICE SECTION</a><br>
<a href="#CONNECTIVITY SECTION">CONNECTIVITY SECTION</a><br>
<a href="#GLOBAL-DNS SECTION">GLOBAL-DNS SECTION</a><br>
<a href="#GLOBAL-DNS-DOMAIN SECTIONS">GLOBAL-DNS-DOMAIN SECTIONS</a><br>
<a href="#.CONFIG SECTIONS">.CONFIG SECTIONS</a><br>
<a href="#PLUGINS">PLUGINS</a><br>
<a href="#APPENDIX">APPENDIX</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">NetworkManager.conf
- NetworkManager configuration file</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/NetworkManager/NetworkManager.conf,
/etc/NetworkManager/conf.d/<i>name</i>.conf,
/run/NetworkManager/conf.d/<i>name</i>.conf,
/usr/lib/NetworkManager/conf.d/<i>name</i>.conf,
/var/lib/NetworkManager/NetworkManager-intern.conf</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">NetworkManager.conf
is the configuration file for NetworkManager. It is used to
set up various aspects of NetworkManager's behavior. The
location of the main file and configuration directories may
be changed through use of the <b>--config</b>,
<b>--config-dir</b>, <b>--system-config-dir</b>, and
<b>--intern-config</b> argument for NetworkManager,
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">If a default
NetworkManager.conf is provided by your distribution's
packages, you should not modify it, since your changes may
get overwritten by package updates. Instead, you can add
additional .conf files to the /etc/NetworkManager/conf.d
directory. These will be read in order, with later files
overriding earlier ones. Packages might install further
configuration snippets to /usr/lib/NetworkManager/conf.d.
This directory is parsed first, even before
NetworkManager.conf. Scripts can also put per-boot
configuration into /run/NetworkManager/conf.d. This
directory is parsed second, also before NetworkManager.conf.
The loading of a file
/run/NetworkManager/conf.d/<i>name</i>.conf can be prevented
by adding a file
/etc/NetworkManager/conf.d/<i>name</i>.conf. Likewise, a
file /usr/lib/NetworkManager/conf.d/<i>name</i>.conf can be
shadowed by putting a file of the same name to either
/etc/NetworkManager/conf.d or
/run/NetworkManager/conf.d.</p>

<p style="margin-left:11%; margin-top: 1em">NetworkManager
can overwrite certain user configuration options via D-Bus
or other internal operations. In this case it writes those
changes to
/var/lib/NetworkManager/NetworkManager-intern.conf. This
file is not intended to be modified by the user, but it is
read last and can shadow user configuration from
NetworkManager.conf.</p>

<p style="margin-left:11%; margin-top: 1em">Certain
settings from the configuration can be reloaded at runtime
either by sending SIGHUP signal or via D-Bus' Reload
call.</p>

<p style="margin-left:11%; margin-top: 1em">NetworkManager
does not require any configuration in NetworkManager.conf.
Depending on your use case, you may remove all files to
restore the default configuration (factory reset). But note
that your distribution or other packages may drop
configuration snippets for NetworkManager, such that they
are part of the factory default.</p>

<h2>FILE FORMAT
<a name="FILE FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
configuration file format is so-called key file (sort of
ini-style format). It consists of sections (groups) of
key-value pairs. Lines beginning with a '#' and blank lines
are considered comments. Sections are started by a header
line containing the section enclosed in '[' and ']', and
ended implicitly by the start of the next section or the end
of the file. Each key-value pair must be contained in a
section.</p>

<p style="margin-left:11%; margin-top: 1em">For keys that
take a list of devices as their value, you can specify
devices by their MAC addresses or interface names, or
&quot;*&quot; to specify all devices. See the section called
&ldquo;Device List Format&rdquo; below.</p>

<p style="margin-left:11%; margin-top: 1em">A simple
configuration file looks like this:</p>

<p style="margin-left:17%; margin-top: 1em">[main] <br>
plugins=keyfile</p>

<p style="margin-left:11%; margin-top: 1em">As an extension
to the normal keyfile format, you can also append a value to
a previously-set list-valued key by doing:</p>


<p style="margin-left:17%; margin-top: 1em">plugins+=another-plugin
<br>
plugins-=remove-me</p>

<h2>MAIN SECTION
<a name="MAIN SECTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>plugins</i></p>

<p style="margin-left:17%;">Lists system settings plugin
names separated by ','. These plugins are used to read and
write system-wide connection profiles. When multiple plugins
are specified, the connections are read from all listed
plugins. When writing connections, the plugins will be asked
to save the connection in the order listed here; if the
first plugin cannot write out that connection type (or can't
write out any connections) the next plugin is tried, etc. If
none of the plugins can save the connection, an error is
returned to the user.</p>

<p style="margin-left:17%; margin-top: 1em">The default
value and the number of available plugins is
distro-specific. See the section called
&ldquo;PLUGINS&rdquo; below for the available plugins. Note
that NetworkManager's native keyfile plugin is always
appended to the end of this list (if it doesn't already
appear earlier in the list).</p>


<p style="margin-left:11%; margin-top: 1em"><i>monitor-connection-files</i></p>

<p style="margin-left:17%;">This setting is deprecated and
has no effect. Profiles from disk are never automatically
reloaded. Use for example nmcli connection (re)load for
that.</p>


<p style="margin-left:11%; margin-top: 1em"><i>auth-polkit</i></p>

<p style="margin-left:17%;">Whether the system uses
PolicyKit for authorization. If true, non-root requests are
authorized using PolicyKit. Requests from root (user ID
zero) are always granted without asking PolicyKit. If false,
all requests will be allowed and PolicyKit is not used. If
set to root-only PolicyKit is not used and all requests
except root are denied. The default value is true.</p>


<p style="margin-left:11%; margin-top: 1em"><i>dhcp</i></p>

<p style="margin-left:17%;">This key sets up what DHCP
client NetworkManager will use. Allowed values are dhclient,
dhcpcd, and internal. The dhclient and dhcpcd options
require the indicated clients to be installed. The internal
option uses a built-in DHCP client which is not currently as
featureful as the external clients.</p>

<p style="margin-left:17%; margin-top: 1em">If this key is
missing, it defaults to internal. If the chosen plugin is
not available, clients are looked for in this order:
dhclient, dhcpcd, internal.</p>


<p style="margin-left:11%; margin-top: 1em"><i>no-auto-default</i></p>

<p style="margin-left:17%;">Specify devices for which
NetworkManager shouldn't create default wired connection
(Auto eth0). By default, NetworkManager creates a temporary
wired connection for any Ethernet device that is managed and
doesn't have a connection configured. List a device in this
option to inhibit creating the default connection for the
device. May have the special value * to apply to all
devices.</p>

<p style="margin-left:17%; margin-top: 1em">When the
default wired connection is deleted or saved to a new
persistent connection by a plugin, the device is added to a
list in the file
/var/lib/NetworkManager/no-auto-default.state to prevent
creating the default connection for that device again.</p>

<p style="margin-left:17%; margin-top: 1em">See the section
called &ldquo;Device List Format&rdquo; for the syntax how
to specify a device.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>


<p style="margin-left:23%; margin-top: 1em">no-auto-default=00:22:68:5c:5d:c4,00:1e:65:ff:aa:ee
<br>
no-auto-default=eth0,eth1 <br>
no-auto-default=*</p>


<p style="margin-left:11%; margin-top: 1em"><i>ignore-carrier</i></p>

<p style="margin-left:17%;">This setting is deprecated for
the per-device setting ignore-carrier which overwrites this
setting if specified (See <i>ignore-carrier</i>). Otherwise,
it is a list of matches to specify for which device carrier
should be ignored. See the section called &ldquo;Device List
Format&rdquo; for the syntax how to specify a device. Note
that master types like bond, bridge, and team ignore carrier
by default. You can however revert that default using the
&quot;except:&quot; specifier (or better, use the per-device
setting instead of the deprecated setting).</p>


<p style="margin-left:11%; margin-top: 1em"><i>assume-ipv6ll-only</i></p>

<p style="margin-left:17%;">Specify devices for which
NetworkManager will try to generate a connection based on
initial configuration when the device only has an IPv6
link-local address.</p>

<p style="margin-left:17%; margin-top: 1em">See the section
called &ldquo;Device List Format&rdquo; for the syntax how
to specify a device.</p>


<p style="margin-left:11%; margin-top: 1em"><i>configure-and-quit</i></p>

<p style="margin-left:17%;">This option is no longer useful
to configure in NetworkManager.conf file. It can however
also be configured on the command line with the same values,
where it has some use.</p>

<p style="margin-left:17%; margin-top: 1em">When set to
'initrd', NetworkManager does not connect to D-Bus and quits
after configuring the network. This is an implementation
detail how the NetworkManager module of dracut can run
NetworkManager. An alternative to this is having
NetworkManager as a systemd service with D-Bus in
initrd.</p>

<p style="margin-left:17%; margin-top: 1em">The value
'true' is unsupported since version 1.36. Previously this
was a mode where NetworkManager would quit after configuring
the network and run helper processes for DHCP and SLAAC.</p>

<p style="margin-left:17%; margin-top: 1em">Otherwise,
NetworkManager runs a system service with D-Bus and does not
quit during normal operation.</p>


<p style="margin-left:11%; margin-top: 1em"><i>hostname-mode</i></p>

<p style="margin-left:17%;">Set the management mode of the
hostname. This parameter will affect only the transient
hostname. If a valid static hostname is set, NetworkManager
will skip the update of the hostname despite the value of
this option. An hostname empty or equal to 'localhost',
'localhost6', 'localhost.localdomain' or
'localhost6.localdomain' is considered invalid.</p>

<p style="margin-left:17%; margin-top: 1em">default:
NetworkManager will update the hostname with the one
provided via DHCP or reverse DNS lookup of the IP address on
the connection with the default route or on any connection
with the property hostname.only-from-default set to 'false'.
Connections are considered in order of increasing value of
the hostname.priority property. In case multiple connections
have the same priority, connections activated earlier are
considered first. If no hostname can be determined in such
way, the hostname will be updated to the last one set
outside NetworkManager or to 'localhost.localdomain'.</p>

<p style="margin-left:17%; margin-top: 1em">dhcp: this is
similar to 'default', with the difference that after trying
to get the DHCP hostname, reverse DNS lookup is not done.
Note that selecting this option is equivalent to setting the
property 'hostname.from-dns-lookup' to 'false' globally for
all connections in NetworkManager.conf.</p>

<p style="margin-left:17%; margin-top: 1em">none:
NetworkManager will not manage the transient hostname and
will never set it.</p>

<p style="margin-left:11%; margin-top: 1em"><i>dns</i></p>

<p style="margin-left:17%;">Set the DNS processing
mode.</p>

<p style="margin-left:17%; margin-top: 1em">If the key is
unspecified, default is used, unless /etc/resolv.conf is a
symlink to /run/systemd/resolve/stub-resolv.conf,
/run/systemd/resolve/resolv.conf, /lib/systemd/resolv.conf
or /usr/lib/systemd/resolv.conf. In that case,
systemd-resolved is chosen automatically.</p>

<p style="margin-left:17%; margin-top: 1em">default:
NetworkManager will update /etc/resolv.conf to reflect the
nameservers provided by currently active connections. The
rc-manager setting (below) controls how this is done.</p>

<p style="margin-left:17%; margin-top: 1em">dnsmasq:
NetworkManager will run dnsmasq as a local caching
nameserver, using &quot;Conditional Forwarding&quot; if you
are connected to a VPN, and then update resolv.conf to point
to the local nameserver. It is possible to pass custom
options to the dnsmasq instance by adding them to files in
the &quot;/etc/NetworkManager/dnsmasq.d/&quot; directory.
Note that when multiple upstream servers are available,
dnsmasq will initially contact them in parallel and then use
the fastest to respond, probing again other servers after
some time. This behavior can be modified passing the
'all-servers' or 'strict-order' options to dnsmasq (see the
manual page for more details).</p>


<p style="margin-left:17%; margin-top: 1em">systemd-resolved:
NetworkManager will push the DNS configuration to
systemd-resolved</p>

<p style="margin-left:17%; margin-top: 1em">unbound:
NetworkManager will talk to unbound and dnssec-triggerd,
using &quot;Conditional Forwarding&quot; with DNSSEC
support. /etc/resolv.conf will be managed by dnssec-trigger
daemon. This option is deprecated. Note that dnssec-trigger
ships a NetworkManager dispatcher script so this DNS plugin
is not necessary.</p>

<p style="margin-left:17%; margin-top: 1em">none:
NetworkManager will not modify resolv.conf. This implies
rc-manager&nbsp;unmanaged</p>

<p style="margin-left:17%; margin-top: 1em">Note that the
plugins dnsmasq, systemd-resolved and unbound are caching
local nameservers. Hence, when NetworkManager writes
/run/NetworkManager/resolv.conf and /etc/resolv.conf
(according to rc-manager setting below), the name server
there will be localhost only. NetworkManager also writes a
file /run/NetworkManager/no-stub-resolv.conf that contains
the original name servers pushed to the DNS plugin.</p>

<p style="margin-left:17%; margin-top: 1em">When using
dnsmasq and systemd-resolved per-connection added dns
servers will always be queried using the device the
connection has been activated on.</p>


<p style="margin-left:11%; margin-top: 1em"><i>rc-manager</i></p>

<p style="margin-left:17%;">Set the resolv.conf management
mode. This option is about how NetworkManager writes to
/etc/resolv.conf, if at all. The default value depends on
NetworkManager build options, and this version of
NetworkManager was build with a default of &quot;&quot;.
Regardless of this setting, NetworkManager will always write
its version of resolv.conf to its runtime state directory as
/run/NetworkManager/resolv.conf.</p>

<p style="margin-left:17%; margin-top: 1em">If you
configure dns=none or make /etc/resolv.conf immutable with
chattr +i, NetworkManager will ignore this setting and
always choose unmanaged (below).</p>

<p style="margin-left:17%; margin-top: 1em">auto: if
systemd-resolved plugin is configured via the dns setting or
if it gets detected as main DNS plugin, NetworkManager will
update systemd-resolved without touching /etc/resolv.conf.
Alternatively, if resolvconf or netconfig are enabled at
compile time and the respective binary is found,
NetworkManager will automatically use it. Note that if you
install or uninstall these binaries, you need to reload the
rc-manager setting with SIGHUP or systemctl reload
NetworkManager. As last fallback it uses the symlink option
(see next).</p>

<p style="margin-left:17%; margin-top: 1em">symlink: If
/etc/resolv.conf is a regular file or does not exist,
NetworkManager will write the file directly. If
/etc/resolv.conf is instead a symlink, NetworkManager will
leave it alone. Unless the symlink points to the internal
file /run/NetworkManager/resolv.conf, in which case the
symlink will be updated to emit an inotify notification.
This allows the user to conveniently instruct NetworkManager
not to manage /etc/resolv.conf by replacing it with a
symlink.</p>

<p style="margin-left:17%; margin-top: 1em">file:
NetworkManager will write /etc/resolv.conf as regular file.
If it finds a symlink to an existing target, it will follow
the symlink and update the target instead. In no case will
an existing symlink be replaced by a file. Note that older
versions of NetworkManager behaved differently and would
replace dangling symlinks with a plain file.</p>

<p style="margin-left:17%; margin-top: 1em">resolvconf:
NetworkManager will run resolvconf to update the DNS
configuration.</p>

<p style="margin-left:17%; margin-top: 1em">netconfig:
NetworkManager will run netconfig to update the DNS
configuration.</p>

<p style="margin-left:17%; margin-top: 1em">unmanaged:
don't touch /etc/resolv.conf.</p>

<p style="margin-left:17%; margin-top: 1em">none:
deprecated alias for symlink.</p>


<p style="margin-left:11%; margin-top: 1em"><i>systemd-resolved</i></p>

<p style="margin-left:17%;">Send the connection DNS
configuration to systemd-resolved. Defaults to
&quot;true&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">Note that this
setting is complementary to the <i>dns</i> setting. You can
keep this enabled while using <i>dns</i> set to another DNS
plugin alongside systemd-resolved, or <i>dns</i> set to
systemd-resolved to configure the system resolver to use
systemd-resolved.</p>

<p style="margin-left:17%; margin-top: 1em">If
systemd-resolved is enabled, the connectivity check resolves
the hostname per-device.</p>


<p style="margin-left:11%; margin-top: 1em"><i>debug</i></p>

<p style="margin-left:17%;">Comma separated list of options
to aid debugging. This value will be combined with the
environment variable NM_DEBUG. Currently, the following
values are supported:</p>

<p style="margin-left:17%; margin-top: 1em">RLIMIT_CORE:
set ulimit -c unlimited to write out core dumps. Beware,
that a core dump can contain sensitive information such as
passwords or configuration settings.</p>


<p style="margin-left:17%; margin-top: 1em">fatal-warnings:
set g_log_set_always_fatal() to core dump on warning
messages from glib. This is equivalent to the
--g-fatal-warnings command line option.</p>


<p style="margin-left:11%; margin-top: 1em"><i>autoconnect-retries-default</i></p>

<p style="margin-left:17%;">The number of times a
connection activation should be automatically tried before
switching to another one. This value applies only to
connections that can auto-connect and have a
connection.autoconnect-retries property set to -1. If not
specified, connections will be tried 4 times. Setting this
value to 1 means to try activation once, without retry.</p>


<p style="margin-left:11%; margin-top: 1em"><i>slaves-order</i></p>

<p style="margin-left:17%;">This key specifies in which
order slave connections are auto-activated on boot or when
the master activates them. Allowed values are name (order
connection by interface name, the default), or index (order
slaves by their kernel index).</p>


<p style="margin-left:11%; margin-top: 1em"><i>firewall-backend</i></p>

<p style="margin-left:17%;">The firewall backend for
configuring masquerading with shared mode. Set to either
iptables, nftables or none. iptables and nftables require
iptables and nft application, respectively. none means to
skip firewall configuration if the users wish to manage
firewall themselves. If unspecified, it will be auto
detected.</p>


<p style="margin-left:11%; margin-top: 1em"><i>iwd-config-path</i></p>

<p style="margin-left:17%;">If the value is
&quot;auto&quot; (the default), IWD is queried for its
current state directory when it appears on D-Bus -- the
directory where IWD keeps its network configuration files --
usually /var/lib/iwd. NetworkManager will then attempt to
write copies of new or modified Wi-Fi connection profiles,
converted into the IWD format, into this directory thus
making IWD connection properties editable. NM will overwrite
existing files without preserving their contents.</p>

<p style="margin-left:17%; margin-top: 1em">The path can
also be overriden by pointing to a specific existing and
writable directory. On the other hand setting this to an
empty string or any other value disables the profile
conversion mechanism.</p>

<p style="margin-left:17%; margin-top: 1em">This mechanism
allows editing connection profile settings such as the
802.1x configuration using NetworkManager clients. Without
it such changes have no effect in IWD.</p>

<h2>KEYFILE SECTION
<a name="KEYFILE SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
contains keyfile-plugin-specific options, and is normally
only used when you are not using any other distro-specific
plugin.</p>


<p style="margin-left:11%; margin-top: 1em"><i>hostname</i></p>

<p style="margin-left:17%;">This key is deprecated and has
no effect since the hostname is now stored in /etc/hostname
or other system configuration files according to build
options.</p>


<p style="margin-left:11%; margin-top: 1em"><i>path</i></p>

<p style="margin-left:17%;">The location where keyfiles are
read and stored. This defaults to
&quot;/etc/NetworkManager/system-connections&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>unmanaged-devices</i></p>

<p style="margin-left:17%;">Set devices that should be
ignored by NetworkManager.</p>

<p style="margin-left:17%; margin-top: 1em">A device
unmanaged due to this option is strictly unmanaged and
cannot be overruled by using the API like <b>nmcli device
set $IFNAME managed yes</b>. Also, a device that is
unmanaged for other reasons, like an udev rule, cannot be
made managed with this option (e.g. by using an except:
specifier). These two points make it different from the
device*.managed option which for that reason may be a better
choice.</p>

<p style="margin-left:17%; margin-top: 1em">See the section
called &ldquo;Device List Format&rdquo; for the syntax on
how to specify a device.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>


<p style="margin-left:23%; margin-top: 1em">unmanaged-devices=interface-name:em4
<br>

unmanaged-devices=mac:00:22:68:1c:59:b1;mac:00:1E:65:30:D1:C4;interface-name:eth2</p>

<h2>IFUPDOWN SECTION
<a name="IFUPDOWN SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
contains ifupdown-specific options and thus only has effect
when using the ifupdown plugin.</p>


<p style="margin-left:11%; margin-top: 1em"><i>managed</i></p>

<p style="margin-left:17%;">If set to true, then interfaces
listed in /etc/network/interfaces are managed by
NetworkManager. If set to false, then any interface listed
in /etc/network/interfaces will be ignored by
NetworkManager. Remember that NetworkManager controls the
default route, so because the interface is ignored,
NetworkManager may assign the default route to some other
interface.</p>

<p style="margin-left:17%; margin-top: 1em">The default
value is false.</p>

<h2>LOGGING SECTION
<a name="LOGGING SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
controls NetworkManager's logging. Any settings here are
overridden by the <b>--log-level</b> and
<b>--log-domains</b> command-line options.</p>


<p style="margin-left:11%; margin-top: 1em"><i>level</i></p>

<p style="margin-left:17%;">The default logging verbosity
level. One of OFF, ERR, WARN, INFO, DEBUG, TRACE. The ERR
level logs only critical errors. WARN logs warnings that may
reflect operation. INFO logs various informational messages
that are useful for tracking state and operations. DEBUG
enables verbose logging for debugging purposes. TRACE
enables even more verbose logging then DEBUG level.
Subsequent levels also log all messages from earlier levels;
thus setting the log level to INFO also logs error and
warning messages.</p>


<p style="margin-left:11%; margin-top: 1em"><i>domains</i></p>

<p style="margin-left:17%;">The following log domains are
available: PLATFORM, RFKILL, ETHER, WIFI, BT, MB, DHCP4,
DHCP6, PPP, WIFI_SCAN, IP4, IP6, AUTOIP4, DNS, VPN, SHARING,
SUPPLICANT, AGENTS, SETTINGS, SUSPEND, CORE, DEVICE, OLPC,
WIMAX, INFINIBAND, FIREWALL, ADSL, BOND, VLAN, BRIDGE,
DBUS_PROPS, TEAM, CONCHECK, DCB, DISPATCH, AUDIT, SYSTEMD,
VPN_PLUGIN, PROXY.</p>

<p style="margin-left:17%; margin-top: 1em">In addition,
these special domains can be used: NONE, ALL, DEFAULT, DHCP,
IP.</p>

<p style="margin-left:17%; margin-top: 1em">You can specify
per-domain log level overrides by adding a colon and a log
level to any domain. E.g.,
&quot;WIFI:DEBUG,WIFI_SCAN:OFF&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">Domain
descriptions:</p>

<p style="margin-left:23%;">PLATFORM : OS (platform)
operations <br>
RFKILL : RFKill subsystem operations <br>
ETHER : Ethernet device operations <br>
WIFI : Wi-Fi device operations <br>
BT : Bluetooth operations <br>
MB : Mobile broadband operations <br>
DHCP4 : DHCP for IPv4 <br>
DHCP6 : DHCP for IPv6 <br>
PPP : Point-to-point protocol operations <br>
WIFI_SCAN : Wi-Fi scanning operations <br>
IP4 : IPv4-related operations <br>
IP6 : IPv6-related operations <br>
AUTOIP4 : AutoIP operations <br>
DNS : Domain Name System related operations <br>
VPN : Virtual Private Network connections and operations
<br>
SHARING : Connection sharing. With TRACE level log queries
for dnsmasq instance <br>
SUPPLICANT : WPA supplicant related operations <br>
AGENTS : Secret agents operations and communication <br>
SETTINGS : Settings/config service operations <br>
SUSPEND : Suspend/resume <br>
CORE : Core daemon and policy operations <br>
DEVICE : Activation and general interface operations <br>
OLPC : OLPC Mesh device operations <br>
WIMAX : WiMAX device operations <br>
INFINIBAND : InfiniBand device operations <br>
FIREWALL : FirewallD related operations <br>
ADSL : ADSL device operations <br>
BOND : Bonding operations <br>
VLAN : VLAN operations <br>
BRIDGE : Bridging operations <br>
DBUS_PROPS : D-Bus property changes <br>
TEAM : Teaming operations <br>
CONCHECK : Connectivity check <br>
DCB : Data Center Bridging (DCB) operations <br>
DISPATCH : Dispatcher scripts <br>
AUDIT : Audit records <br>
SYSTEMD : Messages from internal libsystemd <br>
VPN_PLUGIN : logging messages from VPN plugins <br>
PROXY : logging messages for proxy handling</p>

<p style="margin-left:23%; margin-top: 1em">NONE : when
given by itself logging is disabled <br>
ALL : all log domains <br>
DEFAULT : default log domains <br>
DHCP : shortcut for &quot;DHCP4,DHCP6&quot; <br>
IP : shortcut for &quot;IP4,IP6&quot;</p>

<p style="margin-left:23%; margin-top: 1em">HW : deprecated
alias for &quot;PLATFORM&quot;</p>

<p style="margin-left:17%; margin-top: 1em">In general, the
logfile should not contain passwords or private data.
However, you are always advised to check the file before
posting it online or attaching to a bug report. VPN_PLUGIN
is special as it might reveal private information of the VPN
plugins with verbose levels. Therefore this domain will be
excluded when setting ALL or DEFAULT to more verbose levels
then INFO.</p>


<p style="margin-left:11%; margin-top: 1em"><i>backend</i></p>

<p style="margin-left:17%;">The logging backend. Supported
values are &quot;syslog&quot; and &quot;journal&quot;. When
NetworkManager is started with &quot;--debug&quot; in
addition all messages will be printed to stderr. If
unspecified, the default is &quot;journal&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>audit</i></p>

<p style="margin-left:17%;">Whether the audit records are
delivered to auditd, the audit daemon. If false, audit
records will be sent only to the NetworkManager logging
system. If set to true, they will be also sent to auditd.
The default value is true.</p>

<h2>CONNECTION SECTION
<a name="CONNECTION SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Specify default
values for connections.</p>

<p style="margin-left:11%; margin-top: 1em">Such default
values are only consulted if the corresponding
per-connection property explicitly allows for that. That
means, all these properties correspond to a property of the
connection profile (for example connection.mud-url). Only if
the per-profile property is set to a special value that
indicates to use the default, the default value from
NetworkManager.conf is consulted. It depends on the
property, which is the special value that indicates fallback
to the default, but it usually is something like empty,
unset values or special numeric values like 0 or -1. That
means the effectively used value can first always be
configured for each profile, and these default values only
matter if the per-profile values explicitly indicates to use
the default from NetworkManager.conf.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<p style="margin-left:17%; margin-top: 1em">[connection]
<br>
ipv6.ip6-privacy=0</p>

<p style="margin-left:11%; margin-top: 1em"><b>Supported
Properties</b> <br>
Not all properties can be overwritten, only the following
properties are supported to have their default values
configured (see <b>nm-settings</b>(5) for details).</p>


<p style="margin-left:11%; margin-top: 1em"><i>802-1x.auth-timeout</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>cdma.mtu</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.auth-retries</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value is 3 tries before failing the connection.</p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.autoconnect-slaves</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.mud-url</i></p>

<p style="margin-left:17%;">If unspecified, MUD URL
defaults to &quot;none&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.lldp</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.llmnr</i></p>

<p style="margin-left:17%;">If unspecified, the ultimate
default values depends on the DNS plugin. With
systemd-resolved the default currently is &quot;yes&quot;
(2) and for all other plugins &quot;no&quot; (0).</p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.mdns</i></p>

<p style="margin-left:17%;">If unspecified, the ultimate
default values depends on the DNS plugin. With
systemd-resolved the default currently is &quot;no&quot; (0)
and for all other plugins also &quot;no&quot; (0).</p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.dns-over-tls</i></p>

<p style="margin-left:17%;">If unspecified, the ultimate
default values depends on the DNS plugin. With
systemd-resolved the default currently is global setting and
for all other plugins &quot;no&quot; (0).</p>


<p style="margin-left:11%; margin-top: 1em"><i>connection.stable-id</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ethernet.cloned-mac-address</i></p>

<p style="margin-left:17%;">If left unspecified, it
defaults to &quot;preserve&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ethernet.generate-mac-address-mask</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ethernet.mtu</i></p>

<p style="margin-left:17%;">If configured explicitly to 0,
the MTU is not reconfigured during device activation unless
it is required due to IPv6 constraints. If left unspecified,
a DHCP/IPv6 SLAAC provided value is used or the MTU is not
reconfigured during activation.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ethernet.wake-on-lan</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>gsm.mtu</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>hostname.from-dhcp</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>hostname.from-dns-lookup</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>hostname.only-from-default</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>hostname.priority</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>infiniband.mtu</i></p>

<p style="margin-left:17%;">If configured explicitly to 0,
the MTU is not reconfigured during device activation unless
it is required due to IPv6 constraints. If left unspecified,
a DHCP/IPv6 SLAAC provided value is used or the MTU is left
unspecified on activation.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ip-tunnel.mtu</i></p>

<p style="margin-left:17%;">If configured explicitly to 0,
the MTU is not reconfigured during device activation unless
it is required due to IPv6 constraints. If left unspecified,
a DHCP/IPv6 SLAAC provided value is used or a default of
1500.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dad-timeout</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dhcp-client-id</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dhcp-iaid</i></p>

<p style="margin-left:17%;">If left unspecified, it
defaults to &quot;ifname&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dhcp-hostname-flags</i></p>

<p style="margin-left:17%;">If left unspecified, the value
3 (fqdn-encoded,fqdn-serv-update) is used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dhcp-timeout</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value for the interface type is used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dhcp-vendor-class-identifier</i></p>

<p style="margin-left:17%;">If left unspecified, the
default is to not send the DHCP option to the server.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.dns-priority</i></p>

<p style="margin-left:17%;">If unspecified or zero, use 50
for VPN profiles and 100 for other profiles.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.required-timeout</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.route-metric</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv4.route-table</i></p>

<p style="margin-left:17%;">If left unspecified, routes are
only added to the main table. Note that this is different
from explicitly selecting the main table 254, because of how
NetworkManager removes extraneous routes from the
tables.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.ra-timeout</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value depends on the sysctl solicitation
settings.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.dhcp-duid</i></p>

<p style="margin-left:17%;">If left unspecified, it
defaults to &quot;lease&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.dhcp-iaid</i></p>

<p style="margin-left:17%;">If left unspecified, it
defaults to &quot;ifname&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.dhcp-hostname-flags</i></p>

<p style="margin-left:17%;">If left unspecified, the value
1 (fqdn-serv-update) is used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.dhcp-timeout</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value for the interface type is used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.dns-priority</i></p>

<p style="margin-left:17%;">If unspecified or zero, use 50
for VPN profiles and 100 for other profiles.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.ip6-privacy</i></p>

<p style="margin-left:17%;">If ipv6.ip6-privacy is unset,
use the content of
&quot;/proc/sys/net/ipv6/conf/default/use_tempaddr&quot; as
last fallback.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.required-timeout</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.route-metric</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>ipv6.route-table</i></p>

<p style="margin-left:17%;">If left unspecified, routes are
only added to the main table. Note that this is different
from explicitly selecting the main table 254, because of how
NetworkManager removes extraneous routes from the
tables.</p>


<p style="margin-left:11%; margin-top: 1em"><i>sriov.autoprobe-drivers</i></p>

<p style="margin-left:17%;">If left unspecified, drivers
are autoprobed when the SR-IOV VF gets created.</p>


<p style="margin-left:11%; margin-top: 1em"><i>vpn.timeout</i></p>

<p style="margin-left:17%;">If left unspecified, default
value of 60 seconds is used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.ap-isolation</i></p>

<p style="margin-left:17%;">If left unspecified, AP
isolation is disabled.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.cloned-mac-address</i></p>

<p style="margin-left:17%;">If left unspecified, it
defaults to &quot;preserve&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.generate-mac-address-mask</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.mac-address-randomization</i></p>

<p style="margin-left:17%;">If left unspecified, MAC
address randomization is disabled. This setting is
deprecated for wifi.cloned-mac-address.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.mtu</i></p>

<p style="margin-left:17%;">If configured explicitly to 0,
the MTU is not reconfigured during device activation unless
it is required due to IPv6 constraints. If left unspecified,
a DHCP/IPv6 SLAAC provided value is used or a default of
1500.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.powersave</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value &quot;ignore&quot; will be used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi-sec.pmf</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value &quot;optional&quot; will be used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi-sec.fils</i></p>

<p style="margin-left:17%;">If left unspecified, the
default value &quot;optional&quot; will be used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.wake-on-wlan</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>wireguard.mtu</i></p>


<p style="margin-left:11%; margin-top: 1em"><b>Sections</b>
<br>
You can configure multiple connection sections, by having
different sections with a name that all start with
&quot;connection&quot;. Example:</p>

<p style="margin-left:17%; margin-top: 1em">[connection]
<br>
ipv6.ip6-privacy=0 <br>
connection.autoconnect-slaves=1 <br>
vpn.timeout=120</p>


<p style="margin-left:17%; margin-top: 1em">[connection-wifi-wlan0]
<br>
match-device=interface-name:wlan0 <br>
ipv4.route-metric=50</p>


<p style="margin-left:17%; margin-top: 1em">[connection-wifi-other]
<br>
match-device=type:wifi <br>
ipv4.route-metric=55 <br>
ipv6.ip6-privacy=1</p>

<p style="margin-left:11%; margin-top: 1em">The sections
within one file are considered in order of appearance, with
the exception that the [connection] section is always
considered last. In the example above, this order is
[connection-wifi-wlan0], [connection-wlan-other], and
[connection]. When checking for a default configuration
value, the sections are searched until the requested value
is found. In the example above,
&quot;ipv4.route-metric&quot; for wlan0 interface is set to
50, and for all other Wi-Fi typed interfaces to 55. Also,
Wi-Fi devices would have IPv6 private addresses enabled by
default, but other devices would have it disabled. Note that
also &quot;wlan0&quot; gets &quot;ipv6.ip6-privacy=1&quot;,
because although the section
&quot;[connection-wifi-wlan0]&quot; matches the device, it
does not contain that property and the search continues.</p>

<p style="margin-left:11%; margin-top: 1em">When having
different sections in multiple files, sections from files
that are read later have higher priority. So within one file
the priority of the sections is top-to-bottom. Across
multiple files later definitions take precedence.</p>

<p style="margin-left:11%; margin-top: 1em">The following
properties further control how a connection section
applies.</p>


<p style="margin-left:11%; margin-top: 1em"><i>match-device</i></p>

<p style="margin-left:17%;">An optional device spec that
restricts when the section applies. See the section called
&ldquo;Device List Format&rdquo; for the possible
values.</p>


<p style="margin-left:11%; margin-top: 1em"><i>stop-match</i></p>

<p style="margin-left:17%;">An optional boolean value which
defaults to no. If the section matches (based on
match-device), further sections will not be considered even
if the property in question is not present. In the example
above, if [connection-wifi-wlan0] would have stop-match set
to yes, the device wlan0 would have ipv6.ip6-privacy
property unspecified. That is, the search for the property
would not continue in the connection sections
[connection-wifi-other] or [connection].</p>

<h2>DEVICE SECTION
<a name="DEVICE SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Contains
per-device persistent configuration.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<p style="margin-left:17%; margin-top: 1em">[device] <br>
match-device=interface-name:eth3 <br>
managed=1</p>

<p style="margin-left:11%; margin-top: 1em"><b>Supported
Properties</b> <br>
The following properties can be configured per-device.</p>


<p style="margin-left:11%; margin-top: 1em"><i>managed</i></p>

<p style="margin-left:17%;">Whether the device is managed
or not. A device can be marked as managed via udev rules
(ENV{NM_UNMANAGED}), or via setting plugins
(keyfile.unmanaged-devices). This is yet another way. Note
that this configuration can be overruled at runtime via
D-Bus. Also, it has higher priority then udev rules.</p>


<p style="margin-left:11%; margin-top: 1em"><i>carrier-wait-timeout</i></p>

<p style="margin-left:17%;">Specify the timeout for waiting
for carrier in milliseconds. The default is 5000
milliseconds. This setting exists because certain
drivers/hardware can take a long time to detect whether the
cable is plugged in.</p>

<p style="margin-left:17%; margin-top: 1em">When the device
loses carrier, NetworkManager does not react immediately.
Instead, it waits for this timeout before considering the
link lost.</p>

<p style="margin-left:17%; margin-top: 1em">Also, on
startup, NetworkManager considers the device as busy for
this time, as long as the device has no carrier. This delays
startup-complete signal and NetworkManager-wait-online.
Configuring this too high means to block
NetworkManager-wait-online longer than necessary when
booting with cable unplugged. Configuring it too low, means
that NetworkManager will declare startup-complete too soon,
although carrier is about to come and auto-activation to
kick in. Note that if a profile only has static IP
configuration or Layer 3 configuration disabled, then it can
already autoconnect without carrier on the device. Once such
a profile reaches full activated state, startup-complete is
considered as reached even if the device has no carrier
yet.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ignore-carrier</i></p>

<p style="margin-left:17%;">Specify devices for which
NetworkManager will (partially) ignore the carrier state.
Normally, for device types that support carrier-detect, such
as Ethernet and InfiniBand, NetworkManager will only allow a
connection to be activated on the device if carrier is
present (ie, a cable is plugged in), and it will deactivate
the device if carrier drops for more than a few seconds.</p>

<p style="margin-left:17%; margin-top: 1em">A device with
carrier ignored will allow activating connections on that
device even when it does not have carrier, provided that the
connection uses only statically-configured IP addresses.
Additionally, it will allow any active connection (whether
static or dynamic) to remain active on the device when
carrier is lost.</p>

<p style="margin-left:17%; margin-top: 1em">Note that the
&quot;carrier&quot; property of NMDevices and device D-Bus
interfaces will still reflect the actual device state; it's
just that NetworkManager will not make use of that
information.</p>

<p style="margin-left:17%; margin-top: 1em">Master types
like bond, bridge and team ignore carrier by default, while
other device types react on carrier changes by default.</p>

<p style="margin-left:17%; margin-top: 1em">This setting
overwrites the deprecated main.ignore-carrier setting
above.</p>


<p style="margin-left:11%; margin-top: 1em"><i>keep-configuration</i></p>

<p style="margin-left:17%;">On startup, NetworkManager
tries to not interfere with interfaces that are already
configured. It does so by generating a in-memory connection
based on the interface current configuration.</p>

<p style="margin-left:17%; margin-top: 1em">If this
generated connection matches one of the existing persistent
connections, the persistent connection gets activated. If
there is no match, the generated connection gets activated
as &quot;external&quot;, which means that the connection is
considered as active, but NetworkManager doesn't actually
touch the interface.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to disable this behavior by setting keep-configuration to
no. In this way, on startup NetworkManager always tries to
activate the most suitable persistent connection (the one
with highest autoconnect-priority or, in case of a tie, the
one activated most recently).</p>

<p style="margin-left:17%; margin-top: 1em">Note that when
NetworkManager gets restarted, it stores the previous state
in /run/NetworkManager; in particular it saves the UUID of
the connection that was previously active so that it can be
activated again after the restart. Therefore,
keep-configuration does not have any effect on service
restart.</p>


<p style="margin-left:11%; margin-top: 1em"><i>allowed-connections</i></p>

<p style="margin-left:17%;">A list of connections that can
be activated on the device. See the section called
&ldquo;Connection List Format&rdquo; for the syntax to
specify a connection. If this option is not specified, all
connections can be potentially activated on the device,
provided that the connection type and other settings
match.</p>

<p style="margin-left:17%; margin-top: 1em">A notable use
case for this is to filter which connections can be
activated based on how they were created; see the origin
keyword in the section called &ldquo;Connection List
Format&rdquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.scan-rand-mac-address</i></p>

<p style="margin-left:17%;">Configures MAC address
randomization of a Wi-Fi device during scanning. This
defaults to yes in which case a random, locally-administered
MAC address will be used. The setting
wifi.scan-generate-mac-address-mask allows to influence the
generated MAC address to use certain vendor OUIs. If
disabled, the MAC address during scanning is left unchanged
to whatever is configured. For the configured MAC address
while the device is associated, see instead the
per-connection setting wifi.cloned-mac-address.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.backend</i></p>

<p style="margin-left:17%;">Specify the Wi-Fi backend used
for the device. Currently, supported are wpa_supplicant and
iwd (experimental). If unspecified, the default is
&quot;wpa_supplicant&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.scan-generate-mac-address-mask</i></p>

<p style="margin-left:17%;">Like the per-connection
settings ethernet.generate-mac-address-mask and
wifi.generate-mac-address-mask, this allows to configure the
generated MAC addresses during scanning. See
<b>nm-settings</b>(5) for details.</p>


<p style="margin-left:11%; margin-top: 1em"><i>wifi.iwd.autoconnect</i></p>

<p style="margin-left:17%;">If wifi.backend is iwd, setting
this to false forces IWD's autoconnect mechanism to be
disabled for this device and connections will only be
initiated by NetworkManager whether commanded by a client or
automatically. Leaving it true (default) stops
NetworkManager from automatically initiating connections and
allows IWD to use its network ranking and scanning logic to
decide the best networks to autoconnect to next.
Connections' autoconnect-priority, autoconnect-retries
settings will be ignored. Other settings like permissions or
multi-connect may interfere with IWD connection
attempts.</p>


<p style="margin-left:11%; margin-top: 1em"><i>sriov-num-vfs</i></p>

<p style="margin-left:17%;">Specify the number of virtual
functions (VF) to enable for a PCI physical device that
supports single-root I/O virtualization (SR-IOV).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Sections</b>
<br>
The [device] section works the same as the [connection]
section. That is, multiple sections that all start with the
prefix &quot;device&quot; can be specified. The settings
&quot;match-device&quot; and &quot;stop-match&quot; are
available to match a device section on a device. The order
of multiple sections is also top-down within the file and
later files overwrite previous settings. See
&ldquo;Sections&rdquo; under the section called
&ldquo;CONNECTION SECTION&rdquo; for details.</p>

<h2>CONNECTIVITY SECTION
<a name="CONNECTIVITY SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
controls NetworkManager's optional connectivity checking
functionality. This allows NetworkManager to detect whether
or not the system can actually access the internet or
whether it is behind a captive portal.</p>

<p style="margin-left:11%; margin-top: 1em">Connectivity
checking serves two purposes. For one, it exposes a
connectivity state on D-Bus, which other applications may
use. For example, Gnome's portal helper uses this as signal
to show a captive portal login page. The other use is that
default-route of devices without global connectivity get a
penalty of +20000 to the route-metric. This has the purpose
to give a better default-route to devices that have global
connectivity. For example, when being connected to WWAN and
to a Wi-Fi network which is behind a captive portal, WWAN
still gets preferred until login.</p>

<p style="margin-left:11%; margin-top: 1em">Note that your
distribution might set /proc/sys/net/ipv4/conf/*/rp_filter
to strict filtering. That works badly with per-device
connectivity checking, which uses SO_BINDDEVICE to send
requests on all devices. A strict rp_filter setting will
reject any response and the connectivity check on all but
the best route will fail.</p>


<p style="margin-left:11%; margin-top: 1em"><i>enabled</i></p>

<p style="margin-left:17%;">Whether connectivity check is
enabled. Note that to enable connectivity check, a valid uri
must also be configured. The value defaults to true, but
since the uri is unset by default, connectivity check may be
disabled. The main purpose of this option is to have a
single flag to disable connectivity check. Note that this
setting can also be set via D-Bus API at runtime. In that
case, the value gets stored in
/var/lib/NetworkManager/NetworkManager-intern.conf file.</p>

<p style="margin-left:11%; margin-top: 1em"><i>uri</i></p>

<p style="margin-left:17%;">The URI of a web page to
periodically request when connectivity is being checked.
This page should return the header
&quot;X-NetworkManager-Status&quot; with a value of
&quot;online&quot;. Alternatively, its body content should
be set to &quot;NetworkManager is online&quot;. The body
content check can be controlled by the response option. If
this option is blank or missing, connectivity checking is
disabled.</p>


<p style="margin-left:11%; margin-top: 1em"><i>interval</i></p>

<p style="margin-left:17%;">Specified in seconds; controls
how often connectivity is checked when a network connection
exists. If set to 0 connectivity checking is disabled. If
missing, the default is 300 seconds.</p>


<p style="margin-left:11%; margin-top: 1em"><i>response</i></p>

<p style="margin-left:17%;">If set, controls what body
content NetworkManager checks for when requesting the URI
for connectivity checking. Note that this only compares that
the HTTP response starts with the specifid text, it does not
compare the exact string. This behavior might change in the
future, so avoid relying on it. If missing, the response
defaults to &quot;NetworkManager is online&quot;. If set to
empty, the HTTP server is expected to answer with status
code 204 or send no data.</p>

<h2>GLOBAL-DNS SECTION
<a name="GLOBAL-DNS SECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
specifies global DNS settings that override
connection-specific configuration.</p>


<p style="margin-left:11%; margin-top: 1em"><i>searches</i></p>

<p style="margin-left:17%;">A list of search domains to be
used during hostname lookup.</p>


<p style="margin-left:11%; margin-top: 1em"><i>options</i></p>

<p style="margin-left:17%;">A list of options to be passed
to the hostname resolver.</p>

<h2>GLOBAL-DNS-DOMAIN SECTIONS
<a name="GLOBAL-DNS-DOMAIN SECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sections with a
name starting with the &quot;global-dns-domain-&quot; prefix
allow to define global DNS configuration for specific
domains. The part of section name after
&quot;global-dns-domain-&quot; specifies the domain name a
section applies to. More specific domains have the
precedence over less specific ones and the default domain is
represented by the wildcard &quot;*&quot;. A default domain
section is mandatory.</p>


<p style="margin-left:11%; margin-top: 1em"><i>servers</i></p>

<p style="margin-left:17%;">A list of addresses of DNS
servers to be used for the given domain.</p>


<p style="margin-left:11%; margin-top: 1em"><i>options</i></p>

<p style="margin-left:17%;">A list of domain-specific DNS
options. Not used at the moment.</p>

<h2>.CONFIG SECTIONS
<a name=".CONFIG SECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This is a
special section that contains options which apply to the
configuration file that contains the option.</p>


<p style="margin-left:11%; margin-top: 1em"><i>enable</i></p>

<p style="margin-left:17%;">Defaults to &quot;true&quot;.
If &quot;false&quot;, the configuration file will be skipped
during loading. Note that the main configuration file
NetworkManager.conf cannot be disabled.</p>

<p style="margin-left:23%; margin-top: 1em"># always skip
loading the config file <br>
[.config] <br>
enable=false</p>

<p style="margin-left:17%; margin-top: 1em">You can also
match against the version of NetworkManager. For example the
following are valid configurations:</p>

<p style="margin-left:23%; margin-top: 1em"># only load on
version 1.0.6 <br>
[.config] <br>
enable=nm-version:1.0.6</p>

<p style="margin-left:23%; margin-top: 1em"># load on all
versions 1.0.x, but not 1.2.x <br>
[.config] <br>
enable=nm-version:1.0</p>

<p style="margin-left:23%; margin-top: 1em"># only load on
versions &gt;= 1.1.6. This does not match <br>
# with version 1.2.0 or 1.4.4. Only the last digit is
considered. <br>
[.config] <br>
enable=nm-version-min:1.1.6</p>

<p style="margin-left:23%; margin-top: 1em"># only load on
versions &gt;= 1.2. Contrary to the previous <br>
# example, this also matches with 1.2.0, 1.2.10, 1.4.4, etc.
<br>
[.config] <br>
enable=nm-version-min:1.2</p>

<p style="margin-left:23%; margin-top: 1em"># Match against
the maximum allowed version. The example matches <br>
# versions 1.2.0, 1.2.2, 1.2.4. Again, only the last version
digit <br>
# is allowed to be smaller. So this would not match on
1.1.10. <br>
[.config] <br>
enable=nm-version-max:1.2.6</p>

<p style="margin-left:17%; margin-top: 1em">You can also
match against the value of the environment variable
NM_CONFIG_ENABLE_TAG, like:</p>

<p style="margin-left:23%; margin-top: 1em"># always skip
loading the file when running NetworkManager with <br>
# environment variable &quot;NM_CONFIG_ENABLE_TAG=TAG1&quot;
<br>
[.config] <br>
enable=env:TAG1</p>

<p style="margin-left:17%; margin-top: 1em">More then one
match can be specified. The configuration will be enabled if
one of the predicates matches (&quot;or&quot;). The special
prefix &quot;except:&quot; can be used to negate the match.
Note that if one except-predicate matches, the entire
configuration will be disabled. In other words, a except
predicate always wins over other predicates. If the setting
only consists of &quot;except:&quot; matches and none of the
negative conditions are satisfied, the configuration is
still enabled.</p>

<p style="margin-left:23%; margin-top: 1em"># enable the
configuration either when the environment variable <br>
# is present or the version is at least 1.2.0. <br>
[.config] <br>
enable=env:TAG2,nm-version-min:1.2</p>

<p style="margin-left:23%; margin-top: 1em"># enable the
configuration for version &gt;= 1.2.0, but disable <br>
# it when the environment variable is set to
&quot;TAG3&quot; <br>
[.config] <br>
enable=except:env:TAG3,nm-version-min:1.2</p>

<p style="margin-left:23%; margin-top: 1em"># enable the
configuration on &gt;= 1.3, &gt;= 1.2.6, and &gt;= 1.0.16.
<br>
# Useful if a certain feature is only present since those
releases. <br>
[.config] <br>

enable=nm-version-min:1.3,nm-version-min:1.2.6,nm-version-min:1.0.16</p>

<h2>PLUGINS
<a name="PLUGINS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Settings
plugins for reading and writing connection profiles. The
number of available plugins is distribution specific.</p>


<p style="margin-left:11%; margin-top: 1em"><i>keyfile</i></p>

<p style="margin-left:17%;">The keyfile plugin is the
generic plugin that supports all the connection types and
capabilities that NetworkManager has. It writes files out in
an .ini-style format in
/etc/NetworkManager/system-connections. See
<b>nm-settings-keyfile</b>(5) for details about the file
format.</p>

<p style="margin-left:17%; margin-top: 1em">The stored
connection file may contain passwords, secrets and private
keys in plain text, so it will be made readable only to
root, and the plugin will ignore files that are readable or
writable by any user or group other than root. See
&quot;Secret flag types&quot; in <b>nm-settings</b>(5) for
how to avoid storing passwords in plain text.</p>

<p style="margin-left:17%; margin-top: 1em">This plugin is
always active, and will automatically be used to store any
connections that aren't supported by any other active
plugin.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ifcfg-rh</i></p>

<p style="margin-left:17%;">This plugin is used on the
Fedora and Red Hat Enterprise Linux distributions to read
and write configuration from the standard
/etc/sysconfig/network-scripts/ifcfg-* files. It currently
supports reading Ethernet, Wi-Fi, InfiniBand, VLAN, Bond,
Bridge, and Team connections. Enabling ifcfg-rh implicitly
enables ibft plugin, if it is available. This can be
disabled by adding no-ibft. See
/usr/share/doc/initscripts/sysconfig.txt and
<b>nm-settings-ifcfg-rh</b>(5) for more information about
the ifcfg file format.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ifupdown</i></p>

<p style="margin-left:17%;">This plugin is used on the
Debian and Ubuntu distributions, and reads Ethernet and
Wi-Fi connections from /etc/network/interfaces.</p>

<p style="margin-left:17%; margin-top: 1em">This plugin is
read-only; any connections (of any type) added from within
NetworkManager when you are using this plugin will be saved
using the keyfile plugin instead.</p>

<p style="margin-left:11%; margin-top: 1em"><i>ibft</i>,
<i>no-ibft</i></p>

<p style="margin-left:17%;">These plugins are deprecated
and their selection has no effect. This is now handled by
nm-initrd-generator.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ifcfg-suse</i>,
<i>ifnet</i></p>

<p style="margin-left:17%;">These plugins are deprecated
and their selection has no effect. The keyfile plugin should
be used instead.</p>

<h2>APPENDIX
<a name="APPENDIX"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Device List
Format</b> <br>
The configuration options main.no-auto-default,
main.ignore-carrier, keyfile.unmanaged-devices,
connection*.match-device and device*.match-device select
devices based on a list of matchings. Devices can be
specified using the following format:</p>

<p style="margin-left:11%; margin-top: 1em">*</p>

<p style="margin-left:17%;">Matches every device.</p>

<p style="margin-left:11%; margin-top: 1em">IFNAME</p>

<p style="margin-left:17%;">Case sensitive match of
interface name of the device. Globbing is not supported.</p>

<p style="margin-left:11%; margin-top: 1em">HWADDR</p>

<p style="margin-left:17%;">Match the permanent MAC address
of the device. Globbing is not supported</p>


<p style="margin-left:11%; margin-top: 1em">interface-name:IFNAME,
interface-name:~IFNAME</p>

<p style="margin-left:17%;">Case sensitive match of
interface name of the device. Simple globbing is supported
with * and ?. Ranges and escaping is not supported.</p>


<p style="margin-left:11%; margin-top: 1em">interface-name:=IFNAME</p>

<p style="margin-left:17%;">Case sensitive match of
interface name of the device. Globbing is disabled and
IFNAME is taken literally.</p>

<p style="margin-left:11%; margin-top: 1em">mac:HWADDR</p>

<p style="margin-left:17%;">Match the permanent MAC address
of the device. Globbing is not supported</p>


<p style="margin-left:11%; margin-top: 1em">s390-subchannels:HWADDR</p>

<p style="margin-left:17%;">Match the device based on the
subchannel address. Globbing is not supported</p>

<p style="margin-left:11%; margin-top: 1em">type:TYPE</p>

<p style="margin-left:17%;">Match the device type. Valid
type names are as reported by &quot;nmcli -f GENERAL.TYPE
device show&quot;. Globbing is not supported.</p>


<p style="margin-left:11%; margin-top: 1em">driver:DRIVER</p>

<p style="margin-left:17%;">Match the device driver as
reported by &quot;nmcli -f
GENERAL.DRIVER,GENERAL.DRIVER-VERSION device show&quot;.
&quot;DRIVER&quot; must match the driver name exactly and
does not support globbing. Optionally, a driver version may
be specified separated by '/'. Globbing is supported for the
version.</p>


<p style="margin-left:11%; margin-top: 1em">dhcp-plugin:DHCP</p>

<p style="margin-left:17%;">Match the configured DHCP
plugin &quot;main.dhcp&quot;.</p>


<p style="margin-left:11%; margin-top: 1em">except:SPEC</p>

<p style="margin-left:17%;">Negative match of a device.
SPEC must be explicitly qualified with a prefix such as
interface-name:. A negative match has higher priority then
the positive matches above.</p>

<p style="margin-left:17%; margin-top: 1em">If there is a
list consisting only of negative matches, the behavior is
the same as if there is also match-all. That means, if none
of all the negative matches is satisfied, the overall result
is still a positive match. That means,
&quot;except:interface-name:eth0&quot; is the same as
&quot;*,except:interface-name:eth0&quot;.</p>


<p style="margin-left:11%; margin-top: 1em">SPEC[,;]SPEC</p>

<p style="margin-left:17%;">Multiple specs can be
concatenated with commas or semicolons. The order does not
matter as matches are either inclusive or negative
(except:), with negative matches having higher priority.</p>

<p style="margin-left:17%; margin-top: 1em">Backslash is
supported to escape the separators ';' and ',', and to
express special characters such as newline ('\n'), tabulator
('\t'), whitespace ('\s') and backslash ('\\'). The globbing
of interface names cannot be escaped. Whitespace is not a
separator but will be trimmed between two specs (unless
escaped as '\s').</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>


<p style="margin-left:17%; margin-top: 1em">interface-name:em4
<br>

mac:00:22:68:1c:59:b1;mac:00:1E:65:30:D1:C4;interface-name:eth2
<br>
interface-name:vboxnet*,except:interface-name:vboxnet2 <br>
*,except:mac:00:22:68:1c:59:b1</p>

<p style="margin-left:11%; margin-top: 1em"><b>Connection
List Format</b> <br>
Connections can be specified using the following format:</p>

<p style="margin-left:11%; margin-top: 1em">*</p>

<p style="margin-left:17%;">Matches every connection.</p>

<p style="margin-left:11%; margin-top: 1em">uuid:UUID</p>

<p style="margin-left:17%;">Match the connection by UUID,
for example
&quot;uuid:83037490-1d17-4986-a397-01f1db3a7fc2&quot;</p>

<p style="margin-left:11%; margin-top: 1em">id=ID</p>

<p style="margin-left:17%;">Match the connection by
name.</p>


<p style="margin-left:11%; margin-top: 1em">origin:ORIGIN</p>

<p style="margin-left:17%;">Match the connection by origin,
stored in the org.freedesktop.NetworkManager.origin tag of
the user setting. For example, use
&quot;except:origin:nm-initrd-generator&quot; to forbid
activation of connections created by the initrd
generator.</p>


<p style="margin-left:11%; margin-top: 1em">except:SPEC</p>

<p style="margin-left:17%;">Negative match of a connection.
A negative match has higher priority then the positive
matches above.</p>

<p style="margin-left:17%; margin-top: 1em">If there is a
list consisting only of negative matches, the behavior is
the same as if there is also match-all. That means, if none
of all the negative matches is satisfied, the overall result
is still a positive match.</p>


<p style="margin-left:11%; margin-top: 1em">SPEC[,;]SPEC</p>

<p style="margin-left:17%;">Multiple specs can be
concatenated with commas or semicolons. The order does not
matter as matches are either inclusive or negative
(except:), with negative matches having higher priority.</p>

<p style="margin-left:17%; margin-top: 1em">Backslash is
supported to escape the separators ';' and ',', and to
express special characters such as newline ('\n'), tabulator
('\t'), whitespace ('\s') and backslash ('\\'). Whitespace
is not a separator but will be trimmed between two specs
(unless escaped as '\s').</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>NetworkManager</b>(8),
<b>nmcli</b>(1), <b>nmcli-examples</b>(7),
<b>nm-online</b>(1), <b>nm-settings</b>(5),
<b>nm-applet</b>(1), <b>nm-connection-editor</b>(1)</p>
<hr>
</body>
</html>
