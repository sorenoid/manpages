<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sat Nov 26 20:39:18 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GROFF_TMAC</title>

</head>
<body>

<h1 align="center">GROFF_TMAC</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GROFF MACRO PACKAGES">GROFF MACRO PACKAGES</a><br>
<a href="#NAMING">NAMING</a><br>
<a href="#INCLUSION">INCLUSION</a><br>
<a href="#WRITING MACROS">WRITING MACROS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">groff_tmac -
macro files in the roff typesetting system</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>roff</b>(7) type-setting system provides a set of macro
packages suitable for special kinds of documents. Each macro
package stores its macros and definitions in a file called
the package&rsquo;s <b>tmac file</b>. The name is deduced
from
&rsquo;<b>T</b><i>roff</i><b>MAC</b><i>ros</i>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The tmac files
are normal roff source documents, except that they usually
contain only definitions and setup commands, but no text.
All tmac files are kept in a single or a small number of
directories, the <b>tmac</b> directories.</p>

<h2>GROFF MACRO PACKAGES
<a name="GROFF MACRO PACKAGES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>groff</i>
provides all classical macro packages, some more full
packages, and some secondary packages for special purposes.
Note that it is not possible to use multiple primary macro
packages at the same time; saying e.g.</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff -m man -m ms foo</p>

<p style="margin-left:11%; margin-top: 1em">or</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff -m man foo -m ms bar</p>

<p style="margin-left:11%; margin-top: 1em">fails.
Exception to this is the use of man pages written with
either the <b>mdoc</b> or the <b>man</b> macro package. See
below the description of the <i>andoc.tmac</i> file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Man&nbsp;Pages</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>man</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is the classical macro package for Unix manual
pages (man&nbsp;pages); it is quite handy and easy to use;
see <b>groff_man</b>(7).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>doc</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>mdoc</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>An alternative macro package for man&nbsp;pages mainly
used in BSD systems; it provides many new features, but it
is not the standard for man&nbsp;pages; see
<b>groff_mdoc</b>(7).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>andoc</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>mandoc</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Use this file in case you don&rsquo;t know whether the
<b>man</b> macros or the <b>mdoc</b> package should be used.
Multiple man pages (in either format) can be handled.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Full
Packages</b> <br>
The packages in this section provide a complete set of
macros for writing documents of any kind, up to whole books.
They are similar in functionality; it is a matter of taste
which one to use.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><i>me</i></p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">The classical <i>me</i> macro
package; see <b>groff_me</b>(7).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>mm</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>The semi-classical <i>mm</i> macro package; see
<b>groff_mm</b>(7).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>mom</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>The new <i>mom</i> macro package, only available in
groff. As this is not based on other packages, it can be
freely designed. So it is expected to become quite a nice,
modern macro package. See <b>groff_mom</b>(7).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>ms</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>The classical <i>ms</i> macro package; see
<b>groff_ms</b>(7).</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Language-specific
Packages</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><i>cs</i></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">This file adds support for Czech
localization, including the main macro packages (me, mom,
mm, and ms).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that
<i>cs.tmac</i> sets the input encoding to latin-2.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><i>de</i></p></td>
<td width="7%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>den</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>German localization support, including the main macro
packages (me, mom, mm, and ms).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em"><i>de.tmac</i>
selects hyphenation patterns for traditional orthography,
and <i>den.tmac</i> does the same for the new orthography
(&rsquo;Rechtschreibreform&rsquo;). It should be used as the
last macro package on the command line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><i>fr</i></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">This file adds support for
French localization, including the main macro packages (me,
mom, mm, and ms). Example:</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><i>sh#</i>
groff -ms -mfr foo.ms &gt; foo.ps</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<i>fr.tmac</i> sets the input encoding to latin-9 to get
proper support of the &rsquo;oe&rsquo; ligature.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><i>sv</i></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Swedish localization support,
including the me, mom, and ms macro packages. Note that
Swedish for the mm macros is handled separately; see
<b>groff_mmse</b>(7) (only in Swedish locales). It should be
used as the last macro package on the command line.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Input
Encodings</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><i>latin1</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>latin2</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>latin5</i></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>latin9</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Various input encodings supported directly by groff.
Normally, this macro is loaded at the very beginning of a
document or specified as the first macro argument on the
command line. <b>roff</b> loads latin1 by default at
start-up. Note that these macro packages don&rsquo;t work on
EBCDIC hosts.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>cp1047</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Encoding support for EBCDIC. On those platforms it is
loaded automatically at start-up. Due to different character
ranges used in <b>roff</b> it doesn&rsquo;t work on
architectures which are based on ASCII.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note that it
can happen that some input encoding characters are not
available for a particular output device. For example,
saying</p>

<p style="margin-left:11%; margin-top: 1em">groff -Tlatin1
-mlatin9 ...</p>

<p style="margin-left:11%; margin-top: 1em">fails if you
use the Euro character in the input. Usually, this
limitation is present only for devices which have a limited
set of output glyphs (<b>-Tascii</b>, <b>-Tlatin1</b>); for
other devices it is usually sufficient to install proper
fonts which contain the necessary glyphs.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Special
Packages</b> <br>
The macro packages in this section are not intended for
stand-alone usage, but can be used to add special
functionality to any other macro package or to plain
groff.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><i>62bit</i></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">Provides macros for addition,
multiplication, and division of 62-bit integers (allowing
safe multiplication of 31-bit integers, for example).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><i>ec</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>Switch to the EC and TC font families. To be used with
<b>grodvi</b>(1) &ndash; this man page also gives more
details of how to use it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><i>hdtbl</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>The Heidelberger table macros, contributed by Joachim
Walsdorff, allow the generation of tables through a syntax
similar to the HTML table model. Note that <i>hdtbl</i> is a
macro package, not a preprocessor like <b>tbl</b>(1).
<i>hdtbl</i> works only with the <b>-Tps</b> and
<b>-Tpdf</b> output devices. See
<b>groff_hdtbl</b>(7)<b>.</b></p> </td></tr>
</table>

<p style="margin-left:11%;"><i>papersize</i></p>

<p style="margin-left:22%;">This macro file is already
loaded at start-up by <b>troff</b> so it isn&rsquo;t
necessary to call it explicitly. It provides an interface to
set the paper size on the command line with the option
<b>-dpaper=</b><i>size</i>. Possible values for <i>size</i>
are the same as the predefined <b>papersize</b> values in
the DESC file (only lowercase; see <b>groff_font</b>(5) for
more) except <b>a7</b>&ndash;<b>d7</b>. An appended <b>l</b>
(ell) character denotes landscape orientation. Examples:
<b>a4</b>, <b>c3l</b>, <b>letterl</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Most output
drivers need additional command-line switches <b>-p</b> and
<b>-l</b> to override the default paper length and
orientation as set in the driver-specific DESC file. For
example, use the following for PS output on A4 paper in
landscape orientation:</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff -Tps -dpaper=a4l -P-pa4 -P-l -ms foo.ms &gt;
foo.ps</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>pdfpic</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>A single macro is provided in this file, <b>PSPIC</b>,
to include a PDF graphic in a document, i.e., under the
output device <b>-Tpdf</b>. For all other devices,
<i>pspic</i> is used. So <i>pdfpic</i> is an extension of
<i>pspic</i>. By that you can now even replace all
<b>PSPIC</b> by <b>PDFPIC</b>, nothing gets lost by that.
The options of <b>PDFPIC</b> are identical to the
<b>PSDIF</b> options.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>pic</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>This file provides proper definitions for the macros
<b>PS</b> and <b>PE</b>, needed for the <b>pic</b>(1)
preprocessor. They center each picture. Use it only if your
macro package doesn&rsquo;t provide proper definitions for
those two macros (actually, most of them already do).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>pspic</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>A single macro is provided in this file, <b>PSPIC</b>,
to include a PostScript graphic in a document. The following
output devices support inclusion of PS images: <b>-Tps</b>,
<b>-Tdvi</b>, <b>-Thtml</b>, and <b>-Txhtml</b>; for all
other devices the image is replaced with a hollow rectangle
of the same size. This macro file is already loaded at
start-up by <b>troff</b> so it isn&rsquo;t necessary to call
it explicitly.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Syntax:</p>

<p style="margin-left:32%; margin-top: 1em"><b>.PSPIC</b>
[<b>-L</b>|<b>-R</b>|<b>-C</b>|<b>-I&nbsp;</b><i>n</i>]
<i>file</i> [<i>width</i> [<i>height</i>]]</p>

<p style="margin-left:22%; margin-top: 1em"><i>file</i> is
the name of the PostScript file; <i>width</i> and
<i>height</i> give the desired width and height of the
image. If neither a <i>width</i> nor a <i>height</i>
argument is specified, the image&rsquo;s natural width (as
given in the file&rsquo;s bounding box) or the current line
length is used as the width, whatever is smaller. The
<i>width</i> and <i>height</i> arguments may have scaling
indicators attached; the default scaling indicator
is&nbsp;<b>i</b>. This macro scales the graphic uniformly in
the x and y&nbsp;directions so that it is no more than
<i>width</i> wide and <i>height</i> high. Option <b>-C</b>
centers the graphic horizontally, which is the default. The
<b>-L</b> and <b>-R</b> options cause the graphic to be
left-aligned and right-aligned, respectively. The <b>-I</b>
option causes the graphic to be indented by&nbsp;<i>n</i>
(default scaling indicator is&nbsp;<b>m</b>).</p>

<p style="margin-left:22%; margin-top: 1em">For use of
<b>.PSPIC</b> within a diversion it is recommended to extend
it with the following code, assuring that the
diversion&rsquo;s width completely covers the image&rsquo;s
width.</p>

<p style="margin-left:32%; margin-top: 1em">.am PSPIC <br>
.&nbsp;&nbsp;vpt 0 <br>
\h&rsquo;(\\n[ps-offset]u + \\n[ps-deswid]u)&rsquo; <br>
.&nbsp;&nbsp;sp -1 <br>
.&nbsp;&nbsp;vpt 1 <br>
..</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><i>ptx</i></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">A single macro is provided in
this file, <b>xx</b>, for formatting permuted index entries
as produced by the GNU <b>ptx</b>(1) program. In case you
need a different formatting, copy the macro into your
document and adapt it to your needs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><i>trace</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>Use this for tracing macro calls. It is only useful for
debugging. See <b>groff_trace</b>(7)<b>.</b></p></td></tr>
</table>

<p style="margin-left:11%;"><i>tty-char</i></p>

<p style="margin-left:22%;">Overrides the definition of
standard troff characters and some groff characters for TTY
devices. The optical appearance is intentionally inferior
compared to that of normal TTY formatting to allow
processing with critical equipment.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>www</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>Additions of elements known from the HTML format, as
used in the internet (World Wide Web) pages; this includes
URL links and mail addresses; see <b>groff_www</b>(7).</p></td></tr>
</table>

<h2>NAMING
<a name="NAMING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Classical roff
systems were designed before the conventions of the modern C
<b>getopt</b>(3) call evolved, and used a naming scheme for
macro packages that looks odd to modern eyes. Macro packages
were always included with the option <b>-m</b>; when this
option was directly followed by its argument without an
intervening space, this looked like a long option preceded
by a single minus &mdash; a sensation in the computer stone
age. To make this invocation form work, classical troff
macro packages used names that started with the letter
&rsquo;m&rsquo;, which was omitted in the naming of the
macro file.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the macro package for the man pages was called <i>man</i>,
while its macro file <i>tmac.an</i>. So it could be
activated by the argument <i>an</i> to option <b>-m</b>, or
<b>-man</b> for short.</p>

<p style="margin-left:11%; margin-top: 1em">For similar
reasons, macro packages that did not start with an
&rsquo;m&rsquo; had a leading &rsquo;m&rsquo; added in the
documentation and in speech; for example, the package
corresponding to <i>tmac.doc</i> was called <i>mdoc</i> in
the documentation, although a more suitable name would be
<i>doc</i>. For, when omitting the space between the option
and its argument, the command-line option for activating
this package reads <b>-mdoc</b>.</p>

<p style="margin-left:11%; margin-top: 1em">To cope with
all situations, actual versions of <b>groff</b>(1) are smart
about both naming schemes by providing two macro files for
the inflicted macro packages; one with a leading
&rsquo;m&rsquo; the other one without it. So in
<i>groff</i>, the <i>man</i> macro package may be specified
as one of the following four methods:</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff&nbsp;-m&nbsp;man <i><br>
sh#</i> groff&nbsp;-man <i><br>
sh#</i> groff&nbsp;-mman <i><br>
sh#</i> groff&nbsp;-m&nbsp;an</p>

<p style="margin-left:11%; margin-top: 1em">Recent packages
that do not start with &rsquo;m&rsquo; do not use an
additional &rsquo;m&rsquo; in the documentation. For
example, the <i>www</i> macro package may be specified only
as one of the two methods:</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff&nbsp;-m&nbsp;www <i><br>
sh#</i> groff&nbsp;-mwww</p>

<p style="margin-left:11%; margin-top: 1em">Obviously,
variants like <i>-mmwww</i> would not make much sense.</p>

<p style="margin-left:11%; margin-top: 1em">A second
strange feature of classical troff was to name macro files
in the form <i>tmac.</i>name. In modern operating systems,
the type of a file is specified as a postfix, the file name
extension. Again, groff copes with this situation by
searching both <i>anything</i><b>.tmac</b> and
<b>tmac.</b><i>anything</i> if only <i>anything</i> is
specified.</p>

<p style="margin-left:11%; margin-top: 1em">The easiest way
to find out which macro packages are available on a system
is to check the man&nbsp;page <b>groff</b>(1), or the
contents of the <i>tmac</i> directories.</p>

<p style="margin-left:11%; margin-top: 1em">In
<i>groff</i>, most macro packages are described in&nbsp;man
pages called <b>groff_</b><i>name</i>(7), with a leading
&rsquo;m&rsquo; for the classical packages.</p>

<h2>INCLUSION
<a name="INCLUSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are
several ways to use a macro package in a document. The
classical way is to specify the troff/groff option <b>-m</b>
<i>name</i> at run-time; this makes the contents of the
macro package <i>name</i> available. In groff, the file
name<i>.tmac</i> is searched within the tmac path; if not
found, <i>tmac.</i>name is searched for instead.</p>

<p style="margin-left:11%; margin-top: 1em">Alternatively,
it is also possible to include a macro file by adding the
request <b>.so</b> <i>filename</i> into the document; the
argument must be the full file name of an existing file,
possibly with the directory where it is kept. In groff, this
was improved by the similar request <b>.mso</b>
<i>package</i>, which added searching in the tmac path, just
like option <b>-m</b> does.</p>

<p style="margin-left:11%; margin-top: 1em">Note that in
order to resolve the <b>.so</b> and <b>.mso</b> requests,
the roff preprocessor <b>soelim</b>(1) must be called if the
files to be included need preprocessing. This can be done
either directly by a pipeline on the command line or by
using the troff/groff option <b>-s</b>. <i>man</i> calls
soelim automatically.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
suppose a macro file is stored as</p>


<p style="margin-left:22%; margin-top: 1em"><i>/usr/share/groff/1.22.4/tmac/macros.tmac</i></p>

<p style="margin-left:11%; margin-top: 1em">and is used in
some document called <i>docu.roff</i>.</p>

<p style="margin-left:11%; margin-top: 1em">At run-time,
the formatter call for this is</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff -m macros docu.roff</p>

<p style="margin-left:11%; margin-top: 1em">To include the
macro file directly in the document either</p>

<p style="margin-left:22%; margin-top: 1em">.mso
macros.tmac</p>

<p style="margin-left:11%; margin-top: 1em">is used or</p>

<p style="margin-left:22%; margin-top: 1em">.so
/usr/share/groff/1.22.4/tmac/macros.tmac</p>

<p style="margin-left:11%; margin-top: 1em">In both cases,
the formatter should be called with option <b>-s</b> to
invoke <b>soelim</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><i>sh#</i>
groff -s docu.roff</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
write your own groff macro file, call it
whatever<i>.tmac</i> and put it in a directory in the tmac
path; see section &ldquo;Files&rdquo; below. Then documents
can include it with the <b>.mso</b> request or the option
<b>-m</b>.</p>

<h2>WRITING MACROS
<a name="WRITING MACROS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A
<b>roff</b>(7) document is a text file that is enriched by
predefined formatting constructs, such as requests, escape
sequences, strings, numeric registers, and macros from a
macro package. These elements are described in
<b>roff</b>(7).</p>

<p style="margin-left:11%; margin-top: 1em">To give a
document a personal style, it is most useful to extend the
existing elements by defining some macros for repeating
tasks; the best place for this is near the beginning of the
document or in a separate file.</p>

<p style="margin-left:11%; margin-top: 1em">Macros without
arguments are just like strings. But the full power of
macros reveals when arguments are passed with a macro call.
Within the macro definition, the arguments are available as
the escape sequences <b>\$1</b>, ..., <b>\$9</b>,
<b>\$[</b>...<b>]</b>, <b>\$*</b>, and <b>\$@</b>, the name
under which the macro was called is in <b>\$0</b>, and the
number of arguments is in register <b>\n[.$]</b>; see
<b>groff</b>(7).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Copy-in
Mode</b> <br>
The phase when groff reads a macro is called <i>copy-in
mode</i> or <i>copy mode</i> in roff-talk. This is
comparable to the C&nbsp;preprocessing phase during the
development of a program written in the C&nbsp;language.</p>

<p style="margin-left:11%; margin-top: 1em">In this phase,
groff interprets all backslashes; that means that all escape
sequences in the macro body are interpreted and replaced by
their value. For constant expressions, this is wanted, but
strings and registers that might change between calls of the
macro must be protected from being evaluated. This is most
easily done by doubling the backslash that introduces the
escape sequence. This doubling is most important for the
positional parameters. For example, to print information on
the arguments that were passed to the macro to the terminal,
define a macro named &rsquo;.print_args&rsquo;, say.</p>

<p style="margin-left:22%; margin-top: 1em">.ds midpart was
called with <br>
.de print_args <br>

.&nbsp;&nbsp;tm&nbsp;\f[I]\\$0\f[]&nbsp;\*[midpart]&nbsp;\\n[.$]&nbsp;arguments:
<br>
.&nbsp;&nbsp;tm&nbsp;\\$* <br>
..</p>

<p style="margin-left:11%; margin-top: 1em">When calling
this macro by</p>

<p style="margin-left:22%; margin-top: 1em">.print_args
arg1 arg2</p>

<p style="margin-left:11%; margin-top: 1em">the following
text is printed to the terminal:</p>


<p style="margin-left:22%; margin-top: 1em"><i>print_args</i>
was called with the following 2 arguments: <br>
arg1 arg2</p>

<p style="margin-left:11%; margin-top: 1em">Let&rsquo;s
analyze each backslash in the macro definition. As the
positional parameters and the number of arguments change
with each call of the macro their leading backslash must be
doubled, which results in \\<i>$*</i> and \\<i>[.$]</i>. The
same applies to the macro name because it could be called
with an alias name, so \\<i>$0</i>.</p>

<p style="margin-left:11%; margin-top: 1em">On the other
hand, <i>midpart</i> is a constant string, it does not
change, so no doubling for \<i>*[midpart]</i>. The \<i>f</i>
escape sequences are predefined groff elements for setting
the font within the text. Of course, this behavior does not
change, so no doubling with \<i>f[I]</i> and
\<i>f[]</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Draft
Mode</b> <br>
Writing groff macros is easy when the escaping mechanism is
temporarily disabled. In groff, this is done by enclosing
the macro definition(s) into a pair of <b>.eo</b> and
<b>.ec</b> requests. Then the body in the macro definition
is just like a normal part of the document &mdash; text
enhanced by calls of requests, macros, strings, registers,
etc. For example, the code above can be written in a simpler
way by</p>

<p style="margin-left:22%; margin-top: 1em">.eo <br>
.ds midpart was called with <br>
.de print_args <br>

.&nbsp;&nbsp;tm&nbsp;\f[I]\$0\f[]&nbsp;\*[midpart]&nbsp;\n[.$]&nbsp;arguments:
<br>
.&nbsp;&nbsp;tm&nbsp;\$* <br>
.. <br>
.ec</p>

<p style="margin-left:11%; margin-top: 1em">Unfortunately,
draft mode cannot be used universally. Although it is good
enough for defining normal macros, draft mode fails with
advanced applications, such as indirectly defined strings,
registers, etc. An optimal way is to define and test all
macros in draft mode and then do the backslash doubling as a
final step; do not forget to remove the <i>.eo</i>
request.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tips for
Macro Definitions</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Start every line with a dot, for
example, by using the groff request <b>.nop</b> for text
lines, or write your own macro that handles also text lines
with a leading dot.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">.de Text <br>
.&nbsp;&nbsp;if (\\n[.$] == 0)&nbsp;\ <br>
.&nbsp;&nbsp;&nbsp;&nbsp;return <br>
.&nbsp;&nbsp;nop&nbsp;\)\\$*\) <br>
..</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Write a comment macro that works
both for copy-in and draft mode; for as escaping is off in
draft mode, trouble might occur when normal comments are
used. For example, the following macro just ignores its
arguments, so it acts like a comment line:</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">.de&nbsp;c <br>
.. <br>

.c&nbsp;This&nbsp;is&nbsp;like&nbsp;a&nbsp;comment&nbsp;line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">In long macro definitions, make
ample use of comment lines or almost-empty lines (this is,
lines which have a leading dot and nothing else) for a
better structuring.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>To increase readability, use groff&rsquo;s indentation
facility for requests and macro calls (arbitrary whitespace
after the leading dot).</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Diversions</b>
<br>
Diversions can be used to implement quite advanced
programming constructs. They are comparable to pointers to
large data structures in the C&nbsp;programming language,
but their usage is quite different.</p>

<p style="margin-left:11%; margin-top: 1em">In their
simplest form, diversions are multi-line strings, but they
get their power when diversions are used dynamically within
macros. The (formatted) information stored in a diversion
can be retrieved by calling the diversion just like a
macro.</p>

<p style="margin-left:11%; margin-top: 1em">Most of the
problems arising with diversions can be avoided if you
remain aware of the fact that diversions always store
complete lines. If diversions are used when the line buffer
has not been flushed, strange results are produced; not
knowing this, many people get desperate about diversions. To
ensure that a diversion works, line breaks should be added
at the right places. To be on the secure side, enclose
everything that has to do with diversions into a pair of
line breaks; for example, by explicitly using <b>.br</b>
requests. This rule should be applied to diversion
definition, both inside and outside, and to all calls of
diversions. This is a bit of overkill, but it works
nicely.</p>

<p style="margin-left:11%; margin-top: 1em">[If you really
need diversions which should ignore the current partial
line, use environments to save the current partial line
and/or use the <b>.box</b> request.]</p>

<p style="margin-left:11%; margin-top: 1em">The most
powerful feature using diversions is to start a diversion
within a macro definition and end it within another macro.
Then everything between each call of this macro pair is
stored within the diversion and can be manipulated from
within the macros.</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All macro
package files must be named name<i>.tmac</i> to fully use
the tmac mechanism. <i>tmac.</i>name as with classical
packages is possible as well, but deprecated.</p>

<p style="margin-left:11%; margin-top: 1em">The macro files
are kept in the <i>tmac directories</i>; a colon separated
list of these constitutes the <i>tmac path</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The search
sequence for macro files is (in that order):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">the directories specified with
troff/groff&rsquo;s <b>-M</b> command-line option</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>the directories given in the <i>GROFF_TMAC_PATH</i>
environment variable</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>the current directory (only if in unsafe mode, which is
enabled by the <b>-U</b> command-line switch)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>the home directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>a platform-specific directory, being</p></td></tr>
</table>


<p style="margin-left:32%; margin-top: 1em"><i>/usr/lib/groff/site-tmac</i></p>

<p style="margin-left:22%; margin-top: 1em">in this
installation</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">a site-specific
(platform-independent) directory, being</p></td></tr>
</table>


<p style="margin-left:32%; margin-top: 1em"><i>/usr/share/groff/site-tmac</i></p>

<p style="margin-left:22%; margin-top: 1em">in this
installation</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="46%">


<p style="margin-top: 1em">the main tmac directory,
being</p> </td>
<td width="32%">
</td></tr>
</table>


<p style="margin-left:32%; margin-top: 1em"><i>/usr/share/groff/1.22.4/tmac</i></p>

<p style="margin-left:22%; margin-top: 1em">in this
installation</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>GROFF_TMAC_PATH</i></p>

<p style="margin-left:22%;">A colon separated list of
additional tmac directories in which to search for macro
files. See the previous section for a detailed
description.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
was written by
<a href="mailto:groff-bernd.warken-72@web.de">Bernd
Warken</a> and <a href="mailto:wl@gnu.org">Werner
Lemberg</a>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>Groff: The
GNU Implementation of troff</i>, by Trent A. Fisher and
Werner Lemberg, is the primary <i>groff</i> manual. You can
browse it interactively with &ldquo;info groff&rdquo;.
<b><br>
groff</b>(1)</p>

<p style="margin-left:22%;">an overview of the groff
system.</p>

<p style="margin-left:11%;"><b>groff_man</b>(7), <b><br>
groff_mdoc</b>(7), <b><br>
groff_me</b>(7), <b><br>
groff_mm</b>(7), <b><br>
groff_mom</b>(7), <b><br>
groff_ms</b>(7), <b><br>
groff_trace</b>(7), <b><br>
groff_www</b>(7).</p>

<p style="margin-left:22%;">the groff tmac macro
packages.</p>

<p style="margin-left:11%;"><b>groff</b>(7)</p>

<p style="margin-left:22%;">the groff language.</p>

<p style="margin-left:11%; margin-top: 1em">The Filesystem
Hierarchy Standard is available at the
<a href="http://www.pathname.com/fhs/">FHS web site</a>.</p>
<hr>
</body>
</html>
