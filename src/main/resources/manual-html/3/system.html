<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Sat Nov 26 20:38:25 2022 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SYSTEM</title>

</head>
<body>

<h1 align="center">SYSTEM</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#ATTRIBUTES">ATTRIBUTES</a><br>
<a href="#CONFORMING TO">CONFORMING TO</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COLOPHON">COLOPHON</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">system -
execute a shell command</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;stdlib.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
system(const char *</b><i>command</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>system</b>() library function uses <a href="https://man.page/2/fork">fork(2)</a> to
create a child process that executes the shell command
specified in <i>command</i> using <a href="https://man.page/3/execl">execl(3)</a> as
follows:</p>


<p style="margin-left:17%; margin-top: 1em">execl(&quot;/bin/sh&quot;,
&quot;sh&quot;, &quot;-c&quot;, command, (char *) NULL);</p>


<p style="margin-left:11%; margin-top: 1em"><b>system</b>()
returns after the command has been completed.</p>

<p style="margin-left:11%; margin-top: 1em">During
execution of the command, <b>SIGCHLD</b> will be blocked,
and <b>SIGINT</b> and <b>SIGQUIT</b> will be ignored, in the
process that calls <b>system</b>(). (These signals will be
handled according to their defaults inside the child process
that executes <i>command</i>.)</p>

<p style="margin-left:11%; margin-top: 1em">If
<i>command</i> is NULL, then <b>system</b>() returns a
status indicating whether a shell is available on the
system.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The return
value of <b>system</b>() is one of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="3%"></td>
<td width="85%">


<p>If <i>command</i> is NULL, then a nonzero value if a
shell is available, or 0 if no shell is available.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="3%"></td>
<td width="85%">


<p>If a child process could not be created, or its status
could not be retrieved, the return value is -1 and
<i>errno</i> is set to indicate the error.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="3%"></td>
<td width="85%">


<p>If a shell could not be executed in the child process,
then the return value is as though the child shell
terminated by calling <a href="https://man.page/2/_exit">_exit(2)</a> with the status
127.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="3%"></td>
<td width="85%">


<p>If all system calls succeed, then the return value is
the termination status of the child shell used to execute
<i>command</i>. (The termination status of a shell is the
termination status of the last command it executes.)</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In the last two
cases, the return value is a &quot;wait status&quot; that
can be examined using the macros described in
<a href="https://man.page/2/waitpid">waitpid(2)</a>. (i.e., <b>WIFEXITED</b>(),
<b>WEXITSTATUS</b>(), and so on).</p>


<p style="margin-left:11%; margin-top: 1em"><b>system</b>()
does not affect the wait status of any other children.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>system</b>()
can fail with any of the same errors as <a href="https://man.page/2/fork">fork(2)</a>.</p>

<h2>ATTRIBUTES
<a name="ATTRIBUTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For an
explanation of the terms used in this section, see
<a href="https://man.page/7/attributes">attributes(7)</a>.</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-3415781.png" alt="Image grohtml-3415781.png"></p>

<h2>CONFORMING TO
<a name="CONFORMING TO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">POSIX.1-2001,
POSIX.1-2008, C89, C99.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>system</b>()
provides simplicity and convenience: it handles all of the
details of calling <a href="https://man.page/2/fork">fork(2)</a>, <a href="https://man.page/3/execl">execl(3)</a>, and
<a href="https://man.page/2/waitpid">waitpid(2)</a>, as well as the necessary manipulations of
signals; in addition, the shell performs the usual
substitutions and I/O redirections for <i>command</i>. The
main cost of <b>system</b>() is inefficiency: additional
system calls are required to create the process that runs
the shell and to execute the shell.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>_XOPEN_SOURCE</b> feature test macro is defined (before
including <i>any</i> header files), then the macros
described in <a href="https://man.page/2/waitpid">waitpid(2)</a> (<b>WEXITSTATUS</b>(), etc.)
are made available when including
<i>&lt;stdlib.h&gt;</i>.</p>

<p style="margin-left:11%; margin-top: 1em">As mentioned,
<b>system</b>() ignores <b>SIGINT</b> and <b>SIGQUIT</b>.
This may make programs that call it from a loop
uninterruptible, unless they take care themselves to check
the exit status of the child. For example:</p>

<p style="margin-left:17%; margin-top: 1em">while
(something) { <br>
int ret = system(&quot;foo&quot;);</p>

<p style="margin-left:17%; margin-top: 1em">if
(WIFSIGNALED(ret) &amp;&amp; <br>
(WTERMSIG(ret) == SIGINT || WTERMSIG(ret) == SIGQUIT)) <br>
break; <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">According to
POSIX.1, it is unspecified whether handlers registered using
<a href="https://man.page/3/pthread_atfork">pthread_atfork(3)</a> are called during the execution of
<b>system</b>(). In the glibc implementation, such handlers
are not called.</p>

<p style="margin-left:11%; margin-top: 1em">In versions of
glibc before 2.1.3, the check for the availability of
<i>/bin/sh</i> was not actually performed if <i>command</i>
was NULL; instead it was always assumed to be available, and
<b>system</b>() always returned 1 in this case. Since glibc
2.1.3, this check is performed because, even though
POSIX.1-2001 requires a conforming implementation to provide
a shell, that shell may not be available or executable if
the calling program has previously called <a href="https://man.page/2/chroot">chroot(2)</a>
(which is not specified by POSIX.1-2001).</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
for the shell command to terminate with a status of 127,
which yields a <b>system</b>() return value that is
indistinguishable from the case where a shell could not be
executed in the child process.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Caveats</b>
<br>
Do not use <b>system</b>() from a privileged program (a
set-user-ID or set-group-ID program, or a program with
capabilities) because strange values for some environment
variables might be used to subvert system integrity. For
example, <b>PATH</b> could be manipulated so that an
arbitrary program is executed with privilege. Use the
<a href="https://man.page/3/exec">exec(3)</a> family of functions instead, but not
<a href="https://man.page/3/execlp">execlp(3)</a> or <a href="https://man.page/3/execvp">execvp(3)</a> (which also use the
<b>PATH</b> environment variable to search for an
executable).</p>


<p style="margin-left:11%; margin-top: 1em"><b>system</b>()
will not, in fact, work properly from programs with
set-user-ID or set-group-ID privileges on systems on which
<i>/bin/sh</i> is bash version 2: as a security measure,
bash 2 drops privileges on startup. (Debian uses a different
shell, <a href="https://man.page/1/dash">dash(1)</a>, which does not do this when invoked
as <b>sh</b>.)</p>

<p style="margin-left:11%; margin-top: 1em">Any user input
that is employed as part of <i>command</i> should be
<i>carefully</i> sanitized, to ensure that unexpected shell
commands or command options are not executed. Such risks are
especially grave when using <b>system</b>() from a
privileged program.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><a href="https://man.page/1/sh">sh(1)</a>,
<a href="https://man.page/2/execve">execve(2)</a>, <a href="https://man.page/2/fork">fork(2)</a>, <a href="https://man.page/2/sigaction">sigaction(2)</a>,
<a href="https://man.page/2/sigprocmask">sigprocmask(2)</a>, <a href="https://man.page/2/wait">wait(2)</a>, <a href="https://man.page/3/exec">exec(3)</a>,
<a href="https://man.page/7/signal">signal(7)</a></p>

<h2>COLOPHON
<a name="COLOPHON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This page is
part of release 5.10 of the Linux <i>man-pages</i> project.
A description of the project, information about reporting
bugs, and the latest version of this page, can be found at
https://www.kernel.org/doc/man-pages/.</p>
<hr>
</body>
</html>
